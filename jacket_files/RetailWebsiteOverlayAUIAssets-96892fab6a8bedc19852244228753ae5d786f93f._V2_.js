(function(d,f){d.execute(function(){d.when("A","RWDynamicModalFactory","ready").execute("RWDynamicModalBootstrapper",function(b,m){var i=b.state("rw-dynamic-modal"),a=b.state("rw-dynamic-modal-bootstrap"),c=b.$("#rwol-display-called"),h,e,g=function(){f.sessionStorage&&(sessionStorage.setItem("rwolLastPage",f.location.href),sessionStorage.setItem("rwolLastPageSet",Date.now()))},j=function(){var a=!1;return function(){a||(a=!0,b.ajax("/gp/overlay/update.html",{method:"post",params:{placementId:h,priority:e}}))}}(),
k=function(a){a.pageContent&&b.$("body").append(a.pageContent);a.data&&a.data.tracker?d.when(a.data.tracker).register("RWDynamicModal",function(b){return m(a,b)}):d.register("RWDynamicModal",function(){return m(a)})},l=function(a){if(a&&/\S/.test(a))h=a.placementId,e=a.priority,b.$.isPlainObject(a.content)?k(a):a.content&&(b.$("body").append(a.content),b.state.parse(),(a.displayLogic||"").match("client")||j())};b.on("rw:overlay:displayed",function(){j()});if(i)return g(),k(i);else if(a){if(f.sessionStorage&&
!document.referrer&&(i=sessionStorage.getItem("rwolLastPageSet"))&&parseInt(i,10)>Date.now()-3E4)a.referrer=sessionStorage.getItem("rwolLastPage");a.referrer=a.referrer||document.referrer;if(a.referrer&&a.referrer.match(/^https?:\/\/([^\/]+\.)?amazon\.com(\/|$)/i))return g();if(c.length>0){if(c.val()!=="0")return g();c.val(1)}g();if(c=(a.queryString=f.location.search)&&f.location.search.split("?").pop()){c=c.split("&");for(g=0;g<c.length;g++){var i=c[g].split("="),n=f.decodeURIComponent(i[0]);a.hasOwnProperty(n)||
(a[n]=f.decodeURIComponent(i[1]))}}return b.ajax("/gp/overlay/display.html",{method:"post",params:a,success:l})}});d.when("A","jQuery","a-modal-factory").register("RWDynamicModalFactory",function(b,d,f){var a,c,h;return function(e,g){if(e&&!a){var j=d('<span style="display:none;"></span>');d("body").append(j);a=f.create(j,e);c=e.data||{};if(g){if(c.countRef)b.on("a:popover:show:"+e.name,function(){g.track(c.countRef,c)});if(c.disButtonRef)b.on("a:popover:dismiss:"+e.name,function(){g.track(c.disButtonRef,
c);h=!0;b.off("a:popover:dismiss:"+e.name)});if(c.disRef)b.on("a:popover:afterHide:"+e.name,function(){h||g.track(c.disRef,c)});b.declarative("rw-popover-log-close","click",function(b){g.track(b.data.disRef,c);h=!0;a.hide()})}b.on("a:popover:afterShow:"+e.name,function(){b.ajax("/gp/overlay/update.html")});e.autoShow&&a.show();a.attrs("data",c);return a}}})})})(function(){var d=window.AmazonUIPageJS||window.P,f=d._namespace||d.attributeErrors;return f?f("RetailWebsiteOverlayAUIAssets"):d}(),window);