(function(u){u.execute(function(){u.when("A","jQuery","postMetric").register("imageBlockUtils",function(c,a,X){function m(a,j){if(a&&j.volume!=null)a.setVolume(j.volume),j.volume=null}function e(d){var j=k.colorToAsin[d];j&&j.asin&&a.ajax({url:"/gp/product/features/apparel-main-image/videos.html",data:{asin:j.asin,productGroupID:k.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:k.useChromelessVideoPlayer,isUDP:k.isUDP},dataType:"json",timeout:4E3,success:function(a){a&&(n[d]=a,c.trigger("image-block-video-fetch-completed",
d,null,!0))}})}var i={},k,n,b,u,O,N=!1,g=a("#main-image-container"),F=null,l=0,A=!1,G=!1;i.VIDEO_UNSUPPORTED_CLASS_NAME="noflash";i.flashNotInstalled=!1;i.embedAiryForChromelessPlayback=function(d,j,b,e,g){function J(){c.trigger("image-block-select-thumbnail",e.find("img:first"));c.trigger("image-block-first-thumbnail-selected")}return airyInstance=Airy.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:d[0],streamingUrls:j.url,swfUrl:b.swfUrl,foresterMetadataParams:b.foresterMetadataParams,
backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=d.find("video").length>0?"HTML5":"FLASH";X.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){d.parent().css("z-index",8)},videounsupported:function(){i.flashNotInstalled=!0;J();X.postCountMetric("dppc_chromelessVideo:NO_FLASH_ERROR");g.addClass(i.VIDEO_UNSUPPORTED_CLASS_NAME)},error:function(){J();X.postCountMetric("dppc_chromelessVideo:ERROR")},
ended:function(){airyInstance.seek(0)}},cuePoints:[{values:j.durationSeconds-1,type:"position",callback:function(j,b,e){j=e.durationSeconds-e.playheadTimeSeconds;d.css("background-color","white").find(".airy-renderer-container").fadeTo(j*1E3,0.1,function(){d.parent().css({"background-color":"transparent","z-index":-1});J();a(this).show().css("opacity",1)})}}]})};i.embedAiryForChromefulPlayback=function(d,j,b,e){var g=a.extend({},b.foresterMetadataParams);e!=null&&(g.method+="."+e);d=Airy.embed({parentElement:d[0],
streamingUrls:j.url,contentId:j.mediaObjectId,contentMinAge:Number(j.minimumAge||"")||0,contentTitle:j.title,swfUrl:b.swfUrl,foresterMetadataParams:g,backgroundColor:"transparent",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:j.slateUrl,postMediaSlate:j.slateUrl},videoAds:b.videoAds,bindings:{screenchange:function(){k.isAUIPopoverEnabled&&a("#ivvideo_"+l).click()},play:function(){e==="ImmersiveView"?A||(A=!0,X.postCountMetric("dppc_chromefulVideoPlayedIV")):G||(G=!0,X.postCountMetric("dppc_chromefulVideoPlayedPV"))}}});
m(d,b);return d};i.setCurrentVideoSelected=function(a){l=a};i.loadMediaIntoAiryAndSetVolume=function(a,j,b){a&&a.getMediaSourceInfo()!==j.url&&(a.loadMedia({mediaSourceInfo:j.url,contentId:j.mediaObjectId,contentMinAge:Number(j.minimumAge||"")||0,contentTitle:j.title,slateImages:{preloadSlate:j.slateUrl,postMediaSlate:j.slateUrl}}),m(a,b))};i.setLandingColor=function(a){u=a};i.resizeHappened=function(){N=!0};i.getMainBlockHeight=function(){var a=g.get(0),j=0;if(typeof a!=="undefined")N?(j=a.offsetWidth/
k.holderRatio,j=j>k.holderMaxHeight?k.holderMaxHeight:j):j=a.style.height;return j};i.loadImageManually=function(d,j){a(d,j).each(function(){var d=a(this);if(!d.attr("data-a-image-already-loaded")){d.attr("data-a-image-already-loaded",!0);var j=i.loadDynamicImage(d),j=a("<img>").attr("src",j||d.data("a-image-source"));j.attr("data-a-hires",d.data("a-hires"));j.attr("data-old-hires",d.data("old-hires"));j.attr("data-a-manual-replacement",d.data("a-manual-replacement"));j.attr("data-a-dynamic-image",
JSON.stringify(d.data("a-dynamic-image")));var b="";b+=d.attr("class");var e=d.data("a-extra-classes");e&&(b+=" "+e);j.attr("class",b);j.attr("id",d.attr("id"));j.attr("style",d.attr("style"));d.replaceWith(j)}})};i.loadImageAsynchronously=function(a,j){if(!(a===null||a===void 0||typeof a!=="string")){var b=new Image;if(j!==null&&j!==void 0&&typeof j==="function")b.onload=j;b.src=a}};i.loadDynamicImage=function(d){var d=a(d),j=d.data("a-dynamic-image");if(j&&typeof j==="object"){var b=d.data("a-dynamic-image-container");
typeof b==="undefined"&&(b=d.parents(".a-dynamic-image-container"),b.length===0&&(b=d.parent()),d.data("a-dynamic-image-container",b));var e=window.devicePixelRatio?window.devicePixelRatio:1,g=b.width()*e,i=b.height()*e,k=Number.MAX_VALUE,l=Number.MAX_VALUE,c=d.attr("src")||"",Y,O=g/i;a.each(j,function(a,d){var j=parseInt(d[0],10),b=parseInt(d[1],10);j-=i;b-=g;b=O>=1?b:j;Math.abs(b)<l&&b>=0&&(l=Math.abs(b),Y=a);Math.abs(b)<k&&(k=Math.abs(b),c=a)});Y&&(c=Y);return c}};i.getVideos=function(a){if(k.useChildVideos){if(a==
u)a=k.defaultColor;n[a]||(n[a]=[],e(a));return n[a]}return k.videos};i.getBestUrlForAvailableWidth=function(d){var j=0,b;a.each(d,function(a,d){d[0]>j&&(b=a,j=d[0])});return b};i.getMaxWidthOfSlateImages=function(d){var b=0;a.each(d,function(a,d){var e=k.switchDynImgDims?parseInt(d[1],10):parseInt(d[0],10);e>b&&(b=e)});return b};i.getMaxHeightOfSlateImages=function(d){var b=0;a.each(d,function(a,d){var e=k.switchDynImgDims?parseInt(d[0],10):parseInt(d[1],10);e>b&&(b=e)});return b};i.getMaxWidthOfMainImage=
function(a){var b=g.width(),a=i.getMaxWidthOfSlateImages(a);a>0&&(b=Math.min(b,a));return b};i.getMaxHeightOfMainImage=function(a){var b=g.height(),a=i.getMaxHeightOfSlateImages(a);a>0&&(b=Math.min(b,a));return b};i.setMaxImageHeight=function(a){typeof a!=="undefined"&&(F=a)};i.getMaxDimensionsOfMainImage=function(){var a,b=k.mainImageHeightPartitions,e=k.mainImageMaxSizes;if(e&&typeof e!=="undefined"){if(k.burjImageBlock&&F&&typeof F!=="undefined")for(c=0;c<e.length;c++)if(F<e[c][1]){c>0&&(a=e[c-
1]);break}if(typeof a==="undefined"&&b&&typeof b!=="undefined"){for(var g=0,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=0;c<b.length;c++)i>b[c]&&(g=c+1);e.length>=g&&(a=e[g])}}return a};i.getColorFromState=function(b){if(b){var e="",g=DetailPage.StateController.getState().variation_display_labels;a.each(k.visualDimensions,function(a,i){var c=k.gIsNewTwister==1?i:g[i];b[c]&&(e+=" "+b[c])});return e&&e.substring(1)}};i.isBuyableVariation=function(a){if(!a.current_hovered_asin){var b=
a.num_variation_dimensions;return a.num_dimensions_selected!=b&&a.num_dimensions_hovered!=b}return!0};i.showUnavailableExp=function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())};i.hideUnavailableExp=function(){a("#imageBlock .unavailableExp").hide()};i.setImageCaption=function(e,j,g,c,l,J){b&&clearTimeout(b);b=null;l&&(b=setTimeout(function(){i.setImageCaption(e,j,c)},l));l=a("#image-canvas-caption #canvasCaption");if(j!=="image")l.html("");else{var m=
k.staticStrings,n="";J&&k.useIV?n=m.clickToExpand:O[e]&&O[e][g].hiRes&&k.useHoverZoom?n=k.hoverZoomIndicator&&k.useHoverZoomIpad?"<img src='"+k.staticImages.hoverZoomIcon+"'/>&nbsp;"+m.touchToZoom:k.useHoverZoomIpad?m.touchToZoom:k.hoverZoomIndicator?"<img src='"+k.staticImages.hoverZoomIcon+"'/>&nbsp;"+m.rollOverToZoom:k.useClickZoom?m.clickToZoom:m.rollOverToZoom:k.useIV&&(n=m.clickToExpand);l.html(n)}};i.getSlateImage=function(a){return k.useChildVideos&&k.colorToAsin[a].slate[0]};i.init=function(a){i.options=
k=a;O=k.colorImages;u=k.landingColor||k.defaultColor;n={};n[k.defaultColor]=k.videos;return i};typeof JSON!=="object"&&(JSON={});(function(){function a(b){return b<10?"0"+b:b}function b(a){i.lastIndex=0;return i.test(a)?'"'+a.replace(i,function(a){var b=l[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,d){var g,i,l,n,r=c,q,o=d[a];o&&typeof o==="object"&&typeof o.toJSON==="function"&&(o=o.toJSON(a));typeof m==="function"&&(o=m.call(d,
a,o));switch(typeof o){case "string":return b(o);case "number":return isFinite(o)?String(o):"null";case "boolean":case "null":return String(o);case "object":if(!o)return"null";c+=k;q=[];if(Object.prototype.toString.apply(o)==="[object Array]"){n=o.length;for(g=0;g<n;g+=1)q[g]=e(g,o)||"null";l=q.length===0?"[]":c?"[\n"+c+q.join(",\n"+c)+"\n"+r+"]":"["+q.join(",")+"]";c=r;return l}if(m&&typeof m==="object"){n=m.length;for(g=0;g<n;g+=1)typeof m[g]==="string"&&(i=m[g],(l=e(i,o))&&q.push(b(i)+(c?": ":
":")+l))}else for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(l=e(i,o))&&q.push(b(i)+(c?": ":":")+l);l=q.length===0?"{}":c?"{\n"+c+q.join(",\n"+c)+"\n"+r+"}":"{"+q.join(",")+"}";c=r;return l}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=
Boolean.prototype.toJSON=function(){return this.valueOf()};var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,k,l={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,g){var d;k=c="";if(typeof g==="number")for(d=
0;d<g;d+=1)k+=" ";else typeof g==="string"&&(k=g);if((m=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return e("",{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,b){function e(a,d){var g,j,i=a[d];if(i&&typeof i==="object")for(g in i)Object.prototype.hasOwnProperty.call(i,g)&&(j=e(i,g),j!==void 0?i[g]=j:delete i[g]);return b.call(a,d,i)}var d,a=String(a);g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+
a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),typeof b==="function"?e({"":d},""):d;throw new SyntaxError("JSON.parse");}})();return i});u.when("A","jQuery","postMetric").register("imageMagnifier",function(c,a,u){function m(a){var i=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i),a={};if(i)for(var i=
i[1].split("_"),c=0;c<i.length;c++){var m=i[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);m&&(a[m[1]]=Number(m[2]))}return a}a.fn.amazonMagnifier=function(e){function i(){var a;e.useClickZoom?(a=e.offsetInClickZoom,a=[Math.min(1,Math.max(0,G[0]-(j[0]+a))/(j[2]-2*a)),Math.min(1,Math.max(0,G[1]-(j[1]+a))/(j[3]-2*a))]):a=A&&A.updatePosition();if(a&&l.detailSize){var b=[l.detailSize[0]-l.rect.width,l.detailSize[1]-l.rect.height];l.detailImage.get(0).style.left=-(a[0]*b[0])+"px";l.detailImage.get(0).style.top=-(a[1]*
b[1])+"px"}}function c(a){var b=R?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";G=R?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function n(a){R&&a.preventDefault();c(a);e.useClickZoom?a=[j[0],j[1],j[0]+j[2],j[1]+j[3]]:(a=A?A.offset:g.offsetParent().offset(),a=[d[0]+a.left,d[1]+a.top,d[0]+d[2]+a.left,d[1]+d[3]+a.top]);G[0]<a[0]||G[1]<a[1]||G[0]>=a[2]||G[1]>=a[3]?(e.burjImageBlock?z||(z=!0,r=setTimeout(function(){ba(!0)},500)):e.useClickZoom||ba(),q&&(q=!1,clearTimeout(o))):(q||(q=!0,o=setTimeout(function(){u.postCountMetric("dppc_hoverZoomOpened")},
1E3)),e.burjImageBlock&&z&&(z=!1,clearTimeout(r)),i())}function b(){var b=a(e.locationElement).find("select:visible");ha?ia=b.hide():a("select").each(function(){a(this).blur()})}function ba(b){b&&g.suppressMagnifier(!0);if(U&&(a.browser.msie&&a("#main-image-widget .holder.video").show(),ia&&ia.show(),l&&l.hide(),A&&(A.destroy(),A=null),U=!1,R?(g.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
N(),b))g.one("click.magnifier touchstart.magnifier",function(a){O(a,!0)})}function O(m,o){o&&g.suppressMagnifier(!1);if(!U&&!ca){document.body&&a(document.body).trigger("click");e.logMetrics&&(Y==0&&(u.postCountMetric("dppc_hoverTime",new Date-window.ue.t0),Y=1),la[J]||(u.postCountMetric("dppc_hoverMain"),la[J]=1));d=[g.position().left,g.position().top,g.width(),g.height()];a.browser.msie&&a("#main-image-widget .holder.video").hide();if(J){if(a.browser.msie&&!a.isReady){a("#main-image-widget .holder.video").show();
return}b();c(m);l?l.refit().show():l=new ea;e.useClickZoom||(A=A||new da);j=l.getWindowSize();i()}U=!0;R?(g.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",n).bind("touchend.magnifier",ba),a(document).trigger("engaged.magnifier")):(g.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",n));if(o){var W=a("#zoomWindow");if(W.length>0)W.one("click.magnifier touchend.magnifier",function(){ba(!0)})}u.postCountMetric("softlinesHoverZoomOverlay:TotalCount")}}
function N(){e.useHoverZoom&&(R?g.bind("touchstart.magnifier touchmove.magnifier",O):g.bind("mousemove.magnifier",O))}var g=this,F={detailImageUrl:g.attr("data-old-hires"),location:"over",locationElement:g,prelaod:"ready",zIndex:50,offsetInClickZoom:50},e=a.extend(F,e);e.adjustment=[10,0,-10,0];var l=null,A=null,G=null,d=null,j=null,qa={"null":1,"":1,undefined:1},U=!1,ca=!1,J=e.detailImageUrl,ha=a.browser.msie&&parseInt(a.browser.version)<=6,ia,R=e.useHoverZoomIpad||0,Y=0,la={},ma=navigator.userAgent.match(/msie|trident/i),
da=function(){function b(a){var e=Math.round(Math.min(g.width(),l.rect.width/a)),a=Math.round(Math.min(g.height(),l.rect.height/a));k.css({width:e,height:a});i=[e,a]}var j=this,i=[0,0],c=(l.detailSize&&l.detailSize[0]||5E8)/d[2],m=(l.detailSize&&l.detailSize[1]||5E8)/d[3];m>c&&(c=m);a("#magnifierLens").remove();var k=a("<div id='magnifierLens' />").css({backgroundImage:"url("+e.generalImageUrls.zoomLensBackground+")",position:"absolute",cursor:"pointer"});j.updatePosition=function(){var a=[d[2]-i[0],
d[3]-i[1]],b=a[0]<=0?0.5:Math.max(0,Math.min(1,(G[0]-i[0]/2-d[0]-j.offset.left)/a[0])),e=a[1]<=0?0.5:Math.max(0,Math.min(1,(G[1]-i[1]/2-d[1]-j.offset.top)/a[1])),g=d[0]+Math.round(b*a[0]),a=d[1]+Math.round(e*a[1]);k.get(0).style.left=g+"px";k.get(0).style.top=a+"px";return[b,e]};j.destroy=function(){k.remove()};j.offset=g.offsetParent().offset();b(c);j.updatePosition();k.appendTo(g.parent());l.detailImage[0].complete||l.detailImage.load(function(){var a=l.detailImage.width()/d[2];b(a);j.updatePosition()})};
da.preload=function(){g.preload(e.generalImageUrls.lensBackgroundUrl)};var ea=function(){function b(){var d={};if(e.location=="over")if(e.isUDP){var d=e.useClickZoom,j=e.burjImageBlock,i={left:Infinity,top:Infinity,right:-Infinity,bottom:-Infinity},k=a("#leftCol"),m=a("#centerCol"),q=a("#hover-zoom-end");j?(i.top=k.offset().top,i.bottom=k.outerHeight()+i.top,i.right=k.outerWidth()+k.offset().left):(i.top=m.offset().top,i.bottom=m.outerHeight()+i.top,i.right=a("#rightCol").offset().left);i.left=d?
0:k.offset().left+k.outerWidth();if(q&&q.offset().top>i.bottom)i.bottom=q.offset().top;d=i}else a(".productImageGrid").length>0?d=hoverZoomBound():(d.left=0,d.right=0);else e.location=="right"&&(d=g.offset(),d={left:d.left+g.outerWidth(),top:d.top,right:d.left+g.outerWidth()+400,bottom:d.top+400});if(e.minHeightElement)d.bottom=Math.max(d.bottom,d.top+a(e.minHeightElement).outerHeight());d.bottom=Math.min(d.bottom,a(window).scrollTop()+a(window).height());d.left+=l[0];d.top+=l[1];d.right+=l[2];d.bottom+=
l[3];d.width=d.right-d.left;d.height=d.bottom-d.top;if((e.isSoftlinesEnhancedHoverZoom||o)&&window.pageXOffset!==void 0)j=a(window).width(),d.width=j-d.left+window.pageXOffset-18,d.height-=14;n.css({left:d.left,top:d.top,width:d.width,height:d.height});c.rect=d;return c}function j(a){var b=new Image;b.src=a.attr("src");if(b.width>0&&b.height>0)c.detailSize=[b.width,b.height];else if(e.detailImageSize)c.detailSize=e.detailImageSize;else{var a=m(b.src),g=d[2]/d[3];a.SS||a.AA?(a=a.SS||a.AA,c.detailSize=
[a,a]):a.SX?c.detailSize=[a.SX,Math.round(a.SX/g)]:a.SY?c.detailSize=[Math.round(a.SY*g),a.SY]:a.SL?c.detailSize=g>=1?[a.SL,Math.round(a.SL/g)]:[Math.round(a.SL*g),a.SL]:(c.detailSize=[0,0],b.onload=function(){c.detailSize=[b.width,b.height];i()})}}var c=this,l=e.adjustment;a("#zoomWindow").remove();var k={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:e.zIndex},o=!1,q=a("#searchStripeOnDetailPage");q.length!==0&&(o=q.data("searchstripeondetailpage"));if(e.isSoftlinesEnhancedHoverZoom||
o)k.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",k.border="1px solid #949494",k.borderColor="rgb(148,148,148)";var n=a("<div id='zoomWindow' />").css(k);e.burjImageBlock&&n.fadeIn(200);e.useClickZoom&&(ma?n.css("cursor",'url("'+e.zoomOutIcon+'"), auto'):(n.css("cursor","-webkit-zoom-out"),n.css("cursor","-moz-zoom-out"),n.css("cursor","zoom-out")));c.updateImage=function(b){b=a("<img id='detailImg' src='"+b+"'/>").css("position","absolute");c.detailImage&&c.detailImage.remove();n.append(b);a(document).trigger("updated.magnifier");
c.detailImage=b;j(c.detailImage)};c.refit=function(){b();j(c.detailImage);return c};e.burjImageBlock?(c.show=function(){n.fadeIn(200);return c},c.hide=function(){n.fadeOut(200);return c}):(c.show=function(){n.show();return c},c.hide=function(){n.hide();return c});c.destroy=function(){n.remove();return c};c.getWindowSize=function(){return[c.rect.left,c.rect.top,c.rect.width,c.rect.height]};c.updateImage(J);b();n.appendTo(document.body)},z=!1,r,q=!1,o;g.preload=function(b){for(var b=a.makeArray(b),
d=b.length,c=0;c<d;c++)if(b[c]instanceof Array)g.preload(b[c]);else if(typeof b[c]=="string"&&b[c]&&!qa[b[c]])qa[b[c]]=new Image,qa[b[c]].src=b[c]};g.changeImage=function(b,c){U&&ba();J=c;g.attr("src",b);if(a.browser.msie)g.get(0).className=g.get(0).className;g.preload(b);d=[g.position().left,g.position().top,g.width(),g.height()];c&&(e.preload=="immediately"?g.preload(c,!0):a(window).ready(function(){g.preload(c)}),l?l.updateImage(c):g.attr("data-old-hires",c))};g.destroy=function(){g.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");
a(document).unbind("mousemove.magnifier");A&&A.destroy();A=null;l&&l.destroy();l=null};g.detailImage=function(){return l.detailImage};g.suppressMagnifier=function(a){ca=a};g.isEngaged=function(){return U};g.engageMagnifier=O;g.disengageMagnifier=ba;g[0].complete?N():g.one("load",N);g.preload(this.attr("src"));if(e.preload){var oa=e.detailImageUrl,F=function(){g.preload(oa,!0);e.useClickZoom||da.preload()},E=e.preload;E.constructor!=Array&&(E=[E]);for(var w=0;w<E.length;w++)if(E[w]=="immediately")F();
else if(a(window)[E[w]])a(window)[E[w]](F);else a(window).bind(E[w],F)}return g}});u.when("A","jQuery","ImageBlockBTF","a-modal").register("immersiveView",function(c,a,u,m){var e,i;function k(){var B=M?10:15,b=M?"right":"left";v?(y=a('<div id="iv-first-column" style="float: '+b+"; width:"+(a(window).width()-W-330)+"px;height:100%; margin-left: "+va+'px;"/>'),B=a('<div width="100%" id="iv-large-image" style="overflow: hidden; width: 100%;align:center; position:relative; top:0px; left:0px;height:100%"/>')):
(y=a('<div id="iv-first-column" style="float: '+b+"; width:"+(a(window).width()-W-330)+"px;height:100%; margin-right: "+va+'px;"/>'),B=a('<div width="100%" id="iv-large-image" style="overflow: hidden; width: 100%; height: '+(a(window).height()-$-B)+'px;align:center; position:relative; top:0px; left:0px;"/>'));p=a("<div></div>").attr("id","iv-large-video").css({overflow:"hidden",width:"100%",height:"100%",align:"center"});E!=="image"&&B.css("display","none");y.append(B);y.append(p);v?w.find("#IV-Main").append(y):
w.append(y)}function n(B){a('<style type="text/css">a.iv-title-link:link {text-decoration: none;}a.iv-title-link:visited {text-decoration: none; color: #003399}a.iv-title-link:hover {text-decoration: underline; color: orange;}</style>').appendTo("head");var b;b=v?'<div class="ivTitle" style="cursor:pointer;color: rgb(0, 51, 153);text-align: left; margin-top: 10px; font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; font-weight: bold; word-wrap: break-word; width: 235px;" id="iv-prod-title">'+
da(ea,45)+"</div>":'<div style="text-align: left; margin-top: 10px; font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; font-weight: bold; word-wrap: break-word; width: 235px;" id="iv-prod-title"><a class="ap_custom_close iv-title-link" href="">'+da(ea,45)+"</a></div>";b=a(b);b.attr("title",ea);b.find(".ap_custom_close").click(F);b.click(function(){v&&aa.hide()});B.append(b)}function b(){if(typeof DetailPage!="undefined"&&DetailPage.StateController){var B='<div style="text-align: left;"  id="iv-variation-selection">',
b=DetailPage.StateController.getState(),f=b.variation_label_order,h;for(h in f){var c=f[h],d=b.selected_variations[c],c=b.variation_display_labels[c];d&&(B+='<div style="padding-top:10px; padding-bottom:3px; font-family: verdana, arial, helvetica, sans-serif; font-size:11px; color:#666">'+c+" : "+d+"</div>")}B+="</div>";return a(B)}}function ba(){a("<img>").attr("src",""+V.arrow+"");a("<img>").attr("src",""+V.zoomIn+"");a("<img>").attr("src",""+V.zoomOut+"")}function O(){var B=v&&!ga?"right":"left",
f=a('<div style="float: '+B+'; padding-left:30px;" id="iv-sec-column"></div>');if(!M){f=a('<div style="float: '+B+'; width: 235px;" id="iv-sec-column"></div>');n(f);B=f;o&&(v?B.append(a("<div id='variationalColorWrapper'></div>")):B.append(b()));var B=f,h='<div style="width:235px; border:1px solid #C9E1F4; background-color:#EAF3FD; padding-top: 5px; padding-bottom: 5px; margin-top:15px; display: none" id="iv-tabbing">';h+='<select id="iv_media_select" style="position:relative;left:65px">';h+='<option id="all" value="all" selected>'+
ivStrings.allMedia+"</option>";h+='<option id="images" value="images">'+ivStrings.images+"</option>";h+='<option id="videos" value="videos">'+ivStrings.videos+"</option>";h+="</select>";h+=a.browser.msie?'<span class="swSprite s_boxLeft" style="top: -14px; left: -102px; display: none;"> </span>  <span class="swSprite s_boxRight" style="top: -14px; left: 111px; display: none;"> </span>':'<span class="swSprite s_boxLeft" style="top: -12px; left: -102px; display: none;"> </span>  <span class="swSprite s_boxRight" style="top: -12px; left: 108px; display: none;"> </span>';
h+="</div>";h=a(h);B.append(h)}B=f;h="{ border:1px solid #C9E1F4;width:235px;height:290px;padding-left:15px;padding-top:15px;padding-bottom:15px; overflow-y:auto; border-top:0px;position:relative; top:0px; left:0px; }";M&&(h="{ width:135px;padding-left:15px;padding-top:15px;padding-bottom:15px; overflow-y:auto; position:relative; top:0px; left:0px; }");a('<style type="text/css">.iv_thumbs '+h+".iv_thumb_videos {  border:1px solid #C9E1F4;width:235px;height:230px;padding:0px; overflow-y:auto; border-top:0px; }.iv_thumb_video_outer { float:left; width:100%; padding-top:5px; padding-bottom:5px;cursor:pointer}.iv_thumb_video_outer_hover { background-color: #EAF3FD }.iv_thumb_video { border: 1px solid #ddd;float:left; margin-left:10px;margin-right:10px;cursor:pointer; }.iv_thumb { border: 1px solid #ddd;float:left; margin-right:12px; margin-bottom:20px; cursor:pointer; }.iv_thumb_selected { border: 2px solid #E47911; }.iv_thumb_hover { border: 2px solid #004B91; }.iv_thumb_inner { padding: 1px;float:left; }.iv_thumb_inner_selected { padding: 0px; }.iv_thumb_image { float:left;position:relative;width:50px; height:50px; background-color:#ffffff}.iv_thumb_text { float:left; word-wrap:break-word; width:130px; margin-top:10px; font-family:verdana, arial, helvetica, sans-serif; font-size:11px }.iv_thumb_text_popover { font-family: verdana, arial, helvetica, sans-serif; font-size:11px }.iv_thumb_text_hover { background-color: #EAF3FD }</style>").appendTo("head");
h="<div class='iv_thumbs'>";h+="</div>";h+="<div class='iv_thumb_videos' style='display: none; height: 63px;'>";h+="</div>";h=a(h);B.append(h);ba();v?w.find("#IV-Main").append(f):w.append(f)}function N(){a("#addIV-Main").click(function(){a("#iv_media_select").css("visibility","visible")});a(window).resize(function(){ja&&!v&&d()});g()}function g(){a(".iv_thumb").click(function(){a(".iv_thumb").removeClass("iv_thumb_selected");a(".iv_thumb").removeClass("iv_thumb_hover");a(".iv_thumb").find(".iv_thumb_inner").removeClass("iv_thumb_inner_selected");
a(this).addClass("iv_thumb_selected");a(this).find(".iv_thumb_inner").addClass("iv_thumb_inner_selected");a(this).hasClass("iv_type_video")?ja&&(r=a(this).attr("id").split("_")[1],q=-1,v&&K.setCurrentVideoSelected(r),ia()):(v&&a("#iv-large-video").css("display","none"),q=a(this).attr("id").split("_")[1],r=-1,l())});a(".iv_thumb_video_outer").click(function(){a(".iv_thumb_video").removeClass("iv_thumb_selected");a(".iv_thumb_video").removeClass("iv_thumb_hover");a(".iv_thumb_video").find(".iv_thumb_inner").removeClass("iv_thumb_inner_selected");
a(this).find(".iv_thumb_video").addClass("iv_thumb_selected");a(this).find(".iv_thumb_inner").addClass("iv_thumb_inner_selected");r=a(this).attr("id").split("_")[1];q=-1;ia()});a(".iv_thumb").mouseover(function(){Z&&Z.close();a(this).hasClass("iv_thumb_selected")||(a(this).addClass("iv_thumb_hover"),a(this).find(".iv_thumb_inner").addClass("iv_thumb_inner_selected"));if(!v&&a(this).hasClass("iv_type_video")){var b=Number(a(this).attr("id").split("_")[1]);if(!(b>=Q.length)){var b=Q[b],b="<span class='iv_thumb_text_popover'><b>"+
b.title+"</b><br>"+b.durationTimestamp+"</span>",f=a(this).offset().left-a(".iv_thumbs").offset().left<=30?-27:-50,h=-11;a.browser.msie&&parseInt(a.browser.version)==6&&(h=-16);Z=a.AmazonPopover.displayPopover({literalContent:b,width:180,location:["top"],locationElement:this,locationAlign:"middle",locationOffset:[f,h],zIndex:1E3,hoverShowDelay:300,hoverHideDelay:300,showCloseButton:!1,attached:!0,modal:!1});a.browser.msie&&parseInt(a.browser.version)==6?Z.find(".ap_footer").find(".ap_middle").css({position:"relative",
height:"30px",width:"112px",top:"-2px",background:"url("+V.arrow+") -343px -40px"}):Z.find(".ap_footer").find(".ap_middle").css({position:"relative",height:"30px",width:"112px",top:"-3px",background:"url("+V.arrow+") -343px -43px"})}}});a(".iv_thumb_video_outer").mouseover(function(){a(this).addClass("iv_thumb_video_outer_hover");a(this).find(".iv_thumb_text").addClass("iv_thumb_text_hover");a(this).find(".iv_thumb_video").hasClass("iv_thumb_selected")||(a(this).find(".iv_thumb_video").addClass("iv_thumb_hover"),
a(this).find(".iv_thumb_inner").addClass("iv_thumb_inner_selected"))});a(".iv_thumb").mouseout(function(){a(this).hasClass("iv_thumb_selected")||(a(this).removeClass("iv_thumb_hover"),a(this).find(".iv_thumb_inner").removeClass("iv_thumb_inner_selected"));Z&&Z.close()});a(".iv_thumb_video_outer").mouseout(function(){a(this).removeClass("iv_thumb_video_outer_hover");a(this).find(".iv_thumb_text").removeClass("iv_thumb_text_hover");a(this).find(".iv_thumb_video").hasClass("iv_thumb_selected")||(a(this).find(".iv_thumb_video").removeClass("iv_thumb_hover"),
a(this).find(".iv_thumb_inner").removeClass("iv_thumb_inner_selected"))});a("#ap_container").keydown(function(a){if(a.keyCode==37||a.keyCode==38||a.keyCode==39||a.keyCode==40||a.keyCode==33||a.keyCode==34)return!1})}function F(){if(s&&!s.isDetached())ka.volume=s.getVolume(),s.detach(),document.all&&!window.atob&&!document.addEventListener&&(s=null)}function l(){function b(){na=!1;c.css("visibility","hidden");c.empty();c.animate({opacity:1},200);c.append(h);A();t=!1;fa[h.attr("src")]=1}s&&s.hide();
a("#iv-large-image").css("display","block");var f="";z&&z[o]&&z[o].images&&(f=z[o].images.zoomImages[q]);if(f){v?a(".fullScreen").length&&a(".fullScreen").remove():w.find(".fullScreen")&&w.find(".fullScreen").remove();S="<img src='"+f+"'class='fullScreen'/>";var h=a("<img>").attr("src",f);h.addClass("fullScreen");var c=a("#iv-large-image");c.animate({opacity:0.4},200,function(){h.load(function(){b()});a(S).load(function(){b()});if(fa[h.attr("src")])b();else{na=!0;c.empty();var f=(y.height()-za)/2,
d=(y.width()-ua)/2;a("#iv-large-image").append("<img src='"+V.spinner+"' style='position:relative;top:"+f+"px;left:"+d+"px;' />")}});h.load(function(){fa[h.attr("src")]=1;G()});a(S).load(function(){fa[h.attr("src")]=1;G()})}}function A(){ra=!1;var b=a("#iv-large-image"),f=b.width(),h=b.height(),b=a("#iv-large-image").find(".fullScreen");b.removeAttr("style");var c=H=b.width();x=b.height();c=c>x?c:x;if(b.length>0){if(b[0].naturalWidth)H=b[0].naturalWidth,c=c>H?c:H;if(b[0].naturalHeight)x=b[0].naturalHeight,
c=c>x?c:x}y.css({cursor:"auto"});c>=1E3&&(a.browser.mozilla?y.css({cursor:"-moz-zoom-in"}):y.css({cursor:"url('"+V.zoomIn+"'), auto"}));H=H==0?1:H;x=x==0?1:x;var d=Math.min(f/H,h/x),c=x*d;d*=H;b.css("height",c<x?c-20:x);b.css("width",Math.min(d,H));f=(f-b.width())/2;h=(h-b.height())/2;b.css("margin-top",h);b.css("margin-left",f);a("#iv-large-image").css("visibility","visible")}function G(){for(var b=-3;b<=3;b++){var f=parseInt(q)+b;if(!(f<0))if((f=z&&z[q]?z[q].images.zoomImages[f]:"")&&fa[f]==void 0)a("<img>").attr("src",
f).load(function(){fa[a(this).attr("src")]=1});else if(!f)break}}function d(){var b=a(window).height()-$,f=a(window).width()-W;if(v&&aa){a("#IV-Main").css({display:"block"});var f=aa.$container.find(".a-popover-wrapper").height(),b=aa.$container.find(".a-popover-inner"),b=parseInt(b.css("padding-top"))+parseInt(b.css("padding-bottom")),h=aa.$container.find(".a-popover-header").height();f-=b+h;a("#IV-Main").css({height:f+"px"});a("#iv-large-image").css({height:f+"px"});var b=a("#iv-prod-title").outerHeight(!0),
h=a("#iv-tabbing").outerHeight(!0),c=a("#iv-variation-selection").outerHeight(!0),b=f-(b+h+c);a(".iv_thumbs").css({height:b+"px"});a(".iv_thumb_videos").css({height:b+"px"});f=aa.$container.find(".a-popover-inner").width();b=parseInt(a("#IV-Main").css("padding-left"))+parseInt(a("#IV-Main").css("padding-right"));h=a("#iv-sec-column").width();a("#iv-first-column").css({width:f-(b+h+va+I)+"px"})}else b>230&&(a("#IV-Main").css({height:b+"px"}),a("#iv-large-image").css({height:b-15+"px"}),b-=wa,a(".iv_thumbs").css({height:b+
"px"}),a(".iv_thumb_videos").css({height:b+ta+"px"})),f>500&&(a("#IV-Main").parents(".ap_popover").css({width:f+"px"}),b=M?250:330,a("#iv-first-column").css({width:f-b+"px"}));r||A()}function j(b){b=qa({left:C.left-(b.pageX-D[0])*L,top:C.top-(b.pageY-D[1])*L});(v?a(".fullScreen"):w.find(".fullScreen")).css({left:b.left,top:b.top})}function qa(a){if(e>0)a.left=e/2;else if(a.left<e)a.left=e;else if(a.left>0)a.left=0;if(i>0)a.top=i/2;else if(a.top<i)a.top=i;else if(a.top>0)a.top=0;return a}function U(){var b=
0;if(z&&z[o]&&z[o].images&&z[o].images.thumbnails)b=z[o].images.thumbnails.length;var f=Q?Q.length:0,h=a(".iv_thumbs"),c=a("#iv-tabbing");if(b==0||f==0)c.hide(),h.css({"margin-top":"15px","border-top":"1px solid #C9E1F4"});else{var d=a("#iv_media_select");d.find("#all").text(ivStrings.allMedia+" ("+(b+f)+")");d.find("#videos").remove();d.find("#images").remove();d.append('<option id="images" value="images">'+ivStrings.images+" ("+b+")</option>");d.append('<option id="videos" value="videos">'+ivStrings.videos+
" ("+f+")</option>");c.show();h.css({"margin-top":"0px","border-top":"0px"});d.val("all");ca()}}function ca(){a("#iv_media_select").change(function(){a(this).val()=="all"?(a(".iv_thumb_videos").hide(),a(".iv_thumbs").show(),a(".iv_type_video").show(),q>=0?(r=-1,a("#ivimage_"+q).click()):r>=0&&(q=-1,a("#ivvideo_"+r).click())):a(this).val()=="images"?(a(".iv_thumb_videos").hide(),a(".iv_thumbs").show(),a(".iv_type_video").hide(),r=-1,q>=0?a("#ivimage_"+q).click():(q=0,a("#ivimage_0").click())):a(this).val()==
"videos"&&(a(".iv_thumb_videos").show(),a(".iv_thumbs").hide(),q=-1,r>=0?a("#ivvideolist_"+r).click():(r=0,a("#ivvideolist_0").click()))})}function J(){var b="";a.each(Q||[],function(a,f){b+="<div class='iv_thumb_video_outer' id='ivvideolist_"+a+"'>";b+="<div class='iv_thumb_video'>";b+="<div class='iv_thumb_inner'>";b+="<div class='iv_thumb_image' style=\"background:url("+f.thumbUrl+') center no-repeat">';b+="</div>";b+="</div>";b+="</div>";b+="<div class='iv_thumb_text'><b>"+f.title+"</b><br>"+
f.durationTimestamp+"<div style='clear:both'></div></div>";b+="</div>"});a(".iv_thumb_videos").html(b)}function ha(){var b;if(z&&z[o])b=z[o].images.thumbnails;var f="",h=0,c=b?b.length:0;c+=(Q||[]).length;if(b)for(var d=b.length,e=0;e<d;e++){h%3==0&&(f+="<div style='height:75px;'>");f+="<div class='iv_thumb' id='ivimage_"+e+"'>";f+="<div class='iv_thumb_inner'>";f+="<div class='iv_thumb_image' style=\"background:url("+Y(b[e])+') center no-repeat">';f+="</div>";f+="</div>";f+="</div>";if((h+1)%3==
0||h==c-1)f+="</div>";h++}a.each(Q||[],function(a,b){h%3==0&&(f+="<div style='height:75px;'>");f+="<div class='iv_thumb iv_type_video' id='ivvideo_"+a+"'>";f+="<div class='iv_thumb_inner'>";f+="<div class='iv_thumb_image' style=\"background:url("+b.thumbUrl+') center no-repeat">';f+="</div>";f+="<div id='data_ivvideo_"+a+"' value='"+b.mediaObjectId+"' />";f+="</div>";f+="</div>";if((h+1)%3===0||h===c-1)f+="</div>";h++});a(".iv_thumbs").html(f)}function ia(){if(r){v&&a("#iv-large-video").css("display",
"block");a("#iv-large-image").css("display","none").empty();var b=Q[r];s?(s.isDetached()&&s.attach(p[0]),K.loadMediaIntoAiryAndSetVolume(s,b,ka),s.show()):(s=K.embedAiryForChromefulPlayback(p,b,ka,"ImmersiveView"),ka.enableContinuousPlay&&s.bind("ended",R));s.play({isAsync:!0})}}function R(){var b=parseInt(r)+1;b>=Q.length||a("#ivvideo_"+b).click()}function Y(a){var a=a.replace(/'/g,"").replace("._SL75_","").replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,""),a=a.replace(/\._(US)\d+_/,
"").replace(/\._SR\d+,\d+_/,""),b=a.lastIndexOf(".");return a=a.substring(0,b)+"._AA50_"+a.substring(b)}function la(){F();a("#iv-large-image").empty();a(document.body).css("overflow","auto");a("#ap_container").unbind("keydown");ja=!1;E!="image"&&oa&&a("#altImages").find(".a-button-selected").mouseenter()}function ma(){ja=!0;a(document.body).css("opacity","");var b=document.body.style;a.browser.msie&&b&&b.filter==""&&b.removeAttribute("filter");b=a("body").scrollTop()+28+"px";M&&(a("body").css("overflow",
"hidden"),b=a(document).scrollTop()+"px",a(".ap_closetext").css("font-size","16px"));a("#IV-Main").parents(".ap_popover").css({top:b});q>=0?a("#ivimage_"+q).click():r>=0?a("#ivvideo_"+r).click():a("#ivimage_0").click();d()}function da(a,b){var f=a=new String(a);if(a.length>b){try{for(var h=-1,c=0;c<a.length;c++){var d=a.charAt(c);if(d==" "||d=="."||d=="?"||d==";"||d==","||d==":")h=c;if(c==b-4){f=a.substring(0,h==-1?c:h);break}}}catch(e){f=a.substring(0,b-3)}f+="..."}return f}var ea,z,r,q,o,oa=0,E,
w,K,V,W=42,$=125,wa=210,ta=30,ja=!1,Z,fa={},za=104,ua=80,y,na=!1,ra=!1,H,x,C={left:0,top:0};e=void 0;i=void 0;var S,D=[0,0],L=4,t=!1,p,Q=[],s,ka,aa,M=!1,v,va=15,I=20,ga;this.iVController=function(h,e,g,i,j,ya){v=j;ga=ya;if(!(h==null||e==null||g==null)||v)if(K||(K=g),Aa(e,i)){if(M=e.showBiggerImmersiveView)W=0,$=50,wa=110;xa()?(pa(h,e),w&&w.remove(),f()):(T(h),a("#iv_media_select").val("all"),a(".iv_thumb_videos").hide(),a(".iv_thumbs").show(),a(".iv_type_video").show());v?($dom=a("#auiImmersiveViewDiv"),
g=a(window).height()-$,i=a(window).width()-W,aa=m.create($dom,{name:"immersiveView",activate:"onclick",width:i,height:g,popoverLabel:"ImmersiveView"}),c.on("a:popover:afterShow:immersiveView",function(){pa(h,e);U();ha();J();N();a("#variationalColorWrapper").html(b());ma()}),c.on("a:popover:afterHide:immersiveView",function(){la()}),c.on("a:popover:afterUpdatePosition:immersiveView",function(){d()})):a.AmazonPopover.displayPopover(Ba())}};var T=function(b){var f;if(b&&b.action=="thumb-action")f=b.data;
else if(b&&b.action=="main-image-click"||v)if(b=a("altImages,.a-button-selected"),b!=null&&b.parent()!=null&&b.parent().data()!=null)f=b.parent().data().thumbAction;f==null&&(f={thubnailIndex:0,type:"image",index:0});oa=f.thumbnailIndex;E=f.type;E=="image"||E=="ingress"?(q=f.index,r=-1):(q=-1,r=f.index)},xa=function(){if(o)if(sa()){if(typeof DetailPage!="undefined"&&DetailPage.StateController&&K.getColorFromState(DetailPage.StateController.getState().selected_variations)==o)return!1}else return!1;
return!0},sa=function(){return typeof sa!="undefined"&&sa?!0:!1},pa=function(a,b){T(a);o=ya(b);z=h(b.colorImages);window.ivStrings=b.staticStrings;ea=b.title;V=b.staticImages;ka=b.airyConfig;Q=K.getVideos(o)||Q},f=function(){w=v?a('<div class = "a-popover-preload" id="a-popover-immersiveView"><div style="display:none;height:'+(a(window).height()-$)+'px; width:100%; padding: 0px 15px 15px 15px;" id="IV-Main"></div></div>'):a('<div style="display:none;height:'+(a(window).height()-$)+'px; width:100%; padding: 0px 15px 15px 15px;" id="IV-Main"></div>');
ga?(O(),k()):(k(),O());v?w.find("#IV-Main").append('<div style="clear:both"/>'):w.append('<div style="clear:both"/>');a("#imageBlock_feature_div").before(w);w.find("#iv-large-image").click(function(b){if(!t&&!na)if(ra)A();else if(C=qa(C),H>=1E3||x>=1E3)y.find("#iv-large-image").empty().append(S),(v?a(".fullScreen"):w.find(".fullScreen")).load(function(){if(H>=1E3||x>=1E3){a.browser.mozilla?y.css({cursor:"-moz-zoom-out"}):y.css({cursor:"url('"+V.zoomOut+"'), auto"});ra=!0;var f=y.find("#iv-large-image"),
h=v?a(".fullScreen"):w.find(".fullScreen");H=h.width();x=h.height();e=y.width()-H;i=y.height()-x;var h=y.height()/2,c=y.width()/2;D=[f.offset().left+c,f.offset().top+h];C.top=h-x/2;C.left=c-H/2;y.find(".fullScreen").css({position:"relative",left:C.left,top:C.top});L=Math.max(x/y.height(),H/y.width());L=Math.max(L,4)}j(b)})});w.find("#iv-first-column").mousemove(function(a){ra&&j(a)});ba();M||U();ha();J();N();v||d()},h=function(b){var f={};a.each(b,function(h){f[h]={images:{thumbnails:a.map(b[h],function(a){return a.thumb}),
zoomImages:a.map(b[h],function(a){return a.hiRes||a.large||a.main[a.main.length-1]})}}});return f},Aa=function(a,b){var f=ya(a);return a.colorImages&&a.colorImages[f]&&a.colorImages[f].length>0&&(a.useIV||b||v)?!0:!1},ya=function(a){var b=null;typeof DetailPage!="undefined"&&DetailPage.StateController&&(b=K.getColorFromState(DetailPage.StateController.getState().selected_variations));return b=b||a.defaultColor},Ba=function(){var b="close",f=u.staticStrings;f&&f.close&&(b=f.close);var f=M?a(window).width():
a(window).width()-W,h=M?{left:0,top:0}:{left:20,top:28};return{localContent:"#IV-Main",width:f,location:function(){return h},zIndex:999,paddingLeft:0,paddingRight:0,paddingBottom:0,closeText:b,modal:!0,group:"ImmersiveView",onShow:ma,onHide:la}};return this});u.when("ImageBlockBTF").execute(function(c){c=c.airyConfig;u.load.js(c.jsUrl);c.cssUrl&&u.load.css(c.cssUrl)});u.when("A","jQuery","imageBlockUtils","ImageBlockATF","ImageBlockBTF","immersiveView","Airy","postMetric").register("imageBlockMain",
function(c,a,X,m,e,i,k,n){if(e&&e.colorImages&&m&&m.colorImages)e.colorImages.initial=m.colorImages.initial,e.colorImages[e.landingAsinColor]=m.colorImages.initial;if(e&&e.heroImage&&m&&m.heroImage)e.heroImage.initial=m.heroImage.initial,e.heroImage[e.landingAsinColor]=m.heroImage.initial;if(e&&e.colorImages&&m&&m.colorToAsin&&m.colorToAsin.initial&&m.colorToAsin.initial[0])e.initialColorToAsinMap=m.colorToAsin.initial[0].main;e.holderRatio=e&&m.holderRatio?m.holderRatio:1;e.holderMaxHeight=m.holderMaxHeight;
e.useStretchyImageFix=m.useStretchyImageFix;new function(b,e){var k,N,g,F,l;function A(){c.declarative("thumb-action",["click",aa?"":"mouseenter"],da);c.declarative("thumb-action",["mouseleave"],la);c.declarative("main-image-click",["click"],za);c.declarative("main-image-click",["mouseenter","mouseleave"],Y);c.declarative("main-video-click",["click"],function(a){c.trigger("mainVideoClick",a)});if(b.burjImageBlock)c.on("Burj.ImageBlock.resizeImageBlockEvent",X)}function G(){var a=DetailPage.StateController.getState();
if((a=p.getColorFromState(a.selected_variations))&&a!="")R(a),p.setLandingColor(a);c.on("image-block-twister-swatch-hover",q);c.on("image-block-twister-swatch-click",o);c.on("image-block-video-fetch-completed",ha)}function d(){p.resizeHappened();X();if(t.length&&b.burjImageBlock){var a=j();a&&typeof a!="undefined"&&(a.xPos&&typeof a.xPos!="undefined"?t.css({"background-position":a.xPos+"px "+a.yPos+"px"}):t.css({"background-position":"center "+a.yPos+"px"}),t.css({"background-size":a.width+"px "+
a.height+"px","max-width":a.width+"px","min-height":a.height+"px",filter:"","-ms-filter":""}))}}function j(f){if(b.burjImageBlock){if(!f||typeof f=="undefined"){var h=K(k);if(h==-1)return;f=a.map(h.main,function(a,b){return b})[0];f=h.main[f]}h=W(f);f=V(h[0],f);return{height:h[1],width:h[0],xPos:f,yPos:75}}}function X(f){var h=D.find(".item .imgTagWrapper"),c=p.getMainBlockHeight();f&&typeof f!=="undefined"&&typeof f.maxImgBlockHeight!=="undefined"&&p.setMaxImageHeight(f.maxImgBlockHeight);var d=
p.getMaxDimensionsOfMainImage();c>0&&(L.height(c),h.height(c));D.find("img.a-dynamic-image").each(function(){var f=a(this);if(f.data("a-manual-replacement")){var h=p.loadDynamicImage(this);h&&f.attr("src",h)}var c;b.useStretchyImageFix?(c=f.data("a-dynamic-image"),h=p.getMaxHeightOfMainImage(c),c=p.getMaxWidthOfMainImage(c)):(h=L.height(),c=L.width());d&&typeof d!=="undefined"&&(c=Math.min(d[0],c),h=Math.min(d[1],h));f.attr("style","max-height: "+h+"px; max-width: "+c+"px;")});na()}function U(){var b=
L.height(),h=0,c=0;a.each(Q,function(a,b){var f=b[0],d=b[1];f>c&&(c=f,h=d)});b=Math.min(b,h)}function ca(f,h,c,d,e){var g=s.find(".template").clone().removeClass("template").addClass("item"),i=a("<img />").attr("src",h.thumb);b.autoplayVideo&&e?f=="chromeless-video"&&g.find(".a-button").addClass("a-button-selected").addClass("a-button-focus"):d==N&&g.find(".a-button").addClass("a-button-selected").addClass("a-button-focus");g.find(".placeHolder").replaceWith(i);g.find(".a-declarative").attr("data-thumb-action",
'{"index":"'+c+'", "thumbnailIndex":"'+d+'", "type": "'+f+'", "variant": "'+h.variant+'"}');return g}function J(a,b,c,d){var e=s.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item");e.find("#altIngressText").append(b+"+");e.find(".a-declarative").attr("data-thumb-action",'{"index":"'+c+'", "thumbnailIndex":"'+d+'", "type": "'+a+'", "variant": ""}');return e}function ha(f,h,d){s.find(".item").remove();var e=0,j=C[f],l=p.getVideos(f),m=l.length>
0&&b.alwaysIncludeVideo?1:0;if(S&&(f=S[f]))f=ca("hero-image",f,e,e,h),s.append(f),e++;j&&a.each(j,function(a,f){if(e>=b.maxAlts-m)return g===a&&c.trigger("image-block-select-thumbnail",s.find("img:first")),!1;var d=ca("image",f,a,e,h);s.append(d);e++});a.each(l,function(a,f){if(e>=b.maxAlts)return!1;if(b.thumbExperimentEnabledValue!==1)f.thumb=b.staticImages.videoThumbIcon;if(ka){var c=ca("chromeless-video",f,a,e,h);pa||(pa=!0,n.postCountMetric("dppc_chromelessVideoAvailable"))}else c=ca("chromeful-video",
f,a,e),pa||(pa=!0,n.postCountMetric("dppc_chromefulVideoAvailable"));s.append(c);e++});j=C[k].length+l.length;b.useAltIngress&&b.maxAlts<j&&((!d||C[k].length<=b.maxAlts)&&n.postCountMetric("ccx-altIngress-shown"),s.append(J("ingress",j-b.maxAlts,0,e)));b.isAUIPopoverEnabled&&i.iVController(null,b,p,void 0,b.isAUIPopoverEnabled,b.thumbnailLeftAlignmentEnabled);u.when("ready").execute(function(){v&&ia()})}function ia(){var b=a("#altImages .a-declarative");a.each(b,function(b,f){var d=a(f).data("thumb-action");
a.isEmptyObject(d)||(d.type==="image"&&z(k,d.type,d.index,d.thumbnailIndex),va&&d.thumbnailIndex==="1"&&c.trigger("softlinesPreloadedCanvasItems"))});v&&n.postCountMetric("softlinesPreloadingDone")}function R(a,b,c,d,e){a&&(k=a);b&&(F=b);typeof c!=="undefined"&&(g=c);typeof d!=="undefined"&&(N=d);e&&(l=e)}function Y(b){var h=!1;b.type=="mouseenter"&&(h=!0);var c,b=a("altImages,.a-button-selected");if(b!=null&&b.parent()!=null&&b.parent().data()!=null)c=b.parent().data().thumbAction;c&&typeof c.index!==
"undefined"&&typeof c.thumbnailIndex!=="undefined"&&c.type&&p.setImageCaption(k,c.type,c.index,c.thumbnailIndex,0,h)}function la(a){(a=a.data)&&typeof a.index!=="undefined"&&typeof a.thumbnailIndex!=="undefined"&&a.type&&p.setImageCaption(k,a.type,a.index,a.thumbnailIndex);b.burjImageBlock&&da(xa)}function ma(){b.useIV&&D.css("cursor","pointer")}function da(f){var h=f.data;if(!h)return-1;ta();if(h.type==="ingress")return f.type==="click"&&(n.postCountMetric("ccx-altIngress-clicked"),ua(f,!0)),-1;
if(h.index==null||h.thumbnailIndex==null||h.type==null)return-1;var e=f.data;n.postCountMetric(e.type+"ThumbnailSelected");var g=e.variant;e.type==="image"&&g!==null&&(n.postCountMetric("ImageThumbnailSelectedVariant:"+g),g.indexOf("IG")===0&&(n.postCountMetric("IGImageSelectedVariant:"+g),n.postCountMetric("IGImageSelectedEvent:"+f.type)));e=f.$declarativeParent.find(".a-button");if(!b.burjImageBlock||b.burjImageBlock&&f.type==="click")s.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus"),
a(e).addClass("a-button-selected").addClass("a-button-focus");e=z(k,h.type,h.index,h.thumbnailIndex);if(e!==-1){I&&!(h.type==="chromeless-video"||h.type==="chromeful-video")&&ea();if(b.burjImageBlock&&f.type==="click"||b.burjImageBlock&&!sa)xa=f,sa=!0;r(e);e=!0;M&&(e=M=!1);p.setImageCaption(k,h.type,h.index,h.thumbnailIndex,0,e);R(k,h.type,h.index,h.thumbnailIndex,h.variant);d();f.type==="click"&&!b.notThumbnailClickImmersiveView&&ua(f)}else p.showUnavailableExp();c.trigger("image-block-thumbnail-selected",
h)}function ea(){I&&(I.hide(),T.parent().css("z-index",-1),a("#video-canvas-caption").hide(),ma())}function z(f,h,c,d){var e;h==="chromeless-video"?p.getVideos(k)[c]==null?e=-1:(f=wa(f,c,d),I&&I.play(),e=f):h==="chromeful-video"?(f=p.getVideos(k)[c])?(h=b.holderRatio||1,c=p.getMaxDimensionsOfMainImage(),d=parseInt(f.videoWidth,10),e=parseInt(f.videoHeight,10),T.parent().css("z-index",2),e!=0&&d!=0&&(d/=e,c&&typeof c!=="undefined"&&(h=L.width()/L.height()),h>d?T.css("width",d/h*100+"%"):T.css("height",
h/d*100+"%")),b.useIV&&D.css("cursor","default"),I?(I.show(),a("#video-canvas-caption").show(),p.loadMediaIntoAiryAndSetVolume(I,f,ga)):(I=p.embedAiryForChromefulPlayback(T,f,ga),f=a("#image-canvas-caption").clone().attr("id","video-canvas-caption"),f.appendTo(T),f.find("#canvasCaption").html(b.staticStrings.playVideo)),e=T):e=-1:h==="hero-image"?e=ja(f,c,d):D.find(".item.itemNo"+d).length>0?e=D.find(".item.itemNo"+d):h=="image"&&(e=Z(f,c,d));return e}function r(a,b){if(a==null)return-1;D.find("li").removeClass("selected");
p.hideUnavailableExp();if(!a.hasClass("fullImage")){t.length&&t.addClass("hide-background");var c=L.css("height");c!=null&&a.find(".imgTagWrapper").css("height",c);a.addClass("selected");b||na()}}function q(a,h,d){var f;ta();M=!0;ea();a=(a=d?d:p.getColorFromState(h.getState().hovered_variations))&&a!=""?a:b.defaultColor;f=(h=p.getColorFromState(h.getState().selected_variations))&&h!=""?h:b.defaultColor,h=f;if(h==k&&k==a)b.isSwatchHoverConsistent?c.trigger("image-block-select-thumbnail",s.find("img:eq("+
N+")")):c.trigger("image-block-select-thumbnail",s.find("img:first"));else{h=!1;if(b.isSwatchHoverConsistent)if(F==="hero-image")d=w(a),l===d.variant&&(h=!0);else var d=a,e=oa(d,l),d=e===-1?E(d,0):E(d,e);else d=E(a,0);if(d==-1)if(K(a)!=-1)d=w(a),r(t,!0),h=1;else{h=D.find(".item.itemNo0");r(h);p.showUnavailableExp(a);return}h||(a=D.find(".swatchHoverExp"),h=fa(d),a.find("img"),a.find(".imgTagWrapper").html(h),p.loadImageManually(a.find(".a-dynamic-image")),r(a,!0))}}function o(a,c,d,e){ta();M=!0;a=
(a=e?e:p.getColorFromState(c.getState().selected_variations))&&a!=""?a:b.defaultColor;if(a==k)typeof d=="function"&&d();else{var e=a,g="image",j=0,i=0,c="MAIN";if(F==="hero-image")K(e)!==-1&&(g="hero-image",c=l);else{var m=oa(e,l);m!==-1&&(i=j=m,c=l);K(e)!==-1&&i++}e=g;g=c;e==="hero-image"?(t.hasClass("twisted")||t.addClass("twisted"),c=ja(a,j,i,d)):c=Z(a,j,i,d);if(c==-1)if(g=K(a),g!=-1)c=ja(a,j,i,d),e="hero-image",g=g.variant,i=0;else{p.showUnavailableExp(a);return}R(a,e,j,i,g);y();D.find(".list .item").remove();
t.length&&F!=="hero-image"&&t.addClass("twisted");c.hasClass("fullImage")||D.find(".list").append(c);na();ha(a)}}function oa(b,c){if(C.length<1)return-1;if(!C[b])return-1;if(!c)return-1;var d=-1;a.each(C[b],function(a,b){b.variant===c&&(d=a)});return d}function E(b,c){return C.length<1?-1:!C[b]?-1:!C[b][c]?-1:!C[b][c].main?-1:a.map(C[b][c].main,function(a,b){return b}).length<1?-1:C[b][c]}function w(b){var c=K(b);if(c==-1)return E(b,0);b=a.map(c.main,function(a,b){return b})[0];$(b,c.main[b]);t.addClass("twisted");
t.hasClass("hide-background")&&t.removeClass("hide-background");return c}function K(b){return S.length<1?-1:!S[b]?-1:!S[b].main?-1:a.map(S[b].main,function(a,b){return b}).length<1?-1:S[b]}function V(a,c){var d;if(b.burjImageBlock){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,g=b.heroFocalPoint;if(g&&typeof g!="undefined"){d=Math.max((e-Math.min(1500,a))/2,0);var i=Math.max((e-a)/2,0);d-=i;e=Math.max(Math.min(e,1500),1024);d=d+(e-420-23)/2-a/c[0]*g}}return d}
function W(a){var c;if(b.burjImageBlock){c=a[0];a=a[1];if((window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)<=768)c*=0.7,a*=0.7;else{var d=((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,d=Math.max(Math.min(d,1),0);c*=0.7+0.3*d;a*=0.7+0.3*d}c=[c,a]}return c}function $(a,c){if(t.length&&a&&c){var d=c[0],e=c[1];t.css({"background-image":'url("'+a+'")'});if(b.burjImageBlock){var g=j(c);if(g&&typeof g!="undefined")d=
g.width,e=g.height,g.xPos&&typeof g.xPos!="undefined"?t.css({"background-position":g.xPos+"px "+g.yPos+"px"}):t.css({"background-position":"center "+g.yPos+"px"})}t.css({"background-size":d+"px "+e+"px","max-width":d+"px","min-height":e+"px",filter:"","-ms-filter":""})}}function wa(a,b){var c=p.getVideos(k)[b];if(!c)return-1;var d=D.find(".chromeless-video");if(d.hasClass(p.VIDEO_UNSUPPORTED_CLASS_NAME))return p.flashNotInstalled&&D.find(".noFlash").removeClass("a-hidden"),d;if(I)return I.show(),
p.loadMediaIntoAiryAndSetVolume(I,c,ga),d;I=p.embedAiryForChromelessPlayback(T,c,ga,s,d);return d}function ta(){p.flashNotInstalled&&D.find(".noFlash").addClass("a-hidden")}function ja(b,c,d,e){b=K(b);if(b==-1)return-1;var g=a.map(b.main,function(a,b){return b})[0],i=b.main[g];t.hasClass("twisted")?(p.loadImageAsynchronously(g,function(){typeof e==="function"&&e()}),$(g,i),t.removeClass("twisted"),t.hasClass("hide-background")&&t.removeClass("hide-background")):t.hasClass("loaded")?t.removeClass("hide-background"):
p.loadImageAsynchronously(g,function(){$(g,i);t.addClass("loaded")});return t}function Z(a,b,c,d){a=E(a,b);if(a==-1)return-1;c=D.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+c+" maintain-height");d=fa(a,!1,d);c.find(".placeHolder").replaceWith(d);D.find(".list").append(c);p.loadImageManually(c.find(".a-dynamic-image"));return c}function fa(c,d,e){var g,i,j="",j=p.getMaxDimensionsOfMainImage();a.each(c.main,function(a,c){g||(g=a);b.shouldApplyResizeFix?
c[1]>0&&parseFloat(c[0]/c[1])<parseFloat(b.holderRatio)&&!i?i="a-stretch-vertical":i||(i="a-stretch-horizontal"):c[1]>0&&parseFloat(c[0]/c[1])<=parseFloat(b.holderRatio)&&!i?i="a-stretch-vertical":i||(i="a-stretch-horizontal")});var k=" a-dynamic-image ";k+=d?"slateImage":i;var l;b.useStretchyImageFix?(d=p.getMaxHeightOfMainImage(c.main),l=p.getMaxWidthOfMainImage(c.main)):(d=L.height(),l=L.width());j&&typeof j!=="undefined"&&(l=Math.min(j[0],l),d=Math.min(j[1],d));j="max-height: "+d+"px; max-width: "+
l+"px;";d=a("<div />");d.attr({"data-a-dynamic-image":JSON.stringify(c.main),"data-old-hires":c.hiRes,"class":k,"data-a-manual-replacement":"true",style:j,onload:typeof e!="undefined"?e:""});return d}function za(b){a("input#show-immersive-view-on-softlines").val()=="true"&&n.postCountMetric("SoftlinesImmersiveViewOnPC");ua(b)}function ua(c,d){if(b.useIV||d){n.postCountMetric("dppc_immersiveViewOpened");if(I)ga.volume=I.getVolume(),I.pause();b.isAUIPopoverEnabled?a("#auiImmersiveViewDiv").click():
i.iVController(c,b,p,d,b.isAUIPopoverEnabled)}}function y(){x&&(x.destroy(),x=void 0)}function na(){b.useHoverZoom&&u.when("imageMagnifier").execute(function(){var a={adjustment:[0,0,1,1],generalImageUrls:b.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:b.useHoverZoomIpad,useHoverZoom:b.useHoverZoom,logMetrics:null,isUDP:b.isUDP,burjImageBlock:b.burjImageBlock,useClickZoom:b.useClickZoom,zoomOutIcon:b.staticImages.zoomOutCur,isSoftlinesEnhancedHoverZoom:b.isSoftlinesEnhancedHoverZoom};
y();var c=D.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");c.length>0&&(b.useClickZoom?(c.one("click.loadmagnifier touchstart.loadmagnifier",function(b){x=c.amazonMagnifier(a);x.engageMagnifier(b,!0)}),H?c.css("cursor",'url("'+b.staticImages.zoomInCur+'"), auto'):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor","zoom-in"))):x=c.amazonMagnifier(a))})}var ra=navigator.userAgent.match(/cloud9|android|silk-accelerated/i),H=navigator.userAgent.match(/msie|trident/i);
b.useHoverZoom=b.useHoverZoom&&!ra;var x;k=b.defaultColor;F="image";g=0;N=0;l="MAIN";var C=b.colorImages,S=b.heroImage,D=a("#imageBlock .canvas"),L=a("#main-image-container"),t=a("#heroImage"),p=e.init(b),Q=b.mainImageSizes,s=a("#imageBlock #altImages ul"),ka=b.useChromelessVideoPlayer,aa=navigator.userAgent.match(/ipad/i),M=!0,v=m.preloadingMainBlockForSoftlines&&m.preloadingMainBlockForSoftlines===!0,va=m.isAltImageAutoCycleEnabled&&m.isAltImageAutoCycleEnabled===!0,I,ga=b.airyConfig,T=function(){var b=
a("<div></div>").attr("id","main-video-container"),c=a("<div></div>").attr("id","video-outer-container");b.prependTo(c);return ka?b:b.addClass("chromeful-container")}(),xa,sa=!1,pa=!1;b.isDebug&&window.console&&console.log(b);(function(){T.parent().prependTo(L);A();u.when("dpf").execute(G);typeof amznJQ!=="undefined"&&amznJQ.available("dpf",G);a(window).resize(d);c.on("image-block-select-thumbnail",function(a){a&&(a.length<=0||(aa?a.click():a.mouseover()))});ha(k,!0);U();b.autoplayVideo?c.trigger("image-block-select-thumbnail",
s.find("img:last")):c.trigger("image-block-select-thumbnail",s.find("img:first"));ma()})()}(e,X)});u.now().register("postMetric",function(){return{postCountMetric:function(c){if(typeof c!=="undefined"){var a=window.ue;if(a){var u=a.count(c)||0;a.count(c,u+1)}}}}})})})(function(){var u=window.AmazonUIPageJS||P,c=u.attributeErrors;return c?c("ImageBlockJSAssets"):u}());