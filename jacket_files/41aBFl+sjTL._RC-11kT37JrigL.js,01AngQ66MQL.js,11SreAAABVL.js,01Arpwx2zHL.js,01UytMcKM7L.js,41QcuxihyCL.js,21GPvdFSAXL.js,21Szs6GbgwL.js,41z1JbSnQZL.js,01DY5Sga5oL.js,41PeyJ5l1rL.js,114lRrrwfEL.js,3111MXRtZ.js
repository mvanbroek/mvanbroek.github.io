(function(l,k,o){l.execute(function(){l.when("jQuery","A","p13n-sc-call-on-visible","p13n-sc-util","p13n-sc-math","p13n-sc-lazy-image-loader").register("p13n-sc-list",function(e,f,i,h,g,n){function j(b){var a=this;a.$container=e(b);if(a.$container.attr(c))return!1;a.$container.attr(c,!0);f.state("sims-list",{initialized:"true"});a.$cellListContainer=a.$container.find(".p13n-sc-list-cells-container");a.$cellList=a.$container.find(".p13n-sc-list-cells");a.$buttons=a.$container.find(".p13n-sc-list-show-more-buttons");
a.$showMoreButton=a.$container.find(".p13n-sc-list-button-show-more");a.$hideButton=a.$container.find(".p13n-sc-list-button-hide");a.$showMorePartialOverlay=a.$container.find(".p13n-sc-list-partial-overlay");a.asins=a.$container.data("asins").toString().split(",");a.asinIndex=a.$container.data("asin-index");a.numVisibleRows=d;a.originalItemWidth=a.$cellListContainer.find(".p13n-sc-list-item:first-child").outerWidth(!0);a.originalCellMarginLeft=parseInt(a.$cellListContainer.find(".p13n-sc-list-item").css("margin-left"),
10);a.initialCellContainerHeight=0;a.isInitialLoad=!0;a.calculateColumns();a.adjustColumnWidths();a.fillVisibleProductSlots();a.placeOverlay();a.configureButtons();a.$buttons.removeClass("a-hidden");a.$showMoreButton.bind("click",function(b){a.showMoreWasTapped(b)});a.$showMorePartialOverlay.bind("click",function(b){a.showMoreWasTapped(b)});a.$showMorePartialOverlay.hover(function(){a.$showMoreButton.addClass("p13n-sc-list-buttons-hover")},function(){a.$showMoreButton.removeClass("p13n-sc-list-buttons-hover")});
a.$showMoreButton.hover(function(){a.$showMoreButton.addClass("p13n-sc-list-buttons-hover")},function(){a.$showMoreButton.removeClass("p13n-sc-list-buttons-hover")});a.$hideButton.hover(function(){a.$hideButton.addClass("p13n-sc-list-buttons-hover")},function(){a.$hideButton.removeClass("p13n-sc-list-buttons-hover")});a.$hideButton.bind("click",function(b){a.hideWasTapped(b)});e(k).bind("resize.p13n-sc-list",function(){a.handleResize()});n.loadImages(a.$container);f.trigger("p13n-sc-list:init",a.$container)}
var c="data-p13n-sc-list-initialized",d=2;j.prototype={hasAdditionalProducts:function(){return this.asins.length>this.asinIndex+1},loadAdditionalProducts:function(b){var a=this;if(!a.isLoadingProducts&&a.hasAdditionalProducts()){a.isLoadingProducts=!0;a.$container.attr("data-p13n-sc-list-loading",!0);for(var c=[],d=a.asinIndex+1;d<=a.asinIndex+b&&d<a.asins.length;d++)c.push(this.asins[d]);(b=this.$container.data("ajax-params"))||(b={faceoutTemplateClass:this.$container.data("faceout-template-class"),
widgetTemplateClass:this.$container.data("widget-template-class"),reftagPrefix:this.$container.data("reftag-prefix"),suppressCurrencyImageFormat:this.$container.data("suppress-currency-image-format"),imageWidth:a.$container.data("image-width")||"",imageHeight:a.$container.data("image-height")||"",auiDeviceType:a.$container.data("aui-device-type")});b.lazyLoadImages=1;b.asins=c.join();b.offset=this.asinIndex+1;d=a.$container.data("ajax-url");f.get(d,{params:b,success:function(b){a.handleAjaxComplete(b,
c.length)},error:function(){a.handleAjaxError(c.length)}})}},handleAjaxComplete:function(b,a){this.asinIndex+=a;this.hideLoadingAnimation();if(b&&e.isArray(b)&&b.length>0){var c=e(b.join(""));this.$cellList.append(c);n.loadImages(c)}else h.log.error("List View partial endpoint returned an item that was not an array of cells.");this.isLoadingProducts=!1;this.$container.attr("data-p13n-sc-list-loading",!1);this.showMorePending=!1;this.adjustColumnWidths();this.placeOverlay();this.isInitialLoad||this.fillNextProductSlots()},
handleAjaxError:function(){h.count("p13n:sc:list:desktop:ajax-error",(h.count("p13n:sc:list:desktop:ajax-error")||0)+1);this.hideLoadingAnimation();this.isLoadingProducts=!1;this.$container.attr("data-p13n-sc-list-loading",!1);if(this.showMorePending)this.numVisibleRows=g.max(d,this.numVisibleRows-3),this.animateClosed(this.getCellContainerHeights().cellContainerHeight),this.showMorePending=!1},visibleSlotsAreFilled:function(){return g.min(this.numVisibleRows*this.numColumns,this.asins.length)-(this.asinIndex+
1)<=0},fillVisibleProductSlots:function(){var b=g.min(this.numVisibleRows*this.numColumns,this.asins.length)-(this.asinIndex+1);if(b>0&&!this.isLoadingProducts){for(var a=0;a<b;a++)this.addLoadingAnimation();this.loadAdditionalProducts(b)}},fillNextProductSlots:function(){var b=g.min(3*this.numColumns,this.asins.length-(this.asinIndex+1))-(this.asinIndex+1);if(b>0&&!this.isLoadingProducts){for(var a=0;a<b;a++)this.addLoadingAnimation();this.loadAdditionalProducts(b)}},handleResize:function(){this.calculateColumns();
this.adjustColumnWidths();this.fillVisibleProductSlots();this.placeOverlay();this.configureButtons();f.trigger("p13n-sc-list:resize",this)},calculateColumns:function(){var b=this.$cellListContainer.width();this.numColumns=g.floor(b/this.originalItemWidth);this.cellMarginLeft=this.originalCellMarginLeft+(g.floor((b-this.originalItemWidth*this.numColumns)/this.numColumns)-5)},getNumPossibleRows:function(){return g.ceil(this.asins.length/this.numColumns)},adjustColumnWidths:function(){this.$cellListContainer.find(".p13n-sc-list-item").css("margin-left",
this.cellMarginLeft)},getCellContainerHeights:function(){if(this.numVisibleRows>=this.getNumPossibleRows()&&!this.isInitialLoad)return{cellContainerHeight:this.$cellList.height(),lastRowPixels:0};for(var b=this.$cellList.children(),a=b.first().offset().top,c=0,d=0,f=0,e=0;e<b.length;e++){var j=b.eq(e).offset().top,g=b.eq(e).outerHeight(!0);if(j>a){c+=1;if(c===this.numVisibleRows)break;d+=f;f=g;a=j}else g>f&&(f=g)}c>=this.numVisibleRows||c>=1&&(this.hasAdditionalProducts()||this.isInitialLoad)?(b=
d+55,a=55):(b=d+f,a=0);return{cellContainerHeight:b,lastRowPixels:a}},placeOverlay:function(){var b=this.getCellContainerHeights();this.cellContainerHeight=b.cellContainerHeight;this.$cellListContainer.css({height:this.cellContainerHeight,overflow:"hidden"});this.$showMorePartialOverlay.css({height:b.lastRowPixels,top:-b.lastRowPixels})},showMoreWasTapped:function(){this.isInitialLoad=!1;f.trigger("p13n-sc-list:show-more",this);h.count("p13n:sc:list:desktop:show-more",(h.count("p13n:sc:list:desktop:show-more")||
0)+1);this.numVisibleRows=g.min(this.numVisibleRows+3,this.getNumPossibleRows());if(!this.visibleSlotsAreFilled())this.showMorePending=!0,this.fillVisibleProductSlots();this.animateOpen(this.getCellContainerHeights().cellContainerHeight)},hideWasTapped:function(){h.count("p13n:sc:list:desktop:hide",(h.count("p13n:sc:list:desktop:hide")||0)+1);this.numVisibleRows=d;this.animateClosed(this.getCellContainerHeights().cellContainerHeight)},animateOpen:function(b){var a=this;f.animate(a.$cellListContainer,
{height:b},1E3,"cubic-bezier(0.86, 0, 0.07, 1)",function(){a.configureButtons();a.placeOverlay()})},animateClosed:function(b){var a=this;a.$cellListContainer.animate({height:b},{duration:500,queue:!1,complete:function(){a.configureButtons();a.placeOverlay()}});e("html, body").animate({scrollTop:a.$container.offset().top+b+a.$buttons.outerHeight()-e(k).height()+150},{duration:500,queue:!1})},addLoadingAnimation:function(){this.$cellList.append(e('<div class="sims-show-hide p13n-sc-list-item p13n-sc-list-loader a-manually-loaded" style="right: 0px;"></div>'))},
hideLoadingAnimation:function(){this.$cellListContainer.find(".p13n-sc-list-loader").remove()},isAtMaxHeight:function(){return this.numVisibleRows>=this.getNumPossibleRows()},isAtMinHeight:function(){return this.numVisibleRows<=d},configureButtons:function(){var b=this.getNumPossibleRows(),a=2;b===1||b===d&&!this.isInitialLoad?a=3:this.isAtMinHeight()?a=0:this.isAtMaxHeight()&&!this.isLoadingProducts&&(a=1);this.setButtonState(a);this.$buttons.width(this.$cellListContainer.innerWidth())},setButtonState:function(b){this.buttonState=
b;this.$buttons.removeClass("p13n-sc-both-state p13n-sc-show-more-state p13n-sc-hide-state");b===0?(this.$buttons.addClass("p13n-sc-show-more-state"),this.$buttons.show()):b===1?(this.$buttons.addClass("p13n-sc-hide-state"),this.$buttons.show()):b===2?(this.$buttons.addClass("p13n-sc-both-state"),this.$buttons.show()):b===3&&this.$buttons.hide()}};f.on("afterReady",function(){e(".p13n-sc-list").each(function(b,a){new j(a)})});f.state.bind("sims-list",function(){e(".p13n-sc-list").each(function(b,
a){new j(a)})});return j});l.when("A","jQuery","p13n-sc-call-on-visible","p13n-sc-logger","afterReady").execute("sims-list-logger",function(e,f,i,h){function g(e){i.register(e,function(){h.logAsyncAction(f.extend(!0,{},{featureElement:e,isEventComplete:function(){return!e.attr(n)},replicateAsinImpressions:!0},{action:"view"}))})}var n="data-p13n-sc-list-loading";f(".p13n-sc-list").each(function(e,c){var d=f(c);d.attr("data-p13n-sc-list-initialized")&&g(d)});e.on("p13n-sc-list:init",function(e){g(e)});
e.on("p13n-sc-list:show-more",function(e){h.logAsyncAction(f.extend(!0,{},{featureElement:e.$container,isEventComplete:function(){return!e.isLoadingProducts},replicateAsinImpressions:!0},{action:"show_more"}))});e.on("p13n-sc-list:resize",function(e){e.$container.attr("data-p13n-sc-list-initialized")&&h.logAsyncAction(f.extend(!0,{},{featureElement:e.$container,isEventComplete:function(){return!e.isLoadingProducts},replicateAsinImpressions:!0},{action:"resize"}))})});l.when("jQuery","A").execute("sims-bind-parse-aui",
function(e,f){function i(){var g=f.parseJSON;f.each(e('script[type="a-state"]'),function(i){i=e(i);if(!i.data("a-eval")){var j=i.attr("data-a-state");if(j&&(j=g(j),j.key&&e.inArray(j.key,h)!==-1)){var c=g(i.html());f.state.replace(j.key,c);i.data("a-eval",!0)}}})}var h=["sims-fbt","sims-list","view_to_purchase-sims-weblab-state"];f.on("a:pageUpdate",function(){i()})});(function(){l.when("jQuery","A","p13n-sc-line-truncator").register("sims-carousel-truncation",function(e,f,i){for(var e=["purchase",
"session"],h=e.length-1;h>=0;h--)f.on("a:carousel:"+e[h]+":change:animating",function(e){i.truncateLines(e.carousel.dom.$container)}),f.on("a:carousel:"+e[h]+":change:loading",function(e){i.truncateLines(e.carousel.dom.$container)}),f.on("a:carousel:"+e[h]+":change:pageSize",function(e){i.truncateLines(e.carousel.dom.$container)})})})(k,document,k.ueLogError);l.when("jQuery","A","a-checkbox","p13n-sc-util","p13n-sc-call-on-visible","p13n-sc-logger").register("sims-fbt",function(e,f,i,h,g,l){function j(c){var d=
this,b=c.data("sims-fbt-instance");if(b)return b;c.data("sims-fbt-instance",d);d.hasLazyInitialized=!1;e(".sims-fbt-checkbox input").show();d.$fbtRootElement=c;d.$detailsLinkText=d.$fbtRootElement.find(".sims-fbt-details-link a");d.auiCheckboxes=[];b=this.$fbtRootElement.find("div.sims-fbt-checkbox");this.numOfItems=b.length;for(var a=0;a<this.numOfItems;a++)this.auiCheckboxes[a]=i(b[a]),this.auiCheckboxes[a].check();f.declarative.remove(d.$detailsLinkText,"details-link-click");f.declarative.remove(e(".sims-fbt-details-help-link"),
"help-link-click");f.declarative.create(d.$detailsLinkText,"details-link-click");f.declarative.create(e(".sims-fbt-details-help-link"),"help-link-click");var h=e("#sims-fbt-container");g.register(c,function(){l.logAction({featureElement:h,action:"view",replicateAsinImpressions:!0,meta:{numsims:d.numOfItems}})});return d}j.prototype={lazyInitialize:function(){if(!this.hasLazyInitialized){this.$priceBlock=this.$fbtRootElement.find(".sims-fbt-price-box");this.$totalPriceDiv=this.$priceBlock.find(".sims-fbt-total-price");
this.$addToCartButton=this.$priceBlock.find(".sims-fbt-add-to-cart");this.$addToWishlistButton=this.$priceBlock.find(".sims-fbt-add-to-wishlist");this.$sellerInfo=this.$fbtRootElement.find(".sims-fbt-seller-info");this.$detailsText=this.$fbtRootElement.find(".sims-fbt-shipping-details-text");this.haveDetails=this.$detailsText.length!==0;try{this.FBTData=f.state("sims-fbt")}catch(c){h.log.error("[sims-fbt] Unable to find Data Attribute (page state) "+c);return}this.images=[];this.plusSigns=[];for(var d=
0;d<this.numOfItems;d++)this.images[d]=this.$fbtRootElement.find(".sims-fbt-image-"+(d+1)),d>0&&(this.plusSigns[d]=this.$fbtRootElement.find(".sims-fbt-plus-"+(d+1)));this.hasLazyInitialized=!0}},toggleSellerInfo:function(){this.lazyInitialize();var c=this.$sellerInfo.is(":hidden");c||this.$sellerInfo.hide();this.updateSellerText(c);c&&this.$sellerInfo.show(200)},handleCheckboxChange:function(c){var d=c.$declarativeParent,b=c.data,a=parseInt(b.itemNum,10);this.lazyInitialize();this.auiCheckboxes[a-
1].disable();c=this.$priceBlock;this.auiCheckboxes[a-1].isUnchecked()&&(c=c.add(this.handleItemUnchecked(d,b,a)));var e=this;c.fadeOut(function(){e.handleItemChecked(d,b,a)})},handleItemChecked:function(c,d,b){this.updateButtons(c);this.updateTotalPrice(c);this.updateSellerText(this.$sellerInfo.is(":visible"));if(this.findFirstCheckedItem()>=0){d=this.$priceBlock;this.auiCheckboxes[b-1].isChecked()&&(c.find(".sims-fbt-checkbox-label").removeClass("sims-fbt-unselected-item"),c=this.findFirstVisibleItem(),
c>=1&&(b>c?d=d.add(this.plusSigns[b-1]):b<c&&(d=d.add(this.plusSigns[c-1]))),d=d.add(this.images[b-1]));var a=this;d.fadeIn(function(){a.auiCheckboxes[b-1].enable()})}else this.auiCheckboxes[b-1].enable()},handleItemUnchecked:function(c,d,b){c.find(".sims-fbt-checkbox-label").addClass("sims-fbt-unselected-item");c=this.images[b-1];b>1&&(c=c.add(this.plusSigns[b-1]));b=this.findFirstCheckedItem();b>1&&(c=c.add(this.plusSigns[b-1]));return c},findFirstVisibleItem:function(){for(var c=1;c<=this.numOfItems;c++)if(this.images[c-
1].is(":visible"))return c;return-1},findFirstCheckedItem:function(){for(var c=1;c<=this.numOfItems;c++)if(this.auiCheckboxes[c-1].isChecked())return c;return-1},updateButtons:function(){for(var c=this.getOfferListingIDsSeletected(),d=1,b="preOrderText",a=c.length-1;a>=0;a--)if(!this.FBTData.itemDetails[c[a]].isPreorder){b="addToCartText";d=0;break}d?this.$addToCartButton.removeClass("a-button-primary").addClass("a-button-preorder"):this.$addToCartButton.removeClass("a-button-preorder").addClass("a-button-primary");
c.length>=1?(this.$addToCartButton.find(".a-button-text").text(this.FBTData[b][c.length]),this.$addToCartButton.attr("disabled")&&(this.$addToCartButton.removeClass("a-button-disabled"),this.$addToCartButton.removeAttr("disabled")),this.$addToWishlistButton.find(".a-button-text").text(this.FBTData.addToWishListText[c.length]),this.$addToWishlistButton.attr("disabled")&&(this.$addToWishlistButton.removeClass("a-button-disabled"),this.$addToWishlistButton.removeAttr("disabled"))):(this.$addToCartButton.find(".a-button-text").text(this.FBTData.addToCartText[1]),
this.$addToCartButton.addClass("a-button-disabled"),this.$addToCartButton.attr("disabled","disabled"),this.$addToWishlistButton.find(".a-button-text").text(this.FBTData.addToWishListText[1]),this.$addToWishlistButton.addClass("a-button-disabled"),this.$addToWishlistButton.attr("disabled","disabled"))},updateTotalPrice:function(){var c=this.getOfferListingIDsSeletected(),d=0,b=0,a=0,e=0;if(c.length===0)this.$totalPriceDiv.hide();else{for(var f=0;f<c.length&&!e;f++){if(this.FBTData.itemDetails[c[f]].doesMAPPolicyApply){e=
1;break}else isFinite(this.FBTData.itemDetails[c[f]].price)&&(d+=parseFloat(this.FBTData.itemDetails[c[f]].price,10));isFinite(this.FBTData.itemDetails[c[f]].points)&&(b+=parseInt(this.FBTData.itemDetails[c[f]].points,10),a+=parseFloat(this.FBTData.itemDetails[c[f]].pointsValue,10))}this.$totalPriceDiv.show();c=this.$totalPriceDiv.find(".sims-fbt-total-price-value");e?(c.html(this.FBTData.MAPText),c.removeClass("a-color-price").addClass("sims-fbt-map-text").addClass("a-size-base")):(e=this.FBTData.currencySymbol,
e+=this.formatPrice(d),c.html(e),c.removeClass("sims-fbt-map-text").addClass("a-color-price").removeClass("a-size-base"));e=this.$totalPriceDiv.find(".sims-fbt-points-wrapper");b>0?(d=parseInt(a*100/d+0.5,10),a=e.find(".sims-fbt-points-value"),c=e.find(".sims-fbt-points-percentage"),a.html(b),c.html(d),e.show()):e.hide()}},getOfferListingIDsSeletected:function(){var c=[];e("input",".sims-fbt-checkbox").each(function(){this.checked&&c.push(this.value)});return c},formatPrice:function(c){for(var d=
(c-parseInt(c,10)).toFixed(2),d=d.replace("0.","."),b=parseInt(c,10),a=0;b>0;){var e=b%10,b=parseInt(b/10,10),d=e.toString()+d;a++;a%3===0&&b>0&&(d=","+d)}this.FBTData.currencyCode==="EUR"?(d=d.replace(/,/,"+"),d=d.replace(/\./,","),d=d.replace(/\+/,".")):this.FBTData.currencyCode==="JPY"&&(d=d.replace(".00",""));Math.abs(c)<1&&(d="0"+d);return d},updateSellerText:function(c){var d="",b="",a="",a=0;if(this.haveDetails){for(b=1;b<=this.numOfItems;b++)this.auiCheckboxes[b-1].isChecked()&&(d+=b,a++);
b=a===0?this.getString("noDetails"):a===1?"":this.FBTData.shippingDetails[d]==="seller"?this.getString("differentSellers"):this.FBTData.shippingDetails[d]==="availabilityone"?this.getString("differentAvailabilityOne"):this.FBTData.shippingDetails[d]==="availabilitysome"?this.getString("differentAvailabilitySome"):"";a=a===0?"":b===""?this.getString(c?"hideDetailsLong":"showDetailsLong"):this.getString(c?"hideDetails":"showDetails");b!==this.$detailsText.text()&&this.$detailsText.text(b);a!==this.$detailsLinkText.text()&&
this.$detailsLinkText.text(a)}},getString:function(c){return this.FBTData&&this.FBTData.fbtStrings?this.FBTData.fbtStrings[c]:o}};(function(){function c(){return e("#sims-fbt-content").data("sims-fbt-instance")}function d(){var b=e("#sims-fbt-content");b.length&&new j(b)}f.declarative("help-link-click","click",function(b){b.$event.preventDefault();k.open(b.$event.target.href,"AmazonHelp","width=550,height=550,resizable=1,scrollbars=1,toolbar=0,status=0").focus();return!1});f.declarative("details-link-click",
"click",function(b){b.$event.preventDefault();(b=c())&&b.toggleSellerInfo()});f.declarative("fbt-checkbox-click","change",function(b){var a=c();a&&a.handleCheckboxChange(b)});f.state.bind("sims-fbt",d);f.on("afterReady",d)})();return j});l.when("jQuery","A","p13n-sc-call-on-visible").execute("sims-client-side-weblab",function(e,f,i){function h(f){var c=0,d={cache:!0,crossDomain:!1,data:e.param(f,!1),error:function(a){a=a.status||0;c>=3||a>=400&&a<500||setTimeout(b,200*Math.pow(2,c))},global:!1,url:"/gp/similarities/record.html"},
b=function(){c+=1;e.ajax(d)};b()}function g(e){return function(){var c=f.state(e);c&&h(c)}}function l(){f.map({"view_to_purchase-sims-feature":"view_to_purchase-sims-weblab-state"},function(f,c){var d=e("#"+c);d.length>0&&d.data("callOnVisibleInitialized")!=="true"&&(d.data("callOnVisibleInitialized","true"),i.register(d,g(f)))})}f.on("ready a:pageUpdate",function(){l()})});l.when("A","jQuery","p13n-sc-call-on-visible","p13n-sc-logger").execute("sims-vtp-logger",function(e,f,i,h){var g=f(".vtp-container");
g.length>0&&i.register(g,function(){h.logAction({featureElement:g,action:"view",replicateAsinImpressions:!0})})});(function(e){l.when("jQuery","A","p13n-sc-line-truncator","p13n-sc-util","p13n-sc-lazy-image-loader","a-carousel-framework").register("p13n-sc-ag-checkbox-carousel",function(f,i,h,g,l,j){i.declarative("filterCoRCheckbox-change","change",function(c){c.$event.preventDefault();var d=c.$target,b=d.prop("checked");if(c.$declarativeParent){var a=c.$declarativeParent.closest(".a-carousel-container");
if(a.length!==0){if(e.ue&&e.ue.count){var k=b?"p13n:sc:ag:static-list:checkbox:checked":"p13n:sc:ag:static-list:checkbox:unchecked";e.ue.count(k,(e.ue.count(k)||0)+1)}var p=a.data("filtered-amazon-global-asins").toString().split(","),q=a.data("asins").toString().split(",");a.data("should-filter-amazon-global-asins",b?1:0);var m=j.getCarousel(a),k=m.getAttr("pageSize"),k=b?p.slice(0,k):q.slice(0,k),r=a.data("aCarouselOptions").ajax.params,o=a.data("aCarouselOptions").ajax.url;f.extend(r,{asins:k.join(","),
offset:0});d.prop("disabled",!0);a.find('.p13n-sc-ag-filter-checkbox [name="filterCoRCheckbox"]').addClass("aok-hidden");a.find(".p13n-sc-ag-filter-checkbox .a-checkbox-label").addClass("p13n-sc-ag-filter-checkbox-loading");a.find(".p13n-sc-ag-filter-spinner").removeClass("aok-hidden");i.ajax(o,{method:"post",params:r,success:function(c){if((c=c.data)&&f.isArray(c)&&c.length>0){var e=a.find(".a-carousel");e.empty();for(var g=b?p:q,i=g.length,j=0;j<c.length;j++){var k=f(m.getEmptyCard(j+1,i));k.removeClass("a-carousel-card-empty").addClass("a-float-left");
k.html(c[j]);e.append(k)}h.truncateLines(a);l.loadImages(a);c=m.getAttr("ajax");c.id_list=g;m.setAttr("ajax",c);m.setAttr("set_size",c.id_list.length);m.gotoPage(1);m.strategies.display.repaint(m);a.find(".p13n-sc-amazon-global-error-alert").addClass("aok-hidden");a.find(".p13n-sc-ag-filter-spinner").addClass("aok-hidden");a.find(".p13n-sc-ag-filter-checkbox .a-checkbox-label").removeClass("p13n-sc-ag-filter-checkbox-loading");a.find('.p13n-sc-ag-filter-checkbox [name="filterCoRCheckbox"]').removeClass("aok-hidden");
d.prop("disabled",!1)}},error:function(){b=!b;c.$target.prop("checked",b);a.find(".p13n-sc-amazon-global-error-alert").removeClass("aok-hidden");a.find(".p13n-sc-ag-filter-spinner").addClass("aok-hidden");a.find(".p13n-sc-ag-filter-checkbox .a-checkbox-label").removeClass("p13n-sc-ag-filter-checkbox-loading");a.find('.p13n-sc-ag-filter-checkbox [name="filterCoRCheckbox"]').removeClass("aok-hidden");d.prop("disabled",!1);g.log.error("[p13n-sc-ag] List View partial endpoint for filtered AmazonGlobal ASINs had an error or returned an empty list of cells.")}})}}})})})(k,
document)})})(function(){var l=window.AmazonUIPageJS||window.P,k=l._namespace||l.attributeErrors;return k?k("SimilaritiesUDPTransistionAssets"):l}(),window);
/* ******** */
(function(e){e.execute(function(){e.when("jQuery","cf").register("beauty-recommendations-cf",function(a){function c(d,b){for(var q="bRec"+(d?"Vert":"Horiz")+"ImgHolder",h,e,c=0;c<f;c++)h=q+c,h=a("#"+h),e=a("#bRecImg"+c),b?n(e,b[c],h):e.detach().appendTo(h)}function e(d){for(var d="bRec"+(d?"Vert":"Horiz")+"CheckHolder",b,c,h=0;h<f;h++)b=d+h,b=a("#"+b),c=a("#bRecCheckOuter"+h),c.detach().appendTo(b)}function i(a,d){var b,c;b=d.offset();c=a.offset();return{top:c.top-b.top,left:c.left-b.left}}function n(a,
d,c){b.css("position","relative");a.css("left",d.left);a.css("top",d.top);a.css("position","absolute");a.detach().appendTo(b);setTimeout(function(){var d=i(c,b);a.animate({left:d.left,top:d.top},250,"swing")},1);setTimeout(function(){a.detach().appendTo(c);a.css("position","static");b.css("position","static")},400)}function l(){for(var d,c=[],e=0;e<f;e++)d=a("#bRecImg"+e),d=i(d,b),c.push(d);return c}var f,b,j,k,d,o,m,g;return{init:function(){f=a(".bRecVerticalContent").length;b=a("#beautyRecommendations");
j=a("#bRecHorizontalView");k=a("#bRecVerticalView");d=a("#bRecToggle");o=a("#useWithDot");m=!0;g=!1;if(f>1){k.hide();m=!1;j.show();g=!0;c(!1,null);e(!1);for(var i=0;i<f;i++)a("#bRecCheckbox"+i).prop("checked",!0);d.css("visibility","visible");d.click(function(d){a.get(a(this).data("foresterurl"));var b=l();g?(j.hide(),g=!1,k.fadeIn(400,function(){m=!0}),c(!0,b),e(!0)):m&&(k.hide(),m=!1,j.fadeIn(400,function(){g=!0}),c(!1,b),e(!1));d.preventDefault()});o.click(function(){d.click()})}}}});e.when("A",
"jQuery","ready").register("beauty-recommendations-ready",function(a,c){function e(a){switch(a){case 0:return b.bRecCart1;case 1:return b.bRecCart2;case 2:return b.bRecCart3;case 3:return b.bRecCart4;default:return b.bRecCart1}}function i(a){switch(a){case 0:return b.bRecWish1;case 1:return b.bRecWish2;case 2:return b.bRecWish3;case 3:return b.bRecWish4;default:return b.bRecWish1}}function n(a){switch(a){case 0:return b.bRecPrice1;case 1:return b.bRecPrice2;case 2:return b.bRecPrice3;case 3:return b.bRecPrice4;
default:return b.bRecPrice1}}function l(){for(var a=0,b,f,g=0;g<j;g++)f=c("#bRecImg"+g),(b=c("#bRecCheckbox"+g).prop("checked"))?(a++,f.removeClass("bRecDisabled")):f.addClass("bRecDisabled");c("#bRecAddToCart").find("span.a-button-text").text(e(a));c("#bRecAddToList").find("span.a-button-text").text(i(a));c("#bRecPriceLabel").text(n(a));a="";for(b=0;b<j;b++)a+=c("#bRecCheckbox"+b).prop("checked")?"1":"0";a=parseInt(a,2);a=k[a];c("#bRecPrice").text(a)}var f,b,j,k;return{init:function(){var d=c("#bRecDataDiv").find("script").html();
f=d?c.parseJSON(d):a.state("beautyRecommendations");b=a.state("bRecDynamicStrings");if(f){j=f.numRecommendations;k=f.possibleSums;for(d=0;d<j;d++)c("#bRecCheckbox"+d).change(l);c("#bRecPricePara").removeClass("a-hidden");l()}}}})})})(function(){var e=window.AmazonUIPageJS||window.P,a=e._namespace||e.attributeErrors;return a?a("BeautyRecommendationAssets"):e}(),window);
/* ******** */
(function(a){a.execute(function(){a.when("A","a-carousel-framework","a-carousel-ajax-standard").register("AmazonClicks",function(a,o,m){var n=a.extend([],m);n.getItems=function(a,b,c){var g=a.getAttr("pageNumber");a.getAttr("pageSize");var f=a.getAttr("fetchedItems"),k=JSON.parse("["+a.getAttr("initialSeenAsins")+"]"),h="[",e;for(e=0;e<k.length;e++)h+='"'+k[e]+'",';h=h.substring(0,h.length-1);for(e=0;e<f.length;e++)typeof f[e]==="object"&&h.indexOf(f[e].oid)===-1&&(h+=',"'+f[e].oid+'"');h+="]";c.pg=
g;c.tot=a.getAttr("set_size");c.start=c.offset;c.num=c.count;c.cc=g===1?0:c.offset;c.oData=h;m.getItems(a,b,c)};o.registerStrategy("ajax","clicksCustomAjax",n);return{registerFeedbackEvents:function(j,d,c,g,f){var k=!0,h=function(){a.$("#"+d).text(g);k=!1;a.$("."+f).each(function(){a.$(this).show()})},e=function(){a.$("#"+d).text(c);k=!0;a.$("."+f).each(function(){a.$(this).hide()})};a.$("#"+d).click(function(){k?h():e()});a.on("a:carousel:"+j+":change:pageNumber",e);e()},truncateTitles:function(j){a.$("."+
j).each(function(){var d=a.$(this);if(d.css("overflow")==="hidden"){var c=d.html(),g=a.$(this.cloneNode(!0)).hide().css("position","absolute").css("overflow","visible").width(d.width()).height("auto");d.after(g);for(g.html(c);c.length>0&&g.height()>d.height();)c=c.substr(0,c.length-1),g.html(c+"&#133;");d.html(g.html()).height("auto").removeClass(j);g.remove()}})}}})})})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("ProductAdsDetailPageAssets"):a}(),
window);
/* ******** */
(function(b){b.execute(function(){b.when("jQuery","jumpLink").execute(function(b,a){var k=b("#miniATFUDP"),f=0;k.length>0&&(f=k.height()+9);window.isACRJumplLinkAnimated===1?a.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",1E3,f):window.isACRJumplLinkAnimated===2?a.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",1200,f):window.isACRJumplLinkAnimated===3?a.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",
1400,f):window.isACRJumplLinkAnimated===4?a.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",10,f):k.length>0&&(f=k.height()+9,a.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",10,f))});b.when("A","jQuery","ImageBlockATF","jumpLink").register("miniATFUtils",function(l,a,k,f){function u(d){o&&!d||p||(d=(new Date).getTime()-v,d=d<50?50-d:10,o=1,o=0,v=(new Date).getTime(),setTimeout(function(){var d=
m.scrollTop(),b=a("#miniATFUDP");if(b.length>0){var c=w;if(c==="T1"){c=a("#sims_fbt");if(c.length<=0||c.height()<=0)c=a("#buyxgety_feature_div");var g=c,c=Number.MAX_VALUE;if(g&&g.length>0){var i=g.height(),g=g.offset();i&&g&&(c=g.top+i)}c=Math.min(c,y)}else if(c==="T2"){c="#product-details-grid_feature_div,#prodDetails,#important-information_feature_div,#importantInformation,#detail-bullets,#detail_bullets_id,#technical-data,#technicalSpecifications_feature_div,#productDescription,#product-description-iframe,#dpx-btf-hlcx-comparison_feature_div,#HLCXComparisonWidget_feature_div".split(",");
g=Number.MAX_VALUE;for(i=0;i<c.length;i++){var e=a(c[i]);if(e&&e.length>0&&e.height()>0){var h;h=Number.MAX_VALUE;if(e&&e.length>0&&(e=e.offset()))h=e.top;h<g&&(g=h)}}c=Math.min(g,z)-100}else c=void 0;d>c?!q&&b.is(":hidden")&&(b.removeClass("a-hidden"),b.slideDown(A)):(b.slideUp(B),q=0)}},d))}var r=a("#miniATFUDP"),x=a("#miniATFPartialSelection")[0],j=a(".twister-dropdown-highlight")[0];if(!(r.length<=0)){var m,q=0,v=0,o=0,n={},p=0,B=200,A=200,y=1200,z=1700,s=0,w="T1";n.setMiniATFShowHeight=function(a){w=
a};n.setMiniATFScrollUpHeight=function(d){s=0;d==="T1"&&(d=a("#productTitle"),d.length>0&&(d=d.offset())&&(s=d.top-20))};a("body").delegate(".go-to-top","click",function(){a("body, html").animate({scrollTop:s},300);q=1;x&&j&&(a(j).removeClass("transparentTwisterDropdownBorder"),a(j).addClass("highlightTwisterDropdownBorder"));return!1});x&&j&&a(j).click(function(){a(this).addClass("transparentTwisterDropdownBorder");a(this).removeClass("highlightTwisterDropdownBorder")});m=a(window);m.scroll(function(){u(0)});
m.resize(function(){u(1)});var t=0;r.length>0&&(t=r.height()+9,f.bind("#seeMoreDetailsLink",300,t),f.bind("#HLCXComparisonJumplinkLink",300,t));b.when("ImageBlockBTF","imageBlockUtils").execute(function(d){var b=function(h){var c=h.getState().selected_variations;if(c){var b="",f=h.getState().variation_display_labels;a.each(d.visualDimensions,function(a,h){var g=d.gIsNewTwister===1?h:f[h];c[g]&&(b+=" "+c[g])});return b&&b.substring(1)}},f=d.defaultColor,c=f,g=d.landingAsinColor,i,e=a("#miniATF_image");
e.length>0&&(i=e.attr("src"));n.updateMiniATFDiv=function(){p=0;var h=a("#miniATF_image");h.length>0&&i&&h.attr("src",i)};l.on("image-block-twister-swatch-click",function(a,e,l,j){p=1;a=(a=j?j:b(e))&&a!==""?a:f;a===g&&(a=f);a!==c&&(i=(e=a!==f&&a!==g?d:k)&&e.colorImages&&e.colorImages[a]&&e.colorImages[a].length>0&&e.colorImages[a][0]?e.colorImages[a][0].large:null,c=a)})});return n}});b.when("ueCount","jQuery").execute(function(b,a){a("#miniATF_BackToTopLink").click(function(){b.incrementCounterByOne("sl_back_to_top_button_click_count")})})})})(function(){var b=
window.AmazonUIPageJS||P,l=b.attributeErrors;return l?l("CommonDetailPageScripts"):b}());
/* ******** */
(function(a){a.execute(function(){a.when("A","jQuery").register("jumpLink",function(a,c){return{bind:function(a,b,e){try{b=b||1E3,e=e||0,c("body").delegate(a,"click",function(f){try{var g=c(a);if(g.get(0)){var d=g.attr("href");d&&d.charAt(0)==="#"&&c(d).length!==0&&(f.preventDefault(),c("html, body").animate({scrollTop:c(d).offset().top-e},b))}}catch(h){window.ueLogError&&window.ueLogError(h,{logLevel:"FATAL",attribution:"jumpLink",message:"[JumpLink - Error in executing click handler]"})}})}catch(f){window.ueLogError&&
window.ueLogError(f,{logLevel:"FATAL",attribution:"jumpLink",message:"[JumpLink - Error in binding click handler]"})}}}});a.when("A","jQuery").execute(function(a){a.declarative("mySummaryExpander_1","click",function(){var a=document.getElementById("summaryText");if(a)a.style.display=a.style.display==="block"?"none":"block"})})})})(function(){var a=window.AmazonUIPageJS||P,b=a.attributeErrors;return b?b("DetailPageCommonScripts"):a}());
/* ******** */
(function(f){f.execute(function(){f.when("A","jQuery","a-carousel-framework","a-carousel-ajax-standard","ready").execute("bundle-discoverability-widget",function(c,d,j,k){function l(a,h,e){e._=c.now();a.triggerEvent("beforeAjax",{url:h,params:e});c.get(h,{success:function(b){(!b||!b.length)&&f.error("Carousel requires a set_size and none was returned by the fallback AJAX request","a-carousel-ajax-standard","sendRequest");var c=b[0].setSize?b[0].setSize:b.length;a.setAttr(m,c);for(var g=a.getAttr(i),
d;(d=b.pop())!==void 0&&e.offset+b.length<c;)g[e.offset+b.length]=d;if(g.length===c)for(b=c;b<n;++b)g[b]||(g[b]="&nbsp;");e.needSetSize&&a.init();a.setAttr(i,g);a.setAttr(o,!1);a.getAttr(p)>=g.length&&a.strategies.ajax.wantCurrentPage(a);a.triggerEvent("ajaxSuccess",{url:h,params:e})},params:e})}var i="fetchedItems",p="pageSize",m="set_size",o="ajaxLock",n=15,d=c.extend({},k);d.getItems=function(a,d,e){var b=a.getAttr("ajax");a.setAttr("requestTimer",c.delay(l,b.fetch_delay,a,d,e))};d.afterInit=function(a){a.strategies.ajax.wantCurrentPage(a);
a.onChange("pageNumber",function(d,e){var b=a.getAttr("ajax");d>e?(a.strategies.ajax.wantNextPage(a),c.get(b.nextPageReftagUrl,{})):(a.strategies.ajax.wantPrevPage(a),c.get(b.prevPageReftagUrl,{}))})};j.registerStrategy("ajax","bundle-discoverability",d)})})})(function(){var f=window.AmazonUIPageJS||P,c=f.attributeErrors;return c?c("ProductBundleUIAssets"):f}());
/* ******** */
(function(n,e,F){n.execute(function(){n.when("A","a-popover","cf").register("add-to-wish-list",function(c,h){var i,j,k;function o(){f("#wishListDropDown").removeClass("a-button-selected");f("#wishListMainButton").removeClass("a-button-selected")}function d(a){c.state("atwl",f.extend(c.state("atwl")||{},a))}function q(){return(c.state("atwl")||{}).dropDownHtml}function s(){d({dropDownHtml:""})}function v(){var a=f("#atwl-dd-ul").parent();if(a&&a.get(0)){var b=a.get(0).scrollHeight,c=a.height(),a=2*
parseInt(a.css("padding-top"),10);return b>c+a}return!1}function n(){return parseInt(f.browser.version,10)<9&&document.body&&document.body.parentElement?!(!document.body.parentElement.scrollLeft&&!document.body.parentElement.scrollTop):!1}function G(a){a.find(".a-button-close").hide();a.find(".a-popover-content").css({"margin-right":"0px"});a.css({padding:"0"});a.find(".a-popover-inner").css({padding:"0"});setTimeout(function(){a.removeClass("a-arrow-bottom");f("#atwl-rich-content").css({"margin-bottom":"0px",
width:"auto"});if(f.browser.msie){var b=c.state("atwl")||{},m=f("#"+b.wishlistButtonSubmitId),b=m.offset(),z=m.height(),m=b.left,b=b.top+z;n()&&(m+=document.body.parentElement.scrollLeft,b+=document.body.parentElement.scrollTop);v()&&(m-=17);a.css({left:m+"px",top:b+"px"})}},50)}function t(){if(w){var a=h.get(w);a&&a.hide()}}function A(a){f("#"+a).children().first().width(i);t();if(h){var b=h.get(w),m=c.state("atwl")||{},b=b?h.get(w):h.create(f("#add-to-wishlist-button-group"),{content:f("#"+a).html(),
name:"atwl",skin:function(a){return a},activate:"onmouseclick",width:i,position:m.dropDownPosition||"triggerBottom"});b.update({width:i,content:f("#"+a).html()});w=b.id;b.show().updatePosition();G(b.$popover)}}function B(){o();H++;t();A("atwl-dd-error-holder")}function Q(){t();var a=c.state("atwl")||{};return H>=a.maxAjaxFailureCount}function I(){var a=c.state("atwl")||{};return h.create(f("#add-to-wishlist-button-group"),{content:q(),name:"atwl",skin:function(a){return a},activate:"onmouseclick",
position:a.dropDownPosition||"triggerBottom"})}function R(a){var b;b=n()?50:0;setTimeout(function(){var b=f("#atwl-popover-inner"),c=b.width();v()?c+=j:f(".atwl-dd-list-name").each(function(){var a=f(this);a.width(a.width()+k)});var g=a.find("ul li a.a-active").first();g.css("margin-left","1px");g.parent().focus();b.width(c)},b)}function S(a){a.update({content:q(),width:"auto"});a.show();G(a.$popover);R(a.$popover)}function J(){var a=h.get("atwl");if(a)if(a.isActive()){a.hide();return}else h.remove(a);
else a=I(),h.remove(a);a=I();S(a);c.capabilities.touch&&setTimeout(function(){var a=f("#wishlistButtonStack"),c=a.clone(),z=a.parent();a.remove();z.append(c)},300)}function x(){var a=h.get("atwl");a&&a.isActive()&&a.hide()}function T(a){o();t();var b;if(typeof a==="object")b=a;else try{b=c.parseJSON(a)}catch(m){B();return}typeof b.html!=="undefined"&&b.css!=="undefined"?(d({dropDownHtml:b.html}),a=b.css,f("body").append(a),J()):B()}function U(a){if(a&&a.promoEnabled){var b=a.html;if(b){var m=h.create(C.parent(),
{name:"kbpPromoPopover",content:b,position:"triggerBottom",width:a.width});m.show().lock();c.delay(function(){var a=(c.state("atwl")||{}).kbpPromo||{};a.mouseOver?a.countDown=!0:(m.unlock().hide(),h.remove(m));c.state("atwl",{kbpPromo:a})},1E4)}}}typeof c.state.parse!=="undefined"&&c.state.parse();var p=c.state("popoverState")||{},D="#"+(p.formId||"addToCart");e.setRegistryId=function(a){var b=f(D);b.find("[name='sourceCustomerOrgListID'],[name='colid'],[name='wlPopCommand']").attr("value",a);b.find("[name='submit.add-to-registry.wishlist'],[name='submit.add-to-wishlist']").eq(0).click();
return!1};var y=[];if(p.showWishListDropDown||p.showBabyRegDropdown||p.isAddToWishListDropDownAuiEnabled||p.showPopover){var f=c.$;if(p.showWishListDropDown||p.showBabyRegDropdown){var u,K=function(){var a=function(a){if(!a.data("wired")){a.data("wired",!0);a[0].name="";if(a.css("cursor")!=="not-allowed"){var b=a.attr("data-type"),c=p.wishlistPopoverWidth;a.amazonPopoverTrigger({ajaxSlideDuration:0,align:"left",cacheable:!0,closeEventInclude:"CLICK_OUTSIDE",destination:"/gp/registry/reglist-popover.html?sprited=0&type="+
b,group:"addToWishlist",loadingContent:"<div style='padding: 4px 28px;'><img src='"+e.AmazonPopoverImages.loadingBar+"'/></div>",location:"bottom",locationElement:"#"+a[0].id,locationOffset:[0,-5],showOnHover:!1,skin:"<div id='wishlist-dropdown-content'><div class='ap_content'></div></div>",width:c,onFilled:function(a){f(document).click();a.width(c);e.wlPop&&setTimeout(function(){e.wlPop.onFill(a);a.width(c)},0)}})}u&&(clearInterval(u),u=F)}},b="#"+p.babyRegistryId;if(!p.isAddToWishListDropDownAuiEnabled){var m=
c.state("atwl")||{};b+=", #"+m.wishlistButtonId}f(b).each(function(){a(f(this))})};K();var r=function(){u&&clearInterval(u);u=setInterval(K,200)};f("#twister").change(r);c.declarative("swatchthumb-action","click",r)}if(p.isAddToWishListDropDownAuiEnabled){var w,H=0,r=c.state("atwl")||{},L=r.wireDeclaratives,M=f("#"+r.wishlistButtonId);M.addClass("a-declarative");M.attr("data-action","atwl-splitbutton-arrow");var C=f("#"+r.wishlistButtonSubmitId);C.addClass("a-declarative");C.attr("data-action","atwl-splitbutton-main");
f("#wishListMainButton").addClass("a-declarative").attr("data-action","add-wishlist-declarative");i=230;j=10;k=10;d({resetDropDownHtml:s});L||(c.declarative("atwl-splitbutton-arrow","click",function(a){a.$event.preventDefault();setTimeout(function(){o()},0);if(a.$target.css("cursor")==="not-allowed")return!1;if(Q())return t(),t(),A("atwl-dd-unavail-holder"),!1;var b=q(),a=c.state("atwl")||{};if(!b||!b.length){A("atwl-dd-spinner-holder");var b=c.state("wishlistDPState")||{},m="website.wishlist.detail.add";
if(typeof b.vendorId!=="undefined")m=b.vendorId;b={sortMethod:a.sortMethod||0,type:"wishlist",useAll:a.showAllTypes||0,sourceVendorId:m};a=a.hzPopover?"/hz/wishlist/addtolist":"/gp/registry/atwl/popover.html";a+="?"+f.param(b);f.ajax({url:a,cache:!1,success:T,error:B})}else J();return!1}),c.declarative("atwl-dd","click",function(a){a.$event.preventDefault();var b=a.data,a=b.id,b=b.type;typeof b==="undefined"&&(b="wishlist");var c="pop_"+a+"_"+b,e=f(D+",#addToWL");e.find("[name='sourceCustomerOrgListID'],[name='colid'],[name='wlPopCommand']").attr("value",
c);e.find("[name='registryID']").attr("value",a);e.find("[name='registryType']").attr("value",b);d({inSubmit:!0});e.find("[name='submit.add-to-registry.wishlist'],[name='submit.add-to-wishlist']").eq(0).click();x();return!1}),c.declarative("atwl-kbp-landing","click",function(a){var b=a.data,a=f(D).find("#ASIN").val(),b=b.url;b+="&asin="+a;e.open(b);return!1}));if((r=c.state("atwl")||{})&&r.sortMethod==="kbp")c.state("atwl",{kbpPromo:{mouseOver:!1,countDown:!1}}),c.ajax("/gp/toys/birthday/atwl-dpx.html",
{method:"get",cache:!1,params:{isAUI:1},success:U,error:function(){}}),L||(c.declarative("atwl-kbp-promo-mouseover","mouseleave",function(){var a=(c.state("atwl")||{}).kbpPromo;a.mouseOver=!1;if(a.countDown){var b=h.get("kbpPromoPopover");b&&(b.unlock().hide(),h.remove(b))}c.state("atwl",{kbpPromo:a})}),c.declarative("atwl-kbp-promo-mouseover","mouseenter",function(){var a=(c.state("atwl")||{}).kbpPromo;a.mouseOver=!0;c.state("atwl",{kbpPromo:a})}),c.on("a:popover:hide:kbpPromoPopover",function(){var a=
h.get("kbpPromoPopover");a.unlock().hide();h.remove(a)}));d({wireDeclaratives:!0})}if(p.showPopover){var N=function(a,b){var f=document.getElementById(p.formId||"addToCart");if(typeof f==="undefined"||f===null)f=document.getElementById("addToWL");var e=[];if(typeof f!=="undefined"&&f!==null){var e=[],g=!1,d=f.elements;d||(d=f.querySelectorAll("input"),g=!0);for(var h=0;h<d.length;h++){var k;if(!(k=g)){k=d[h];var j=/^(?:checkbox|radio)$/i,o=/^(?:submit|button|image|reset|file)$/i,s=/^(?:input|select|textarea|keygen)/i;
if(k){var i=k.type;k=k.name&&!k.disabled&&s.test(k.nodeName)&&!o.test(i)&&(k.checked||!j.test(i))}else k=!1}k&&e.push(d[h])}}g={};d=c.state("wishlistDPState")||{};if(typeof d.asin!=="undefined"&&d.asin!==null)g.asin=d.asin;for(h=0;h<e.length;h++)if(e[h].type!=="submit")g[e[h].name]=e[h].value;g.requestedQty=g.quantity=f!==null&&typeof f.quantity!=="undefined"?f.quantity.value:1;g.sid=typeof g["session-id"]!=="undefined"?g["session-id"]:d.sid;g.cache=!1;g.url=d[a+"Url"];g.action=a;g.type=g.registryType||
"wishlist";if(a==="add")g.type=g.registryType||b,g.caller="aui",g.streaming=d.streaming,g.sourceVendorId=typeof d.vendorId!=="undefined"?d.vendorId:"website.wishlist.detail.add";else if(a==="create")g.create_sid=g.sid,g.create_type=g.registryType||b,g.create_nextAction="add",g.create_includeEmptyList=1,g.create_isFirst=d.isFirstCreate?1:0,g.caller="aui",g.create_sourceVendorId=typeof d.vendorId!=="undefined"?d.vendorId:"website.wishlist.detail.add";return g},E=function(a){var b=a.attr("name"),a=a.parents("form"),
b=f('<input type="hidden" />').attr("name",b).val("1");a.append(f(b));a.submit()},O=function(){var a=f("#add-wishlist-declarative").closest(".a-button").find("input");E(a)};c.capabilities.touch||f("#add-to-wishlist-button-submit").unbind("click").bind("click",function(a){a.preventDefault();if(f(this).css("cursor")==="not-allowed")return!1;var b="",b=c.state("wishlistDPState")||{},d=f("[name='wlPopCommand']").val(),a=e.currentType;if(d&&d!==""){d=d.split("_");a=d[2];if(a!=="wishlist"&&a!=="giftlist"&&
a!=="supplylist"||f("html").hasClass("a-lt-ie9")){O();return}b=d[1]==="new"?"create":d[1]==="default"&&b.isFirstCreate?"create":"add"}else if(a="wishlist",b=b.isFirstCreate?"create":"add",b==="add"&&f("html").hasClass("a-lt-ie9")){O();return}c.state("wishlistDPState",{action:b,type:a});e.currentType=a;f("#add-wishlist-declarative").trigger("click")});var P=function(){for(var a=["wlPopCommand","sourceCustomerOrgListID"],b=0;b<a.length;b++){var c=f('[name^="'+a[b]+'"]');c&&c.length&&c.val("")}};(c.state("wishlistDPState")||
{}).eventsBound||(c.on("a:popover:show:addCreateToWishlist",function(a){var b=a.popover,a=b.$popover,d=c.state("wishlistDPState")||{},h=d.action;a.addClass("pop-huc-"+h);var g=b.$trigger.closest(".a-button").find("input"),a=d.type;g.closest(".a-button-selected").removeClass("a-button-selected");var a=N(h,a),d=a.url,k=a.streaming,j="ajax_"+k,o=new Date;e.ue&&e.uet("tc",j);var i=function(){b.hide();E(g)},s=function(){b.$popover.find("#popover-spinner").addClass("a-hidden");P()},v=function(){e.ue&&(e.uet("be",
j),e.uex("ld",j))},n=function(a,b,c){e.ue&&(e.ues("id",j,a),e.ues("t0",j,b),e.ues("ctb",j,c))};if(h==="create"||!k)c.ajax(d,{method:"post",params:a,success:function(a){a&&a.html?(n(a.requestId,o,"1"),a.status&&a.status==="no-asins"?i():(s(),h==="add"?b.$popover.find("#WLHUC_result").html(a.html).removeClass("a-hidden"):(b.$popover.find("#WLNEW_main").html(a.html).removeClass("a-hidden"),(a=c.state("atwl")||{})&&a.resetDropDownHtml&&a.resetDropDownHtml()),b.updatePosition()),v()):(h==="create"&&E(g),
b.hide())},error:i});else{var l=new XMLHttpRequest;l.open("GET",a.url+"&"+c.$.param(a),!0);l.send(null);var q=0;l.ontimeout=i;l.onerror=i;l.onreadystatechange=function(){try{if(l.readyState>2&&typeof l.status!=="unknown"&&l.status===200&&(typeof l.response!=="undefined"||typeof l.responseText!=="unknown"&&typeof l.responseText!=="undefined")){var a=[];typeof l.response!=="undefined"&&l.response!==null?a=l.response.split(",,,"):typeof l.responseText!=="unknown"&&typeof l.responseText!=="undefined"&&
l.responseText!==null&&(a=l.responseText.split(",,,"));for(var d=q;d<a.length;d++){var h=a[d],g;try{g=c.parseJSON(h)}catch(k){q=d;break}d===0&&g&&g.name==="skeleton"?g&&g.html&&(n(g.requestId,new Date,"1"),g.status&&g.status==="no-asins"?i():(s(),b.$popover.find("#WLHUC_result").html(g.html).removeClass("a-hidden"))):g&&g.name&&g.html&&g.name==="pcomp"?f("#wishListMainButton").hasClass("a-hidden")||(f("#wishListMainButton,#add-to-wishlist-button-group").addClass("a-hidden"),x(),f("#wishlistButtonStack").append(g.html)):
g&&g.name&&g.html&&g.name!=="js"?(b.$popover.find("#"+g.name).html(g.html),d===1&&e.ue&&e.uet("cf",j)):g&&g.html&&b.$popover.find("#WLHUC_result").append(g.html);b.updatePosition()}l.readyState===4&&v()}else typeof l.status!=="unknown"&&l.status!==200&&i()}catch(m){i()}}}}),c.on("a:popover:beforeShow:addCreateToWishlist",function(a){var a=a.popover,b=c.state("wishlistDPState")||{};a.$popover.find("#popover-spinner").css({margin:"10% 40%"});a.$popover.find("#popover-spinner").removeClass("a-hidden");
a.$popover.find(".wlAddCreatePop").html("").addClass("a-hidden");var d=b.action,f=d+"Header";d==="create"&&b.isFirstCreate&&(f="first"+f);a.update({width:b[d+"Width"],header:b[f],height:b[d+"Height"]});a.updatePosition()}),c.on("a:popover:hide:addCreateToWishlist",function(){f(".a-modal-scroller").css({visibility:"hidden"});P()}),c.state("wishlistDPState",{eventsBound:!0}),c.declarative("add-wishlist-declarative",["click"],function(){var a=c.state("wishlistDPState")||{},b=N(a.action,a.type),d=function(){f("#wishListMainButton,#add-to-wishlist-button-group").addClass("a-hidden");
x();f("#atwl-error-holder").removeClass("a-hidden")};f("#atwl-dd-no-title-holder").hasClass("a-hidden")||f("#atwl-dd-no-title-holder").addClass("a-hidden");var e=function(a){try{if(typeof a!=="undefined"){var b="";if(typeof a.pcompHtml!=="undefined"&&a.pcompHtml.trim()!=="")b=a.pcompHtml;else{d();return}f("#wishListMainButton").hasClass("a-hidden")||(f("#wishListMainButton,#add-to-wishlist-button-group").addClass("a-hidden"),x(),f("#atwl-output-holder").empty(),f("#atwl-output-holder").append(b),
f("#atwl-output-holder").removeClass("a-hidden"))}else d();for(b=0;b<y.length;b++)if(typeof y[b]==="function")y[b](a)}catch(c){d()}},g=function(a){var b=document.createElement("input");b.type="hidden";b.id=a;b.name=a;typeof f("#addItemForm")!=="undefined"&&f("#addItemForm").append(b);return b};if((typeof b.asin==="undefined"||b.asin.length===0)&&(typeof b.name==="undefined"||b.name.length===0))f("#atwl-dd-no-title-holder").removeClass("a-hidden");else if(a.custRecognized==="false"){if(a.asin===null){var a=
g("name.0"),b=g("imageUrl.0"),e=g("productUrl.0"),h=g("priceInput"),g=g("quantity.0");a.value=document.getElementById("name").value;b.value=document.getElementById("imageUrl").value;e.value=document.getElementById("productUrl").value;h.value=document.getElementById("price").value;g.value=1}f("#addItemForm").submit()}else c.ajax(b.url,{method:"get",dataType:"json",cache:!1,params:b,success:e,error:d})}))}}return{setPostAddSuccess:function(a){y.push(a)}}});n.when("A","a-modal","ready").execute(function(c,
e){var i=c.$,j=c.state("jumpstart-success-modal-state");j!==F&&!j.showDPHeadJavaScript&&j.showBabyRegSuccessModal&&j.hasBabyReg&&i(document).delegate("#add-to-registry-baby-button-submit","click",function(c){c.preventDefault();c=i("#is-fully-selected-baby-reg").val()==="true";if(typeof c!=="undefined"&&c!==null&&c){var c=i("#ASIN").val(),o=i("#rsid").val(),c={name:"baby-registry-add-success-modal",header:j.addSuccessModalHeader,url:"/gp/baby-reg/utils/RAW/raw-request.html/ref=br_js_asm?update=addSuccess&asin="+
c+"&sid="+o},o=i("#add-to-registry-baby-button-submit");e.create(o,c);e.get(i("#add-to-registry-baby-button-submit")).show()}})});n.when("A","b2b-lists-detail").execute(function(c,e){function i(){var d=c.$(j),e=c.$(k),h=c.$(o),i=1;d.length>0&&d.is(":visible")?(i=d.val(),i.length===0&&(i=e.val())):e.length>0&&e.is(":visible")?i=e.val():h.length>0&&h.is(":visible")&&(i=h.val());return i}if(e.isEnabled()){var j="#free-form-quantity-dropdown",k="#quantity-update-text",o="#quantity";c.on("a:dropdown:selected:quantity",
function(c){e.updateQuantity(c.value)});c.on("a:dropdown:selected:free-form-quantity-dropdown",function(d){d.value.length>0?e.updateQuantity(d.value):e.updateQuantity(c.$(k).val())});c.$(document).delegate(k,"change",function(c){e.updateQuantity(c.target.value)});c.on("a:pageUpdate",function(){var d=c.$("#ASIN").val();e.updateQuantityAndAsin(i(),d)})}});n.when("A","a-modal","ready").register("b2b-lists-detail",function(c,e){function i(){return e.get(c.$("#business-list-modal"))}function j(c,e,d){var h=
RegExp("([?&])"+e+"=.*?(&|$)","i"),j=c;c.match(h)&&(j=c.replace(h,"$1"+e+"="+d+"$2"));return j}return{updateQuantityAndAsin:function(e,h){var d=(c.state("businessListPageState")||{}).businessListUrl;d&&(d=j(d,"quantity",e),d=j(d,"asin",h),i().update({url:d}))},updateQuantity:function(e){var h=(c.state("businessListPageState")||{}).businessListUrl;h&&(e=h=j(h,"quantity",e),i().update({url:e}))},isEnabled:function(){return c.$("#add-business-list-button").length>0}}});n.when("A","a-button","a-modal",
"ready").execute("dpx-modal-add-to-wr-declarative-actions",function(c,h,i){var j=c.$,k=j("#ASIN"),n=j("#quantity"),d=c.state("modal-add-to-wedding-registry-status");if(d&&d.weddingButtonId&&j("#"+d.weddingButtonId).length&&d.userSignedIn&&d.hasWeddingRegistry){var q={name:"wr-modal-add-to-reg-wedding-registry",header:d.modalHeader,url:""};j(document).delegate("#"+d.weddingButtonId,"click",function(c){c.preventDefault();(c=n.val())||(c=1);i.create(j("#"+d.weddingButtonId),q).update({cache:!1,url:"/wedding/modal/external-add-to-registry?asin="+
encodeURIComponent(k.val())+"&quantity="+encodeURIComponent(c)}).show();typeof e.ue!=="undefined"&&e.ue.count("wrAddToRegModalPopup",(e.ue.count("wrAddToRegModalPopup")||0)+1)});c.declarative("wr-modal-add-to-reg-rec-add-to-registry-action","click",function(d){var i=d.data,d=j("#wr-modal-add-to-reg-wrapper").data("token"),k=h("#wr-modal-add-to-reg-add-to-wr-"+i.recItemAsin);k.isEnabled()&&(k.disable(),j("#wr-modal-add-to-reg-rec-product-card-"+i.recItemAsin).data("exist-in-registry")===!0?(k.hide(),
j("#wr-modal-add-to-reg-item-exist-message-"+i.recItemAsin).removeClass("aok-hidden")):(d={items:JSON.stringify([{asin:i.recItemAsin,requestedQuantity:1}]),token:d},c.post("/wedding/registry-items/addItems",{params:d,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(c){k.hide();c.success?j("#wr-modal-add-to-reg-item-added-message-"+i.recItemAsin).removeClass("aok-hidden"):c.errorCode==="ITEM_ALREADY_EXIST"?j("#wr-modal-add-to-reg-item-exist-message-"+i.recItemAsin).removeClass("aok-hidden"):
j("#wr-modal-add-to-reg-item-added-error-"+i.recItemAsin).removeClass("aok-hidden")},error:function(){j("#wr-modal-add-to-reg-item-added-error-"+i.recItemAsin).removeClass("aok-hidden");typeof e.ue!=="undefined"&&e.ue.count("wrAddToRegModalAddFromSimilaritiesError",(e.ue.count("wrAddToRegModalAddFromSimilaritiesError")||0)+1)}})),typeof e.ue!=="undefined"&&e.ue.count("wrAddToRegModalAddFromSimilarities",(e.ue.count("wrAddToRegModalAddFromSimilarities")||0)+1))});c.on("a:popover:beforeHide:wr-modal-add-to-reg-wedding-registry",
function(){typeof e.ue!=="undefined"&&e.ue.count("wrAddToRegModalDismissed",(e.ue.count("wrAddToRegModalDismissed")||0)+1)});c.declarative("wr-modal-add-to-reg-view-registry-action","click",function(){typeof e.ue!=="undefined"&&e.ue.count("wrAddToRegModalViewRegistry",(e.ue.count("wrAddToRegModalViewRegistry")||0)+1);e.location.href="/wedding/organize-registry?ref_=hit_wr_dp_dp_mdl_vr"})}})})})(function(){var n=window.AmazonUIPageJS||window.P,e=n._namespace||n.attributeErrors;return e?e("RegistryDPAssets"):
n}(),window);
/* ******** */
(function(e,k){e.execute(function(){e.when("A","jQuery","softlines-utils","atf").register("looks-data-cache",function(e,d,c){var f=d("#multipleRecommendations"),a=[],b=!1,h=[];if(f.length>0){var k=f.attr("data-ids");if(c.isString(k)&&(e=e.parseJSON(k),d.isPlainObject(e)&&d.isArray(e.recommendations))){for(var e=e.recommendations,q=e.length,k=0;k<q;k++){var g=e[k];if(d.isPlainObject(g)&&d.isArray(g.asins)){var l=g.asins;if(d.isArray(l)){l=l.splice(0,Math.min(4,l.length));g.asins=l;h.push(g);for(var j=
l.length,m=[],g=0;g<j;g++){var i=l[g];d.isPlainObject(i)&&c.isString(i.asin)&&m.push(i.asin)}l=m.join();l=encodeURIComponent(l);a.push(l)}}}q>1&&(b=!0)}}var i=f.attr("data-asin"),n=f.attr("data-injectedViewModel");return{getLooks:function(){return h},getLooksAsins:function(){return a},getAsin:function(){return i},isShovelerArrowsEnabled:function(){return b},getInjectedViewModel:function(){return n}}});e.when("A","jQuery","recommendations-carousel-data","softlines-utils","looks-data-cache","atf").register("complete-the-look-carousel-data",
function(e,d,c,f,a){e=e.extend({},c);e.getProducts=function(){var b=[],c=a.getLooks(),e,k,g=c.length;for(e=0;e<g;e++)if(k=c[e],d.isPlainObject(k)&&d.isArray(k.asins)){var l=k.asins,j=l.length;for(k=0;k<j;k++){var m=l[k];d.isPlainObject(m)&&f.isString(m.asin)&&b.push(m.asin)}}return b};e.getDataSetType=function(){var b=a.getLooks(),c="";if(b.length>0&&(b=b[0],d.isPlainObject(b)&&d.isArray(b.asins)&&(b=b.asins,b.length>0&&(b=b[0],d.isPlainObject(b)&&f.isString(b.asinDataSetType)))))c=b.asinDataSetType;
return c};return e});e.when("jQuery","softlines-utils","looks-data-cache","atf").register("lookFeedback",function(e,d,c){function f(){m.length>0&&j.length>0&&(m.removeClass("visibleFeedbackBlock"),j.removeClass("hidden"),m.addClass("hidden"),j.addClass("visibleFeedbackBlock"));typeof Storage!=="undefined"&&localStorage.setItem(b,g)}function a(a){e.ajax({timeout:l,type:"GET",url:"/gp/softlines/logger/seed/"+k+"/look/"+h+("/ref=ctl_look_"+q+"_vote_"+a),data:{vote:a}})}var b,h,k=c.getAsin(),q,g="1",
l=4E3,j=e("#afterCtlFeedback"),m=e("#beforeCtlFeedback");e("#ctlButtonYes").click(function(){f();a("yes")});e("#ctlButtonNo").click(function(){f();a("no")});return{updateFeedback:function(a){q=a;a-=1;var d=c.getLooksAsins();a>=0&&a<d.length&&(h=d[a]);b=k+h;typeof Storage!=="undefined"&&(a=localStorage.getItem(b),m.length>0&&j.length>0&&(m.removeClass("hiddenFeedbackBlock"),a===g?(m.addClass("hidden"),j.removeClass("hidden"),j.addClass("visibleFeedbackBlock")):(m.removeClass("hidden"),m.addClass("visibleFeedbackBlock"),
j.addClass("hidden"))))}}});e.when("A","metrics-logger").register("csm-metrics-logger",function(e,d){var c=k.ue,f=e.extend({},d);f.addCount=function(a,b){var d=c.count(a)||0;c.count(a,d+b)};return f});e.when("jQuery","softlines-utils","looks-data-cache").register("ob-link-generator",function(e,d,c){return{getOutfitBuilderUrlForPageNumber:function(f){f-=1;var a,b=e("#outfitBuilder"),h=c.getLooksAsins();f>=0&&f<h.length&&b.length>0&&(b=b.data("outfitbuilderurlprefix"),d.isStringNotEmpty(b)&&(a=b+h[f]));
return a}}});e.when("A","jQuery","a-carousel-framework","a-carousel-ajax-standard","complete-the-look-carousel-data","looks-data-cache","softlines-utils","csm-metrics-logger","ob-link-generator","lookFeedback","ready").execute("complete-the-look-ajax",function(e,d,c,f,a,b,h,k,q,g){e=e.extend({},f);e.getItems=function(c,d,e){e.asin=b.getAsin();e.dataSetType=a.getDataSetType();var g=b.getInjectedViewModel();if(h.isStringNotEmpty(g))e.injectViewModel=g;f.getItems(c,d,e)};e.init=function(b){g.updateFeedback(1);
var c=a.getProducts();b.setAttr("ajax",{url:"/gp/product/ajax-handlers/complete-the-look-carousel.html",id_list:c});return f.init(b)};e.afterInit=function(a){f.afterInit(a);var c=b.getLooks(),e=0;if(d.isArray(c))e=c.length;k.addCount("ctl-carousel:shown",1);a.onChange("pageNumber",function(a,b){var c=":back";a>b&&(c=":next");a===e&&b===1&&(c=":back");b===e&&a===1&&(c=":next");g.updateFeedback(a);var f=d("#outfitBuilder");if(f.length>0){var j=q.getOutfitBuilderUrlForPageNumber(a);h.isStringNotEmpty(j)&&
f.attr("href",j)}k.addCount("ctl-carousel:page:"+a+c,1)})};c.registerStrategy("ajax","complete-the-look",e)});e.when("A","jQuery","a-carousel-framework","looks-data-cache","complete-the-look-carousel-data","csm-metrics-logger","ready").execute("complete-the-look-display",function(e,d,c,f,a,b){function h(a){function b(a){a.dom.$viewport.css("height","")}a.onChange(m,function(){a.dom.$carousel.children("li").css("visibility","")});a.onChange(q,function(c,d){c>d&&b(a)});a.onChange("loading",function(c){c||
b(a)});a.onChange(g,function(){b(a)});a.onChange(i,function(b){if(!b){var c=a.getAttr(g)-1,f=c+a.getAttr(q);a.dom.$carousel.children("li").each(function(a,b){var e=a>=c&&a<f;d(b).css("visibility",e?"":"hidden").attr("aria-hidden",e?"false":"true")})}});a.onChange(l+" "+j,function(){this.repaint(a)});a.onChange(j,function(){this.repaint(a)})}var k=0.82,q="pageSize",g="firstVisibleItem",l="single_page_align",j="minimum_gutter_width",m="pageNumber",i="animating",n=d("#recommendations");c.registerStrategy("display",
"complete-the-look",{repaint:function(a){f.isShovelerArrowsEnabled()||(k=1);a.getDimensions();var b=n.width()*k,c=Math.round(b*0.225),d=Math.round(b*0.0125);a.setAttr("currentGutter",0);a.setAttr(q,4);var e=a.dom.$carousel,h=e.children("li"),b=h.length,i=a.getAttr(g)-1,j=i+4,l=c+"px",m="0 "+d+"px";h.each(function(a,b){var c=a>=i&&a<j;b.style.visibility=c?"":"hidden";b.style.width=l;b.style.margin=m;b.setAttribute("aria-hidden",c?"false":"true")});d=h.first().outerWidth(!0);h=b*d;e.removeClass("a-text-right a-text-center");
e.css("width",h+"px");e={carousel:{width:h,outerWidth:e.outerWidth()},items:[]};for(h=0;h<b;h++)e.items.push({width:c,outerWidth:d});a.updateDimensionsCache(e);a.gotoIndex(a.getAttr(g),{animationDuration:0});a.triggerEvent("repaint")},resize:function(a,c){c.viewport&&c.viewport.width!==void 0&&(this.repaint(a),b.addCount("ctl-carousel:resized",1))},init:function(b){var c=f.isShovelerArrowsEnabled(),d=[];c&&(d=a.getProducts());d.length>0&&b.setAttr("set_size",d.length);b.setAttr(j,0);b.setAttr("first_item_flush_left",
!0);this.repaint(b);c&&(c=b.getDimensions(),b.dom.$container.find(".a-carousel-left, .a-carousel-right, .a-carousel-viewport").css("height",Math.max(c.viewport.height,c.items[0]?c.items[0].height:0)+"px"));c=b.getAttr(g);c>1&&(b.setAttr(g,c),c=Math.ceil(c/b.getAttr(q)),b.gotoPage(c));h(b)}})});e.when("jQuery").register("softlines-utils",function(e){function d(c){return e.type(c)!=="undefined"&&e.type(c)!=="null"}function c(c){return d(c)&&e.type(c)==="string"}return{isNotNull:d,isString:c,isStringNotEmpty:function(d){return c(d)&&
d.length>0}}});e.register("metrics-logger",function(){return{addCount:function(){}}});e.register("recommendations-carousel-data",function(){return{getProducts:function(){}}})})})(function(){var e=window.AmazonUIPageJS||window.P,k=e._namespace||e.attributeErrors;return k?k("SoftlinesRecommendationsAssets"):e}(),window);
/* ******** */
(function(e){e.execute(function(){e.when("A","a-popover","ready").execute(function(a,c){a.$("#freeSampleInlineJavascript").length===0&&e.register("sampling-feature",function(){var e,i,n,l,f,b;function j(){var c=a.$("#csxfsSelectedBlock").height()*l;a.$("#csxfsImageSelected").css("padding-top",c);a.$("#csxfsYourGiftText").css({left:f,opacity:0});a.$("#csxfsSampleImages").css({height:0,opacity:0});a.$(".csxfs_normal").each(function(){a.$(this).css("borderWidth",b)})}function k(b){var b=a.$("#"+b),d=
a.$("#"+y);c.create(b,{name:z,width:715,position:"triggerBottom",content:d.html(),activate:a.capabilities.touch?"onmouseover":"onclick"})}function d(b,c){a.$("#buybox_feature_div").css("opacity")!=="1"?setTimeout(function(){d(b,c)},500):(a.$(".csxfs_featurecontainer").show(),o=!1,u(),k("csxfsTitleDetailsLink"),k("csxfsSecondaryDetailsLink"),p()?(a.$("#csxfsSelectSampleButton, #csxfsImageSelected").bind("click",function(){b.animateIn(c)}),a.$(".csxfs_normal").bind("click",r).bind("click",function(){b.animateOut(c)}),
a.$(".csxfs_normal").hover(A,B),a.$("#csxfsNoThanks").bind("click",v).unbind("click",r)):(a.$("#csxfsImageSelected").bind("click",C),a.$("#csxfsAcceptSampleButton").bind("click",r),a.$("#csxfsDeclineSampleButton").bind("click",v)),a.$("#csxfsImageSelected").hasClass("csxfs_faded_image")?(s=!1,a.$("#addToCart").find("#freeSampleOfferListingID").val("")):a.$("#freeSampleOfferListingID").val(a.$("#csxfsImg0").data("offerlistingid")))}f=16;b=0;n=114;e=void 0;i=void 0;l=void 0;var o=!0,m=function(){a.$("#csffsFeaturecontainer").animate({height:e},
"slow",function(){a.$("#csxfsSelectedSampleText").css({left:f,opacity:0})});a.$("#csxfsSamplesBlock").removeClass("a-hidden");a.$("#csxfsSelectedBlock").addClass("a-hidden");a.$("#csxfsImageSelected").removeClass("csxfs_faded_image");a.$("#csxfsSampleImages").animate({height:i,opacity:1},"slow");a.$(".csxfs_normal").each(function(){a.$(this).animate({borderWidth:1},"3000")});a.$("#csxfsYourGiftText").animate({left:0,opacity:1},"slow");g(!0);return!1},g=function(b){b?(a.$("#csxfsFreeSampleDeclinedTitle").hide(),
a.$("#csxfsSelectedSampleText").removeClass("csxfs_nosampleselected_text"),a.$("#csxfsSampleTitle").show(),a.$("#csxfsFreeSampleTitle").show()):(a.$("#csxfsFreeSampleDeclinedTitle").show(),a.$("#csxfsSelectedSampleText").addClass("csxfs_nosampleselected_text"),a.$("#csxfsSampleTitle").hide(),a.$("#csxfsFreeSampleTitle").hide())},w=function(){o=!1;a.$("#csxfsLnkDiffGiftSec").hide();a.$("#csxfsLnkChooseGift").show();a.$("#csxfsLnkNoGift").hide();g(!1);a.$("#csxfsImageSelected").addClass("csxfs_faded_image");
a.$("#freeSampleOfferListingID").remove();a.$("#csxfsAcceptSample").show();a.$.get(a.$(this).data("foresterurl"));return!1},p=function(){return a.$("#csxfsItemsCount").val()>1?!0:!1},q=function(){var b=a.$(this).data("foresterurl");b&&a.$.get(b);p()?h():(u(),a.$("#addToCart").find("#freeSampleOfferListingID").val(a.$("#csxfsImg0").data("offerlistingid")),a.$("#csxfsSampleTitle").text(a.$("#csxfsImg0").data("title")).show(),a.$("#csxfsImageSelected").removeClass("csxfs_faded_image"),a.$("#csxfsLnkNoGift").show(),
g(!0),a.$("#csxfsAcceptSample").hide())},h=function(){a.$("#csxfsLnkDiffGiftSec").show();a.$("#csxfsLnkChooseGift").hide();a.$("#csxfsLnkNoGift").show();m();return!1},u=function(){o||(a.$("#addToCart").prepend(a.$('<input type="hidden" id="freeSampleOfferListingID" name="freeSampleOfferListingID" value="">')),o=!0)},x=function(){var b=a.$(this).find("img").attr("src"),c=a.$(this).data("title");a.$("#csxfsSampleImages").animate({height:0,opacity:0},"slow");a.$("#csxfsSamplesBlock").addClass("a-hidden");
a.$("#csxfsImageSelected").attr("src",b);a.$("#csxfsSampleTitle").text(c);a.$("#csxfsSelectedBlock").removeClass("a-hidden");b=a.$("#csxfsSelectedBlock").height()*l;a.$("#csxfsImageSelected").css("padding-top",b);a.$("#csffsFeaturecontainer").animate({height:n},"3000",function(){a.$("#csxfsYourGiftText").css({left:f,opacity:0})});a.$("#csxfsSelectedSampleText").animate({left:0,opacity:1},"slow");a.$(".csxfs_normal").each(function(){a.$(this).removeClass("csxfs_highlight")});a.$(this).addClass("csxfs_highlight");
j();u();a.$("#addToCart").find("#freeSampleOfferListingID").val(a.$(this).data("offerlistingid"));a.$.get(a.$(this).data("foresterurl"))},t,s=!0,z="csxDetailsPopOver",y="a-popover-csxDetailsPopOver",r=function(){s=!0;a.$("#csxfsSampleTitle").removeClass("csxfs_hidden_elements");a.$("#csxfsNoSample").addClass("csxfs_hidden_elements");a.$("#csxfsImageSelected").removeClass("csxfs_faded_image");if(p()){var b=a.$("#csxfsSampleTitle").text().trim(),c=a.$(this).data("title"),b=b.substring(0,b.indexOf(" ")+
1)+c;a.$("#csxfsSampleTitle").text(b);a.$("#csxfsSelectProductSubheadingText").text(c);t=c;c=a.$(this).find("img").attr("src");a.$("#csxfsImageSelected").attr("src",c);a.$(".csxfs_normal").removeClass("csxfs_highlight");a.$(this).addClass("csxfs_highlight");a.$("#csxfsButtonTextChange").removeClass("csxfs_hidden_elements");a.$("#csxfsButtonTextSelect").addClass("csxfs_hidden_elements");a.$("#csxfsFreeSampleTitle").removeClass("csxfs_hidden_elements");a.$("#csxfsTitleDetailsLink").removeClass("csxfs_hidden_elements");
a.$("#csxfsSelectSampleTitle").addClass("csxfs_hidden_elements");a.$("#csxfsCountSampleChoices").addClass("csxfs_hidden_elements");a.$("#freeSampleOfferListingID").val(a.$(this).data("offerlistingid"));a.$.get(a.$(this).data("foresterurl"))}else a.$("#csxfsDeclineSampleButton").removeClass("csxfs_hidden_elements"),a.$("#csxfsAcceptSampleButton").addClass("csxfs_hidden_elements"),a.$("#freeSampleOfferListingID").val(a.$("#csxfsImg0").data("offerlistingid")),a.$.get(a.$("#csxfsImg0").data("foresterurl"))},
v=function(){s=!1;a.$("#csxfsSampleTitle").addClass("csxfs_hidden_elements");a.$("#csxfsNoSample").removeClass("csxfs_hidden_elements");a.$("#csxfsImageSelected").addClass("csxfs_faded_image");if(p()){a.$(".csxfs_normal").removeClass("csxfs_highlight");a.$("#csxfsNoThanks").addClass("csxfs_highlight");var b=a.$(this).data("title");a.$("#csxfsSelectProductSubheadingText").text(b);t=b;a.$("#csxfsButtonTextChange").addClass("csxfs_hidden_elements");a.$("#csxfsButtonTextSelect").removeClass("csxfs_hidden_elements");
a.$("#csxfsFreeSampleTitle").addClass("csxfs_hidden_elements");a.$("#csxfsTitleDetailsLink").addClass("csxfs_hidden_elements");a.$("#csxfsSelectSampleTitle").removeClass("csxfs_hidden_elements");a.$("#csxfsCountSampleChoices").removeClass("csxfs_hidden_elements")}else a.$("#csxfsDeclineSampleButton").addClass("csxfs_hidden_elements"),a.$("#csxfsAcceptSampleButton").removeClass("csxfs_hidden_elements");a.$("#freeSampleOfferListingID").val("");a.$.get(a.$("#csxfsNoThanks").data("foresterurl"));return!1},
C=function(){s?v():r()},A=function(){t=a.$("#csxfsSelectProductSubheadingText").text();a.$("#csxfsSelectProductSubheadingText").text(a.$(this).data("title"))},B=function(){a.$("#csxfsSelectProductSubheadingText").text(t)};return{init:function(){a.$(".csxfs_featurecontainer").show();var b=a.$("#csffsFeaturecontainer").hasClass("a-hidden");a.$("#csffsFeaturecontainer").removeClass("a-hidden");e=a.$("#csxfsSamplesBlock").removeClass("a-hidden").height();i=a.$("#csxfsSampleImages").height();a.$("#csxfsSamplesBlock").addClass("a-hidden");
n=a.$("#csffsFeaturecontainer").height();b&&a.$("#csffsFeaturecontainer").addClass("a-hidden");a.$("#csxfsImageSelected").hasClass("csxfs_faded_image")&&a.$("#addToCart").find("#freeSampleOfferListingID").val("");j();a.$("#csxfsLnkDiffGift").bind("click",m);a.$("#csxfsLnkNoGift").bind("click",w);a.$(".csxfs_normal").bind("click",x);a.$("#csxfsImageSelected").bind("click",q);a.$("#csxfsLnkChooseGift").bind("click",h);a.$("#csxfsAcceptSample").bind("click",q)},initV2:d}})})})})(function(){var e=window.AmazonUIPageJS||
window.P,a=e._namespace||e.attributeErrors;return a?a("FreeSampleAssets"):e}(),window);
/* ******** */
(function(i,k){i.execute(function(){i.when("A","jQuery","pantryEnhancementMetrics").execute("dpv2-pantryEnhancement-metrics",function(a,d,f){f.registerCounters()});i.when("A","jQuery").register("pantryEnhancementMetrics",function(a,d){return{registerCounters:function(){var a=d("#pantry-store-message");a.length&&a.bind("click",function(){var a=k.ue;if(a){var d=a.count("pantryStoreMessageClick")||0;a.count("pantryStoreMessageClick",d+1)}})}}});i.when("jQuery","ready").register("action-panel-secondary-panel",
function(a){function d(c,b){if(c&&b&&e[c])a("#"+c+"_secondaryPanelHeadingText").text(b),e[c].heading=b}function f(c,b){if(c&&b&&e[c]){var d=a("#"+b);if(d.length>0)b!==e[c].contentId&&a("#"+e[c].contentId).addClass("aok-hidden"),a("#"+c+"_secondaryPanelContent").append(d),d.removeClass("aok-hidden"),e[c].contentId=b}}function c(c){c&&e[c]&&a("#actionPanel").animate({left:"+=420px"},400,"swing",function(){a("#"+c+"_secondaryPanel").addClass("aok-hidden");a("#"+c+"_secondaryPanelBackButton").removeClass("backButtonClickedState")})}
var e={};return{init:function(g){if(g.panelId){e[g.panelId]=g;g.heading&&d(g.panelId,g.heading);g.contentId&&f(g.panelId,g.contentId);var b=a("#"+g.panelId+"_secondaryPanelBackButton");b.click(function(){b.addClass("backButtonClickedState");c(g.panelId)})}},setHeading:d,setContent:f,animateIn:function(c){c&&e[c]&&(a("#"+c+"_secondaryPanel").removeClass("aok-hidden"),a("#actionPanel").animate({left:"-=420px"},400,"swing"))},animateOut:c}});i.when("jQuery","ready").register("burj-featurebullets",function(a){var d=
!1,f,c,e=function(){c.fadeTo(200,0.75,null,function(){d?(c.find(".closeFB").addClass("aok-hidden"),a("#featureBulletsPlaceholder").removeClass("FBplaceholder"),f.find(".a-vertical").addClass("collapsedFeatureBullets"),a("#fbExpandableSection").removeClass("expanded"),c.removeClass("expandedFeatureBullets"),c.find("h1").removeClass("expandedFBHeader"),a(".fadeTextTopforFB").hide(),a(".fadeTextBottomforFB").hide(),f.find("#fbExpanderMoreButtonSection").show(),d=!1):(f.find(".a-vertical").removeClass("collapsedFeatureBullets"),
c.addClass("expandedFeatureBullets"),a("#fbExpandableSection").addClass("expanded"),c.find("h1").addClass("expandedFBHeader"),a("#featureBulletsPlaceholder").addClass("FBplaceholder"),f.find("#fbExpanderMoreButtonSection").hide(),a("#feature-bullets")[0].offsetHeight<a("#feature-bullets")[0].scrollHeight&&(a(".fadeTextTopforFB").show(),a(".fadeTextBottomforFB").show()),c.find(".closeFB").removeClass("aok-hidden"),d=!0);c.fadeTo(200,1)})};return{init:function(){f=a("#feature-bullets");c=a("#fbSection");
a(".fadeTextTopforFB").hide();a(".fadeTextBottomforFB").hide();var g=a("#fbExpandableSection"),b=a("#fbExpandableSectionContent");b.height()>g.height()&&(b.addClass("expandableSection"),b.click(function(){e()}),a("#fbExpanderMoreButtonSection").removeClass("aok-hidden"),f.find(".moreFB").click(function(){e()}),c.find(".closeFB").click(function(){e()}),c.hover(null,function(){d&&e()}))}}});i.when("jQuery","ready").register("elevatorFeature",function(a){var d,f,c,e,g,b,h,v=function(){k.pageYOffset>
e?(d.addClass("stickyBar"),c.removeClass("aok-hidden"),f.removeClass("aok-hidden")):(d.removeClass("stickyBar"),c.addClass("aok-hidden"),f.addClass("aok-hidden"))},o=function(){var b=k.pageYOffset,c,d;for(c=0,d=h.length;c<d;++c){var e=h[c],f=a(e.element);if(f.length>0){var j=f.offset().top-g-10,f=j+f.height(),l;b>=j-10&&b<=f+10?(a(e.selector).addClass("elevatorHighlight"),l=e.selector):a(e.selector).hasClass("elevatorHighlight")&&l!==e.selector&&a(e.selector).removeClass("elevatorHighlight")}}},m=
function(a){if(a.length>0){var b=a.offset().top-g-10;j(b,a)}},j=function(c,d){var e=a(k).scrollTop(),f=Math.abs(e-c)+0,h=f/2E3*1E3,j=e-c<0,l=!1,n=j?c-f*0.2:c+f*0.2;b=!0;a(".elevatorButton").removeClass("elevatorHighlight");a("html, body").animate({scrollTop:c},{duration:h<500?500:h,step:function(a,b){if(d&&!l&&(j?a>n:a<n)){l=!0;var e=d.offset().top-g-10;if(c!==e)b.end=e}},complete:function(){b=!1;o()}})},l=function(b,c,d){var e=a(b);e.length?(h.push({selector:c,element:b}),a(c).click(function(){e=
a(b);m(e)})):a(d).addClass("aok-hidden")},u=function(){var b=[];a("#beautyRecommendations").length&&b.push("#beautyRecommendations");a("#sims_fbt").length&&b.push("#sims_fbt");a("#session-sims-feature, #fallbacksession-sims-feature").length&&b.push("#session-sims-feature, #fallbacksession-sims-feature");a("#purchase-sims-feature").length&&b.push("#purchase-sims-feature");if(b.length)b.sort(function(b,c){return a(b).offset().top-a(c).offset().top}),b.forEach(function(a){h.push({selector:"#elevatorRelatedProductsSection",
element:a})}),a("#elevatorRelatedProductsSection").click(function(){for(var c=k.pageYOffset,d=0,e=b.length,f=null;f===null&&d<e;){var h=a(b[d++]);h.length>0&&Math.floor(h.offset().top-g-10)>c&&(f=h)}f===null&&d===e&&(f=a(b[0]));m(f)});else{a("#elevatorRelatedProductsSection").addClass("aok-hidden");for(var c=a(".elevatorDividerSection"),d=!0,e=c.length-1;d&&e>=0;){var f=a(c[e]);f.hasClass("aok-hidden")?e--:(f.addClass("aok-hidden"),d=!1)}}},q=function(){a("#elevatorViewBuyingOptionsButton .a-button-inner").click(function(){j(a("#a-page .a-container").offset().top-
10,null)})},p;i.when("page-refresh:page").execute(function(a){p=a});var n=function(){if(p&&p.config){var b=!1,c;for(c in p.config)if(p.config[c].affectedFeatures&&(a(p.config[c].affectedFeatures).each(function(c,d){var e=a(d);e.css("display")!=="none"&&e.css("opacity")!=="1"&&(b=!0)}),b))return!0}return!1},s=function(){if(n())setTimeout(function(){s()},200);else{d=a("#elevatorBar");f=a("#elevatorBarPlaceholder");c=a("#elevatorViewBuyingOptionsSection");e=d.position().top;g=d.height();h=[];var j=!1;
b=!1;l("#productDescription, #product-description_feature_div, #product-description-iframe","#elevatorMoreAboutThisItemSection","#elevatorMoreAboutThisItemSection, #elevatorMoreAboutThisItemDivider");l("#detail-bullets, #prodDetails","#elevatorProductDetailsSection","#elevatorProductDetailsSection, #elevatorProductDetailsDivider");l("#quickPromoBucketContent","#elevatorSpecialOffersSection","#elevatorSpecialOffersSection, #elevatorSpecialOffersDivider");l("#cm_cr_dpwidget","#elevatorCustomerReviewsSection",
"#elevatorCustomerReviewsSection, #elevatorCustomerReviewsDivider");u();q();a(k).resize(function(){e=d.position().top});a(k).scroll(function(){j=!0});setInterval(function(){j&&(j=!1,v(),b||o())},100);v();o()}};return{init:s}});i.when("jQuery","atf").register("title-burj",function(a){var d,f,c,e,g,b,h,v,o,m,j,l,u,q=function(){g.text(b);if(j&&d.height()<f.height()){m.removeClass("aok-hidden");if(o){v=b;for(var a=0,e=b.length-1;a<e;){g.text(b);var l=b,k=a+Math.floor((e-a)/2),n=l.indexOf(" ",k),l=l.substring(0,
n!==-1?n:l.length-1);g.text(l+"...");d.height()<f.height()?e=k-1:(a=k+1,v=g.text())}o=!1}g.text(v);c.addClass("showPointerOnHover");h=!0}else j&&(m.addClass("aok-hidden"),c.removeClass("showPointerOnHover"),h=!1)},p=function(){if(h){var a=d.position().top;f.fadeTo(200,0.75,function(){j?(u(),m.removeClass("expand").addClass("collapse titleToggleClickedState"),d.addClass("expandedTitle"),f.css("top",a),e.css("top",a-8)):(l(),m.removeClass("collapse").addClass("expand titleToggleClickedState"),d.removeClass("expandedTitle"),
f.css("top",""),e.css("top",""));j=!j;q();e.height(f.height()+16);f.fadeTo(200,1,function(){m.removeClass("titleToggleClickedState")})})}},n=function(){j||p()},s=function(){o=!0;q()};return{init:function(){d=a("#title_feature_div");f=a("#titleSection");c=a("#title");e=a("#titleOverlay");g=a("#productTitle");b=g.text();h=!1;j=!0;m=a("#expandTitleToggle");i.when("A","a-tooltip","atf").execute(function(a,b){l=function(){b.create(m,{content:a.state("titleExpanderTooltipState").content,position:"triggerTop"})};
u=function(){b.remove(m)};j&&l()});a("#socialFabric").append(a('<hr class="a-spacing-medium a-divider-normal">'));s();a(k).resize(s);c.click(p);m.click(p);f.hover(null,n)}}});i.when("A","jQuery","a-popover","cf").register("actionpanel-modified-popover",function(a,d,f){return function(c,e){function g(){a.on.scroll(function(){var a=f.get(c);if(a&&a.isActive()){var b=a.$container.get(0).getBoundingClientRect();if(b.bottom<0||b.right<0)a.attrs("originalFocus",null),a.hide()}})}function b(){var b=d(e);
y.popoverHandle=f.create(b,{closeButton:!1,closeButtonLabel:b.attr(p)||"close",position:"triggerBottom",name:c,popoverLabel:b.attr(n)||c,width:"400",activate:a.capabilities.touch?"onmouseover":"onclick"});a.capabilities.touch&&b.bind("touchend",function(){y.popoverHandle.isActive()||b.trigger("mouseenter")});a.on("a:popover:afterShow:"+c,m);a.on("a:popover:afterHide:"+c,j);a.on("a:popover:afterUpdatePosition:"+c,i)}function h(){r=d("#"+l);if(!r.length){var a=document.createElement("div");if(t.length)a.id=
l,r=d(a).addClass(u).css({width:t.outerWidth(),top:t.position().top}).bind("touchend click",function(){return!1}),t.append(a)}}function i(a){var b,c=a.popover.$trigger.get(0).getBoundingClientRect();b=k.pageYOffset?k.pageYOffset:(document.compatMode||"")==="CSS1Compat"?document.documentElement.scrollTop:document.body.scrollTop;var d=t.get(0).getBoundingClientRect().left+s;a.popover.$container.css({top:c.top+b+"px",left:d+"px"})}function o(){var a=t.get(0).getBoundingClientRect();r.css("height",a.bottom-
a.top+"px")}function m(a){o();r.show();a.popover.$container.hasClass(q)||a.popover.$container.addClass(q);a.popover.$trigger.trigger(A,a)}function j(a){r.hide();a.popover.$trigger.trigger(z,a)}var l="actionPanelOverlay",u="action-panel-overlay",q="burj-action-panel-modified-popover",p="data-close-button-label",n="data-popover-label",s=8,t=d("#actionPanel"),r,y=this,A="ActionPanelModifiedPopover.showPopover",z="ActionPanelModifiedPopover.hidePopover";t.length&&(b(),h(),g(),d(k).resize(o))}});i.when("A",
"jQuery","a-popover","burj-twister-utils","actionpanel-vodd-event-handler","leftcolumn-vodd-event-handler","cf").execute(function(a,d,f,c,e,g){function b(){a.on.scroll(function(){var a=c.getActivePopover();if(a){var b=i.get(0).getBoundingClientRect(),d=a.$container.get(0).getBoundingClientRect();b.bottom<0&&d.bottom<0&&(a.attrs("originalFocus",null),a.hide())}})}function h(a,b){if(j&&typeof j!=="undefined"&&j.onShowPopover)j.onShowPopover(a,b)}function k(a,b){if(j&&typeof j!=="undefined"&&j.onHidePopover)j.onHidePopover(a,
b)}function o(a,b){if(j&&typeof j!=="undefined"&&j.onClickDimensionRow)j.onClickDimensionRow(a,b)}var i=d(".burj #twister"),j;i.length&&(f=i.find("[id^=vodd-button-]"),f.length&&(d("#actionPanel #twister_feature_div").length>0?j=new e:d("#leftCol #twister_feature_div").length>0&&(j=new g),f.bind("TwisterVODD.showPopup",h).bind("TwisterVODD.hidePopup",k),d(".vodd-dimension-row").bind("TwisterVODD.dimensionRowClick",o),b()))});i.when("A","jQuery","a-popover","cf").register("burj-twister-utils",function(a,
d,f){var c;return{getActivePopover:function(){c||(c=d("#twister").find("[id^=vodd-button-]"));var a=null;c.length&&c.each(function(c,b){var d=b.id.split("vodd-button-");if((d=f.get("vodd-popover-"+d[d.length-1]))&&d.isActive())return a=d,!1});return a},getPageOffset:function(){var a,c;k.pageYOffset?(a=k.pageYOffset,c=k.pageXOffset):(document.compatMode||"")==="CSS1Compat"?(a=document.documentElement.scrollTop,c=document.documentElement.scrollLeft):(a=document.body.scrollTop,c=document.body.scrollLeft);
return{top:a,left:c}}}});i.when("A","jQuery","burj-twister-utils","cf").register("actionpanel-vodd-event-handler",function(a,d,f){return function(){function c(){var a=i.offset().top+i.height()-h.offset().top,c=h.height()-a;d("#"+b).css({height:c+"px",top:a+"px"})}function e(){var a=document.createElement("div");a.id=b;d(a).addClass(g).css({width:h.outerWidth()}).bind("touchend click",function(){return!1});h.append(a)}var g="twister-overlay",b="twisterOverlay",h=d("#actionPanel"),i=h.find("#twister_feature_div");
this.onShowPopover=function(){c();h.addClass("twister-popover-visible");d("#"+b).show()};this.onHidePopover=function(){h.removeClass("twister-popover-visible");d("#"+b).hide()};(function(){e();var b=function(){f.getActivePopover()&&c()};a.on("a:pageUpdate",b);d(k).resize(b)})()}});i.when("A","jQuery","burj-twister-utils","cf").register("leftcolumn-vodd-event-handler",function(a,d,f){return function(){function c(){o=d("#"+g.join(", #"));i=d("#main-image-container");m=d("#heroImage");j=d("#imageBlock_feature_div");
l=d("#title_feature_div")}function e(a){d("html, body").animate({scrollTop:a},500)}var g="instantOrderUpdate_feature_div,brandBar_feature_div,averageCustomerReviews_feature_div,brandBarAE_feature_div,averageCustomerReviews_feature_div,ask_feature_div,zeitgeistBadge_feature_div,socialFabric_feature_div".split(","),b=d("#twister_feature_div"),h=b.find("#twisterContainer"),i,o,m,j,l,u;this.onShowPopover=function(c,g){b.addClass("twister-popover-visible");if(g.popover){if(!m.length||m.hasClass("hide-background")){var n=
b.get(0).getBoundingClientRect().top;u=l.css("margin-top");var s=d("#brandBar");s.length&&l.css("margin-top",s.css("margin-top"));o.addClass("aok-hidden");s=350;j.height()<=s&&(s=250);i.addClass("image-block-resized");a.trigger("Burj.ImageBlock.resizeImageBlockEvent",{maxImgBlockHeight:s});n=n-b.get(0).getBoundingClientRect().top+10;b.css("margin-top",n+"px")}l.get(0).getBoundingClientRect().top<0?e(l.offset().top-10):(n=h.get(0).getBoundingClientRect().bottom-d(k).height(),n>0&&(n=f.getPageOffset().top+
n,e(n+10)))}};this.onClickDimensionRow=function(){c()};this.onHidePopover=function(){b.removeClass("twister-popover-visible");var c=d("#title_feature_div");u&&typeof u!=="undefined"&&c.css("margin-top",u+"px");o.removeClass("aok-hidden");i.removeClass("image-block-resized");a.trigger("Burj.ImageBlock.resizeImageBlockEvent",{maxImgBlockHeight:null});b.css("margin-top","10px")};c()}});i.when("A","a-popover","actionpanel-modified-popover","cf").register("sns-frequency-dropdown",function(a,d,f){var c=
a.$;return{init:function(){c("#sns-frequency-button").length&&(new f("sns-frequency-dropdown-popover",c("#sns-frequency-button")),a.declarative("sns-frequency-update","click",function(a){var f=a.$target.parents("li"),a=a.data.frequency;f.siblings().removeClass("sns-selected-frequency");f.addClass("sns-selected-frequency");c("#rcxOrdFreq").val(a);c("#sns-frequency-button-label").text(f.text());d.get("sns-frequency-dropdown-popover").hide()}),a.declarative("sns-frequency-dropdown-popover-close","click",
function(){d.get("sns-frequency-dropdown-popover").hide()}))}}});i.when("jQuery","action-panel").register("mom-checkbox",function(a,d){return{init:function(){var f=a("#addToCart"),c=f.attr("action");a("#chkMom").change(function(){if(a("#chkMom").length){var e;a("#chkMom").is(":checked")?(f.attr("action","/gp/family/pipeline/view-signup/"),e="mom"):(f.attr("action",c),e="sns");d.setPanelState({mode:e})}});a("#chkMom").length&&a("#chkMom").is(":checked")&&a("#chkMom").attr("checked",!1)}}});i.when("jQuery",
"ready").register("btf-headings-burj",function(a){var d,f,c,e,g,b,h,k,o,m,j,l;i.when("page-refresh:page").execute(function(a){l=a});var u=function(){if(l&&l.config){var b=!1,c;for(c in l.config)if(l.config[c].affectedFeatures&&(a(l.config[c].affectedFeatures).each(function(c,d){var e=a(d);e.css("display")!=="none"&&e.css("opacity")!=="1"&&(b=!0)}),b))return!0}return!1},q=function(){if(u())setTimeout(function(){q()},200);else{d=a(".prestige_beauty.burj-body #session-sims-feature");d.length&&(f=d.find("h2.a-carousel-heading").parent(),
c=d.find(".a-column.a-span4.a-span-last.a-text-right"),f.length&&c.length&&(f.addClass("a-push2"),c.removeClass("a-span4"),c.addClass("a-span2")));e=a(".prestige_beauty.burj-body #purchase-sims-feature");e.length&&(g=e.find("h2.a-carousel-heading").parent(),b=e.find(".a-column.a-span4.a-span-last.a-text-right"),g.length&&b.length&&(g.addClass("a-push2"),b.removeClass("a-span4"),b.addClass("a-span2")));h=a(".prestige_beauty.burj-body #cm_cr_dpwidget");k=h.find("h2");if(h.length&&k.length){var l=k.first();
l.remove();h.prepend(l)}o=a(".burj-body #product-description-iframe");o.length&&(m=a(o[0].contentDocument.documentElement),m.length&&(j=m.find("h2"),j.length&&(j.css("color","#333"),j.css("font-size","21px"),j.css("font-weight","normal"),j.css("font-family","arial, verdana, helvetica, sans-serif"))))}};return{styleBTFHeadings:q}});i.when("jQuery","A").register("twister-aui-page-state",function(a,d){var f=["csxfsSecondaryPanelSettings"];return{updatePageState:function(){var c=d.parseJSON;d.each(a('script[type="a-state"]'),
function(e){e=a(e);if(!e.data("a-eval")){var g=e.attr("data-a-state");if(g&&(g=c(g),g.key&&a.inArray(g.key,f)!==-1)){var b=c(e.html());d.state.replace(g.key,b);e.data("a-eval",!0)}}})}}});i.when("A","skinToneSelector","scenesAjaxHandler","colorScenesSlider","colorScenesCarousel","ready").register("colorScenes",function(a,d,f,c,e){function g(){L=!0;z.addClass("aok-hidden");E.removeClass("aok-hidden");D.addClass("aok-hidden");B.addClass("colorScenesOpen");H.initCarousel();k.CounterScenesController&&
l(k.CounterScenesController.getCounterSelection());a.trigger("colorScenes:show");r&&r.count&&r.count(X,1)}function b(){E.addClass("aok-hidden");D.removeClass("aok-hidden");z.removeClass("aok-hidden");B.removeClass("colorScenesOpen");L=!1;t(k).resize()}function h(){L?b():g();r&&r.count&&r.count(Y,1)}function i(){var a=H.getCarouselWidth(),b=M.getSlideTrackWidth();O=a/b;w=b/a}function o(a,b,c){i();M.moveSlider(-a*w,b,c)}function m(a,b){i();Q.hideWhenClickOutside();H.moveCarouselByX(-a*O,b,!1,!1)}function j(a,
b){H.updateImagePosition(J[a],J[b])}function l(a){L&&H.selectCarouselItemAtIndex(a,!1)}function u(b){a.trigger("colorScenes:select",b)}function q(a,b,c){t.each(a,function(a,d){t("#carouselSceneImage_"+a).css("background-image",'url("'+d+'")').fadeTo(300,1);b&&typeof y==="function"&&y("cf",S,{wb:1});c&&typeof A==="function"&&(A("ld",S,{wb:1}),A("ld",T,{wb:1}))})}function p(){I.click(function(){g();r&&r.count&&r.count(Z,1)});F.click(function(){b();r&&r.count&&r.count($,1)});B.length&&B.click(h)}function n(b){if(b[G]){typeof y===
"function"&&y("cf",U,{wb:1});z=t("#imageBlock_feature_div");I=t("#colorScenesIngressButton");D=t("#colorScenesIngressContainer");E=t("#colorScenesStage");F=t("#colorScenesBackArrowImage");B=t("#counterColorScenesIngressLink");b=V;k.CounterScenesController&&(b=k.CounterScenesController.getCounterSelection());H=new e(b);a.on("scenesCarousel:select",u);a.on("scenesCarousel:sync",o);M=new c;a.on("scenesSlider:sync",m);Q=new d(R);a.on("skinToneSelector:select",j);typeof y==="function"&&y("bb",S,{wb:1});
var f=k.CounterScenesController.getCounterSelection()-1,g=f,b=g-P,h=f+1,l=h+P,i=x.length;for(C.getSceneInfo(x[f],q,!0,!1);b>=0||l<i;)b>=0&&(g=x.slice(b,g).toString(),C.getSceneInfo(g,q,!1,!1),g=b,b-=P),l<i&&(h=x.slice(h,l).toString(),C.getSceneInfo(h,q,!1,!1),h=l,l+=P);g>0&&h<i?(g=x.slice(0,g).toString(),C.getSceneInfo(g,q,!1,!1),h=x.slice(h,i).toString(),C.getSceneInfo(h,q,!1,!0)):g>0?(g=x.slice(0,g).toString(),C.getSceneInfo(g,q,!1,!0)):h<i&&(h=x.slice(h,i).toString(),C.getSceneInfo(h,q,!1,!0));
p();D.removeClass("aok-hidden");I.removeClass("aok-hidden");B.removeClass("aok-hidden");typeof A==="function"&&A("ld",U,{wb:1});typeof y==="function"&&y("cf",T,{wb:1});r&&r.count&&r.count(W,1)}}function s(){var b=a.state("colorScenesPageState");J=b.skinToneToPositionCssClass;K=b.colorScenesIsEnabledEndPoint;N=b.colorScenesInfoEndPoint;R=b.defaultSkinTone;G=b.parentAsin?b.parentAsin:b.currentAsin;b.twisterDimensionValues&&(x=Object.keys(b.twisterDimensionValues).map(function(a){return b.twisterDimensionValues[a].defaultAsin}))}
var t=a.$,r=k.ue,y=k.uet,A=k.uex,z,D,I,E,F,B,L,C,G,x,K,N,Q,R,J,w,O,M,H,P=7,V=1,W="colorScenesShowIngress",Z="colorScenesClickIngressButton",Y="colorScenesClickCounterIngress",$="colorScenesClickBackButton",X="colorScenesShowScene",T="colorScenesFeature",S="colorScenesFetchImages",U="colorScenesIsEnabled";return{init:function(){s();G&&(typeof y==="function"&&y("bb",T,{wb:1}),C=new f(K,N),typeof y==="function"&&y("bb",U,{wb:1}),C.checkIsEnabled(G,n))},selectSceneItem:l}});i.when("A").execute(function(a){k.CounterScenesController=
new function(){function d(a,c,d){if(typeof c==="string"||typeof c==="number")typeof c==="string"&&(c=parseInt(c,10)),d?f(a,c+1):f(a,c-1)}function f(a,c){!g&&typeof a==="function"&&(g=!0,typeof c!=="undefined"?a(c):a(),g=!1)}var c,e,g;this.registerCounter=function(a){typeof a==="object"&&a?c=a:k.ueLogError&&k.ueLogError({message:"[Failed to register Counter Twister with CounterScenesController]"},{logLevel:"ERROR",attribution:"counter_scenes_controller_register_counter_error"})};this.registerColorScene=
function(a){typeof a==="object"&&a?e=a:k.ueLogError&&k.ueLogError({message:"[Failed to register Color Scene with CounterScenesController]"},{logLevel:"ERROR",attribution:"counter_scenes_controller_register_scene_error"})};this.getCounterSelection=function(){return c?c.getCurrentSelectedIndex()+1:1};e=c=null;g=!1;a.on("colorScenes:show",function(){c&&f(c.handleExpand)});a.on("colorScenes:select",function(a){c&&d(c.selectCounterVariationAtIndex,a,!1)});a.on("counter:select",function(a){e&&d(e.selectSceneItem,
a,!0)})}});i.when("A").register("skinToneSelector",function(a){return function(d){function f(){o.addClass("aok-hidden");i.removeClass("aok-hidden");j=!1}function c(a){i.addClass("aok-hidden");o.removeClass("aok-hidden");b(k).click(g.hideWhenClickOutside);j=!0;h&&h.count&&h.count(l,1);a.preventDefault();a.stopPropagation();return!1}function e(c){var d=c.target.id,e=m.attr("id"),c=b(c.target);d!==e&&m.removeClass("selectedSkinTone");c.addClass("selectedSkinTone");a.trigger("skinToneSelector:select",
d,e);m=c;f();h&&h.count&&h.count(u[d],1)}var g=this,b=a.$,h=k.ue,i,o,m,j=!1,l="colorScenesOpenSkinTone",u={skinTone_10:"colorScenesSelectSkinTone10",skinTone_20:"colorScenesSelectSkinTone20",skinTone_30:"colorScenesSelectSkinTone30",skinTone_40:"colorScenesSelectSkinTone40",skinTone_50:"colorScenesSelectSkinTone50"};g.hideWhenClickOutside=function(){j&&(f(),b(k).unbind("click",g.hideWhenClickOutside),j=!1)};(function(d){i=b("#colorSceneSkinToneButton");o=b("#skinTonePanel");m=b("#"+d);m.addClass("selectedSkinTone");
a.trigger("skinToneSelector:select",d,null);i.click(c);b(".skinToneColor").click(e)})(d)}});i.when("A").register("scenesAjaxHandler",function(a){return function(d,f){function c(a,c,d){if(!a||a.length===0)throw Error(c+" is null or empty for "+d);}var e,g;this.getSceneInfo=function(b,d,e,f){c(b,"asinList","getSceneInfo");var i=g+b;a.ajax(i,{method:"get",success:function(a){typeof d==="function"&&d(a,e,f)},error:function(){k.ueLogError&&k.ueLogError({message:"[Failed to load sprite images from"+i+" ]"},
{logLevel:"ERROR",attribution:"color_scenes_throwing_the_error"})}})};this.checkIsEnabled=function(b,d){c(b,"parentAsin","checkIsEnabled");var f=e+b;a.ajax(f,{method:"get",success:function(a){typeof d==="function"&&d(a)},error:function(){k.ueLogError&&k.ueLogError({message:"[Failed to determined if colorscene is enabled for "+b+" with url "+f+" ]"},{logLevel:"ERROR",attribution:"color_scenes_is_enabled_throwing_the_error"})}})};(function(a,d){c(a,"checkEnabledEndpoint","init");c(d,"loadImagesEndpoint",
"init");e=a;g=d})(d,f)}});i.when("A","a-carousel-framework","scenesMoveEventUtil","scenesFlickVelocity").register("colorScenesCarousel",function(a,d,f,c){return function(e){function g(){return w}function b(){G=I.first().width();x=I.first().outerWidth(!0)-G;L=I.first().position().left;C=I.last().position().left;K=L-r/2+x+G/2;N=C-r/2+x+G/2;var a=D.find(".selectedCarouselItem");R=a.length>0?a.width()-G-2*x:0;Q=N-K}function h(a){J=!1;f.bind(o,i);O=f.getClientX(a);H.startFlickVelocityTracking();M=w;a.preventDefault();
a.stopPropagation();return!1}function i(a){f.unbind(o,i);H.triggerFlickVelocityMove();u();a.preventDefault();a.stopPropagation();return!1}function o(a){var b=f.getClientX(a),c=b-O;O=b;p.moveCarouselByX(c,!0,!1,!1);J=!0;a.preventDefault();a.stopPropagation();return!1}function m(b){if(!J||Math.abs(Math.abs(M-w))<=P){var c=b.data.index;p.selectCarouselItemAtIndex(b.data.index,!1);a.trigger("scenesCarousel:select",c);s&&s.count&&s.count(V,1)}J=!1}function j(a){p.moveCarouselByX(a,!0,!1,!1)}function l(){return w>
K&&w<N}function u(){Math.abs(M-w)&&s&&s.count&&s.count(W,Math.abs(M-w))}function q(){d.onInit("colorScenes",function(){b();w=K;F=n(E[B-1]);F.addClass("selectedCarouselItem");F.siblings(".sceneImageNamePlate").addClass("selectedCarouselItem");p.selectCarouselItemAtIndex(B,!1);a.on("a:carousel:colorScenes:repaint",function(){p.selectCarouselItemAtIndex(B,!0)})})}var p=this,n=a.$,s=k.ue,t,r,y,A,z,D,I,E,F,B,L,C,G,x,K,N,Q,R,J,w,O,M,H,P=5,V="colorScenesClickSceneImage",W="colorScenesCarouselMove";p.getCarouselWidth=
function(){return Q};p.moveCarouselByX=function(c,d,e,f){w-=c;b();w<K?w=K:w>N&&(w=N);e?z.gotoPixel(w,{animationDuration:0}):Math.abs(c)>500?z.gotoPixel(w,{animationDuration:400}):z.gotoPixel(w);d&&a.trigger("scenesCarousel:sync",c,!d,f)};p.selectCarouselItemAtIndex=function(a,c){b();var d=r/2-L-x-G/2+R,d=z.getItemOffset(a)-d;p.moveCarouselByX(w-d,!0,c,!0);B=a;d=n(E[a-1]);F.attr("id")!==d.attr("id")&&(F&&(F.removeClass("selectedCarouselItem"),F.siblings(".sceneImageNamePlate").removeClass("selectedCarouselItem")),
d.addClass("selectedCarouselItem"),d.siblings(".sceneImageNamePlate").addClass("selectedCarouselItem"),F=d)};p.updateImagePosition=function(a,b){E.removeClass(b).addClass(a)};p.resizeCarouselContainer=function(){y.width(t.parent().width());r=t.width()};p.initCarousel=function(){p.resizeCarouselContainer();d.initializeAll()};(function(b){J=!1;H=new c(j,u,l,g);B=b;t=n("#leftCol");r=t.width();y=n("#colorScenesCarouselSection");A=n("#colorScenesCarouselContainer");D=A.find(".a-carousel");I=D.children();
z=d.getCarouselByName("colorScenes");E=n(".carouselSceneImage");q();E.mousedown(h);typeof k.ontouchstart!=="undefined"&&E.bind("touchstart",h);for(var b=E,e=0;e<b.length;e++)n(b[e]).bind("click",{index:e+1},m),typeof k.ontouchend!=="undefined"&&n(b[e]).bind("touchend",{index:e+1},m);a.on.resize(p.resizeCarouselContainer);a.on.orientationchange(p.resizeCarouselContainer)})(e)}});i.when("A","scenesMoveEventUtil","scenesFlickVelocity").register("colorScenesSlider",function(a,d,f){return function(){function c(a){d.bind(g,
e);u=d.getClientX(a);y.startFlickVelocityTracking();p=q;a.preventDefault();a.stopPropagation();return!1}function e(a){d.unbind(g,e);y.triggerFlickVelocityMove();h();a.preventDefault();a.stopPropagation();return!1}function g(a){var b=d.getClientX(a),c=b-u;u=b;i.moveSlider(c,!0,!1);a.preventDefault();a.stopPropagation();return!1}function b(a){if(j[0]===a.target){u=l.offset().left;var b=d.getClientX(a),c=b-u-t/2;u=b;i.moveSlider(c,!0,!0);o&&o.count&&o.count(z,c);a.preventDefault();a.stopPropagation();
return!1}}function h(){var a=Math.abs(p-q);a&&o&&o.count&&o.count(A,a)}var i=this,o=k.ue,m=a.$,j,l,u,q,p,n,s,t,r,y,A="colorScenesSliderMove",z="colorScenesClickSlider";i.getSlideTrackWidth=function(){return r};i.moveSlider=function(b,c,d){if(Math.abs(b)!==0){var e=q+b;e>s&&(e=s);e<n&&(e=n);q=e;d?l.animate({left:e},200):l.css("left",e);c&&a.trigger("scenesSlider:sync",b,!1)}};y=new f(function(a){i.moveSlider(-a,!0,!1)},h,function(){return q>n&&q<s},function(){return q});j=m("#colorSceneSliderBar");
l=m("#colorSceneSlider");a.capabilities.touch&&(j.css("height","8px"),l.css("height","15px"));t=l.outerWidth();q=-t/2;l.css("left",q);n=-t/2;s=j.outerWidth()-t/2;r=s-n;l.mousedown(c);j.click(b);typeof k.ontouchstart!=="undefined"&&(l.bind("touchstart",c),j.bind("touchstart",b))}});i.when("A").register("scenesFlickVelocity",function(a){return function(d,f,c,e){function g(a,b){if(typeof a!=="function")throw Error(b);}var b=this,h,i,k,m,j,l,u,q,p;b.startFlickVelocityTracking=function(){i=h=0;k=Date.now();
m=j();clearInterval(l);l=setInterval(b.computeFlickVelocity,50)};b.computeFlickVelocity=function(){var a,b;a=Date.now();b=a-k;k=a;a=j()-m;m=j();b=1E3*a/(1+b);h=0.8*b+0.2*b};b.triggerFlickVelocityMove=function(){clearInterval(l);Math.abs(h)>50&&(i=0.05*h,k=Date.now(),a.requestAnimationFrame(b.flickVelocityMove))};b.flickVelocityMove=function(){var c;i&&(c=Date.now()-k,c=-i*Math.exp(-c/500),Math.abs(c)>1&&p()?(u(c),a.requestAnimationFrame(b.flickVelocityMove)):q())};(function(a,b,c,d){g(a,"moveRefFn is null or undefined for FlickVelocityController.");
g(c,"checkLimitRefFn is null or undefined for FlickVelocityController.");g(d,"getFrameRefFn is null or undefined for FlickVelocityController.");u=a;q=b;p=c;j=d})(d,f,c,e)}});i.when("A").register("scenesMoveEventUtil",function(a){function d(a,d){f(k).unbind("mousemove",a).unbind("mouseup",d);typeof k.ontouchmove!=="undefined"&&f(k).unbind("touchmove",a).unbind("touchend",d)}var f=a.$;return{bind:function(a,e){d(a,e);f(k).bind("mousemove",a).bind("mouseup",e);typeof k.ontouchmove!=="undefined"&&f(k).bind("touchmove",
a).bind("touchend",e)},unbind:d,getClientX:function(a){return a.originalEvent&&a.originalEvent.targetTouches&&a.originalEvent.targetTouches.length>0?a.originalEvent.targetTouches[0].clientX:a.clientX}}})})})(function(){var i=window.AmazonUIPageJS||window.P,k=i._namespace||i.attributeErrors;return k?k("BurjDesktopAssets"):i}(),window);
/* ******** */
(function(a){a.execute(function(){a.when("jQuery").register("action-panel",function(c){var a="ap-onetime,ap-sns,ap-deal,ap-mom,ap-fresh,ap-oos,ap-b2brd".split(",");return{setPanelState:function(b){if(b.mode){for(var e=c("#actionPanel"),d=0;d<a.length;d++)e.removeClass(a[d]);b="ap-"+b.mode;c.inArray(b,a)>=0&&e.addClass(b)}}}});a.when("jQuery","action-panel").register("toggleBB",function(a,f){return{init:function(){a('input[name="toggleBuyBox"]:radio').change(function(){var b=a(this).attr("value");
f.setPanelState({mode:b});b==="onetime"?a("#csffsFeaturecontainer").removeClass("a-hidden"):a("#csffsFeaturecontainer").addClass("a-hidden")})}}})})})(function(){var a=window.AmazonUIPageJS||window.P,c=a._namespace||a.attributeErrors;return c?c("ActionPanelAssets"):a}(),window);
/* ******** */
(function(j,m){j.execute(function(){j.when("A","jQuery","ready").register("DeliveryCountdownComponent",function(d,a){function i(a,d,f,c,i){this.strings=a;this.asin=d;this.deliveryMessageSectionId=f;this.countdownElementId=c;this.secondsLeft=i;this.intervalHandle=null}m.DeliveryCountdownHandler=function(a){var d=a.strings,f=a.asin,c=a.deliveryMessageSectionId,j=a.fastCountdownElementId,g=a.cheapCountdownElementId;this.cheapCountdownTimer=this.fastCountdownTimer=null;this.start=function(a,e){if(a>0)this.fastCountdownTimer=
new i(d,f,c,j,a),this.fastCountdownTimer.start();if(e>0)this.cheapCountdownTimer=new i(d,f,c,g,e),this.cheapCountdownTimer.start()};this.stop=function(){if(this.fastCountdownTimer)this.fastCountdownTimer.stop(),this.fastCountdownTimer=null;if(this.cheapCountdownTimer)this.cheapCountdownTimer.stop(),this.cheapCountdownTimer=null}};i.prototype.start=function(){var a=this;this.intervalHandle=d.interval(function(){a&&a.updateCountdownText()},1E3)};i.prototype.stop=function(){this.intervalHandle&&m.clearInterval(this.intervalHandle)};
i.prototype.updateCountdownText=function(){this.secondsLeft--;if(this.secondsLeft>0){var d=Math.floor(this.secondsLeft/60),h=d%60,d=Math.floor(d/60),f=this.secondsLeft%60,c=this.strings.inNext,i=d>1?this.strings.hours:this.strings.hour,g=h>1?this.strings.minutes:this.strings.minute,j=f>1?this.strings.seconds:this.strings.second,k=this.strings.timeSeperator;a(this.countdownElementId).html(d>0&&h>0?d+k+i+k+h+k+g+k+c:d>0&&h===0?d+k+i+c:d===0&&h>0?h+k+g+c:f+k+j+c)}else this.stop(),h="<a href='javacript:window.location.reload();'>"+
this.strings.refreshTimeout+"</a>",a(this.deliveryMessageSectionId).html(h)}});j.when("A","jQuery","LUXContext").register("LUXController",function(d,a,i){function e(){return{addressLabel:b,addressId:B,obfuscatedId:G,countryCode:r,zipCode:u,state:s,city:q,district:t,locationType:w}}function h(a){b=a.addressLabel;B=a.addressId;G=a.obfuscatedId;r=a.countryCode;u=a.zipCode;s=a.state;q=a.city;t=a.district;w=a.locationType}function f(a,b,c){a=d.copy(a);a.deviceType=i.deviceType;a.pageType=l;d.post(A,{contentType:"application/x-www-form-urlencoded;charset=utf-8",
params:a,success:function(a){if(a.sembuUpdated){a.address&&h(a.address);var f=e();d.trigger(m,f);d.trigger(g,f);b&&b();j.when("LUXMetrics").execute(function(a){a.logLocationChange(f.locationType)})}else c&&c()},error:function(){d.trigger(k,e());c&&c()}})}var c=!1,l=null,g="DeliveryAddressDropdown_OnAddressChange",m="DeliveryAddressDropdown_OnSembuUpdateSuccess",k="DeliveryAddressDropdown_OnSembuUpdateFail",b,B,G,r,u,s,q,t,w,A="/gp/delivery/ajax/address-change.html";return{locationChangeEventName:g,
locationTypes:{defaultAddress:"DEFAULT_ADDRESS",accountAddress:"ACCOUNT_ADDRESS",lockerAddress:"LOCKER_ADDRESS",locationInput:"LOCATION_INPUT",realmDefault:"REALM_DEFAULT",region:"REGION",country:"COUNTRY",ip2location:"IP2LOCATION"},init:function(a){j.when("LUXResponder").execute(function(b){c?d.equals(a,e())||(h(a),b.refresh()):(h(a),b.activate(),c=!0)});j.when("LUXCustom").execute(function(a){a.activate()});j.when("LUXMetrics").execute(function(a){l=a.getPageType()})},getLocationData:function(){return e()},
changeLocation:function(a,b,c){f(a,b,c)}}});j.when("A","LUXDPOnly").register("LUXDPRefreshController",function(d){function a(a){g=a;i({addressId:g.addressId,zipCode:g.zipCode,city:g.city,state:g.state,district:g.district,countryCode:g.countryCode});var b={asin:g.asin,merchantId:g.merchantId,deviceType:g.deviceType,smid:g.smid,wdg:g.wdg,exMerchId:g.exMerchId};g.useTwisterRefresh==="T1"&&j.when("TwisterUpdateHandler").execute(function(a){a.init(b);c=!0;l=a});j.when("UnifiedLocationUpdateHandler").execute(function(a){c||
(a.init(b),l=a)});e(g.obfuscatedId);h(g.obfuscatedId)}function i(a){var b=1;f("#quantity").length===1&&(b=f("#quantity").val());d.state("unifiedLocation",{addressId:a.addressId,zipCode:a.zipCode,city:a.city,state:a.state,district:a.district,countryCode:a.countryCode,quantity:b})}function e(a){if(g&&g.oneClick){var b="unifiedLocation1ClickAddress";g.deviceType&&g.deviceType==="mobileApp"&&(b="addressID");a||(a=f("#"+b).data("addnewaddress"));b='[id="'+b+'"]';0<f(b).length&&f(b).val(a);if(g.deviceType&&
g.deviceType in m&&(b=d.state("buyNowInfo"))){var c=b.urlParams,c=c.indexOf("addressID=")>0?c.replace(/(addressID=)[^&]*/,"$1"+a):c+"&addressID="+a;b.urlParams=c;d.state("buyNowInfo",b)}}}function h(a){g&&!g.oneClick&&g.updateAddressForNon1Click==="T1"&&(a||(a=f("#unifiedLocationAddress").data("addnewaddress")),f("#unifiedLocationAddress").length===1&&f("#unifiedLocationAddress").val(a))}var f=d.$,c=!1,l=null,g=null,m={tabletApp:1,tabletLargeApp:1,iPad:1};d.on("DeliveryAddressDropdown_OnAddressChange",
function(a){i(a);e(a.obfuscatedId);h(a.obfuscatedId);l!==null&&(l.refresh(),c||d.trigger("LocationUX_OnAddressChange",a))});d.on("UnifiedLocationPostRefresh",function(){d.trigger("diodeAjaxRefreshed")});return{init:function(c){a(c)}}});j.when("A","detailPage:RefreshHandler","LUXDPOnly","a-state").execute(function(d,a){j.register("TwisterUpdateHandler",function(){return{init:function(a){d.state("unifiedLocation",a)},refresh:function(){var i=a.getHandlerInstance("LocationUX"),e=[],h="addressId,zipCode,city,state,district,countryCode".split(",");
if(i){var f=d.state("unifiedLocation"),c;for(c in f)if(f.hasOwnProperty(c)&&d.$.inArray(c,h)>-1){var j=typeof f[c];if(j==="number"||j==="boolean"||j==="string"||f[c]instanceof String)e.push(i.getURLParamObject(c,f[c]===null?"":f[c],1))}}e.length>0&&i.doPageRefresh(e)}}})});j.when("A","LUXDPOnly","a-state").execute(function(d){j.register("UnifiedLocationUpdateHandler",function(){return{init:function(a){d.state("unifiedLocation",a)},refresh:function(){a=2;i()}}});var a=0,i=function(){var a=d.state("unifiedLocation"),
i;for(i in a)if(a.hasOwnProperty(i)){var g=typeof a[i];g==="number"||g==="boolean"||g==="string"||a[i]instanceof String||(a[i]===null?a[i]="":delete a[i])}a&&a.asin&&a.merchantId&&(d.trigger("UnifiedLocationPreRefresh"),d.ajax("/gp/product/features/unified-location/udp/refresh-features.html?_encoding=UTF-8",{params:a,method:"POST",success:e,error:h,abort:f}))},e=function(){d.trigger("UnifiedLocationPostRefresh",!0)},h=function(){d.trigger("UnifiedLocationPostRefresh",!1);--a>0&&i()},f=function(){d.trigger("UnifiedLocationPostRefresh",
!1)}});j.when("A","jQuery","a-popover","LUXWidgetConfig","ready").execute(function(d,a,i,e){function h(h){var i=!1,H=h.selectedAddressId,z=h.selectedObfuscatedId,y=h.selectedAddressLabel,E=h.selectedCountryCode,N=h.selectedZipCode,F=h.selectedState,x=h.selectedCity,p=h.selectedDistrict,o=h.addressPopover.name,v=h.addressPopover.type,C=e.initialAddressLoadCount,M=e.addressReloadCount,D=h.deviceType,L=h.isRecognized,K=0,J=!1;this.init=function(){i||(i=!0,O())};this.destroy=function(){d.off("a:popover:beforeShow:"+
o,U);d.off("a:popover:afterHide:"+o,S);d.capabilities.tablet&&a.isFunction(d.off.orientationchange)&&d.off.orientationchange(X);a(document).undelegate(g,"focus");a(document).undelegate(g,"input");a(document).undelegate(s,"click");a(document).undelegate(l,"click");a(document).undelegate(k+" input[type=radio], "+q+" ul li .a-touch-link.a-touch-select","click");a(document).undelegate(r,"click")};var I=function(){j.when(v).execute(function(a){a.get(o)&&a.get(o).hide()})},O=function(){d.on("a:popover:beforeShow:"+
o,U);d.on("a:popover:afterHide:"+o,S);d.capabilities.tablet&&a.isFunction(d.on.orientationchange)&&d.on.orientationchange(X);a(document).delegate(g,"focus",function(){$()});a(document).delegate(s,"click",function(){var a=!0;D==="mobileApp"&&j.now("mash").execute(function(b){b&&(a=!1,b.navstack.begin().back().end(),b.showLoginDialog({successCallback:function(){b.navstack.begin().back().forward(m.location.href).end()}}))});if(a)m.location.href=h.addressPopover.signInURL+m.location.pathname});a(document).delegate(g,
"keyup",function(){R()});a(document).delegate(g,"keypress",function(a){(a.keyCode||a.which)===13&&T()});a(document).delegate(l,"click",function(){T()});a(document).delegate(k+" input[type=radio], "+q+" ul li .a-touch-link.a-touch-select","click",function(){var b=a.parseJSON(a(this).hasClass("a-touch-link")?a(this).find("input[type=hidden]").val():a(this).val());if(a(this).hasClass("a-active"))I();else if(b){var c=b.id;c!==H&&aa({addressId:c,isDefaultShippingAddress:b.isDefault,addressLabel:b.label,
deviceType:D},!1,a(this))}});a(document).delegate(r,"click",function(){Y()});D==="tabletApp"&&m.scrollBy(0,1)},V=a(g).attr("placeholder"),R=function(){D==="tabletApp"&&(a(g).val()?a(g).removeAttr("placeholder"):a(g).attr("placeholder",V))},T=function(){var b=a(g).val();!b||!b.match(/^\d{5}$/)?Z():aa({zipCode:b,deviceType:D},!0,null)},U=function(){a(n).hasClass("aok-hidden")||(a(g).val(""),$());d.capabilities.tablet&&a("#a-popover-lgtbox")&&a("#a-popover-lgtbox").css({position:"absolute",top:"0px",
left:"0px",width:"100%",height:a("#a-page").css("height")});R();J||Y()},S=function(){D==="tabletApp"&&document.activeElement.blur()},X=function(){j.when(v).execute(function(a){a.get(o)&&a.get(o).refresh()})},Y=function(){L&&a.ajax({type:"POST",url:f,contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{currentAddressCount:K,loadCount:J?M:C,selectedAddressId:H,deviceType:D},dataType:"json",success:function(c){if(c){var d=c.loadedAddressCount;if(d>0){var e=c.html;e&&(a(q).length?(a(q+
" ul li").has("span .a-touch-link.a-touch-select").remove(),a(q+" ul").html(e+a(q+" ul").html())):a(k).html(e),a(b).removeClass("a-hidden aok-hidden"),a(B).addClass("aok-hidden"),a(u).removeClass("a-hidden aok-hidden"),j.when(v).execute(function(a){a.get(o)&&a.get(o).updatePosition()}),c.hasMore?a(r).removeClass("a-hidden aok-hidden"):a(r).addClass("aok-hidden"),K=d)}}J=!0},error:function(){}})},Z=function(){a(g).addClass("a-form-error");a(n).removeClass("a-hidden aok-hidden");D==="tabletApp"&&(document.activeElement.blur(),
a(n)[0].scrollIntoView())},$=function(){a(g).removeClass("a-form-error");a(n).addClass("aok-hidden")},aa=function(b,d,e){a.ajax({type:"POST",url:c,contentType:"application/x-www-form-urlencoded;charset=utf-8",data:b,dataType:"json",success:function(b){if(b.sembuUpdated){if(b=b.address)H=b.addressId,z=b.obfuscatedId,y=b.addressLabel,E=b.countryCode,N=b.zipCode,F=b.state,x=b.city,p=b.district,b="",b=y?y:(x?x+", ":"")+(F?F+" ":"")+N,a(G).html(b),d&&(a(k+" input[type=radio]:checked").attr("checked",!1),
a(g).val("")),a(q+" ul li .a-touch-link.a-touch-select.a-active").removeClass("a-active"),e&&e.hasClass("a-touch-link")&&e.addClass("a-active");I();W(w);W(t)}else b.isValidAddress||Z()},error:function(){W(A)}})},W=function(a){d.trigger(a,{addressId:H,obfuscatedId:z,countryCode:E,zipCode:N,state:F,city:x,district:p})}}var f="/gp/delivery/ajax/get-customer-address-list.html",c="/gp/delivery/ajax/address-change.html",l="#unifiedLocationAddrUpdate",g="#unifiedLocationAddrInput",n="#unifiedLocationInvalidInputAlert",
k="#unifiedLocationAccountAddrList",b="#unifiedLocationTitleSelectAddress",B="#unifiedLocationTitleNoAddress",G="#unifiedLocationSelectedAddressText",r="#unifiedLocationSeeMore",u="#unifiedLocationSeeMoreDiv",s="#unifiedLocationSignIn",q="#unifiedLocationPopoverSelections",t="DeliveryAddressDropdown_OnAddressChange",w="DeliveryAddressDropdown_OnSembuUpdateSuccess",A="DeliveryAddressDropdown_OnSembuUpdateFail";j.register("DeliveryAddressDropdown",function(){var a;return{init:function(b){a&&a.destroy();
(a=new h(b)).init()}}})});j.when("A","jQuery","LUXContext","LUXWidgetConfig","LUXUtils","LUXController","LUXMetrics","ready").register("LUXResponder",function(d,a,i,e,h,f,c){function l(b){b===C?(a(x).addClass("a-form-error"),a(p).width(a(p).parent().width()).removeClass("aok-hidden"),a(o).addClass("aok-hidden")):b===M?(a(x).removeClass("a-form-error"),a(p).addClass("aok-hidden"),a(o).width(a(o).parent().width()).removeClass("aok-hidden")):b===D&&(a(x).removeClass("a-form-error"),a(p).addClass("aok-hidden"),
a(o).addClass("aok-hidden"))}function g(b){a(Q).html(h.generateLocationLabel(b))}function n(b){a(H+" input[type=radio]:checked").attr("checked",!1);for(var c=a(H+" .a-declarative").has(".a-radio input[type=radio]"),b=b.addressId,e=c.length-1;e>=0;e--)if(d.parseJSON(c[e].getAttribute(v)).addressId===b){a(".a-radio input[type=radio]",c[e]).attr("checked",!0);break}}function k(b){b.locationType===f.locationTypes.locationInput&&b.zipCode?a(x).val(b.zipCode):a(x).val("");l(D)}function b(a){j.when("a-dropdown").execute(function(b){b=
b.getSelect(e.countrySelectorComponentName);d.objectIsEmpty(b)||(a.locationType===f.locationTypes.country||a.locationType===f.locationTypes.region||a.locationType===f.locationTypes.ip2location&&!a.state?b.setValue(h.mapLocationDataToCode(a)):b.setValue(""))})}function B(){d.post(P,{contentType:"application/x-www-form-urlencoded;charset=utf-8",params:h.prepareCountrySelectionGeneratorInput(),success:function(c){a(F).html(c);b(f.getLocationData())}})}function G(a){f.changeLocation(a.data,null,function(){n(f.getLocationData())})}
function r(a){f.changeLocation(h.mapCodeToLocationData(a.value),null,function(){b(f.getLocationData())})}function u(){var b=a(x).val();h.validateZipCode(b)?f.changeLocation({zipCode:h.preprocessZipCode(b),locationType:f.locationTypes.locationInput},function(){l(D)},function(){l(C)}):h.isMilitaryZipCode(b)?l(M):l(C)}function s(){j.when(e.addressSelectorComponentType).execute(function(a){a.get(e.addressSelectorComponentName)&&a.get(e.addressSelectorComponentName).hide()})}function q(){var b=a(H+" .a-radio"),
d=a(H+" .a-radio.aok-hidden"),b=b.length===d.length;d.slice(0,b?e.initialAddressLoadCount:e.addressReloadCount).removeClass("aok-hidden");a(H+" .a-radio.aok-hidden").length===0&&(a(E).addClass("aok-hidden"),a(N).addClass("aok-hidden"));b||c.logEvent(c.getEvents().click.seeMore)}function t(a){g(a);n(a);k(a);b(a);s()}function w(){var b=f.getLocationData();k(b);i.isRecognizedCustomer&&a(H+" .a-radio").length===0&&a(z).length===0&&d.get(A,{params:{currentAddressId:b.addressId,deviceType:i.deviceType},
success:function(b){b&&(a("#unifiedLocationTitleNoAddress").remove(),a("#unifiedLocationAccountAddrList").remove(),a("#unifiedLocationSeeMoreDiv").remove(),a("#unifiedLocationTitleSelectAddress").remove(),a(y).before(b),q())}});a.trim(a(F).html()).length||B(b);c.logWidgetView(c.getEvents().view.addressSelector)}var A="/gp/delivery/ajax/get-address-selections.html",P="/gp/delivery/ajax/get-country-selections.html",Q=".lux-location-label",H="#LUXAddressSelections",z="#LUXNoAddressNote",y=".lux-address-selector-divider",
E="#LUXSeeMoreAddressLink",N="#LUXAddressActionSeparator",F="#unifiedLocationCountrySelectionDiv",x="#unifiedLocationAddrInput",p="#LUXInvalidZipCodeAlert",o="#LUXMilitaryZipCodeAlert",v="data-lux-address-selection",C=1,M=2,D=3;return{activate:function(){var b=f.getLocationData();c.logPageView(b.locationType);b.locationType===f.locationTypes.region&&g(b);d.on("a:popover:beforeShow:"+e.addressSelectorComponentName,w);k(b);d.on(f.locationChangeEventName,t);d.declarative("lux-address-selection",["change"],
G);a(document).delegate(x,"keypress",function(a){a.which===13&&u()});a(document).delegate(x,"focus",function(){l(D)});a(document).delegate("#unifiedLocationAddrUpdate","click",u);a(document).delegate("#unifiedLocationSignIn","click",function(){c.logEvent(c.getEvents().click.signIn);m.location.href=e.signInURL+m.location.pathname});a(document).delegate(E,"click",q);a(document).delegate(".lux-manage-address-link","click",function(){c.logEvent(c.getEvents().click.manageAddressBook);return!0});d.on("a:dropdown:"+
e.countrySelectorComponentName+":select",r)},refresh:function(){t(f.getLocationData())}}});j.declare("LUXWidgetConfig",{addressSelectorComponentName:"LUXAddressSelector",addressSelectorComponentType:"a-popover",countrySelectorComponentName:"LUXCountrySelector",countrySelectorComponentType:"a-dropdown",initialAddressLoadCount:5,addressReloadCount:5,signInURL:"/gp/sign-in.html?ie=UTF8&useRedirectOnSuccess=1&path="});j.when("A","jQuery","LUXController","RegionNames","ready").register("LUXRegionData",
function(d,a,i,e){function h(a){if(d.objectIsEmpty(a)||!a.countryCode||!a.zipCode)return null;for(var e in f)if(f.hasOwnProperty(e)&&d.reduce(f[e],function(g,h,i){return g&&!d.objectIsEmpty(a[i])&&d.equals(a[i],f[e][i])},!0))return e;return null}var f={"GB-ML":{countryCode:"GB",zipCode:"KA10 6EB"},"GB-NI":{countryCode:"GB",zipCode:"BT1 3ES"},"GB-JE":{countryCode:"GB",zipCode:"JE2 4QA"},"GB-IS":{countryCode:"GB",zipCode:"ZE1 0BX"},"GB-BF":{countryCode:"GB",zipCode:"BFPO 204"},"GB-HI":{countryCode:"GB",
zipCode:"PH41 4PU"},"DE-ML":{countryCode:"DE",zipCode:"60313"},"DE-GI":{countryCode:"DE",zipCode:"27498"},"FR-ML":{countryCode:"FR",zipCode:"75001"},"FR-CH":{countryCode:"FR",zipCode:"20000"},"FR-GP":{countryCode:"FR",zipCode:"97100"},"FR-GY":{countryCode:"FR",zipCode:"97300"},"FR-MC":{countryCode:"FR",zipCode:"98000"},"FR-MQ":{countryCode:"FR",zipCode:"97200"},"FR-NC":{countryCode:"FR",zipCode:"98800"},"FR-PF":{countryCode:"FR",zipCode:"98700"},"FR-RE":{countryCode:"FR",zipCode:"97400"},"FR-SB":{countryCode:"FR",
zipCode:"97133"},"FR-SM":{countryCode:"FR",zipCode:"97150"},"FR-SP":{countryCode:"FR",zipCode:"97500"},"FR-WF":{countryCode:"FR",zipCode:"98611"},"FR-YT":{countryCode:"FR",zipCode:"97600"},"IT-ML":{countryCode:"IT",zipCode:"20125"},"IT-II":{countryCode:"IT",zipCode:"09121"},"ES-ML":{countryCode:"ES",zipCode:"28004"},"ES-BI":{countryCode:"ES",zipCode:"07003"},"ES-CI":{countryCode:"ES",zipCode:"35005"},"BR-SP":{countryCode:"BR",zipCode:"01319900"}};return{getRegions:function(){return f},mapLocationDataToRegionCode:function(a){return h(a)},
mapRegionCodeToLocationData:function(c){c=f.hasOwnProperty(c)?a.extend({},{addressLabel:e[c],countryCode:f[c].countryCode,zipCode:f[c].zipCode,state:f[c].state,city:f[c].city,locationType:i.locationTypes.region}):null;return c}}});j.when("A","jQuery","ready").register("LUXRegionConfig",function(){var d=[],a="AE,AR,AT,AU,BE,BG,BH,BM,BR,CA,CH,CL,CN,CO,CR,CY,CZ,DE,DK,EC,EE,EG,ES,FI,FR,GB,GP,GR,HK,HU,ID,IE,IL,IN,IS,IT,JO,JP,KE,KR,KW,KZ,LI,LT,LU,LV,MC,MO,MT,MX,MY,NG,NL,NO,NZ,OM,PA,PE,PH,PL,PT,QA,RO,RS,RU,SA,SE,SG,SI,SK,TH,TR,TT,TW,US,UY,VE,ZA".split(","),
i=/^\d{5}([ \-]\d{4})?$/,e=/^[ \t]*([AFD](\.?)([ \t]?)P(\.?)([ \t]?)O(\.?)[ \t]*[A-Z]{2}[ \t]*[0-9]{5}([ \-][0-9]{4})?)[ \t]*$/;return{getPrimarySelections:function(){return d},getSecondarySelections:function(){return a},getZipCodePattern:function(){return i},getMilitaryZipCodePattern:function(){return e},preprocessZipCode:function(a){return a.toUpperCase().trim().substring(0,5)}}});j.declare("RegionNames",{"GB-ML":"UK - Mainland","GB-BF":"UK - BFPO","GB-JE":"UK - Channel Islands","GB-IS":"UK - Islands",
"GB-NI":"UK - Northern Ireland","GB-HI":"UK - Scottish Highlands","DE-ML":"Germany - Mainland","DE-GI":"German Islands","FR-ML":"France - Mainland","FR-CH":"Corsica","FR-GP":"Guadeloupe","FR-GY":"Guyane","FR-MC":"Monaco","FR-MQ":"Martinique","FR-NC":"New Caledonia","FR-PF":"French Polynesia","FR-RE":"Reunion","FR-SB":"Saint Barthélemy","FR-SM":"Saint Martin","FR-SP":"Saint Pierre and Miquelon","FR-WF":"Wallis and Futuna Islands","FR-YT":"Mayotte","IT-ML":"Italy - Mainland","IT-II":"Italian Islands",
"ES-ML":"Spain - Mainland","ES-BI":"Spain - Balearic Islands","ES-CI":"Spain - Canary Islands, Ceuta and Melilla","BR-SP":"Brazil"});j.declare("CountryNames",{AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AN:"Netherlands Antilles",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Aland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",
BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Saint Eustatius and Saba",BR:"Brazil",BS:"Bahamas, The",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, The Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",
CO:"Colombia",CR:"Costa Rica",CS:"Serbia and Montenegro",CU:"Cuba",CV:"Cape Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",
GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia, The",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and the McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",
IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",
ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia, The Former Yugoslav Republic of",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",
OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territories",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",
SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",
US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",YU:"Yugoslavia",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"});j.when("A","jQuery","LUXController","LUXRegionData","LUXRegionConfig","LUXContext","CountryNames","RegionNames").register("LUXUtils",function(d,a,i,e,h,f,c,j){function g(a){return!d.objectIsEmpty(a)&&
a.countryCode&&c.hasOwnProperty(a.countryCode)?d.equals(a.locationType,i.locationTypes.country)?a.countryCode:d.equals(a.locationType,i.locationTypes.region)?e.mapLocationDataToRegionCode(a):e.mapLocationDataToRegionCode(a)||a.countryCode:null}function m(a){return c.hasOwnProperty(a)?c[a]:j.hasOwnProperty(a)?j[a]:null}function k(a){var c={};if(!d.objectIsEmpty(a))for(var e=a.length,f=0;f<e;f++)c[m(a[f])]=a[f];return c}return{getNameForCode:function(a){return m(a)},mapCodeToLocationData:function(a){a=
a?c.hasOwnProperty(a)?{countryCode:a,locationType:i.locationTypes.country}:e.mapRegionCodeToLocationData(a):null;return a},mapLocationDataToCode:function(a){return g(a)},generateLocationLabel:function(a){var c="";return c=a.addressLabel?a.addressLabel:a.locationType!==i.locationTypes.region&&a.locationType!==i.locationTypes.country&&(a.city||a.state)&&a.zipCode?(a.city?a.city+", ":"")+(a.state?a.state+" ":"")+a.zipCode:m(g(a))},prepareCountrySelectionGeneratorInput:function(){return{deviceType:f.deviceType,
primarySelections:JSON.stringify(k(h.getPrimarySelections())),primarySelectionsOrder:JSON.stringify(h.getPrimarySelections()),secondarySelections:JSON.stringify(k(h.getSecondarySelections()))}},validateZipCode:function(a){return!d.objectIsEmpty(a)&&h.getZipCodePattern().test(a.toUpperCase())},preprocessZipCode:function(a){return h.preprocessZipCode(a)},isMilitaryZipCode:function(a){return!d.objectIsEmpty(a)&&h.getMilitaryZipCodePattern().test(a.toUpperCase())}}});j.when("A","jQuery","LUXContext",
"ready").register("LUXMetrics",function(d,a,i){function e(a,d){m.ueLogError&&a&&m.ueLogError({message:a},{logLevel:d||"ERROR",attribution:c})}function h(a){m.ue?m.ue.count(a,(m.ue.count(a)||0)+1):e("Failed to increment metrics counter: "+a+" because window.ue is not present.","ERROR")}function f(){var a;if(a=m.ue_pty)a:{a=m.ue_pty;for(var c in l)if(l.hasOwnProperty(c)&&d.indexOfArray(l[c],a)!==-1){a=!0;break a}a=!1}return a?m.ue_pty:"unrecognizedPage"}var c="LocationUX",l={detail:["Detail","DetailAW",
"DetailWebView","TabletUDP"],search:["Search","SearchAW"],offerListing:["OfferListing","OfferListingAW","OfferListingMobileAppAW"]},g={click:{signIn:"click.signIn",seeMore:"click.seeMore",manageAddressBook:"click.manageAddressBook"},view:{page:"view.page",addressSelector:"view.addressSelector",countrySelector:"view.countrySelector"},selection:"selection",override:"override"};return{getPageType:function(){return f()},getEvents:function(){return g},logLocationChange:function(a){j.when("LUXController").execute(function(e){var b=
f(),j=c+"."+b;j+=d.equals(a,e.locationTypes.locationInput)||d.equals(a,e.locationTypes.realmDefault)||d.equals(a,e.locationTypes.ip2location)?"."+g.override+"."+a:"."+g.selection+"."+a;!d.equals(a,e.locationTypes.defaultAddress)&&!d.equals(a,e.locationTypes.accountAddress)&&!d.equals(a,e.locationTypes.lockerAddress)&&(j+="."+(i.isRecognizedCustomer?"recognized":"unrecognized"));d.indexOfArray(l.detail,b)!==-1&&i.isRecognizedCustomer&&(j+="."+(i.isOneClick?"1Click":"Non1Click"));h(j)})},logPageView:function(a){j.when("LUXController").execute(function(e){var b=
f(),j=c+"."+b+"."+g.view.page+"."+a;!d.equals(a,e.locationTypes.defaultAddress)&&!d.equals(a,e.locationTypes.accountAddress)&&!d.equals(a,e.locationTypes.lockerAddress)&&(j+="."+(i.isRecognizedCustomer?"recognized":"unrecognized"));d.indexOfArray(l.detail,b)!==-1&&i.isRecognizedCustomer&&(j+="."+(i.isOneClick?"1Click":"Non1Click"));h(j)})},logWidgetView:function(a){var e=f(),a=c+"."+e+"."+a+"."+(i.isRecognizedCustomer?"recognized":"unrecognized");d.indexOfArray(l.detail,e)!==-1&&i.isRecognizedCustomer&&
(a+="."+(i.isOneClick?"1Click":"Non1Click"));h(a)},logEvent:function(a){a=c+"."+f()+"."+a;h(a)},logError:function(a,c){e(a,c)}}})})})(function(){var j=window.AmazonUIPageJS||window.P,m=j._namespace||j.attributeErrors;return m?m("DeliveryStatic"):j}(),window);
/* ******** */
(function(a){a.execute(function(){a.when("A","afx-update-cart-count","prime-fresh-upsell","ready").register("fresh-dp-add-to-cart",function(c,b,e){return{init:function(){a.when("fresh-atc-handler").execute(function(d){d.addToFreshCart({success:function(){e.handlePrimeFreshUpsell()},error:function(){a.log("Error adding to Cart on Fresh Detail Page","Error")}})});c.$("#addToCart").submit(function(a){a.preventDefault()})}}});a.when("A","afx-utils","ready").register("fresh-show-atc-changeover",function(a,
b){var e=a.$,d=e("#afx-atc-changeover");return function(g){if(g&&d.length>0&&b.isFunction(d.find)){var f=a.state("fresh-atc-toast-text");if(f&&f.atcToastTextString&&(g=f.atcToastTextString.replace("FreshATCToastQuantity",g),(f=d.find(".a-changeover-inner"))&&b.isFunction(f.text)))f.text(g),b.isFunction(d.show)&&d.show()}}});a.when("A","afx-get-cart-count").register("afx-update-cart-count",function(c,b){return function(c){var d=function(c){a.when("nav.setCartCount").execute(function(a){a(c)});a.when("aw-mash").execute(function(a){a.cart&&
typeof a.cart.didUpdate==="function"&&a.cart.didUpdate({newCartQuantity:c})})};b({sessionID:c,success:function(b){b&&b.isOK&&b.total&&b.total.numActiveItem?d(b.total.numActiveItem):a.log("Failed to get cart count","Error",c)},error:function(){a.log("Failed to get cart count","Error",c)}})}});a.when("A","afx-utils","ready").register("fresh-show-atl-changeover",function(a,b){var e=a.$,d=e("#afx-atl-changeover");return function(){d.length>0&&b.isFunction(d.show)&&d.show()}});a.when("A","ready").register("prime-fresh-upsell",
function(c){var b=function(b){b.isOk||a.log("prime-fresh-upsell: prime fresh upsell call encountered error","ERROR")},e=function(){a.log("prime-fresh-upsell: prime fresh upsell call failed","ERROR")};return{handlePrimeFreshUpsell:function(){c.$("#primeFreshUpsellCheckbox").is(":checked")&&c.post("/afx/detailpage/primefreshupsell",{success:b,timeout:500,error:e})}}});a.when("jQuery").register("fresh-dp-availability",function(a){return{init:function(){var b=a("#fresh-merchant-info a");b.replaceWith(b.text())}}})})})(function(){var a=
window.AmazonUIPageJS||window.P,c=a._namespace||a.attributeErrors;return c?c("FreshDetailPageDesktopAssets"):a}(),window);
/* ******** */
(function(c,b,d){c.execute(function(){c.when("A","jQuery","a-modal","afx-uatc-proxy","afx-update-cart-count","a-dropdown","fresh-dp-double-click","afx-csm-metrics-utils","fresh-show-atc-changeover","fresh-dp-quantity","afx-utils","ready").register("fresh-atc-handler",function(f,a,b,e,D,i,l,g,j,m,s){var k;c.when("EWC").execute("add-to-cart-refresh",function(a){k=a});c.when("nav.getFlyout").execute(function(a){a("ewc")});return{addToFreshCart:function(h){var i,t,u,n,p,y,v,q,F,z,w,A,G,H,E,B,C;function r(a,
f,c,b){I(a);h.error(a,f,c,b)}function I(l,e){var j=l.data.title,z=l.data.asin,h=l.data.offerListingID,m=l.data.sessionID,k=e!==d?e.itemStatusCode:d,D=e!==d?e.availableQuantity:d,L=e!==d?e.requestedQuantity:d;switch(k){case i:g.increment(p);break;case t:g.increment(y);break;case u:g.increment(v);break;case n:g.increment(q);break;default:g.increment(F),c.log("fresh-atc-handler: No error status code.","ERROR")}b.create(l.$currentTarget,{name:"fresh-add-to-cart-modal",sessionID:m,url:"/afx/cart/reservation_conflict?"+
a.param({reasonCode:k,title:j,asin:z,offerListingID:h,sessionID:m,quantityAdded:D,quantityRequested:L})}).show();f.on("a:popover:afterHide:fresh-add-to-cart-modal",function(a){J(m);b.remove(a.popover)})}function K(b,l,o){o||(o=function(){});try{var d=b.data.asin;if(d)if(b.data.title){var j=b.data.offerListingID;if(j){var q=b.data.sessionID;if(q){var h=m.val();h||(c.log('fresh-atc-handler: "quantity" action parameter is missing.',"ERROR"),h=1);g.setWidgetClickTimestamp(A);e({asin:d,offerListingID:j,
sessionID:q,quantity:h,reftag:"afx-dp-addtocart",success:function(e){try{if(g.sendWidgetMetrics(A),e&&e.isOK){var d=e.extraErrorInfos;if(d.constructor!==Array)g.increment(G);else if(d.length===0)g.increment(H),l(e,q,h);else for(e=0;e<d.length;e++){var j=b,i=d[e];if(i)if(i.statusCode==="ADDRESS_NOT_SELECTED"){g.increment(z);c.log("fresh-atc-handler: Address is not selected.","INFO");var m=a.param({asin:j.data.asin,offerListingID:j.data.offerListingID,quantity:1,redirectURL:document.location.href,ref:"afx_atfc_noaddress"});
document.location.href="/afx/nc/chooseaddress?"+m}else I(j,i)}}else g.increment(E),r(b,"","","No response or isOK is false in UATC")}catch(k){g.increment(B),c.log("fresh-atc-handler exception: "+k,"ERROR")}finally{f.delay(o,C)}},error:function(a,e,l){try{g.sendWidgetMetrics(A),g.increment(E),r(b,a,e,l)}catch(d){g.increment(B),c.log("fresh-atc-handler exception: "+d,"ERROR")}finally{f.delay(o,C)}}})}else c.log('fresh-atc-handler: Required "sessionID" action parameter is missing.',"ERROR"),g.increment(w),
r(b)}else c.log('fresh-atc-handler: Required "offerListingID" action parameter is missing.',"ERROR"),g.increment(w),r(b)}else c.log('fresh-atc-handler: Required "title" action parameter is missing.',"ERROR"),g.increment(w),r(b);else c.log('fresh-atc-handler: Required "asin" action parameter is missing.',"ERROR"),g.increment(w),r(b)}catch(i){g.increment(B),c.log("fresh-atc-handler exception: "+i,"ERROR"),f.delay(o,C)}}function M(a){var b={token:(f.state("baseWidgetState")||{}).csrfToken};f.post("/afx/slotselection/cancel",
{timeout:5E3,params:b,success:function(){K(a,function(){location.reload()})},error:function(){c.log("Failed to clear reservation")}})}function J(a){k&&typeof k.refresh==="function"?k.refresh():D(a)}C=1E3;w="freshAddToCartMissingParameterCount";B="freshAddToCartExceptionCount";A="freshUATCCall";H="freshUATCSuccessCount";E="freshUATCFailureCount";G="freshUATCInvalidErrorResponseCount";z="freshUATCAddressNotSelectedErrorCount";y="freshUATCItemPartiallyAvailableErrorCount";v="freshUATCItemPartiallyAvailableForReservationErrorCount";
p="freshUATCItemNotAvailableErrorCount";q="freshUATCItemNotAvailableForReservationErrorCount";F="freshUATCEmptyItemStatusCodeErrorCount";i="ITEM_NOT_AVAILABLE";t="ITEM_PARTIALLY_AVAILABLE";u="ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION";n="ITEM_NOT_AVAILABLE_FOR_RESERVATION";var N=function(a,b,f){j(f);J(b);h.success(a)};f.declarative("fresh-clear-slot","click",function(a){M(a)});f.declarative("fresh-atc-handler","click",l(function(a,b){m.valid()?(s.vibrate(),g.increment("freshAddToCartClickCount"),K(a,
N,b)):b()}))}}});c.when("A","jQuery","a-button","fresh-show-atl-changeover","ready").register("FreshAddToShoppingList",function(b,a,o,e){function d(a){var c=(b.state("baseWidgetState")||{}).csrfToken;b.post("/afx/lists/json/shoppinglists/additem",{cache:!1,timeout:5E3,params:{asin:a.asin,listID:a.shoppingListID,token:c},success:function(b){a.addButtonInstance.enable();b.successful?(a.$modalParent.find("#"+a.cancelButtonID).click(),e()):b.errorCodes[0]===1?a.$alreadyInMessage.removeClass("aok-hidden"):
i(a)},error:function(){a.addButtonInstance.enable();i(a)}})}function i(a){a.$errorMessage.removeClass("aok-hidden");c.log("Failed to add asin "+a.asin+" to shopping list "+a.shoppingListID,"ERROR")}b.declarative("add-to-list","click",function(a){var b=a.$currentTarget.closest(".a-popover-wrapper");if(b.length<1)c.log("Could not find the element that parents this modal (it should contain class a-popover wrapper)","FATAL");else{var f=b.find("#"+a.data.addButtonID),e;f.length<1?(c.log("Could not find the button that will add the item. This is required for preventing double clicks",
"ERROR"),e=!1):a.data.asin?e=!0:(c.log("ASIN was blank. Please supply the ASIN you wish to add to the list.","ERROR"),e=!1);e&&(f=o(f),f.isEnabled()&&(f.disable(),a={asin:a.data.asin,addButtonInstance:f,$modalParent:b,cancelButtonID:a.data.cancelButtonID,shoppingListID:b.find("#"+a.data.asin+"-afx-atl-dropdown").val(),$alreadyInMessage:b.find("#afx-atl-already-in"),$errorMessage:b.find("#afx-atl-service-error")},a.$alreadyInMessage.addClass("aok-hidden"),a.$errorMessage.addClass("aok-hidden"),d(a)))}})});
c.when("A","jQuery","a-dropdown").register("fresh-dp-quantity",function(b,a,c){var e=/^\d+$/;return function(){var d,i,l,g,j,m,s,k,h,x,t,u,n,p=function(){if(!d){i=a("#freshCartButton");j=c.getSelect("quantity");if(l=!!j){g=a("#quantitySelect");var b=j.getOptions().size();b&&(s=b-1)}k=a("#quantityText");if(m=k.length!==0)h=a("#quantityTextInput"),x=a("#quantityTextErrors > div"),t=a("#quantityFreeTextErrorMsgMin"),u=a("#quantityFreeTextErrorMsgMax")}},y=function(){b.on("a:dropdown:selected:quantity",
function(b){a(b.nativeItemNode).index()===s?(h.attr("validValue",n),h.val(n),k.show(),x.hide(),g.hide(),h.focus().select()):n=j.val()});var c=function(){var a=h.attr("validValue");a&&(j.val(a),j.val()===a?(n=a,g.show(),k.hide()):i.focus())},d=function(){var a=v(h.val());h.attr("validValue",a?a:"")};h.change(d);h.keyup(d);h.keypress(function(a){if(a.which===0||a.which===8||a.ctrlKey||a.altKey)return!0;if(e.test(String.fromCharCode(a.which)))return!0;a.which===13&&(c(),i.click());return!1});h.blur(c)},
v=function(){var a;a:{a=h.val();if(e.test(a)&&(a=parseInt(a,10),!isNaN(a)))break a;a=!1}x.hide();if(a===!1||a<=0)t.show();else if(a>=1E3)u.show();else return String(a);return!1};return{init:function(){d=!1;p();d=!0;if(m){k.hide().removeClass("aok-hidden");x.hide().removeClass("aok-hidden");var b=j.getOption(s),f=b.info()[0].text;b.update({value:"0",text:a.trim(f)+"+"});n=j.val();y()}},valid:function(){p();return m&&k.is(":visible")?v()!==!1:!0},val:function(){p();return m&&k.is(":visible")?h.attr("validValue"):
l?j.val():1}}}()});c.register("fresh-dp-constants",function(){return{actionPanelDataSelector:"#apos",actionPanelStateData:"apstate",actionPanelFreshState:"fresh",navFreshNodeId:"10329849011",mobileNavSearchFormSelector:'#nav-search-form, form[role="search"]'}});c.when("jQuery","fresh-dp-constants").register("fresh-dp-access-panel",function(b,a){var c=b(a.actionPanelDataSelector).data(a.actionPanelStateData);return{state:c,isFresh:a.actionPanelFreshState===c}});c.when("A").register("afx-uatc-proxy",
function(b){return function(a){var c="/gp/add-to-cart/json";a.reftag!==d&&(c+="/ref="+a.reftag);b.post(c,{timeout:5E3,params:{"session-id":a.sessionID,clientName:"SharedFreshHandler",nextPage:"cartitems",ASIN:a.asin,offerListingID:a.offerListingID,useUber:"1",source:"Fresh",ruleSet:"FreshGet",quantity:a.quantity},success:a.success,error:a.error})}});c.when("A").register("afx-get-cart-count",function(b){return function(a){b.get("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:a.sessionID,
clientName:"sharedFreshHandler"},success:a.success,error:a.error})}});c.when("A").register("afx-dp-get-cart-item-count",function(){return function(b,a){if(a&&a.items){var c;for(c=0;c<a.items.length;++c){var e=a.items[c];if(e&&e.ASIN===b)return e.quantity}}}});c.register("afx-csm-metrics-utils",function(){return{setWidgetClickTimestamp:function(c){b.ue&&b.uet&&c&&b.uet("bb",c,{wb:1})},setWidgetTimestamp:function(c,a){b.ue&&b.uet&&c&&a&&b.uet(c,a,{wb:1})},increment:function(c){b.ue&&b.ue.count&&c&&
b.ue.count(c,(b.ue.count(c)||0)+1)},setCount:function(c,a){b.ue&&b.ue.count&&c&&a&&b.ue.count(c,a)},sendWidgetMetrics:function(c){b.ue&&b.uex&&c&&b.uex("ld",c,{wb:1})}}});c.when("A","jQuery","a-button","ready").register("fresh-dp-double-click",function(b){return function(a){var c={disabled:"true"},e={};return function(d){var i=b.state("fresh-atc-status");if(!i||!i.disabled)i&&b.state("fresh-atc-status",c),a(d,function(){(i=b.state("fresh-atc-status"))&&b.state.replace("fresh-atc-status",e)})}}});
c.register("afx-utils",function(){return{isFunction:function(b){return typeof b==="function"},isDefined:function(b){return typeof b!=="undefined"},vibrate:function(){return b.amazon&&b.amazon.cordova&&b.amazon.cordova.notification&&b.amazon.cordova.notification.vibrate&&b.amazon.cordova.notification.vibrate(50)}}})})})(function(){var c=window.AmazonUIPageJS||window.P,b=c._namespace||c.attributeErrors;return b?b("FreshDetailPageCommonAssets"):c}(),window);
/* ******** */
(function(h,j,m){h.execute(function(){if(!j.alohaBuyBoxUSLoadDone)j.alohaBuyBoxUSLoadDone=!0,h.when("A","a-dropdown","alohaBuyBoxJS","aloha-base","ready").execute(function(d,f,c){var b=d.$,a=this;a.buyboxJs=new c;a.buyboxRefreshDone=!1;a.pricingRefreshDone=!1;a.availabilityRefreshDone=!1;a.buyboxJs.getLinkOffDisplayed()&&(c=a.buyboxJs.getSessionId(),a.buyboxJs.logLinkOffMetrics("IMPRESSION",c));d.on("aloha:buyboxRefreshComplete",function(){a.buyboxRefreshDone=!0;a.updateWidgets()});d.on("aloha:pricingRefreshComplete",
function(){a.pricingRefreshDone=!0;a.updateWidgets()});d.on("aloha:availabilityRefreshComplete",function(){a.availabilityRefreshDone=!0;a.updateWidgets()});a.updateWidgets=function(){if(a.pricingRefreshDone&&a.buyboxRefreshDone&&a.availabilityRefreshDone){var c=a.selectedTransaction,d=a.selectedContractType!==m?a.selectedContractType:a.selectedConditionType;/^financing.+/.test(d)&&(d="financing");var g;g=c==="linkOff"?b("#linkOffSection"):b("#alohaBuyBoxWidget #contract-container-"+c);var e;switch(d){case "m2m":e=
b("#alohaBuyBoxWidget #"+c+"-m2m-info");break;case "twoYear":e=b("#alohaBuyBoxWidget #"+c+"-info");break;case "financing":e=b("#alohaBuyBoxWidget #financing-contract-"+c+" ."+a.selectedContractType);break;case "new":e=b("#alohaBuyBoxWidget #DEVICE_ONLY-new-info");break;case "used":e=b("#alohaBuyBoxWidget #DEVICE_ONLY-used-info");break;case "refurbished":e=b("#alohaBuyBoxWidget #DEVICE_ONLY-refurbished-info")}a.selectedTransaction=a.selectedContractType=a.selectedConditionType=m;g!==m&&g.length&&f.getSelect("transaction-selector").setValue(c);
e!==m&&e.length&&e.trigger("click");a.pricingRefreshDone=a.buyboxRefreshDone=a.availabilityRefreshDone=!1}};b(document).delegate("li[id^='transaction-selector'] a.a-active","click",function(){var a=b("#alohaBuyBoxWidget div .contract-container:visible .selected");a!==m&&a.length&&a.trigger("click")});d.declarative("select-transaction","change click",function(c){var d=f.getSelect("transaction-selector").val(),g=c.data.sessionId;if(!(d===""||d===m))a.buyboxJs.hideTransactionAlertMessage(),d==="linkOff"?
(a.buyboxJs.showLinkOffButton(),a.buyboxJs.hideFastTrackMessage(),a.buyboxJs.hideTransactionContainer(),a.buyboxJs.hideAddToCartWithoutContractButton(),a.buyboxJs.hideAddToCartWithContractButton(),a.buyboxJs.hideAvailabilityMessage(),a.buyboxJs.showLinkOffPrice(),a.buyboxJs.showLinkOffAvailability(),a.buyboxJs.updatePricingContainer(),a.buyboxJs.logLinkOffMetrics("IMPRESSION",g),a.selectedTransaction=d,a.selectedContractType=a.selectedConditionType=m):(a.buyboxJs.showFastTrackMessage(),a.buyboxJs.hideLinkOffButton(),
a.buyboxJs.hideLinkOffAvailability(),a.buyboxJs.hideLinkOffPrice(),a.buyboxJs.displayTransactionContainer(d),a.buyboxJs.updatePricingContainer(d),a.buyboxJs.updateTaxInfoForTransaction(d),c.type==="change"?(a.buyboxJs.disableAddToCartButton(d),a.selectedTransaction=d,a.selectedContractType=a.selectedConditionType=m,b("#alohaBuyBoxWidget #contract-container-"+d+" .selected").trigger("click")):c.type==="click"&&a.buyboxJs.showMorePricingOption())});d.declarative("link-off-click","click",{allowLinkDefault:!0},
function(b){a.buyboxJs.logLinkOffMetrics("CLICK",b.data.sessionId)});d.declarative("select-contract","click",function(c){var d=c.data.transaction,g=c.data.discriminator;b("#contract-container-"+d+" .selected").removeClass("selected");c.$currentTarget.addClass("selected");var e=c.data.offerListingType;a.buyboxJs.hideAvailabilityMessage();if(e==="PURCHASABLE"){a.buyboxJs.showFastTrackMessage();a.buyboxJs.hideLinkOffButton();var f=c.data.financingContract==="true"?!0:!1,h=c.data.twoYearContract==="true"?
!0:!1,j=c.data.m2mContract==="true"?!0:!1;a.selectedContractType=c.data.contractType;a.buyboxJs.updateM2MSelectedField("false");a.buyboxJs.updateFinancingOptionField("");f?(c=c.data.asin,a.buyboxJs.updateFinancingOptionField(c),a.buyboxJs.updateTaxInfoForFinancingTerm(c),a.buyboxJs.enableAddToCartButton(d,c)):h?(a.buyboxJs.updateTaxInfoForTransaction(d),a.buyboxJs.enableAddToCartButton(d)):j&&(a.buyboxJs.updateM2MSelectedField("true"),a.buyboxJs.enableAddToCartButton(d,"",j));a.buyboxJs.hideMorePricingOption()}else e===
"ADVERTISEMENT"&&(a.buyboxJs.hideFastTrackMessage(),a.buyboxJs.hideAddToCartButton(),a.buyboxJs.showLinkOffButton(),a.buyboxJs.hideMorePricingOption());a.buyboxJs.updatePricingContainer(d,e,g);a.buyboxJs.updateAvailabilityMessage(d,e,g)});d.declarative("select-device-only","click",function(c){var d=c.data.transaction,g=c.data.condition,e=c.data.discriminator,f=c.data.offerListingType;a.selectedConditionType=g;a.buyboxJs.hideAddToCartButton();a.buyboxJs.toggleAddToCartWithoutContractButton(g);b("#device-only-container .selected, #contract-container-DEVICE_ONLY .selected").removeClass("selected");
g==="new"&&(a.buyboxJs.hideAvailabilityMessage(),a.buyboxJs.updatePricingContainer(d,f,e),a.buyboxJs.updateAvailabilityMessage(d,f,e));c.$currentTarget.addClass("selected")});d.declarative("add-to-cart","click",function(b){var c=b.data.transaction,g=b.data.vid,e=a.buyboxJs.buildExternalAlohaPath("/rbi/aloha/buyboxHandler");d.ajax(e,{method:"post",params:b.data,success:function(b){a.buyboxJs.handleAddToCartAjaxSuccess(b,c,g)},error:function(){a.buyboxJs.handleAjaxFailure()}})});d.declarative("checkout-with-popover",
"click",function(){var c=[];b("#aloha-cart-details .deviceContainer").each(function(){var a=b(this);c.push(a.find(".lineId").val())});var f={"operations[]":["REMOVE_DEVICE","ADD_DEVICE"]};f["lineid[]"]=c;var g=b("#aloha-atc-fields");b.extend(f,a.buyboxJs.serializeInputs(g));g=a.buyboxJs.buildExternalAlohaPath("/rbi/aloha/alohaCartPopoverHandler");d.ajax(g,{method:"post",params:f,success:function(b){a.buyboxJs.handleAddToCartAjaxSuccess(b,f.transaction)},error:function(){a.buyboxJs.handleAjaxFailure()}})});
d.declarative("tax-info-popup","click",function(a){var c=a.data.id,a="/gp/help/customer/display.html/ref="+a.data.refTag+"?ie=UTF8&pop-up=1&nodeId=",d=800,e=540,f=(j.screenX?j.screenX:j.screenLeft)+(b(j).width()-d)/2,h=(j.screenY?j.screenY:j.screenTop)+(b(j).height()-e)/2;j.outerWidth&&j.innerWidth&&(f+=(j.outerWidth-j.innerWidth)/2);j.outerHeight&&j.innerHeight&&(h+=j.outerHeight-j.innerHeight);d-=16;e-=172;j.open(a+c,"newwindow","height="+e+",width="+d+",left="+f+",top="+h+",location=no,scrollbars=yes,toolbar=no,menubar=no,directories=no,status=yes,resizable=yes")});
d.declarative("add-to-cart-with-no-contract","click",function(){a.buyboxJs.resetTransactionDropdown()})}),h.when("A","a-modal","aloha-base").register("alohaBuyBoxJS",function(d,f){return function(){var c=d.$,b=this;b.settings={DEFAULT_ERROR_HEADER_MESSAGE:c("#alohaBuyBoxWidget input[name=aloha-default-error-message-header]").val(),DEFAULT_ERROR_MESSAGE:c("#alohaBuyBoxWidget input[name=aloha-error-message").val(),TRANSACTION_ALERT_SELECTOR:".select-transaction-alert",ADD_TO_CART_BUTTON_WITH_CONTRACT:"#add-to-cart-with-contract-btn",
ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER:"#new-add-to-cart",ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER:"#used-add-to-cart",ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER:"#refurbished-add-to-cart",CONTRACT_SALES_TAX_INFO_DIV:"#aloha-bb-contract-links",FINANCING_SALES_TAX_INFO_DIV:"#aloha-bb-financing-links",LINKOFF_URL_SECTION:"#alohaBuyBoxWidget #linkOffSection",ADD_TO_CART_BUTTON:"#alohaBuyBoxWidget .add-to-cart",SESSION_ID_CONTAINER:"#page-session-id",EXISTING_ADD_TO_CART_POPOVER_LABEL:"#existingCartPopoverLabel",
DP_ADD_TO_CART_ERROR_LABEL:"#dpAddToCartErrorLabel",FASTRACK_MESSAGE_DIV:"#dpFastTrack_feature_div",LINK_OFF_PRICE:"#link-off-price",LINK_OFF_AVAILABILITY:".link-off-availability",LINK_OFF_LINKS:".link-off-url",MAX_METRICS_RETRIES:3};b.getSessionId=function(){return c(b.settings.SESSION_ID_CONTAINER).val()};b.getLinkOffDisplayed=function(){return c(b.settings.LINKOFF_URL_SECTION).is(":visible")};b.showLinkOffPrice=function(){c(b.settings.LINK_OFF_PRICE).removeClass("aok-hidden")};b.hideLinkOffPrice=
function(){c(b.settings.LINK_OFF_PRICE).addClass("aok-hidden")};b.showLinkOffAvailability=function(){c(b.settings.LINK_OFF_AVAILABILITY).removeClass("aok-hidden");c(b.settings.LINK_OFF_AVAILABILITY).removeClass("a-hidden")};b.hideLinkOffAvailability=function(){c(b.settings.LINK_OFF_AVAILABILITY).addClass("aok-hidden")};b.hideFastTrackMessage=function(){c(b.settings.FASTRACK_MESSAGE_DIV).addClass("aok-hidden")};b.buildLinkOffMetricsRequestPayload=function(a,b){return{payload:JSON.stringify({logType:a,
sessionId:b})}};b.logLinkOffMetrics=function(a,c){var f=b.buildLinkOffMetricsRequestPayload(a,c),g=0,e=function(){g++;d.post("/wl/srbi/metrics/log",{params:f,success:function(){},error:function(){g<b.settings.MAX_METRICS_RETRIES&&e()}})};e()};b.showFastTrackMessage=function(){c(b.settings.FASTRACK_MESSAGE_DIV).removeClass("aok-hidden")};b.getExistingAddToCartLabel=function(){return c(b.settings.EXISTING_ADD_TO_CART_POPOVER_LABEL).val()};b.getDPAddToCartErrorLabel=function(){return c(b.settings.DP_ADD_TO_CART_ERROR_LABEL).val()};
b.hideAddToCartButton=function(){c(b.settings.ADD_TO_CART_BUTTON).addClass("a-hidden")};b.hideAddToCartWithoutContractButton=function(){c(b.settings.ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden");c(b.settings.ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden");c(b.settings.ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden")};b.hideAddToCartWithContractButton=function(){c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-hidden")};
b.showAddToCartButton=function(){c(b.settings.ADD_TO_CART_BUTTON).removeClass("a-hidden")};b.hideLinkOffButton=function(){c(b.settings.LINKOFF_URL_SECTION).addClass("a-hidden")};b.showLinkOffButton=function(){c(b.settings.LINKOFF_URL_SECTION).removeClass("a-hidden")};b.displayTransactionContainer=function(a){c(".contract-container").addClass("a-hidden");c("#contract-container-"+a).removeClass("a-hidden");c("#contract-container-"+a).removeClass("aok-hidden")};b.hideTransactionContainer=function(){c(".contract-container").addClass("aok-hidden")};
b.hideTransactionAlertMessage=function(){c(b.settings.TRANSACTION_ALERT_SELECTOR).addClass("a-hidden")};b.enableAddToCartButton=function(a,d,f){c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-hidden")&&c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).removeClass("a-hidden");c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-button-disabled")&&c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).removeClass("a-button-disabled");b.setTransactionType(a);b.updateM2MSelectedField(f);d!==m&&
d!==""?(b.setFinancingOptionAsin(d),b.setM2MContractSelected("")):f!==m&&f!==""&&(b.setM2MContractSelected(f),b.setFinancingOptionAsin(""))};b.setTransactionType=function(a){c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").transaction=a;c("#aloha-atc-fields input#transactionTypeSelected").val(a)};b.setFinancingOptionAsin=function(a){c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").financingOptionAsin=a};b.setM2MContractSelected=function(a){c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").m2mSelected=
a};b.updatePricingContainer=function(a,b,d){c(".pricing-info").addClass("a-hidden");b!==m&&d!==m?c("#"+d+"-"+b).removeClass("a-hidden"):c(".pricing-detail-"+a).removeClass("a-hidden")};b.hideMorePricingOption=function(){c(".more-pricing-option").addClass("a-hidden")};b.showMorePricingOption=function(){c(".more-pricing-option").removeClass("a-hidden")};b.updateFinancingOptionField=function(a){c("input[name=financingOptionAsin]").val(a)};b.updateM2MSelectedField=function(a){c("input[name=m2mSelected]").val(a)};
b.disableAddToCartButton=function(a){c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-button-disabled")||c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-button-disabled");a==="ALL"||a==="DEVICE_ONLY"?c(b.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-hidden"):(c(b.settings.ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"),c(b.settings.ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"),c(b.settings.ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"))};
b.hideDeviceOnlyAddToCartButton=function(){c("#alohaBuyBoxWidget .aloha-no-contract-cart-button").addClass("a-hidden")};b.updateAvailabilityMessage=function(a,b,d){c("#availabilityInfo").removeClass("a-hidden");c("#availabilityInfo-"+d+"-"+b).removeClass("a-hidden")};b.hideAvailabilityMessage=function(){c(".availability").addClass("a-hidden")};b.handleAddToCartAjaxSuccess=function(a,d,h){var g="http://"+location.host+"/wl/rbi/puc",e="https://"+location.host+"/wl/co/uew",j=d==="INDIVIDUAL_NEW"?!1:
!0;a.status==="SUCCESS"?(a=j===!0?e:g,b.resetTransactionDropdown(),location.href=a):a.cartAdditionConflictOccurred?(g=c("#alohaShortDeviceTitle").val(),e={},e.conflictType=a.cartAdditionConflictType,e.deviceTitle=g,e.transaction=d,e.requiresAui="true",e.vid=h,a=b.buildExternalAlohaPath("/rbi/aloha/existingOrderInAlohaCartPopover")+"?"+c.param(e),d=b.getExistingAddToCartLabel(),h=c("#aloha-cart-popover-trigger"),f.create(h,{url:a,position:"triggerTop",width:900,hiddenOnClick:"true",popoverLabel:d}).show()):
b.handleAjaxFailure(a.errorType,a.errorDetailMessage)};b.handleAjaxFailure=function(a,d){var h=c("#aloha-cart-error-failure-message-trigger"),g=b.getDPAddToCartErrorLabel();f.create(h,{header:a!==m?a:b.settings.DEFAULT_ERROR_HEADER_MESSAGE,inlineContent:d!==m?d:b.settings.DEFAULT_ERROR_MESSAGE,position:"triggerVertical",width:400,popoverLabel:g}).show()};b.updateTaxInfoForTransaction=function(a){a==="ALL"||a==="DEVICE_ONLY"?(c(b.settings.CONTRACT_SALES_TAX_INFO_DIV).addClass("a-hidden"),c(b.settings.FINANCING_SALES_TAX_INFO_DIV).addClass("a-hidden")):
(c(b.settings.CONTRACT_SALES_TAX_INFO_DIV).removeClass("a-hidden"),c(b.settings.FINANCING_SALES_TAX_INFO_DIV).removeClass("a-hidden"))};b.updateTaxInfoForFinancingTerm=function(a){a!==m&&a!==""?(c(b.settings.CONTRACT_SALES_TAX_INFO_DIV).addClass("a-hidden"),c(b.settings.FINANCING_SALES_TAX_INFO_DIV).removeClass("a-hidden")):(c(b.settings.CONTRACT_SALES_TAX_INFO_DIV).removeClass("a-hidden"),c(b.settings.FINANCING_SALES_TAX_INFO_DIV).addClass("a-hidden"))};b.serializeInputs=function(a){var b={};a.find("input").each(function(a,
c){b[c.name]=c.value});return b};b.buildExternalAlohaPath=function(a){return"/wl"+a};b.toggleAddToCartWithoutContractButton=function(a){c("#alohaBuyBoxWidget .aloha-no-contract-cart-button").addClass("a-hidden");c("#alohaBuyBoxWidget #"+a+"-add-to-cart").removeClass("a-hidden")};b.resetTransactionDropdown=function(){c("#transaction-selector-dropdown").prop("selectedIndex",-1);c("#transaction-selector").prop("selectedIndex",-1)}}});h.when("aloha.carriercompatibility.model","aloha.dp.carriercompatibility.view",
"A").execute(function(d,f,c){d=new d;f=new f(d);c.declarative("swatchthumb-action","mouseenter",f.onTwisterMouseEnter);c.declarative("swatchthumb-action","mouseleave",f.onTwisterMouseLeave);c.declarative("swatchthumb-action","click",f.onTwisterClick);c.on("a:pageUpdate",f.onTwisterRefresh);c.declarative("a-modal","click",f.onModalClick);c.declarative("sortByCarrier","click",f.onCarrierHeaderClick);c.declarative("sortByCompatibility","click",f.onCompatibilityHeaderClick);c.on("a:dropdown:aloha-carrier-compatibility-country-dropdown-overview:select",
f.onDropdownSelect);c.on("a:dropdown:aloha-carrier-compatibility-country-dropdown-modal:select",f.onDropdownSelect)});h.when("A","ready").execute("aloha.carrierCompatibility.onStart",function(d){!d.objectIsEmpty(d.state("current-asin"))&&!d.objectIsEmpty(d.state("default-country"))&&!d.objectIsEmpty(d.state("all-carriers-by-country-and-asin"))&&!d.objectIsEmpty(d.state("top-carriers-by-country-and-asin"))&&h.declare("aloha.carrierCompatibility.ready")});h.declare("aloha.carrierCompatibility.SortByEnum",
{compatibility:0,carrierName:1});h.when("A","aloha.carrierCompatibility.SortByEnum","aloha.carrierCompatibility.ready").register("aloha.carriercompatibility.model",function(d,f){var c={"Fully Compatible":0,"4G/LTE Compatible":1,"Limited Data Speed":2,"Text and Voice Only":3,"Data Only":4,"No Service":5},b=function(){this.getCountries=function(a){a=this.allCarriersByCountryAndAsin[a];return!a?[]:d.map(a,function(a,b){return b})};this.getModalDescription=function(){return this.modalDescriptionFormat.replace("${product_title}",
d.$("#productTitle").text())};this.isAsinValid=function(a){return this.allCarriersByCountryAndAsin[a]&&this.topCarriersByCountryAndAsin[a]};this.setAsin=function(a){this.previousAsin=this.asin;this.asin=a;a=this.getCountries(a);if(!(a.indexOf(this.country)>=0))this.country=a.indexOf(this.defaultCountry)>=0?this.defaultCountry:a[0]};this.sortBy=function(b){a(!1,b)};this.sortByDescending=function(b){a(!0,b)};var a=function(a,c){this.sortByType={type:c,isDescending:a};b(this.allCarriersByCountryAndAsin,
c,this.sortByType.isDescending);b(this.topCarriersByCountryAndAsin,c,this.sortByType.isDescending)}.bind(this),b=function(a,b,c){for(var d in a)if(a.hasOwnProperty(d))for(var f in a[d])if(a[d].hasOwnProperty(f)){var h=a[d][f];c?this.sorter.sortCarriersByDescending(h,b):this.sorter.sortCarriersBy(h,b)}}.bind(this);this.previousAsin=null;this.asin=d.state("current-asin").asin;this.country=this.defaultCountry=d.state("default-country").country;this.allCarriersByCountryAndAsin=d.state("all-carriers-by-country-and-asin");
this.topCarriersByCountryAndAsin=d.state("top-carriers-by-country-and-asin");this.modalDescriptionFormat=d.state("modalDescription").format;this.sortBy(f.compatibility)};b.prototype.sorter=new function(){this.sortCarriersBy=function(b,c){a(b,c,!1)};this.sortCarriersByDescending=function(b,c){a(b,c,!0)};var a=function(a,d,e){switch(d){case f.carrierName:a.sort(function(a,c){return e?b(c.carrierName,a.carrierName):b(a.carrierName,c.carrierName)});break;default:a.sort(function(a,d){return e?b(c[d.compatibilityRatingSummary],
c[a.compatibilityRatingSummary])||b(d.carrierName,a.carrierName):b(c[a.compatibilityRatingSummary],c[d.compatibilityRatingSummary])||b(a.carrierName,d.carrierName)})}},b=function(a,b){return a>b?1:a<b?-1:0}};return b});h.when("jQuery","A","a-dropdown","aloha.carrierCompatibility.SortByEnum").register("aloha.dp.carriercompatibility.view",function(d,f,c,b){return function(a){this.model=a;this.csmKeys={modalDisplayed:"alohaCarrierCompatibilityModalDisplayed"};this.selectors={overviewDropdownId:"aloha-carrier-compatibility-country-dropdown-overview",
modalDropdownId:"aloha-carrier-compatibility-country-dropdown-modal",carrierNameClass:".carrier-name",carrierRatingSummaryClass:".carrier-rating-summary",carrierRatingSummary:"carrier-rating-summary",colorClass:"a-color-",textBoldClass:"a-text-bold",downArrowClass:"a-icon a-icon-section-expand selector-arrow",upArrowClass:"a-icon selector-arrow a-icon-section-collapse",compatibleVoiceText:".compatible-voice-text",compatible2G:".compatible-2G",compatible3G:".compatible-3G",compatible4GLTE:".compatible-4GLTE",
check:"aloha-carrier-compatibility-check-icon"};this.$webElements={compatibilityWidget:d("#aloha-carrier-compatibility-widget"),overviewTableRows:d(".aloha-carrier-compatibility-overview-table-row"),modalTableRows:d(".aloha-carrier-compatibility-modal-table-row"),carrierSortIcon:d(".aloha-carrier-compatibility-carrier-sort-icon"),compatibilitySortIcon:d(".aloha-carrier-compatibility-compatibility-sort-icon"),modalDescription:d("#aloha-carrier-compatibility-modal-table-description").find("> span")};
this.onTwisterMouseEnter=function(){var a=r();f(a)}.bind(this);this.onTwisterMouseLeave=function(){f(this.model.previousAsin)}.bind(this);this.onTwisterClick=function(){var a=j.DetailPage.StateController.getState().current_asin;f(a)}.bind(this);this.onTwisterRefresh=function(){this.$webElements.modalDescription.text(this.model.getModalDescription())}.bind(this);this.onModalClick=function(){var a=j.ue;if(a&&a.count){var b=this.csmKeys.modalDisplayed,c=a.count(b)||0;a.count(b,c+1)}}.bind(this);this.onCarrierHeaderClick=
function(){g(b.carrierName);k();h()}.bind(this);this.onCompatibilityHeaderClick=function(){g(b.compatibility);k();h()}.bind(this);this.onDropdownSelect=function(a){a=a.value;this.model.country=a;k(a);c.getSelect(this.selectors.overviewDropdownId).setValue(a);c.getSelect(this.selectors.modalDropdownId).setValue(a)}.bind(this);var f=function(a){this.model.setAsin(a);this.model.isAsinValid(a)?(i(a),k(),e()):m()}.bind(this),h=function(){this.$webElements.carrierSortIcon.removeClass(this.selectors.upArrowClass+
" "+this.selectors.downArrowClass);this.$webElements.compatibilitySortIcon.removeClass(this.selectors.upArrowClass+" "+this.selectors.downArrowClass);(this.model.sortByType.type===b.carrierName?this.$webElements.carrierSortIcon:this.$webElements.compatibilitySortIcon).addClass(this.model.sortByType.isDescending?this.selectors.upArrowClass:this.selectors.downArrowClass)}.bind(this),g=function(a){this.model.sortByType.type===a&&this.model.sortByType.isDescending||this.model.sortByType.type!==a?this.model.sortBy(a):
this.model.sortByDescending(a)}.bind(this),e=function(){this.$webElements.compatibilityWidget.show()}.bind(this),m=function(){this.$webElements.compatibilityWidget.hide()}.bind(this),t=function(a,b){var c=d(a.find(this.selectors.carrierRatingSummaryClass));c.removeClass();c.addClass(this.selectors.carrierRatingSummary);c.addClass(this.selectors.colorClass+b.compatibilityRatingSummaryColor);c.text(b.compatibilityRatingSummary);b.compatibilityRatingIsBold&&c.addClass(this.selectors.textBoldClass)}.bind(this),
o={compatibleVoiceText:this.selectors.compatibleVoiceText,compatible2G:this.selectors.compatible2G,compatible3G:this.selectors.compatible3G,compatible4GLTE:this.selectors.compatible4GLTE},s=function(a,b){var c=this.selectors.check;d.each(o,function(d){var e=b[d],d=a.find(o[d]);e==="Check"?(d.addClass(c),d.empty()):(d.removeClass(c),d.html(e))})}.bind(this),p=function(a,b){a.show();a.find(this.selectors.carrierNameClass).text(b.carrierName);t(a,b)}.bind(this),q=function(a,b){a.show();a.find(this.selectors.carrierNameClass).text(b.carrierName);
t(a,b);s(a,b)}.bind(this),r=function(){var a=j.DetailPage.StateController.getState(),b=a.asin_variation_values,c=a.variation_label_order,e=a.hovered_variations,f;for(f in b)if(b.hasOwnProperty(f)){var g=b[f];if(d.grep(c,function(b){return g[b]==d.inArray(e[b],a.variation_values[b])}).length===c.length)return g.ASIN}return null},k=function(a,b){if(!a)a=this.model.country;if(!b)b=this.model.asin;var c=this.model.allCarriersByCountryAndAsin[b][a],e=this.model.topCarriersByCountryAndAsin[b][a];this.$webElements.overviewTableRows.each(function(a,
b){var c=e[a],f=d(b);c?p(f,c):f.hide()});this.$webElements.modalTableRows.each(function(a,b){var e=c[a],f=d(b);e?q(f,e):f.hide()})}.bind(this),i=function(){}.bind(this)}});h.when("A","a-modal").register("aloha.utils",function(d,f){return{showAjaxErrorModal:function(c,b,a){var d=f.get(c);d===null?d=f.create(c,{content:a,header:b}):d.update({content:a,header:b});d.show().refresh()}}})})})(function(){var h=window.AmazonUIPageJS||window.P,j=h._namespace||h.attributeErrors;return j?j("DetailPageAlohaAssets"):
h}(),window);
/* ******** */
(function(a){a.execute(function(){})})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("HLCXDetailPageAssets"):a}(),window);
/* ******** */
(function(e,g,r){e.execute(function(){e.when("jQuery","A").execute(function(b,e){e.on("a:popover:ajaxContentLoaded:g2s2SizeChartView",function(){function e(a){return n+b.param({asin:j,sizeChartDept:a,deviceType:l})}function s(){var a=b("#sizechart_department_dropdown_native_select").children(":selected").attr("data-deptName"),a=e(a);i(a)}function i(a){b.ajax({url:a,cache:!0,beforeSend:function(){if(d.data(a)!==r){var b=d.data(a);d.html(b);return!1}d.addClass(o);return!0},complete:function(){d.removeClass(o)},
success:function(b){d.data(a,b);d.html(b)}})}function p(a){i(a.data.rwAjaxSizeChartUrl)}var h=b("#spinnerContainer"),f=b("#sizeChartSpinnerUrl").attr("data-sizechart-spinner-url");h.css("background-image","url("+f+")");h=h.attr("data-showTab");f=b("#sizeChartHeight").attr("data-height");b(".heightG2S2SizeChartPC").css("height",f+"px");if(h==="true"){var d=b("#tabContent"),n="/gp/product/ajax-handlers/apparel-sizing-chart.html/ref=dp_sizechart?ie=UTF8&isUDP=1&",o="loadingSpinnerSizeChart",j=d.attr("data-asin"),
l=d.attr("data-deviceType"),h=b("#dataForJs").attr("data-numberOfDepts");if(b("#dataForJs").attr("data-show-department-dropdown")==="false")for(f=0;f<h;f++){var c=b("#dept"+f).attr("data-deptName"),k=b("#dept"+f).attr("data-isActive"),c=e(c);k==="true"&&d.data(c,d.html());b("#dept"+f).click({rwAjaxSizeChartUrl:c},p)}else b("#sizechart_department_dropdown_native_select").change(s),c=b("#sizechart_department_dropdown_native_select").children(":selected").attr("data-deptName"),c=e(c),d.data(c,d.html())}})});
e.when("jQuery","A","cf").execute(function(b,e){var g,q,i,p,h,f,d;function n(){var a=e.viewport().height,b=a-g;c&&(a/=2,b=a-a*q/100);return Math.min(Math.max(b,i),p)}function o(){var a=j.attr("data-header"),g="data-"+l,m=j.attr("href"),t=n(),m={name:"g2s2SizeChartView",url:m+"&height="+t};c?(a=e.viewport().width*h/100,a=Math.min(Math.max(a,f),d).toString(),b.extend(m,{width:a,position:"triggerBottom"})):b.extend(m,{width:"800",header:a});a=JSON.stringify(m);k.attr(g,a)}var j=b("#size-chart-url"),
l=j.attr("data-sizeChartActionType"),c=l==="a-popover";h=70;f=300;d=800;i=300;p=700;q=5;g=300;var k=b("#size-chart-popover");e.on("resize",function(){var a=b("#fit-guide"),d=n();if(a.length===0){if(k.length>0){var a=k.data(l),f="",c=a.url.split("?"),h=c[0],c=c[1],g="";if(c)for(var c=c.split("&"),j=c.length,i=0;i<j;i++)c[i].split("=")[0]!=="height"&&(f+=g+c[i],g="&");a.url=h+"?"+f+(g+"height="+d);k.data(l,a)}}else e.capabilities.ios||a.height(d)});k.length>0&&o()})})})(function(){var e=window.AmazonUIPageJS||
window.P,g=e._namespace||e.attributeErrors;return g?g("HSXDetailPageFeaturesAssets"):e}(),window);
/* ******** */
(function(c){c.execute(function(){c.when("A","a-button","a-modal","a-util").register("tradein-self-grading",function(c,b,a,d){function g(a){return c.reduce(u,function(b,d,e){b[e]=c.reduce(a,function(a,b){return Math.abs(u[a]-d)>=Math.abs(u[b]-d)&&u[b]>=d?b:a},"Unacceptable");return b},{})}function h(){return a.get(o(".tradein-grading-header").closest(".a-popover-modal"))}function e(a){var b=function(a,b){if(b==="Unacceptable")return l(a,!1),!0;l(a,!0);var c=r[a][b];i(a+"-condition",b);var e=o("#"+
v+"-graded-"+a+"-price"),g=d.trim(e.html().replace(/[0-9.,]/g,"")),c=Number(c).toFixed(2);e.html(g+c);return!1},e=z[a],a=A[a],g=parseFloat(r.trade[e]);c.trigger("set-tradein-condition-tiv",e,g);e=b("trade",e);b=b("sell",a);return e&&b}function i(a,b){o('input[name="'+a+'"]',o("#tradein-grading-form")).val(b)}function k(a){p!==a&&(p&&o(".tradein-sell-type-"+p).removeClass("tradein-active"),o(".tradein-sell-type-"+a).addClass("tradein-active"),p=a,i("sell-type",p),o("input",o("#sell_type_"+a)).click(),
f("sell_type",!0))}function j(a,c,d){c?(o(".tradein-grade-button").removeClass("shorted"),b(".tradein-grade-button").enable(),o(".tradein-question-text").removeClass("disabled").removeClass("shorted"),o(".tradein-gate").removeClass("disabled")):(o(".tradein-grade-button-"+a).addClass("shorted"),o("#tradein-question-text-"+a).addClass("shorted"),o(".tradein-question-text:not(.shorted)").addClass("disabled"),d==="unacceptable"&&o(".tradein-gate").addClass("disabled"),b(".tradein-grade-button:not(.shorted)").disable())}
function l(a,b){o(".tradein-sell-type-"+a).toggleClass("tradein-hidden",!b);p===a&&f("sell_type",b)}function n(a,b){o("#"+v+"-graded-"+a).toggleClass("tradein-hidden",!b);a==="acceptable"?f("form_complete",b):a==="unacceptable"&&c.trigger("graded_unacceptable",b);h()&&h().updatePosition()}function f(a,b){var d=c.state(x);a in d&&(d[a]=b,c.state(x,d))}function q(a){a=c.reduce(t,function(a,b){return u[b]>u[a]?b:a},a);return e(a)}var o=c.$,t,u,r={},v,p,s,y,z,A,w,x="tradein-grading-gates";return{getQuestionnaire:function(){return t},
configureQuestionnaire:function(a){v=a.asin;u=a.questionnaire.conditions;var b=a.tradein_conditions;b.push("Unacceptable");z=g(b);b=a.sell_conditions;b.push("Unacceptable");A=g(b);y=0;s=a.questionnaire.questions.length;t={};r.trade=a.tradein_offers;r.sell=a.sell_offers;w={Unacceptable:{show:"unacceptable",hide:"acceptable"},New:{show:"acceptable",hide:"unacceptable"},memo:{}};p=null;c.state.replace(x,a.gates);c.trigger("load-saved-tradein-questionnaire-state");k("trade");o(".tradein-grading-header").closest(".a-popover-wrapper").addClass("no-border")},
setQuestionnaire:function(a){t=a},handleAnswer:function(a,b){t[a]||y++;t[a]=b;o("#tradein-question-text-"+a).addClass("a-color-secondary").removeClass("a-color-state");i("question-"+a,b);var c;c=w[b];var d=w.memo;!c&&d[a]?(n(w[d[a]].show,!1),j(a,!0),delete d[a],c=!1):c?(d[a]=b,c.show==="acceptable"&&e(b),n(c.hide,!1),n(c.show,!0),j(a,!1,c.show),c=!0):c=!1;y<s||c||(q(b)?(n("acceptable",!1),n("unacceptable",!0)):(n("acceptable",!0),n("unacceptable",!1)))},setSellType:k,gradeQuestionnaire:q,gateKey:x,
setGate:f}});c.when("A","tradein-self-grading","a-button").execute("registering self-grading actions",function(c,b,a){var d=c.$;c.state.bind(b.gateKey,function(b){var b=c.reduce(b,function(a,b){return a&&b},!0),d=a(".tradein-grade-continue"),e=a("#tradein-grade-next"),i=a("#tradein-grade-skip"),k=a("#tradein-grade-close");b?(d.enable().show(),e.enable().show(),i.disable().hide(),k.disable().hide()):(e.disable(),d.disable())});c.declarative("verify-graded-isbn","click",function(a){a=d("#"+a.data.selector);
b.setGate("isbn_verify",a.is(":checked"))});c.declarative("tradein-question-answer","click",function(a){a=a.data;b.handleAnswer(a.question,a.answer)});c.declarative("choose-graded-item-type","click",function(a){b.setSellType(a.data.sell_type)});c.declarative("add-graded-item","click",function(a){d(":input",a.$currentTarget).is(":disabled")||d("#"+a.data.form_id).submit()});c.on("set-tradein-sellType",function(a){b.setSellType(a)})});c.when("A","tipp-conditions").execute("registering self-grading actions with multi-select",
function(c,b){var a=c.$;c.on("graded_unacceptable",function(c){var g=b.getContinueButton(),h=b.getNextButton(),e=b.getSkipButton(),i=b.getCloseButton(),k=b.getSubtotal(),j=a(".tradein-grade-continue").length===1;c?(j?k>0?(e.enable().show(),i.disable().hide()):(e.disable().hide(),i.enable().show()):(e.enable().show(),i.disable().hide()),g.disable().hide(),h.disable().hide()):(e.disable().hide(),i.disable().hide(),g.show(),h.show())})})})})(function(){var c=window.AmazonUIPageJS||window.P,m=c._namespace||
c.attributeErrors;return m?m("TradeInSelfGradingAssets"):c}(),window);
/* ******** */
(function(a){a.execute(function(){a.when("A","preventMulticlick:forceFormSubmit","ready").execute(function(a,g){var b=function(b){var f=a.$(document),e=!1;f&&f.delegate(b,"click",function(){var d=a.$(b);return!d?!0:e?(d.attr("disabled",!0),!1):(g(d),e=!0,setTimeout(function(){e=!1;d.attr("disabled",!1)},3E4),!0)})};b("#one-click-button");b("#oneClickBuyButton");b("#prime-toggle-main")});a.when("A","ready").register("preventMulticlick:forceFormSubmit",function(){return function(){}})})})(function(){var a=
window.AmazonUIPageJS||P,c=a.attributeErrors;return c?c("DetailPageOffersMulticlickAssets"):a}());(function(a){a.execute(function(){})})(function(){var a=window.AmazonUIPageJS||P,c=a.attributeErrors;return c?c("DetailPageDesktopOffersAssets"):a}());
/* ******** */
(function(a){a.execute(function(){})})(function(){var a=window.AmazonUIPageJS||P,b=a.attributeErrors;return b?b("GoldboxUDPAssets"):a}());
/* ******** */
(function(C,n,l){C.execute(function(){C.when("A","jQuery").execute(function(aa,t){var I,J;function G(a){G.prototype.popoverRangeDisplay=function(c,d){var b=[];b.push(a[c.getUTCMonth()].substr(0,3),"&nbsp;",c.getUTCDate(),", ",c.getUTCFullYear());b.push(" - ");b.push(a[d.getUTCMonth()].substr(0,3),"&nbsp;",d.getUTCDate(),", ",d.getUTCFullYear(),"&nbsp;","&nbsp;","&nbsp;");return b.join("")};G.prototype.timeRangeDisplay=function(a,d){return a+" - <br/>"+d}}function u(a,c){a="__"+a;c=c&&r.isDebugEnabled();
return function(d){function b(a,b,d,f){if(!a[b]||!f)a[b]=d,c&&r.debug("     key "+b+" = "+d)}this[a]||(this[a]={});if(d.data)for(var f in d.data)d.data.hasOwnProperty(f)&&b(this[a],f,d.data[f],d.optional);else if(d.key)if(d.value!==l)b(this[a],d.key,d.value,d.optional);else return this[a][d.key]}}function E(a,c,d){var b='<option value="';a&&(b+=a);b+='"';d&&(b+='selected="selected" ');b+=">";b+='<span class="sd-timeslot-rowindex-date">';c&&(b+=c);b+="</span>";b+="</option>";return b}function H(a){var c=
["__",a,"Fn"].join("");return function(a){var b;if(a.register&&a.fn)this[c]||(this[c]=[]),this[c][a.register]=a.fn;if(a.nil&&this[c])for(b in this[c])if(this[c].hasOwnProperty(b))this[c][b]();if(a.arg&&this[c])for(b in this[c])if(this[c].hasOwnProperty(b))this[c][b](a.arg)}}function D(a,c){var d="__dom"+c+"_"+a,b="__dom_cached"+c+"_"+a;return function(){if(this[b]){if(this[d])return this[d]}else{this[b]=!0;var f=this.config({key:a});f||n.console&&n.console.firebug&&console.warn(["no",c,a,"configured"].join(" "));
if(f=SDFramework.jq("#"+f))return this[d]=f;else n.console&&n.console.firebug&&console.warn(["no",c,"DOM element found"].join(" "))}}}function O(a){var c={};c.config=u("region_config");a&&c.config(a);c.add=function(a){if(a)this.__regions=a};c.load=function(a){if(!this.__loadedRegions)this.__loadedRegions=!0,this.__regions?this._insert(a)(this.__regions):this._ajaxLoad(a)};c.pick=function(a){return function(){var b=SDFramework.jq(["#",this.id," option:selected"].join("")).val();a.config({key:"region",
value:b});a.selectCalendar()}};c._insert=function(a){var b=this;return function(c){b.__regions=c;var g="";b.config({key:"str_selectRegion"})&&(g=E("",b.config({key:"str_selectRegion"}),!0));var h=!1,i;for(i in c)c[i].oK&&c[i].oV&&(h=!0,g+=E(c[i].oK,c[i].oV,!1));b._loading(!1);if(c=(c=b.config({key:"dom_regionList"}))?SDFramework.jq("#"+c):0)h?(c.html(g).attr("disabled",!1),c.change(b.pick(a)),c.focus(b.pick(a))):(c.attr("disabled",!0),(g=b.config({key:"str_noRegions"}))&&c.html(E("",g,!0)))}};c._ajaxLoad=
function(a){var b=this._insert(a),a={merchant:a.config({key:"id_merchant"}),marketplace:a.config({key:"id_marketplace"}),ASIN:a.config({key:"id_asin"}),SKU:a.config({key:"id_sku"}),FMID:a.config({key:"id_fmid"}),regionRequest:1};if(this.config({key:"load_url"})){this._loading(!0);var c=SDFramework.jq.getJSON(this.config({key:"load_url"}),a,b);SDFramework.jq().ajaxError(function(){return function(a,d){d===c&&b()}}())}else b()};c._loading=function(a){var b=this.config({key:"dom_regionLoading"});(b=
b?SDFramework.jq("#"+b):0)&&b.css("display",a?"inline":"none");this.config({key:"dom_regionList"})&&SDFramework.jq("#"+this.config({key:"dom_regionList"})).css("display",a?"none":"inline")};return c}function P(a,c,d){var b={pickenabled:0,clickenabled:0};b.config=u("zipcode");a&&b.config(a);b._zi=D("dom_zipInput","zipcode");b.enable=function(a){if(this._zi()&&!this.pickenabled)this._zi().unbind("keyup"),this._zi().bind("keyup",this.pick(a)),this._zi().bind("keypress",function(a){if(a.keyCode==13)return a.preventDefault(),
a.stopPropagation(),!1}),this.pickenabled=1,this._zi().unbind("focus"),this._zi().bind("focus",this.focus(a)),this._zi().unbind("blur"),this._zi().bind("blur",this.blur(a));var b=this.config({key:"dom_zipGo"});if(b&&(b=SDFramework.jq("#"+b))&&!this.clickenabled)b.bind("click",this.click(a)),this.clickenabled=1};b.click=function(a){var b=this,c=this._zi();return function(){b.select(c.val(),a,!0,b.config({key:"postal_code_length"}));return!1}};b.focus=function(){var a=this;this._zi();return function(){var b=
a.config({key:"dom_zipDefaultClass"}),c="#"+a.config({key:"dom_zipInput"}),d="#"+a.config({key:"dom_zipValue"}),j="#"+a.config({key:"dom_zipLabel"});t(c+"."+b).size();d=t(d).html();t(c).val(d);t(c).removeClass(b);t(j).hide()}};b.blur=function(){var a=this;this._zi();return function(){var b="#"+a.config({key:"dom_zipInput"}),c="#"+a.config({key:"dom_zipEmpty"}),d=a.config({key:"dom_zipDefaultClass"}),j="#"+a.config({key:"dom_zipLabel"});""===t(b).val()&&(c=t(c).html(),t(b).addClass(d),t(b).val(c),
t(j).html(c),t(j).show())}};b.selectCallback=function(a,b){this.selectTimer=l;a.config({key:"zipcode",value:b});a.selectCalendar()};b.invalidate=function(a,b){var c=this;this.selectTimer&&clearTimeout(this.selectTimer);this.selectTimer=setTimeout(function(){c.selectCallback(a,b)},500)};b.select=function(a,b,c){this&&(this._enter_err&&this._enter_err().css("display","none"),this._valid_err&&this._valid_err().css("display","none"));var d="#"+this.config({key:"dom_zipValue"});t(d).html(a);(d=this.is_valid_zip_code(a,
this.config({key:"postal_code_length"})))?c&&(this[d]().css("display","block"),b.config({key:"zipcode",value:l}),b.unselectCalendar()):this.invalidate(b,a)};b.pick=function(a){var b=this;return function(c){if(this){var i=SDFramework.jq(this).val(),j="#"+b.config({key:"dom_zipPrefix"}),e="#"+b.config({key:"dom_zipEmpty"}),o="#"+b.config({key:"dom_zipValue"}),j=SDFramework.jq(j).html(),e=SDFramework.jq(e).html(),c=t(o).html()!=i||c.keyCode==13;i&&(i=SDFramework.jq.trim(i.replace(j,"")),i=SDFramework.jq.trim(i.replace(e,
"")));d&&c&&b.select(i,a,!0,6)}}};b.validate_zipcode=function(a){function b(a){a||(a="");if(!d.config({key:"postal_format"}).test(a))return"_valid_err"}function c(a){if(!a)return"_enter_err"}var d=this;return a>1?b:c};b._enter_err=D("dom_zipEntError","entererror");b._valid_err=D("dom_zipValError","validerror");b.is_valid_zip_code=b.validate_zipcode(c,b._enter_err,b._valid_err);return b}function Q(a){function c(a,c,d){function h(a){var b=a.inputs;b&&b.clearSlotFields();if(b=a.message)b.clear(),b.parent&&
b.parent()&&b.parent().hide();a.shoppingCart&&a.__setCanPlaceSdOrder(!1);(a=a.cutoff)&&a.enable(!1)}function i(a){var b={};a!==l&&a.today!==l&&a.c_m_id!==l&&a.tmr_m!==l&&a.tmr_d!==l?(b.today_m=a.c_m_id,b.today_d=a.today,b.tmr_m=a.tmr_m,b.tmr_d=a.tmr_d):(a=new Date,b.today_m=a.getMonth(),b.today_d=a.getDate(),a=new Date(a.getTime()+864E5),b.tmr_m=a.getMonth(),b.tmr_d=a.getDate());return b}return function(j){if(j)if(c.hasRes(j,d)){var e=c.getRes(j,d);if(e)if(SDUtils.isEmptyObject(e))h(a);else{var o=
a.inputs;o&&o.updateSlotFields(e);if(o=a.message){var m=0,l=a.config({key:"sd_calendar"}),p=a.config({key:"id_offerlist_id"});calID=a.zipcode?"Z:"+a.config({key:"zipcode"})+"\nO:"+p:"R:1\nO:"+p;var p=l.calData.getCal(calID),n,s;for(s in p.days)if(p.days.hasOwnProperty(s)){var q=p.days[s];q[0]===j&&(n=q[1])}if((j=a.message.config({key:"timeslotDeterminationFn"}))&&j(p))m=1,o.serviceCharges=p.serviceCharges;j=l.config({key:"dateDisplay"});o.serviceDisplay=p.serviceDisplay;o.update(e.ultStart,e.ultEnd,
m,e,n,j,i(p))}n=a.cutoff;e=e.ultCutoff;n&&e?n.hasTimeLeft(e)?(n.update(e),a.__setCanPlaceSdOrder(!0)):(n.enable(!0,!0),a.__setCanPlaceSdOrder(!1)):a.__setCanPlaceSdOrder(!0)}else h(a)}else h(a);else h(a)}}var d={};d.config=u("config");d.shoppingCart=new I;d.oneClick=new J;d.cutoff=null;d.inputs=new ScheduledDelivery.Data.FormPersistence;d.checkbox=new ScheduledDelivery.BuyBox.SDIntentCheckbox;d.slotInput=new ScheduledDelivery.BuyBox.SlotStorage(a?a.slotInputClass:"sd_slot_input",a?a.widgetRoot:"sd_div");
d.initMessage=function(){this.message=L();this.message.showDropdown=0;this.message.showServices=1};d.noSlotNotSureMessagePresent=!1;d.noSlotUnknownMessagePresent=!1;d.unselectCalendar=function(){var a=this.config({key:"sd_calendar"});a&&(a.deactivateCalendar(),this.onCalendarUnselected())};d.onCalendarUnselected=function(){this.message&&this.message.clear();this.cutoff&&this.cutoff.hasOwnProperty("enable")&&this.cutoff.enable(!1);var a=this.config({key:"sd_calendar"});if(a)a=a.active,this.slotInput.storeSlotInput(a),
this.slotInput.clearSlotInput(a);this.shoppingCart&&this.shoppingCart.hasOwnProperty("enable")&&this.checkbox.isChecked()&&this.__setCanPlaceSdOrder(!1)};d.__setCanPlaceSdOrder=function(a){this.checkbox&&this.checkbox.exists()&&this.checkbox.isChecked()&&this.shoppingCart&&this.shoppingCart.enable(a)};d.selectCalendar=function(){var a=this.config({key:"sd_calendar"});if(a)if(this.config({key:"id_offerlist_id"})===l||this.zipcode&&this.config({key:"zipcode"})===l)a.calendar();else if(this.config({key:"id_address"})===
l&&(this.config({key:"id_marketplace"})==="A1PA6795UKMFR9"||this.config({key:"zipcode"})===l))a.buyboxNoAddrMessage(),a.calendar();else{var d=this.config({key:"shipoption"})||0,g=this.config({key:"id_offerlist_id"}),d={merchant:this.config({key:"id_merchant"}),marketplace:this.config({key:"id_marketplace"}),asin:this.config({key:"id_asin"}),quantity:this.config({key:"id_quantity"})?this.config({key:"id_quantity"}):1,SKU:this.config({key:"id_sku"}),FMID:this.config({key:"id_fmid"}),offerListingID:g,
shipoption:d};if(this.zipcode){var h=this.config({key:"zipcode"});d.id="Z:"+h+"\nO:"+g;this.config({key:"isAFN"})===1&&this.config({key:"id_address"})?d.address=this.config({key:"id_address"}):(d.zipcode=h,d.address=h)}else d.id="R:1\nO:"+g,d.region=1;(g=a.config({key:"load_url"}))||(g="/gp/product/features/scheduled-delivery/get-slots-json.html?powerbar=0");a.config({key:"load_url",value:g});a.config({key:"load_payload",value:d});a.selectCalled({register:"buyboxUI",fn:c(this,a,d.id)});a.calendar(d.id)}};
d.initializeDOM=function(a){function c(a){var b=a.config({key:"sd_calendar"}),d=a.slotInput.repopulateSlotInput(b.active),e=a.config({key:"dom_mainElement"}),f=a.config({key:"dom_notSureError"}),g=a.config({key:"dom_unknownError"}),l=a.config({key:"isAFN"});if(e)SDFramework.jq("#"+e).show(),(e=a.shoppingCart)&&a.checkbox&&a.checkbox.exists()&&a.checkbox.isChecked()&&e.enable(d),(d=a.cutoff)&&d.enable(!1),(d=a.oneClick)&&d.enable(!1),a.regions&&(a.regions.config({key:"load_url",value:"jurisdictions.json"}),
a.regions.load(a),a.regions.pick(a)),a.zipcode&&(a.zipcode.enable(a),SDFramework.jq("#sd_zipcode_go").click(),(d=a.config({key:"dom_zipInput"}))&&SDFramework.jq("#"+d).keyup()),b.popup&&b.popup.logClientSideMetrics&&b.popup.logClientSideMetrics(b.popup.clientSideMetrics.selectSD);l===1&&a.noSlotNotSureMessagePresent&&f&&SDFramework.jq("#"+f).show();l===1&&a.noSlotUnknownMessagePresent&&g&&SDFramework.jq("#"+g).show()}function d(a){var b=a.config({key:"dom_mainElement"}),c=a.config({key:"dom_notSureError"}),
e=a.config({key:"dom_unknownError"});b&&(SDFramework.jq("#"+b).hide(),a.shoppingCart&&a.shoppingCart.enable(!0),a.oneClick&&a.oneClick.enable(!0));if(c)a.noSlotNotSureMessagePresent=SDFramework.jq("#"+c).is(":visible"),SDFramework.jq("#"+c).hide();if(e)a.noSlotUnknownMessagePresent=SDFramework.jq("#"+e).is(":visible"),SDFramework.jq("#"+e).hide();b=a.config({key:"sd_calendar"});c=b.active;b.popup&&b.popup.logClientSideMetrics&&b.popup.logClientSideMetrics(b.popup.clientSideMetrics.unselectSD);a.slotInput.storeSlotInput(c);
a.slotInput.clearSlotInput(c)}return function(){var h=a.checkbox;h&&((!h.exists()||h.isChecked())&&c(a),h.bindDOM(),h.onCheck.handlers.add(function(){c(a)}),h.onClear.handlers.add(function(){d(a)}),h.setChecked(!1),h.exists()&&d(a))}}(d);return d}function R(){function a(a,b){if(!a||a.length===0)return 0;var a=a.get(0),c=SDFramework.jq.data(a,"mutex");return b?c?c+1:1:c&&c>0?c-1:0}var c={};c.config=u("continue");c.enable=function(c){var b=this.config({key:"enabledButton"}),f=this.config({key:"disabledButton"}),
b=b?SDFramework.jq("input[name="+b+"]"):null,f=f?SDFramework.jq("#"+f):null;c?a(f,0)||(b&&b.length>0&&b.css("display","block"),f&&f.length>0&&f.css("display","none")):(f&&f.length>0&&(a(f,1),f.css("display","block")),b&&b.length>0&&b.css("display","none"))};return c}function L(){var a={};a.config=u("message");a._dom_container=D("element_container","message");a._dom=D("element","message");a._dom_service=D("element_service","message");a.clear=function(){this._dom()&&(this._dom().html(""),this._dom_container().hide());
this._dom_service()&&this._dom_service().html("")};a.hide=function(){this._dom()&&(this._dom().hide(),this._dom().parent().hide());this._dom_service()&&(this._dom_service().hide(),this._dom_service().parent().hide())};a.show=function(){this._dom()&&(this._dom_container().show(),this._dom().show());this._dom_service()&&(this._dom_container().show(),this._dom_service().show())};a.update=function(a,d,b,f,g,h,i){if(!a&&!d)n.console&&n.console.firebug&&n.console.log("message update called with no start or end"),
this.clear();else{if(!a||!d)b=!1;if(this._dom()){var j=a?b?this.dateDisplay.slotDisplayDateFn(new Date(a*1E3)):this.dateDisplay.displayDateFn(new Date(a*1E3)):null,h=d?b?this.dateDisplay.slotDisplayDateFn(new Date(d*1E3)):this.dateDisplay.displayDateFn(new Date(d*1E3)):null;b&&f&&(j="&nbsp;"+f.localStartTime,h=f.localEndTime+" "+this.dateDisplay.displayDateFn(new Date(d*1E3)));d=b?this.config({key:"str_slot"}):this.config({key:"str_date"});b&&f?(b=new Date(a*1E3),b.getUTCDay(),(d=this.showDropdown===
0&&this.config({key:"sd_item_delivery_message"})!==l?this.config({key:"sd_item_delivery_message"}):this.config({key:"str_slot_message"}))||(d=""),this.showDropdown===0&&(h="",i&&b.getUTCMonth()===i.today_m&&b.getUTCDate()===i.today_d?h=this.config({key:"sd_today"})+",":i&&b.getUTCMonth()===i.tmr_m&&b.getUTCDate()===i.tmr_d&&(h=this.config({key:"sd_tomorrow"})+","),d=d.replace("%dot",h)),d=d.replace("%dts",f.localStartTime),d=d.replace("%dday",""),d=d.replace("%dte",f.localEndTime),d=d.replace("%dd",
g)):(g=d,i=(i=j)?i:"",h=h?h:"",b=b?[i,"-",h].join(" "):i!==""?i:h,d=g+b);this._dom().html(d);this._dom().parent().show();this.showDropdown===0&&this.updateServiceMessage(this.getServices(f.reservationId));this.showServices===1&&this.showAvailableServices()}else n.console&&n.console.firebug&&n.console.warn("No message element available")}};a.showAvailableServices=function(){this._dom_service().parent().hide();if(!(this.serviceCharges===l||this.serviceCharges===null||SDUtils.isEmptyObject(this.serviceCharges))){var a=
"",d;for(d in this.serviceCharges)if(this.serviceCharges.hasOwnProperty(d)){if(d.indexOf(":")===-1)msg_str=this.serviceDisplay[d].services===l?this.serviceDisplay[d].serviceDisplay:this.serviceDisplay[d].services.OLD.serviceDisplay;else{var b=d.split(":");msg_str=this.serviceDisplay[b[0]].services[b[1]].serviceDisplay}msg_str=msg_str.replace("%formattag_start",'<li class="sd_bb_services">');msg_str=msg_str.replace("%formattag_end","</li>");msg_str=msg_str.replace("%formatCost_start",'<span class="a-color-price">');
msg_str=msg_str.replace("%formatCost_end","</span>");msg_str=msg_str.replace("%service_cost",this.serviceCharges[d]);a+=msg_str}this._dom_service().html(a);this._dom_service().parent().show()}};a.updateServiceMessage=function(a){this._dom_service().parent().hide();var d=this.config({key:"sd_item_delivery_service_message"});if(!(a===null||a.length<1||d===l)){for(var b="",f=0;f<a.length;f++)if(a[f].indexOf(":")===-1)b=this.serviceDisplay[a[f]].services===l?b+"<br> - "+this.serviceDisplay[a[f]].serviceAbbr:
b+"<br> - "+this.serviceDisplay[a[f]].services.OLD.serviceAbbr;else var g=a[f].split(":"),b=b+"<br> - "+this.serviceDisplay[g[0]].services[g[1]].serviceAbbr;d=d.replace("%services",b);this._dom_service().html(d);this._dom_service().parent().show()}};a.getServices=function(a){if(a===null||a===l)return null;a=a.split(";");if(a.length<4||a[3].length<1)return null;for(var a=a[3].split("^"),d=[],b=0;b<a.length;b++)if(a[b].indexOf(":")!==-1)for(var f=a[b].split(":")[1],g=0;g<f.length;g++)d.push(a[b].charAt(0).toUpperCase()+
":"+f.charAt(g));else{f=a[b].split("");for(g=0;g<f.length;g++)this.serviceDisplay[f[g].toUpperCase()]!==l&&d.push(f[g].toUpperCase())}return d};return a}function S(a){function c(a){var b=a.inputs;b&&b.clearSlotFields();if(b=a.message)b.clear(),b.parent&&b.parent()&&b.parent().hide();(a=a.cbutton)&&a.enable(0)}function d(a){var b=n.console;b&&b.firebug&&b.warn(a)}function b(a){var b={};a!==l&&a.today!==l&&a.c_m_id!==l&&a.tmr_m!==l&&a.tmr_d!==l?(b.today_m=a.c_m_id,b.today_d=a.today,b.tmr_m=a.tmr_m,
b.tmr_d=a.tmr_d):(a=new Date,b.today_m=a.getMonth(),b.today_d=a.getDate(),a=new Date(a.getTime()+864E5),b.tmr_m=a.getMonth(),b.tmr_d=a.getDate());return b}function f(a,e,f){return function(g){if(g&&!g.nil)if(e.hasRes(g,f)){var h=e.getRes(g,f);SDUtils.isEmptyObject(h)&&(c(a),d("No reservation selected for "+g));var i=a.inputs;i&&i.updateSlotFields(h);if(i=a.message){var l=0,s=a.config({key:"sd_calendar"}),q=s.calData.getCal(404),n=a.message.config({key:"timeslotDeterminationFn"});n&&n(q)&&(l=1);var w,
k;for(k in q.days)q.days.hasOwnProperty(k)&&(n=q.days[k],n[0]===g&&(w=n[1]));g=s.config({key:"dateDisplay"});i.serviceDisplay=q.serviceDisplay;i.update(h.ultStart,h.ultEnd,l,h,w,g,b(q))}(h=a.cbutton)&&h.enable(1)}else c(a),d("Time UI time")}}function g(a,b){if(b){var c=b.config({key:"sd_calendar"});if(c)if(a){var d;if(ScheduledDelivery.Debug.forceNoSlots)d={};else{d=b.config({key:"id_merchant"});var g=b.config({key:"id_marketplace"}),h=b.config({key:"id_request"}),i=b.config({key:"id_asin"}),l=b.config({key:"id_sku"}),
q=b.config({key:"id_fmid"}),n=b.config({key:"id_quantity"}),w=b.config({key:"id_offerlist_id"}),k=b.config({key:"id_address"}),v=b.config({key:"id_itemList_id"}),r=b.config({key:"id_shipoption"}),u;u=t.browser;if(u===null)u="";else{var z="unknown";u.mozilla?z="mozilla":u.msie?z="msie":u.webkit?z="webkit":u.safari?z="safari":u.opera&&(z="opera");u=z+":"+u.version}d={merchant:d,marketplace:g,requestId:h,asin:i,sku:l,FMID:q,quantity:n,offerListingID:w,address:k,itemListId:v,shipoption:r,browserType:u,
templateSlotID:b.config({key:"id_template_slot"}),ie:"UTF8"}}c.config({key:"load_payload",value:d});(d=c.config({key:"load_url"}))||(d="/gp/product/features/scheduled-delivery/get-slots-json.html?powerbar=0");c.config({key:"load_url",value:d});c.calData.clearCals();c.calendar(404);c.selectCalled({register:"shipoptionUI",fn:f(b,c,404)})}else c.calendar()}}function h(a){return function(){var b=a.config({key:"id_is_selected"});g(0,a);b&&g(1,a)}}var i={};i.config=u("config");i.inputs=new ScheduledDelivery.Data.FormPersistence;
i.message=L();i.cbutton=R();a?t("body").bind(a,h(i)):n.console&&console.warn("Unable to bind load fn to dom element.");return i}function T(){function a(){}function c(a){var c,g,h="";g=0;h+='<table id="sd-timeslot">';h+="<thead>";g="";g+='<tr><td colspan="9"><table class="sd-legend"><tr class="sd-legend">';g+="<td><table><tr>";g+='<td class="sd-timeslot-weekday-date-small">&nbsp;</td><td><span class"sd-legend">'+d.config({key:"not_available_key"})+"</span></td>";g+="</tr></table></td>";g+="<td><table><tr>";
g+='<td class="sd-timeslot-highlight-date-small">&nbsp;</td><td><span class"sd-legend">'+d.config({key:"available_key"})+"</span></td>";g+="</tr></table></td>";g+="<td><table><tr>";g+='<td class="sd-timeslot-selected-date-small">&nbsp;</td><td><span class"sd-legend">'+d.config({key:"selected_key"})+"</span></td>";g+="</tr></table></td>";g+="</tr></table></td></tr>";h+=g;var i=a.ids;g=new Date;var j=new Date(3E3,0,1);for(c in i)i.hasOwnProperty(c)&&(new Date(i[c].su*1E3)<j&&(j=new Date(i[c].su*1E3)),
new Date(i[c].eu*1E3)>g&&(g=new Date(i[c].eu*1E3)));c=j;h+='<tr class="sd-timeslot-scroll-title">';h+='<th><span class="sd-timeslot-scroll-title">'+d.config({key:"months"})[a.c_m_id]+" "+c.getUTCFullYear()+"</span></th>";h+='<th><span class="sd-timeslot-scroll-title">'+d.config({key:"months"})[a.n_m_id]+" "+g.getUTCFullYear()+"</span></th>";h+="</tr>";h+="</thead>";h+="<tbody>";h+="<tr>";h+='<td valign="top">';h+='<div id="sdcal-curr-month">';h+='<table class="sdcal-table" cellpadding="0" cellspacing="0" width=224px style="table-layout: fixed;">';
for(g=0;g<7;g++)h+='<col width="32px"/>';h+='<thead class="sdcal-head">';h+="<tr>";for(g=0;g<7;g++)h+='<td class="sd-timeslot-index-date">'+d.config({key:"days"})[g]+"</td>";h+="</tr>";h+="</thead>";h+="<tbody>";h+="</tbody>";h+="</table>";h+="</div> <\!-- sdcal-curr-month --\>";h+="</td>";h+='<td valign="top">';h+='<div id="sdcal-next-month" style="float:right;">';h+='<table class="sdcal-table" cellpadding="0" cellspacing="0" width=224px style="table-layout: fixed;">';for(g=0;g<7;g++)h+='<col width="32px"/>';
h+='<thead class="sdcal-head">';h+="<tr>";for(g=0;g<7;g++)h+='<td class="sd-timeslot-index-date">'+d.config({key:"days"})[g]+"</td>";h+="</tr>";h+="</thead>";h+="<tbody>";h+="</tbody>";h+="</table>";h+="</div> <\!-- sdcal-next-month --\>";h+="</td>";h+="</tr>";h+="</table>";return h}var d={};d.config=u("config");d._dom=D("element","popup");d.popupInitialized=!1;d.popupContent=[];d.enable=function(a){a?(a=this.config({key:"linkId"}),a=SDFramework.jq("#"+a),a.show()):((a=this._dom())&&a.hide(),a=this.config({key:"linkId"}),
a=SDFramework.jq("#"+a),a.hide())};d.onSelect=function(){var a=this.config({key:"available"}),c=this.config({key:"element"});SDFramework.jq("#"+c+" ."+a).click(function(a){return function(){var b=SDFramework.jq(this).attr("id"),b=a._dateId({parse:b});a.select(b);b?a.selectCalled({arg:b}):a.selectCalled({nil:!0})}}(this))};d.click=function(){return function(){}};d.setup=function(b){function f(a){var b=Math.ceil((a.c_m_len+a.c_m_delta)/7),a=Math.ceil((a.n_m_len+(a.c_m_delta+a.c_m_len)%7)/7);return Math.max(b,
a)}function g(a,b,c){function d(a,b){if(a<1||a>h)return SDFramework.jq("<td>&nbsp;</td>").addClass(b.config({key:"notaday"}));var c=SDFramework.jq("<td>"+a+"</td>");c.addClass(b.config({key:"day"}));c.addClass(b.config({key:"notavailable"}));c.attr("id",b._dateId({date:a+i}));return c}var g,h,i;c?(g=b.config({key:"next_month_id"}),h=a.n_m_len,i=a.c_m_len,c=(a.c_m_delta+a.c_m_len)%7):(g=b.config({key:"current_month_id"}),h=a.c_m_len,i=0,c=a.c_m_delta);g=["#",b.config({key:"element"})," #",g," table.sdcal-table tbody"].join("");
a=f(a);g=SDFramework.jq(g);g.html("");for(var j=0;j<a;++j){for(var l=SDFramework.jq("<tr></tr>"),n=1;n<=7;++n)l.append(d(j*7+n-c,b));g.append(l)}}if(this._dom()){if(!this.popupInitialized){var h=this.config({key:"linkId"}),i=SDFramework.jq("#"+h);this.popupInitialized=!0}if(h=function(a,b){var c=["c_m_len","c_m_delta","n_m_len"],d;for(d in c)if(c.hasOwnProperty(d)){if(!a.hasOwnProperty(c[d]))return["No",d,"data value"].join(" ");if(a[c[d]]<0)return["Negative",d,"data value",c[d]].join(" ")}c=["next_month_id",
"current_month_id"];for(d in c)if(!b.config({key:c[d]}))return["No",c[d],"configured"].join(" ")}(b,this))n.console&&n.console.firebug&&console.warn("Invalid data: "+h);else{var j=this.config({key:"element"}),h=SDFramework.jq("#"+j);h[0]?h[0].innerHTML=c(b):n.console&&n.console.firebug&&console.warn("No "+j+" element");g(b,this,0);g(b,this,1);b.today&&this.config({key:"today"})&&SDFramework.jq(this._dateId({id:b.today})).addClass(this.config({key:"today"}));C.when("jQuery","legacy-popover").execute(function(){i.removeAmazonPopoverTrigger();
i.amazonPopoverTrigger({width:540,location:["left","bottom","right"],locationAlign:"middle",localContent:"#"+j,title:'<span class="sd-timeslot-calendar-title">'+d.config({key:"popup_date_title"})+"</span>",modal:!0,semiStatic:!0,onHide:a,draggable:!0,closeText:d.config({key:"closeText"}),closeEventInclude:["CLICK_OUTSIDE","CLICK_TRIGGER"]})})}}};d._dateId=function(a){if(this.config({key:"prefix"})){if(a.parse)return a.parse.split("-").pop();if(a.date)return[this.config({key:"prefix"}),a.date].join("-");
if(a.id){var c=this.config({key:"element"});c&&(c=["#",c," "].join(""));a=[this.config({key:"prefix"}),a.id].join("-");return c+"#"+a}}};d.add=function(a){a=SDFramework.jq(this._dateId({id:a}));a.removeClass(this.config({key:"notavailable"}));a.addClass(this.config({key:"available"}))};d.selectCalled=H("select");d.select=function(a){var c=this.config({key:"current_month_id"}),d=this.config({key:"next_month_id"}),h=this.config({key:"selected"}),i=this.config({key:"element"}),c=["#",i," #",c," .",h].join(""),
d=["#",i," #",d," .",h].join(""),i=SDFramework.jq(c),d=SDFramework.jq(d);i.removeClass(h);d.removeClass(h);a&&(a=this._dateId({id:a}),SDFramework.jq(a).addClass(h))};return d}function U(){function a(a){return function(){var b=SDFramework.jq(["select#",this.id," option:selected"].join(""));b.val()?a.selectCalled({arg:b.val()}):a.selectCalled({nil:!0})}}var c={};c.config=u("config");c._dom=D("element","dropdrown");c.__slots=[];c.__slotIds={};c.enable=function(c){if(this._dom()){var b=this.config({key:"str_disable"});
c?(b&&this.make(),this._dom().attr("disabled",!1),a(this)()):(this._dom().attr("disabled",!0),b&&this._dom().html(E("",b,!0)))}else n.console&&n.console.firebug&&console.warn("no dropdown DOM element found")};c.make=function(){var a=this.config({key:"str_select"});if(a){this._dom()||n.console&&n.console.firebug&&console.warn("Unable to find DOM element for makeDropdown");a=E("",a,!0);if(this.__slots.length>0){this.__slots.sort(function(a,b){if(a.details.startDateUTC&&a.details.endDateUTC&&b.details.startDateUTC&&
b.details.endDateUTC){var c=a.details,d=b.details,g=c.startDateUTC-d.startDateUTC;if(g!==0)return g;g=c.endDateUTC-d.endDateUTC;return g!==0?g:(c.services!==l?c.services:"").length<=(d.services!==l?d.services:"").length}var c=a.id,d=b.id,f=g=0,h=0,i=0;c.indexOf("-")>=0?(g=parseInt(c.substring(0,c.indexOf("-")),10),f=parseInt(c.substring(c.indexOf("-")+1),10)):g=parseInt(c,10);d.indexOf("-")>=0?(h=parseInt(d.substring(0,d.indexOf("-")),10),i=parseInt(d.substring(d.indexOf("-")+1),10)):h=parseInt(d,
10);return(g-h)*100+(f-i)});for(var b=0;b<this.__slots.length;b++){var c=this.__slots[b],g=c.id,c=c.details,h=c.name,i="";c.services&&c.services.length>0&&(i=c.services.sort().join(""));a+=E(g,h,!1,i)}}this._dom().html(a)}else n.console&&n.console.firebug&&console.warn("Missing str_select for makeDropdown")};c.clear=function(){this.__slots=[];this.__slotIds={}};c.add=function(a,b,c,g,h){if(!this.__slotIds[a]){this.__slotIds[a]=1;var i={};i.name=b;i.startDateUTC=g;i.endDateUTC=h;i.services=c?c:"";
b={};b.id=a;b.details=i;this.__slots.push(b)}};c.selectCalled=H("select");c.select=function(a){try{this._dom().val(a)}catch(b){}};c.onSelect=function(){this._dom().change(a(this));this._dom().focus(a(this))};return c}function V(){function a(a,b){var c=a.ids[b];if(!c)return!1;var g=a.shipOfferingID,h=a.carrierFss,i;if(h){i=(new ScheduledDelivery.Data.ReservationIdParser(c.id)).getCarriers();for(var j=[],e=0;e<i.length;e++)j.push(h[i[e]]);i=ScheduledDelivery.Data.FulfillmentServiceSubclass.pickTightestSla.apply(l,
j)}SDFramework.jq("#sd_buybox_root").trigger("slotSelected");return{slotId:c.srsids,reservationId:c.id,reservationType:c.rt,start:c.su,ultStart:c.s,mltStart:c.sm,localStartTime:c.sut,end:c.eu,ultEnd:c.e,mltEnd:c.em,localEndTime:c.eut,cutoff:c.cu,ultCutoff:c.c,mltCutoff:c.cm,timeZone:c.t,tz:c.tz,minShip:c.minShip,maxShip:c.maxShip,shipOffer:g,fss:i}}var c={};c.calendarData=u("calendar_data");c.clearCals=function(){this.__calendar_data=null;this.calendarData=u("calendar_data")};c.getCal=function(a){return this.calendarData({key:a})};
c.hasCal=function(a){return this.calendarData({key:a})?!0:!1};c.hasRes=function(c,b){if(!c)return!1;if(!this.hasCal(b))return r.debug("no cal for "+b),!1;var f=this.getCal(b);if(!f.ids)return r.debug("no ids in cal "+b),!1;f=a(f,c);return SDUtils.isEmptyObject(f)?(r.debug("No res data for "+c),!1):!0};c.getRes=function(c,b){if(!this.hasRes(c,b))return{};var f=this.getCal(b);return!f.ids[c]?(r.warn("getRes messup"),{}):a(f,c)};c.load=function(a,b){b._loading(!0);var c=b.config({key:"load_url"});n.console&&
n.console.firebug&&console.warn("loading URL : "+c);var g=b.config({key:"load_payload"}),c={url:c,type:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:g,traditional:!0,success:function(a,b,c){return function(d){c.calendarData({key:b,value:d});a._loading(!1);a.calendar(b);SDFramework.jq("#sd_buybox_root").trigger("slotsReturned")}}(b,a,this),error:function(a){return function(){n.console&&n.console.firebug&&console.warn("unable to get calendar");a._loading(!1,
1);a.deactivateCalendar();SDFramework.jq("#sd_buybox_root").trigger("slotsErrored")}}(b,a,this),timeout:2E4};SDFramework.jq.ajax(c)};return c}function K(a,c,d,b,f,g,h,i){var j={};j.identifier=a;j.startDate=c;j.startDateUTC=c;j.endDate=d;j.endDateUTC=d;j.key=f;j.selected=!1;j.textDisplay=g;j.cost=0;j.areNonVisibleServices=!1;j.config=u("config");j.showAsterisk=function(){return this.areNonVisibleServices&&i};j.getServices=function(a){for(var b=[],a=a.split("^"),c=0;c<a.length;c++){var d=a[c];if(d.indexOf(":")!==
-1)for(var g=d.split(":"),d=g[0],g=g[1],f=0;f<g.length;f++)b.push(d+":"+g.charAt(f));else for(g=0;g<d.length;g++)b.push(d.charAt(g))}return b};j.initializeWithScheduledDelivery=function(a){this.identifier=a.id;this.startDate=new Date(a.s*1E3);this.endDate=new Date(a.e*1E3);this.startDateUTC=new Date(a.su*1E3);this.endDateUTC=new Date(a.eu*1E3);this.startTimeDisplay=a.sut;this.endTimeDisplay=a.eut;this.promotion=a.prom;this.cost=a.costDisplay;this.services=this.getServices(a.service);this.areNonVisibleServices=
!1;this.serviceDisplay="";for(var b in this.services)if(this.services.hasOwnProperty(b))a=this.services[b].charAt(0),h[a]?this.serviceDisplay+=h[a].serviceAbbr+", ":this.areNonVisibleServices=!0;this.serviceDisplay=this.serviceDisplay.length>0?this.serviceDisplay.substring(0,this.serviceDisplay.length-2):""};b&&j.initializeWithScheduledDelivery(b);j.selectSlot=function(a){this.selected=a};j.timePlacement=function(a,b,c){var d=a.getTime(),g=this.startDate.getTime(),f,h;switch(c){case "D":f=d/864E5|
0;h=g/864E5|0;break;case "H":f=a.getUTCHours();h=this.startDate.getUTCHours();break;case "M":f=a.getUTCMinutes(),h=this.startDate.getUTCMinutes()}return(h-f)/b|0};j.slotPlacement=function(a,b,c,d){return{timeSpot:this.timePlacement(a,c,d),daySpot:this.timePlacement(a,b,"D")}};j.toString=function(){var a=this.startTimeDisplay,b=this.endTimeDisplay,a=this.textDisplay?a+"-"+b+" "+this.textDisplay:this.dateDisplay&&this.dateDisplay.displayDateFn?a+"-"+b+" "+this.dateDisplay.displayDateFn(this.endDate):
a+"-"+b+" "+this.endDate.toDateString(),b=!this.cost||this.cost.match(/^\s*$/)||this.cost=="open"||this.cost=="&nbsp;"?"&nbsp;":"("+this.cost+")",c="";this.showAsterisk()&&(c="*");return[a," ",this.serviceDisplay," ",b,c].join("")};return j}function W(a,c){function d(a,b){var c=null;a.indexOf(":")!==-1?(c=a.split(":"),c=b[c[0]].services[c[1]]):c=b[a];return c}function b(a){if(a===l)return"";for(var b=[],c=0;c<a.length;c++)if(a[c].indexOf("^")!==-1)b.push(a[c]);else for(var d=a[c].split(""),e=0;e<
d.length;e++)b.push(d[e]);b.sort();return b.join("^")}var f={};f.config=u("config");f.parent=a;f.uiOwner=c;f.slots=[];f.allSlots=[];f.currentServices=[];f.slotsPerService=[];f.slotsForServiceCombinations=[];f.services=[];f.serviceStrings=[];f.pivotDateTime=null;f.pivotDay=3;f.nightSlotEndTimeLimit=19;f.initialized=!1;f.initialize=function(a,b){if(!this.initialized){if(!this.daySpan)this.daySpan=this.uiOwner.config({key:"daySpan"});if(!this.dayLength)this.dayLength=this.uiOwner.config({key:"dayLength"});
this.setPivotDate(a);this.initializeServiceType("",!0);this.defaultSlotId=b;this.initialized=!0}};f.getDefaultBaseSlot=function(){if(this.serviceStrings===l)return this.sortedSlotList()[0];for(var a=0;a<this.sortedSlotList().length;a++){var b=this.sortedSlotList()[a],c=b.services;if(c===l||c.length<1)return b;if(!this.containVisibleService(c))return b}return this.sortedSlotList()[0]};f.containVisibleService=function(a){for(var b=0;b<a.length;b++)if(this.serviceStrings[a[b]]!==l)return!0;return!1};
f.getDefaultSlot=function(a){if(this.defaultSlotId)return this.defaultSlotId==="NO_DEFAULT"?null:this.getSlotByKey(this.defaultSlotId);if(a===0)return this.getDefaultBaseSlot();for(var b=a=null,c=0;c<this.sortedSlotList().length;c++){var d=this.sortedSlotList()[c];if(parseInt(d.endTimeDisplay.split(":")[0],10)>=this.nightSlotEndTimeLimit){if(a===null||a.startDateUTC>d.startDateUTC)a=d}else if(b===null||b.startDateUTC>d.startDateUTC)b=d}return b!==null?b:a};f.setSlots=function(a,b){var c=new Date,
f=a.getCal(b);this.initialize(c,f.defaultSlotId);if(f){var e=this.uiOwner.config({key:"surcharge_message"}),e=e&&e.indexOf("*")>=0,o;for(o in f.ids)if(f.ids.hasOwnProperty(o)){var m=void 0,l=void 0;for(l in f.days)f.days[l][0]&&f.days[l][0]==o&&(m=f.days[l][1]);m=K(null,null,null,f.ids[o],o,m,f.serviceDisplay,e);l=f.serviceDisplay;if(m.endDate>new Date){var p=m,n=this.parent.config({key:"dateDisplay"});p.dateDisplay=n;this.allSlots.push(m);var p=m.services,n=l,s=[],q=void 0;for(q in p)(p[q].indexOf(":")!==
-1||n[p[q]])&&s.push(p[q]);s.length===0&&s.push("");p=s;n=null;if(p.length>1){p.sort();s=p.join("");q=void 0;for(q in p)p.hasOwnProperty(q)&&(this.currentServices[p[q]]=!1,(n=d(p[q],l))||(p[q]=""),p[q]===""&&(this.slots.push(m),this.currentServices[""]=!0),this.services[p[q]]=p[q]);this.slotsForServiceCombinations[s]||(this.slotsForServiceCombinations[s]=[]);this.slotsForServiceCombinations[s].push(m)}else p.length==1&&(p=p[0],this.currentServices[p]=!1,(n=d(p,l))||(p=""),p===""&&(this.slots.push(m),
this.currentServices[""]=!0),this.slotsPerService[p]||(this.slotsPerService[p]=[]),this.slotsPerService[p].push(m),this.services[p]=p)}}this.copyServiceStrings(f.serviceDisplay);this.formatServiceChargesString(f.serviceCharges)}f=c;o=this.uiOwner.config({key:"dayLength"});e=o/2|0;f=this.sortedSlotList()[0].startDate;this.orderDayAsFirstDay===1&&(f=c);this.setPivotDay((f.getUTCDay()+e)%o);this.setPivotDate(f)};f.copyServiceStrings=function(a){for(var b in a)if(a.hasOwnProperty(b)&&(this.serviceStrings[b]=
{serviceString:a[b].serviceString,serviceLearnMore:a[b].serviceLearnMore},a[b].services)){var c=a[b].services,d;for(d in c)c.hasOwnProperty(d)&&(this.serviceStrings[b+":"+d]={serviceString:c[d].serviceString,serviceLearnMore:c[d].serviceLearnMore})}};f.formatServiceChargesString=function(a){for(var b in a)if(a.hasOwnProperty(b)&&this.serviceStrings.hasOwnProperty(b)&&this.serviceStrings[b].serviceString)this.serviceStrings[b].serviceString=this.serviceStrings[b].serviceString.replace("%service_cost",
a[b])};f.initializeServiceType=function(a,b){this.currentServices[a]=b};f.setServiceType=function(a,b){this.currentServices[a]===l&&(a="");this.currentServices[a]=b;var c=[],d;for(d in this.currentServices)typeof d!="undefined"&&d!==""&&this.currentServices[d]&&c.push(d);c.length===0?this.slots=this.slotsPerService[""]:c.length==1?this.slots=this.slotsPerService[c[0]]:(c.sort(),this.slots=this.slotsForServiceCombinations[c.join("")])};f.lastGrid=null;f.setPivotDay=function(a){if(a>=0&&a<=6)this.pivotDay=
a};f.setPivotDate=function(a){this.pivotDateTime=a?new Date(a.getTime()):new Date;this.pivotDateTime.setUTCHours(0,0,0,0);var b=this.pivotDateTime.getUTCDay();this.pivotDateTime.setUTCDate(this.pivotDateTime.getUTCDate()+this.pivotDay-b);this.pivotDateTime.setUTCDate(this.pivotDateTime.getUTCDate());var b=this.uiOwner.config({key:"dayLength"}),c=+b/2|0,d=new Date(this.pivotDateTime.getTime());d.setUTCDate(d.getUTCDate()-c);var e=new Date(this.pivotDateTime.getTime());e.setUTCDate(e.getUTCDate()+c);
e.setUTCHours(23,59,59,999);a.getTime()>e.getTime()?this.pivotDateTime.setUTCDate(this.pivotDateTime.getUTCDate()+b):a.getTime()<d.getTime()&&this.pivotDateTime.setUTCDate(this.pivotDateTime.getUTCDate()-b)};f.slotsInRange=function(){var a=+this.uiOwner.config({key:"dayLength"})/2|0,b=new Date(this.pivotDateTime);b.setUTCDate(b.getUTCDate()-a);a=[];this.sortedSlotList();if(this.slots)for(var c=0;c<this.slots.length;c++){var d=this.slots[c].timePlacement(b,this.daySpan,"D");d>=0&&d<this.dayLength&&
(a[d]||(a[d]=[]),a[d].push(this.slots[c]))}return this.lastGrid=a};f.sortedSlotList=function(){this.initialize(new Date);return this.allSlots.sort(function(a,b){return a.startDate-b.startDate===0?a.endDate-b.endDate:a.startDate-b.startDate})};f.orderedRowKeys=function(){var a=[],b=[],c=0;for(c in this.lastGrid)if(c==parseInt(c,10))for(var d in this.lastGrid[c])d==parseInt(d,10)&&a.push({start:this.lastGrid[c][d].startDate.getUTCHours()*60+this.lastGrid[c][d].startDate.getUTCMinutes(),end:this.lastGrid[c][d].endDate.getUTCHours()*
60+this.lastGrid[c][d].endDate.getUTCMinutes(),stime:this.lastGrid[c][d].startTimeDisplay,etime:this.lastGrid[c][d].endTimeDisplay});a.sort(function(a,b){return a.start==b.start?a.end-b.end:a.start-b.start});a.length>0&&b.push(a[0]);for(c=1;c<a.length;c++)(a[c-1].start!=a[c].start||a[c-1].end!=a[c].end)&&b.push(a[c]);return b};f.getSlotById=function(a){if(!a)return null;for(var b=0;b<this.allSlots.length;b++)if(this.allSlots[b].identifier==a)return this.allSlots[b];return null};f.getSlotByTimes=function(a,
c,d){if(!a||!c||!d||!this.allSlots)return null;var f=d.split(";"),d=[];f.length>=4&&(d=f[3].split("^"));for(f=0;f<this.allSlots.length;f++){var e=this.allSlots[f];if(e.startDate.getTime()==a*1E3&&e.endDate.getTime()==c*1E3&&b(e.services)===b(d))return e}return null};f.getCurrentSlotByTimes=function(a,b){if(!a||!b||!this.slots)return null;for(var c=0;c<this.slots.length;c++){var d=this.slots[c];if(d.startDate.getTime()==a&&d.endDate.getTime()==b)return d}return null};f.getSlotByKey=function(a){for(var b=
0;b<this.allSlots.length;b++)if(this.allSlots[b].key===a)return this.allSlots[b];return null};return f}function X(a){function c(a,b){var c,d=e.config({key:"notavailable"});c=e.config({key:"slotButton"});var f="",g="";if(a===-1&&b===-1)return d=e.config({key:"notavailable"}),c='<td class="'+c+'" rowspan="1">',c+='<div class="'+d+'">',c+="</div>",c+="</td>",c;var h=1;if(e.model.lastGrid[b])for(var i=0;i<e.model.lastGrid[b].length;i++)if(a.start==e.model.lastGrid[b][i].startDate.getUTCHours()*60+e.model.lastGrid[b][i].startDate.getUTCMinutes()&&
a.end==e.model.lastGrid[b][i].endDate.getUTCHours()*60+e.model.lastGrid[b][i].endDate.getUTCMinutes()){d=e.config({key:"available"});e.model.lastGrid[b][i].promotion&&(d+=" "+e.config({key:"promotionavailable"}));f=e.model.lastGrid[b][i].key;g=e.model.lastGrid[b][i].cost;e.model.lastGrid[b][i].showAsterisk()&&(g+="*");var j=e.model.lastGrid[b][i],k=e.selected_id;if(!k&&j.selected||k==j.key)d+=" "+e.config({key:"selected"});if(e.model.lastGrid[b][i].rowspan!==l)h=e.model.rowspan}[e.config({key:"prefix"}),
f].join("-");c='<td id="'+f+'" class="'+c+" "+d+' ap_custom_close" rowspan="'+h+'">';c+=d===e.config({key:"notavailable"})?"&nbsp;":g;c+="</td>";return c}function d(a,b){var c=a+"Nav"+b,d="";d+='<td class="'+e.config({key:c+"Class"})+'">';d+=e.config({key:c+"Inner"});d+="</td>";return d}function b(){function b(){var c=e.model.pivotDateTime.getUTCMonth(),d=e.model.pivotDateTime.getUTCFullYear(),f=e.model.pivotDateTime.getUTCDate();if(e.selected_id===l)e.selected_id=SDFramework.jq("#"+e.config({key:"element"})+
" ."+e.config({key:"selected"})).attr("id");e.navigateLateralSlots(0,f,c,d);c=e.selected_id;d=d=null;c&&(d=e.model.getSlotByKey(c),d=e.model.getCurrentSlotByTimes(d.startDate.getTime(),d.endDate.getTime()));if(d)a.enableInconsistentWithBuybox(!1),e.selected_id=d.key,j(e,d.key)}function c(){var b=this.id;SDFramework.jq(this).bind("click",function(){a.enableInconsistentWithBuybox(!1);e.selected_id=b;j(e,b)});SDFramework.jq(this).dblclick(function(){SDFramework.jq(".ap_close").click()})}var d=SDFramework.jq(".sd-timeslot-scroll-title-left-enabled"),
f=SDFramework.jq(".sd-timeslot-scroll-title-right-enabled"),g=SDFramework.jq("td."+e.config({key:"available"})),h=SDFramework.jq("td."+e.config({key:"selected"}));d.bind("click",function(){var a=e.model.pivotDateTime.getUTCMonth(),b=e.model.pivotDateTime.getUTCFullYear(),c=e.model.pivotDateTime.getUTCDate();e.navigateLateralSlots(-1,c,a,b)});f.bind("click",function(){var a=e.model.pivotDateTime.getUTCMonth(),b=e.model.pivotDateTime.getUTCFullYear(),c=e.model.pivotDateTime.getUTCDate();e.navigateLateralSlots(1,
c,a,b)});SDFramework.jq(".sdServiceType").click(function(){var a=SDFramework.jq(this),c=a.is(":checked"),a=a.attr("servicetype");e.selectService(a,c);b()});SDFramework.jq(".sdHSelectServiceType").change(function(){SDFramework.jq(".sdHServiceType",this).each(function(){var a=SDFramework.jq(this),b=a.is(":selected"),a=a.attr("servicetype");e.selectService(a,b)});setTimeout(b,0)});g.each(c);h.each(c)}function f(a,b,c){for(var d=0;d<c.length;d++)if(a==c[d].startDate.getUTCHours()*60+c[d].startDate.getUTCMinutes()&&
b==c[d].endDate.getUTCHours()*60+c[d].endDate.getUTCMinutes())return d;return-1}function g(a){var b=0;if(a.length<3)return null;for(var c=-1,b=0;b<a.length-2;b++)if(a[b].start==a[b+1].start){c=b;break}if(c<0)return null;for(var d=a[c].end,e=a[c+1].end,b=c+2;b<a.length;b++){if(a[b].start!=d||a[b].end>e)break;else if(a[b].end==e)return[c,b];d=a[b].end}return null}function h(){var a=e.config({key:"rootWidgetId"});SDFramework.jq("#"+a).attr("alreadyShowingPopup",1);e.showDropdown===0&&SDFramework.jq("#"+
a).parents("td").eq(0).prev().find("input[type=radio]").click();n.popoverTimer&&(a=n.popoverTimer[e.config({key:"widgetIndex"})],a!==l&&clearTimeout(a));e.logClientSideMetrics(e.clientSideMetrics.openCalendar);for(var a=e.selectedSlot!==null?e.selectedSlot.services:[],c=0;c<a.length;c++)e.model.setServiceType(a[c],1);a=e.config({key:"element"});a=SDFramework.jq("#"+a);c=e.getCalendarHtml();if(a&&a[0])a[0].innerHTML=c;b();SDFramework.jq("#ap_overlay").bind("touchend",function(){this.click()})}function i(){e.select(e.selected_id);
e.logClientSideMetrics(e.clientSideMetrics.closeCalendar);var a=e.config({key:"rootWidgetId"});SDFramework.jq("#"+a).attr("alreadyShowingPopup",0)}function j(a,b){var c=a.config({key:"element"}),d=a.config({key:"selected"});a.config({key:"available"});SDFramework.jq("#"+c+" ."+d).removeClass(d);b&&(SDFramework.jq("#"+b).addClass(d),c=a.model.getSlotByKey(b),a.logClientSideMetricsForSlot(a.clientSideMetrics.selectSlot,c))}var e={};e.config=u("config");e._dom=D("element","popup");e.popupInitialized=
!1;e.model=W(a,e);e.selectedSlot=null;e.enable=function(a){a?(a=this.config({key:"linkId"}),a=SDFramework.jq("#"+a),a.show()):(this._dom()&&this._dom().hide(),a=this.config({key:"linkId"}),a=SDFramework.jq("#"+a),a.hide())};e.onSelect=function(){};e.click=function(){};e.colorSwatch=function(){var a=[];a.push('<div class="calendar-header">');a.push('<span class="calendar-swatch calendar-not-available">&nbsp;</span><span class="calendar-legend">'+e.config({key:"not_available_key"})+"</span>");a.push('<span class="calendar-swatch calendar-available">&nbsp;</span><span class="calendar-legend">'+
e.config({key:"available_key"})+"</span>");a.push('<span class="calendar-swatch calendar-selected">&nbsp;</span><span class="calendar-legend">'+e.config({key:"selected_key"})+"</span>");this.promotionAvailable&&a.push('<span class="calendar-swatch calendar-promotion-available">&nbsp;</span><span class="calendar-legend">'+e.config({key:"promotion_available_key"})+"</span>");a.push("</div>");return a.join("")};e.refreshSlots=function(){for(var a in this.model.allSlots)if(this.model.allSlots.hasOwnProperty(a)){var b=
this.model.allSlots[a];if(b.originalEndDate)b.endDate=b.originalEndDate;if(b.originalEndTimeDisplay)b.endTimeDisplay=b.originalEndTimeDisplay;b.rowspan=l;if(b.promotion!==l)this.promotionAvailable=!0}};e.getCalendarHtml=function(){var a=this.config({key:"days"}),b,f,h,i,j,q,n=this.config({key:"dayLength"}),w=+n/2|0;b=f=0;var k="";this.model.initialize(new Date);this.refreshSlots();this.model.slotsInRange();k+=this.colorSwatch();k+='<table class="sd-timeslot-header" border=0 cellpadding=2 cellspacing=0 width="470">';
k+="<thead>";j=new Date(this.model.pivotDateTime.getTime());j.setUTCDate(j.getUTCDate()-w);q=new Date(this.model.pivotDateTime.getTime());q.setUTCDate(q.getUTCDate()+w);b=j.getUTCDay();h=this.model.pivotDateTime.getUTCMonth();i=this.model.pivotDateTime.getUTCFullYear();f=this.model.pivotDateTime.getUTCDate();var v;v=this.config({key:"surcharge_message"});var r=[];r.push('<tr class="sd_notice">');r.push('<td colspan="3">');r.push('<span class="sd_notice">');r.push(v);r.push("</span>");r.push("</td>");
r.push("</tr>");r.push("<tr>");r.push('<td colspan="3">');r.push('<hr class="sd_dashed" />');r.push("</td>");r.push("</tr>");v=r.join("");k+=v;v="";r=e.config({key:"months"});r=new G(r);v+='<tr class="sd-timeslot-scroll-title">';v+=d("left",e._canMove(-1,f,h,i)?"Enabled":"Disabled");v+='<td class="sd-timeslot-scroll-title">';v+='<span class="sd-timeslot-scroll-title">';v+=r.popoverRangeDisplay(j,q);v+="</span>";v+="</td>";v+=d("right",e._canMove(1,f,h,i)?"Enabled":"Disabled");v+="</tr>";k+=v;k+="</thead>";
k+="</table>";k+='<table class="sd-timeslot-table" width="470px" style="table-layout: fixed;">';k+="<tbody>";this.model.monthOfDays=[];this.model.dayOfDays=[];h=new Date;k+='<tr class="sd-timeslot-index-date">';k+='<th class="sd-timeslot-index-date sdleft">&nbsp;</th>';for(f=i=0;f<=w*2;f++)q=new Date(j.getTime()),q.setDate(q.getUTCDate()+f),k+='<th class="sd-timeslot-index-date">',v=(b+f)%7,v=v<0?7+v:v,k+='<span class="sd-timeslot-index-date">',k+=this.model.orderDayAsFirstDay===1&&e.config({key:"sd_today"})!==
l&&h.getFullYear()===q.getFullYear()&&h.getUTCMonth()===q.getUTCMonth()&&h.getUTCDate()===q.getUTCDate()?e.config({key:"sd_today"}):a[v],k+="<br />"+q.getDate(),k+="</span>",k+="</th>",this.model.monthOfDays[i]=q.getUTCMonth(),this.model.dayOfDays[i]=q.getUTCDate(),i++;k+="</tr>";a=this.model.orderedRowKeys(!0);if(a.length===0){k+="<tr>";for(b=-w;b<=w;b++)k+=c(-1,-1);k+="</tr>";k+="<tr>";k+='<td class="sd-timeslot-index-date sdleft"></td>';k+='<td class="sd-message" colspan='+n+'><span class="sd-message">'+
e.config({key:"no_slots_for_week"})+"</span></td>";k+="</tr>"}this.model.cellsToMerge=g(a);this.model.availableDay=l;this.model.hideCells={};this.model.cellsToMerge!==null&&e.checkSlots(a);if(this.model.availableDay!==l&&this.model.availableDay<=0)a.splice(this.model.cellsToMerge[0]+1,1),this.model.rowspan=this.model.cellsToMerge[1]-this.model.cellsToMerge[0];w=new G(e.config({key:"months"}));for(f=0;f<a.length;f++){j=a[f];b=[j.stime,j.etime];k+="<tr>";k+='<td class="sd-timeslot-rowindex-date sdleft"><span class="sd-timeslot-rowindex-date">'+
w.timeRangeDisplay(b[0],b[1])+"</span></td>";for(b=0;b<n;b++)e.isHidden(f,b)===l&&(k+=c(j,b));k+="</tr>"}k+="</tbody>";k+="</table>";var w={},n={},t;for(t in this.model.services)t.indexOf(":")!==-1&&(a=t.split(":"),n[a[0]]!==l?n[a[0]].push(a[1]):(n[a[0]]=[],n[a[0]].push(a[1]),w[a[0]]=1));for(var u in this.model.services)if(this.model.services.hasOwnProperty(u)&&u.indexOf(":")===-1)w[u]?n[u].push("OLD"):(t=k,k=u,e.config({key:"strings"}),e.model.serviceStrings[k]?(a=e.model.serviceStrings[k].serviceString,
b=e.model.serviceStrings[k].serviceLearnMore,j=[],j.push('<div class="sd_notice">'),a&&(j.push('<input type="checkbox" class="sdServiceType" ',e.model.currentServices[k]?"checked":"",' serviceType="',k,'" />'),j.push(a)),b&&(j.push(" "),j.push(b)),j.push("</div>"),k=j.join("")):k="",k=t+k);for(var z in n)if(n.hasOwnProperty(z)){k+='<div class="sd_notice">';k+="<br />";k+=e.model.serviceStrings[z].serviceString;e.model.serviceStrings[z].serviceLearnMore&&(k+=" "+e.model.serviceStrings[z].serviceLearnMore);
k+="<br />";k+='<select class="sdHSelectServiceType">';k+='<option value="none">-</option>';for(u=0;u<n[z].length;u++)t=n[z][u],w=z+":"+t,a=!1,b="",a=t==="OLD"?e.model.currentServices[z]:e.model.currentServices[w],b=e.model.serviceStrings[w].serviceString,k+='<option class="sdHServiceType" servicetype="',k+=t==="OLD"?z:w,k+='"',a&&(k+='selected="selected"'),k+=">",k+=b,k+="</option>";k+="</select>";k+="</div>"}return k};e.checkSlots=function(a){var b=this.config({key:"dayLength"});this.model.availableDay=
0;this.model.matchingDays=[];for(var c=0;c<b;c++)this.model.lastGrid[c]&&e.processMatchingColumn(e.checkColumn(a,c),a,c);e.hideRow(b)};e.hideRow=function(){if(!(this.model.availableDay<=0))for(var a=0;a<this.model.matchingDays.length;a++)e.hideOneCell(this.model.cellsToMerge[1],this.model.matchingDays[a])};e.processMatchingColumn=function(a,b,c){if(!(a<0)){a=this.model.lastGrid[c][a];a.originalEndDate=new Date(a.endDate.getTime());a.originalEndTimeDisplay=a.endTimeDisplay;a.endDate.setUTCHours(b[this.model.cellsToMerge[0]].end/
60|0);a.endDate.setUTCMinutes(b[this.model.cellsToMerge[0]].end%60);a.endTimeDisplay=b[this.model.cellsToMerge[0]].etime;a.rowspan=1;for(b=this.model.cellsToMerge[0]+1;b<this.model.cellsToMerge[1];b++)e.hideOneCell(b,c);this.model.rowspan=this.model.cellsToMerge[1]-this.model.cellsToMerge[0]+1}};e.checkColumn=function(a,b){var c=this.model.cellsToMerge[0],d=f(a[c+1].start,a[c+1].end,this.model.lastGrid[b]);if(d<0)return-1;this.model.availableDay++;if(f(a[c].start,a[c].end,this.model.lastGrid[b])>=
0)return-1;for(c+=2;c<a.length&&c<=this.model.cellsToMerge[1];c++)if(f(a[c].start,a[c].end,this.model.lastGrid[b])>=0)return-1;this.model.availableDay--;this.model.matchingDays.push(b);return d};e.isHidden=function(a,b){return this.model.hideCells['"'+this.model.monthOfDays[b]+"-"+this.model.dayOfDays[b]+"-"+a+'"']};e.hideOneCell=function(a,b){this.model.hideCells['"'+this.model.monthOfDays[b]+"-"+this.model.dayOfDays[b]+"-"+a+'"']=1};e.clientSideMetrics={};e.clientSideMetrics.selectSD="1";e.clientSideMetrics.loadSlots=
"2";e.clientSideMetrics.openCalendar="3";e.clientSideMetrics.selectSlot="4";e.clientSideMetrics.closeCalendar="5";e.clientSideMetrics.nextPageCalendar="6";e.clientSideMetrics.prevPageCalendar="7";e.clientSideMetrics.unselectSD="8";e.clientSideMetrics.selectionChanged="9";e.logClientSideMetrics=function(a){this.logClientSideMetricsForSlot(a,this.selectedSlot)};e.logClientSideMetricsForSlot=function(a,b){var c="",d="",e="",f="",g="",h="",i="",j="DP",l="";if(this.model){if(this.model.parent){if(e=this.model.parent.config({key:"load_payload"}))c=
e.marketplace,d=e.asin,h=e.shipoption,l=e.address;this.model.parent.isSpc&&this.model.parent.isSpc()?j="SPC":(e=this.model.parent.config({key:"id_select_fn"}))&&(e.substring(0,20)==="shipoptionselectpage"?j="SOSP":e==="emptySetSOCallback"&&(j="YA"))}e=this.model.getDefaultBaseSlot().startDate.getTime()}if(b)f=b.startDate.getTime(),g=b.services,i=b.identifier;if(d instanceof Array)for(var n=0;n<d.length;n++)ue.log(["mpid=",c,"&asin=",d[n],"&a=",a,"&fas=",e,"&ss=",f,"&svc=",encodeURIComponent(g),"&so=",
encodeURIComponent(h),"&sid=",encodeURIComponent(i),"&page=",j,"&addr=",l].join(""),"scheduled-delivery",null);else ue.log(["mpid=",c,"&asin=",d,"&a=",a,"&fas=",e,"&ss=",f,"&svc=",encodeURIComponent(g),"&so=",encodeURIComponent(h),"&sid=",encodeURIComponent(i),"&page=",j,"&addr=",l].join(""),"scheduled-delivery",null)};e.setup=function(a){if(!this.popupInitialized){var c=this.config({key:"linkId"}),d=SDFramework.jq("#"+c);this.popupInitialized=!0}var f=this;if(this._dom())if((c=function(a,b){var c=
["c_m_len","c_m_delta","n_m_len","timeslots"],d;for(d in c)if(c.hasOwnProperty(d)){if(!a.hasOwnProperty(c[d]))return["No",d,"data value"].join(" ");if(a[c[d]]<0)return["Negative",d,"data value",c[d]].join(" ")}c=["next_month_id","current_month_id"];for(d in c)if(!b.config({key:c[d]}))return["No",c[d],"configured"].join(" ")}(a,this))&&n.console&&n.console.firebug)console.warn("Invalid data: "+c);else{a.today&&this.config({key:"today"})&&SDFramework.jq(this._dateId({id:a.today})).addClass(this.config({key:"today"}));
var g=f.config({key:"element"});C.when("jQuery","legacy-popover").execute(function(){d.removeAmazonPopoverTrigger();d.unbind("touchend.sd");d.bind("touchend.sd",function(){this.click()});d.unbind("click.sd");d.bind("click.sd",function(){return!SDUtils.protectAgainstDoubleAction("calendarButton")});d.amazonPopoverTrigger({width:545,location:["left","bottom","right","top","centered"],locationAlign:"middle",localContent:"#"+g,title:'<span class="sd-timeslot-calendar-title">'+e.config({key:"popup_time_title"})+
"</span>",modal:!0,semiStatic:!0,onShow:h,onHide:i,draggable:!0,closeText:e.config({key:"closeText"}),closeEventInclude:["CLICK_OUTSIDE","CLICK_TRIGGER"]})});(function(){var a=f.config({key:"element"}),a=SDFramework.jq("#"+a),c=f.getCalendarHtml();if(a&&a[0])a[0].innerHTML=c;b()})()}};e._dateId=function(a){if(this.config({key:"prefix"})){if(a.parse)return a.parse.split("-").pop();if(a.date)return[this.config({key:"prefix"}),a.date].join("-");if(a.id){var b=this.config({key:"element"});b&&(b=["#",
b," "].join(""));a=[this.config({key:"prefix"}),a.id].join("-");return b+"#"+a}}};e.add=function(){};e.selectCalled=H("select");e.selectService=function(a,b){this.model.setServiceType(a,b)};e.select=function(a){var b=this.config({key:"element"}),c=this.config({key:"selected"});this.config({key:"available"});this.config({key:"slotButton"});SDFramework.jq("#"+b+" ."+c).removeClass(c);if(a&&(SDFramework.jq("#"+a).addClass(c),this.selectCalled({arg:a}),b=!1,c="",this.selectedSlot?(c=this.selectedSlot.key,
this.selectedSlot.selected=!1):b=!0,this.selectedSlot=this.model.getSlotByKey(a)))this.selectedSlot.selected=!0,b?this.logClientSideMetrics(this.clientSideMetrics.loadSlots):c!==this.selectedSlot.key&&this.logClientSideMetrics(this.clientSideMetrics.selectionChanged);this.selectedSlot&&this.model.setPivotDate(this.selectedSlot.startDate)};e._canMove=function(a,b,c,d){var e=this.model.sortedSlotList(),f=e[0],e=e[e.length-1],g=new Date,h=this.config({key:"dayLength"});if(!f||!e)return!1;var i=+h/2|
0;g.setUTCFullYear(2004);g.setUTCMonth(0);g.setUTCDate(1);g.setUTCFullYear(d);g.setUTCMonth(c);g.setUTCDate(b);g.setUTCHours(0,0,0,0);g.setUTCDate(g.getUTCDate()+a*h);a=new Date(g.getTime());a.setUTCDate(a.getUTCDate()-i);a.setUTCHours(0,0,0,0);b=new Date(g.getTime());b.setUTCDate(b.getUTCDate()+i);b.setUTCHours(23,59,59,999);return b<new Date?!1:b<f.endDate?!1:a>e.startDate?!1:!0};e.navigateLateralSlots=function(a,c,d,e){if(this._canMove(a,c,d,e)){var f=SDFramework.jq("#"+this.config({key:"element"})),
g=new Date,h=this.config({key:"dayLength"});g.setUTCFullYear(2004);g.setUTCMonth(0);g.setUTCDate(1);g.setUTCFullYear(e);g.setUTCMonth(d);g.setUTCDate(c);g.setUTCHours(0,0,0,0);g.setUTCDate(g.getUTCDate()+a*h);this.model.setPivotDate(g);this.model.slotsInRange();c=this.getCalendarHtml();f.html(c);b();f=a===-1?this.clientSideMetrics.prevPageCalendar:this.clientSideMetrics.nextPageCalendar;a!==0&&this.logClientSideMetrics(f);return c}};return e}function Y(){function a(a,b,c,d){var e=SDUtils.isBeacon(a);
c?e&&b>0?a.slideDown(b):a.show():e&&b>0?a.slideUp(b):a.hide();a=a.parents(".sd_widget_root").find(".sd_controls");d?a.show():a.hide()}function c(a,b){a.each(function(){o(this).amazonPopoverTrigger({location:["right","auto"],locationAlign:"top",locationMargin:-10,width:null,skin:null,hoverHideDelay:0,hoverShowDelay:0,showOnHover:!0,showCloseButton:!1,literalContent:b})})}function d(a){a.css("cursor","not-allowed");a.addClass("sd-disabled")}function b(a){a.css("cursor","");a.removeClass("sd-disabled")}
function f(a,b){var c={noSlotNotSure:o("#"+a.config({key:"dom_noslotsNotSure"})),noSlotUnknown:o("#"+a.config({key:"dom_noslotsUnknown"})),ineligibleZip:o("#"+a.config({key:"dom_slotsContent"})),slotsContent:o("#"+a.config({key:"dom_slotsContent"}))},d;for(d in c)d===b?c[d].show():c[d].hide()}function g(g,h,i){if(g.config({key:"hideWidgetOnError"})){var j=i?i.slotQualityInfo:null,i=j?j.slotQualityDetail:"",j=j?j.errorCode:"";h||(i="NORMAL");h="noSlotUnknown";switch(i){case "SYSTEM_UNKNOWN_PROMISE":h=
"noSlotUnknown";"JurisdictionNotFound"===j&&(h="slotsContent");break;case "BUSINESS_UNKNOWN_PROMISE":case "CAPACITY_FULL":h="noSlotUnknown";break;case "SD_INVENTORY_STATE_RESTRICTED":h="noSlotNotSure";break;case "NORMAL":h="slotsContent"}f(g,h);var h={JurisdictionNotFound:o("#"+g.config({key:"dom_zipEntError"}))},m;for(m in h)m===j?h[m].show():h[m].hide();e(g,"NORMAL"===i)}else{if(g.config({key:"load_payload"}).marketplace=="ATVPDKIKX0DER"&&h){switch(i.slotQualityInfo.slotQualityDetail){case "CAPACITY_FULL":m=
".sd_call_date_msg";break;case "SD_INVENTORY_STATE_RESTRICTED":m=".sd_estimate_msg";break;default:m=".sd_no_promise_msg"}o(".sd_phone_number").css("position","static");m=o(m).html();o(".sd_change_phone_number").length!==0&&(m+=o(".sd_change_phone_number").html())}else m=i?i.errorMsg:"";var j=g.config({key:"dom_noslots"}),j=o("#"+j),l=g.config({key:"dom_reload"}),l=o("#"+l),p=g.config({key:"message_hook"}),n=o("#calendarLink"+g.popup.__config.widgetIndex),r;p&&p.length>0&&(r=p.add(n).add("#sd_dummy_click_div_"+
g.popup.__config.widgetIndex));h?(r?(h=r,c(h,'<div class="sdWarn"><span class="swSprite s_alertSm"></span>'+m+"</div>"),d(h)):(m&&(h=j.find("div.sd_err_from_result_content"),h.html(m),SDUtils.isBeacon(j)&&(h=h.find("h6"),h.contents().replaceAll(h).wrap("<h4/>"))),a(j,x,!0,!1),d(n)),l.show(),g.disableAndDeselect(i)):(r?(h=r,h.removeAmazonPopoverTrigger(),b(h)):b(n),a(j,0,!1,!0),l.hide(),g=o("#"+g.config({key:"dom_widget_root"})).parents("td").eq(0).prev().find("input[type=radio]"),g.removeAttr("disabled"),
g.parents("div.fake-label.a-box").removeClass("sd-disabled"))}}function h(a){if(a.isSpc()){var b=a.config({key:"dom_widget_root"}),a=a.config({key:"dom_no_widget_root"});o("#"+b+" .sd_widget").show();o("#"+b).show();o("#"+a).hide()}}function i(a){if(a.isSpc()){var b=a.config({key:"id_is_selected"}),c=a.config({key:"dom_widget_root"}),a=a.config({key:"dom_no_widget_root"});b?(o("#"+c+" .sd_widget").show(),o("#"+c).show(),o("#"+a).hide()):(o("#"+c+" .sd_widget").show(),o("#"+c).hide(),o("#"+a).show())}}
function j(a,b){var c=new ScheduledDelivery.Data.ReservationIdParser(a),d=new ScheduledDelivery.Data.ReservationIdParser(b),e=c.getCharges(),f=d.getCharges();return e.currencyCode===f.currencyCode&&Math.abs(f.perItem-e.perItem)<0.01&&Math.abs(f.perShipment-e.perShipment)<0.01&&c.getEncodedServices()===d.getEncodedServices()}function e(a,b){var c=o("#"+a.config({key:"dom_slotTrigger"}));c.prop?c.prop("disabled",!b):b?c.removeAttr("disabled"):c.attr("disabled","disabled");b?c.parents("."+p).removeClass(r):
c.parents("."+p).addClass(r)}var o=SDFramework.jq,m={},x=300,p="sd-button",r="sd-button-disabled";m.icon=u("icon");m.config=u("config");m.calData=V(this);m.popup={};m.popup.config=u("config");m.popup.selectCalled=H("select");m.dropdown=U();m.active=l;m.enableInconsistentWithBuybox=function(b){var c=this.config({key:"dom_inconsistent"});a(o("#"+c),200,b,!0)};m.buyboxNoAddrMessage=function(){f(this,"noSlotUnknown")};m.isSpc=function(){var a=this.config({key:"id_select_fn"});return a&&a.substring(0,
7)==="spcpage"};m.isSosp=function(){var a=this.config({key:"id_select_fn"});return a&&a.substring(0,20)==="shipoptionselectpage"};m.isSpcSd=function(){if(this.isSpc()){var a=this.config({key:"message_hook"});return a&&a.length>0&&a.attr("src").indexOf("radio-on")>=0}return!1};m.spcThrowCvIfSelected=function(){if(this.isSpcSd()){t("#"+this.config({key:"dom_widget_root"})+" input[type=hidden]").attr("value","");var a=this.config({key:"id_select_fn"});(a=a&&eval(a))&&a({},this.config({key:"dom_widget_root"}))}};
m.handleNoSlotSelection=function(){if(this.isSosp()){var a=this.config({key:"dom_widget_root"}),a=SDFramework.jq("#"+a);a.find(".sd_change_phone_number").show();a.find(".sd_promises").show();a.find(".sd_promise_msg").show();a.find(".sd_promise_msg >span").addClass("sd_no_slot_selection_msg")}};m.calendar=function(a){if(a)if(this.calData.hasCal(a)){this._loading(!1);this._enableIcon(!0);e(this,!0);var b=this.config({key:"dom_retry"}),c=this;o("#"+b).click(function(){f(c,"slotsContent")});b=null;if(!this.active||
this.active!=a){var d=this.calData.getCal(a),k=this.popup.__config,l=this.popup.__selectFn;if(!d||!d.days||d.days.length===0){h(this);g(this,!0,d);this.deactivateCalendar();this.active=0;this.spcThrowCvIfSelected();return}else g(this,!1),i(this);var p=this.config({key:"timeslotDeterminationFn"});if(p&&p(d)){this.popup=X(this);this.popup.__config=k;this.popup.__selectFn=l;C.when("scheduledDelivery","ready").execute(m.getDocLoadFn());this.popup.showDropdown=this.showDropdown;this.popup.model.orderDayAsFirstDay=
this.orderDayAsFirstDay;this.popup.model.setSlots(this.calData,a);b=this.popup.model.getSlotByTimes(this.config({key:"selectedStart"}),this.config({key:"selectedEnd"}),this.config({key:"selectedSlot"}));!b&&this.config({key:"selectedStart"})&&this.config({key:"selectedEnd"})?(this.enableInconsistentWithBuybox(!0),b=this.popup.model.getDefaultSlot(this.daySlotAsDefaultSlot),this.spcThrowCvIfSelected()):b?this.enableInconsistentWithBuybox(!1):b=this.popup.model.getDefaultSlot(this.daySlotAsDefaultSlot);
var n=o("#sd_dummy_click_div_"+k.widgetIndex);n&&n.length>0&&n.click(function(a){var b=t("#sd_widgets_"+k.widgetIndex).parents("td").eq(0).prev().find("input[type=image]");b&&b.length>0&&b.click();a.stopPropagation()})}else{this.popup=T();this.popup.__config=k;this.popup.__selectFn=l;d=this.calData.getCal(a).ids;l=this.config({key:"selectedStart"});p=this.config({key:"selectedEnd"});for(n in d)if(d[n].hasOwnProperty("s")&&d[n].hasOwnProperty("e")){var x=d[n].s,r=d[n].e,y=d[n].eu;d[n].su==l&&y==p&&
(b||(b=K(null,null,null,d[n],n)));x==l&&r==p&&(b||(b=K(null,null,null,d[n],n)))}b?this.enableInconsistentWithBuybox(!1):(this.enableInconsistentWithBuybox(!0),this.spcThrowCvIfSelected());o(document).ready(m.getDocLoadFn())}this.active=a;this._changeCalendar()}this.dropdown&&this.dropdown.hasOwnProperty("enable")&&this.dropdown.enable(!0);this.popup&&this.popup.hasOwnProperty("enable")&&this.popup.enable(!0);b?(this.isSpcSd()&&!j(b.identifier,this.config({key:"selectedSlot"}))&&this.config({key:"existing",
value:"populating this field here will force a resubmit on the following call"}),this.popup.select(b.key),this.dropdown&&(this.dropdown.select(b.key),this.dropdown.selectCalled({arg:b.key}),this.dropdown._dom().change(function(){}))):this.handleNoSlotSelection()}else this._loadCalendar(a);else this.deactivateCalendar()};m.deactivateCalendar=function(){this._enableIcon(!1);e(this,!1);this.dropdown&&this.dropdown.hasOwnProperty("enable")&&this.dropdown.enable(!1);this.popup&&this.popup.hasOwnProperty("enable")&&
this.popup.enable(!1);var a=this.config({key:"clientCallbacks"});a&&a.calendarDisabled&&a.calendarDisabled()};m._changeCalendar=function(){var a=this.calData.getCal(this.active);this.popup&&this.popup.setup(a);this.dropdown&&this.dropdown.clear();if(!a||!a.days)n.console&&n.console.firebug&&console.warn("no calendar data"),this.deactivateCalendar();else{var b=this.config({key:"timeslotDeterminationFn"});if(b&&b(a)){var a=this.popup.model.sortedSlotList(),c;for(c in a)if(c){var d=a[c];this.popup&&
this.popup.add(d.key);this.dropdown&&this.dropdown.add(d.key,d.toString(),d.services,d.startDateUTC,d.endDateUTC)}}else for(d in a.days)a.days.hasOwnProperty(d)&&(c=a.days[d][0],b=a.days[d][1],this.popup&&this.popup.add(c),this.dropdown&&this.dropdown.add(c,b,""));this.dropdown&&(this.dropdown.make(),this.dropdown.onSelect());if(this.popup)this.popup.onSelect();a=function(){};c=function(){};this.dropdown&&(a=function(a){var b=a.dropdown;return function(a){b.select(a)}});this.popup&&(c=function(a){var b=
a.popup;return function(a){b.select(a)}});if(this.dropdown||this.popup){this.popup.selectCalled({register:"dropdown",fn:a(this)});this.dropdown&&this.dropdown.selectCalled({register:"popup",fn:c(this)});var e=this,a=function(a){if(!a||!e.config({key:"existing"})||e.config({key:"existing"})==a)e.config({key:"existing",value:a});else{e.config({key:"existing",value:a});var a=e.config({key:"id_select_fn"}),b={};t("#"+e.config({key:"dom_widget_root"})+" input[type=hidden]").each(function(){var a=t(this).attr("key"),
c=t(this).attr("value");a&&(b[a]=c)});var c;a&&(c=eval(a));a=e.config({key:"dom_widget_root"});c&&c(b,a)}};n.$&&this.config({key:"message_hook"})&&$(this.config({key:"message_hook"}).get(0)).unbind("click");(c=this.config({key:"message_hook"}))&&c.length>0&&c.attr("src").indexOf("radio-on")==-1&&c.bind("click",a);this.popup&&this.popup.selectCalled({register:"rcxCallback",fn:a});this.dropdown&&this.dropdown.selectCalled({register:"rcxCallback",fn:a})}}};m.selectCalled=function(a){this.dropdown&&this.dropdown.selectCalled(a);
this.popup&&this.popup.selectCalled&&this.popup.selectCalled(a)};m.hasRes=function(a,b){return this.calData.hasRes(a,b)};m.getRes=function(a,b){return this.calData.getRes(a,b)};m._loadCalendar=function(a){this.calData.hasCal(a)&&this.calendar(a);this.calData.load(a,this)};m._enableIcon=function(a){var b=this.icon({key:"dom_disabled"}),c=this.icon({key:"dom_enabled"});b?(b=o(b),a?b.hide():b.show()):n.console&&n.console.firebug&&console.warn("no disabled calendar icon configured");c?(c=o(c),a?c.show():
c.hide()):n.console&&n.console.firebug&&console.warn("no active calendar icon configured")};m._getConfigDOM=function(a){a=this.config({key:a});return o(a?"#"+a:[])};m.disableAndDeselect=function(a){var b=o("#"+this.config({key:"dom_widget_root"})).parents("td").eq(0).prev().find("input:radio"),c=o("input[name='csm.scheduledDelivery']");(c.length===0||o("input[name="+b.attr("name")+"]:radio:not(:disabled)").length>1)&&this.config({key:"load_payload"}).marketplace!="ATVPDKIKX0DER"?(b.attr("disabled",
"disabled"),b.is(":checked")&&o("input[name="+b.attr("name")+"]:radio:not(:disabled):first").attr("checked",!0)):(a=a?a.defaultDates:{ultStart:2E5,ultEnd:200001,timeZone:"PST",minShip:1,maxShip:2},c.attr("value",encodeURIComponent(ScheduledDelivery.Data.Json.serialize({refdataVersion:"AFN",slot:{reservationId:"X",start:a.ultStart,mltStart:a.ultStart,end:a.ultEnd,mltEnd:a.ultEnd,timeZone:a.timeZone,tz:"America/Los_Angeles",minShip:a.minShip,maxShip:a.maxShip,fss:"NOT_FAST_TRACK"},qualityInfo:{slotQuality:"DEFERRED",
slotQualityDetail:"BUSINESS_UNKNOWN_PROMISE"}}))));b.parents("div.fake-label.a-box").addClass("sd-disabled")};m._loading=function(b,c){var d=this._getConfigDOM("dom_loadbar"),e=this._getConfigDOM("dom_reload"),f=this._getConfigDOM("dom_failbar"),g=this._getConfigDOM("dom_bar");b?(g.hide(),a(f,100,!1,!1),e.hide(),d.show()):c?(d.hide(),g.hide(),a(f,100,!0,!1),e.show(),this.disableAndDeselect()):(d.hide(),a(f,100,!1,!0),e.hide(),g.show())};m.getDocLoadFn=function(){var a=this;return function(){var b=
a.icon({key:"dom_enabled"});b&&(b=o(b),a.popup.hasOwnProperty("click")&&b.click(a.popup.click()))}};o(document).ready(m.getDocLoadFn());return m}function z(a){z.prototype.months=[a.strings["assoc-january_5173"],a.strings["assoc-february_5174"],a.strings["assoc-march_5175"],a.strings["assoc-april_5176"],a.strings["assoc-may_5177"],a.strings["assoc-june_5178"],a.strings["assoc-july_5179"],a.strings["assoc-august_5180"],a.strings["assoc-september_5181"],a.strings["assoc-october_5182"],a.strings["assoc-november_5183"],
a.strings["assoc-december_5184"]];z.prototype.days=[a.strings.sd_sunday_short,a.strings.sd_monday_short,a.strings.sd_tuesday_short,a.strings.sd_wednesday_short,a.strings.sd_thursday_short,a.strings.sd_friday_short,a.strings.sd_saturday_short];z.prototype.weekdays=[a.strings.sd_sunday,a.strings.sd_monday,a.strings.sd_tuesday,a.strings.sd_wednesday,a.strings.sd_thursday,a.strings.sd_friday,a.strings.sd_saturday];z.prototype.monthShort=[a.strings.sd_january_abbrev,a.strings.sd_february_abbrev,a.strings.sd_march_abbrev,
a.strings.sd_april_abbrev,a.strings.sd_may_abbrev,a.strings.sd_june_abbrev,a.strings.sd_july_abbrev,a.strings.sd_august_abbrev,a.strings.sd_september_abbrev,a.strings.sd_october_abbrev,a.strings.sd_november_abbrev,a.strings.sd_december_abbrev];a.locale_date==97?(z.prototype.textDateFn=function(a){return a.getUTCFullYear()+" "+this.months[a.getUTCMonth()].substr(0,3)+" "+a.getUTCDate()},z.prototype.displayDateFn=function(a){return this.weekdays[a.getUTCDay()]+", "+a.getUTCFullYear()+" "+this.months[a.getUTCMonth()]+
" "+a.getUTCDate()}):a.locale_date==15?(z.prototype.textDateFn=function(a){return a.getUTCDate()+" "+this.months[a.getUTCMonth()].substr(0,3)+" "+a.getUTCFullYear()},z.prototype.displayDateFn=function(a){return this.weekdays[a.getUTCDay()]+", "+a.getUTCDate()+" "+this.months[a.getUTCMonth()]+" "+a.getUTCFullYear()}):(z.prototype.textDateFn=function(a){return this.months[a.getUTCMonth()].substr(0,3)+" "+a.getUTCDate()+", "+a.getUTCFullYear()},z.prototype.displayDateFn=function(a){return this.weekdays[a.getUTCDay()]+
", "+this.months[a.getUTCMonth()]+" "+a.getUTCDate()+", "+a.getUTCFullYear()});z.prototype.slotDisplayDateFn=function(a){var d;if(a){var b=a.getUTCHours();a.getUTCMinutes();d=b>11?"pm":"am";b%=12;b=b===0?12:b;b+=d;d=b}else d=null;return d+" "+this.displayDateFn(a)}}function M(a){function c(a,b){a&&(a.config({data:{day:b.strings.day_33013,days:b.strings.days_30885,hour:b.strings.hour_33014,hours:b.strings.hours_30886,min:b.strings.minute_33015,mins:b.strings.minutes_30887,str_missed:"The time to place this order has passed.",
str_gen_before:"Order within the next "}}),f?a.config({key:"str_gen_after",value:"to guarantee installation date."}):a.config({key:"str_gen_after",value:"to guarantee delivery date."}))}function d(a,b){a&&a.config({data:{str_noRegions:b.strings.sd_no_regions,str_selectRegion:b.strings.sd_select_region_37475}})}function b(a,b){a&&(b.marketplaceID=="ATVPDKIKX0DER"||b.marketplaceID=="A1PA6795UKMFR9"||b.marketplaceID=="A13V1IB3VIYZZH"?a.config({key:"postal_format",value:/^\d{5}$/}):b.marketplaceID=="A1F83G8C2ARO7P"?
a.config({key:"postal_format",value:/^[a-zA-Z]{1,2}[0-9rR][0-9a-zA-Z]? [0-9][abd-hjlnp-uw-zABD-HJLNP-UW-Z]{2}$/}):b.marketplaceID=="A1VC38T7YXB528"&&a.config({key:"postal_format",value:/^\d{3}-?\d{4}$/}),a.config({data:{str_length_error:b.strings.sd_zip_format_error,str_enter_error:b.strings.sd_postal_required_error,str_enter:b.strings.sd_enter_postal_code}}))}var f=a.merchantType&&a.merchantType.indexOf("Installation")!==-1;if(a){var g=a.calendar,h=a.checkout,i=a.buybox,h=a.shipoption||h||i,j=new z(a);
if(g){g.dateDisplay=j;g.config({key:"dateDisplay",value:j});g.popup.config({key:"months",value:j.months});g.popup.config({key:"days",value:j.days});j=a.strings.sd_popover_close;if(!j||j==="")j=a.strings.click_close_5690;g.popup.config({key:"closeText",value:j})}(function(b){if(!b||!b.message)return{};if(b=b.message)f?b.config({data:{str_date:a.strings.sd_install_order_date,str_slot:a.strings.sd_install_order_time}}):(b.config({data:{str_date:a.strings.sd_delivery_order_date,str_slot:a.strings.sd_delivery_order_time,
sd_item_delivery_message:a.strings.sd_item_delivery_message,sd_item_delivery_service_message:a.strings.sd_item_delivery_service_message,sd_installation:a.strings.sd_installation,sd_recycling:a.strings.sd_recycling,sd_haulaway:a.strings.sd_haulaway,sd_today:a.strings.sd_today,sd_tomorrow:a.strings.sd_tomorrow}}),a.strings.sd_for_these_items_range?b.config({key:"str_slot_message",value:a.strings.sd_for_these_items_range}):b.config({key:"str_slot_message",value:a.strings.sd_for_this_item_range}));return b})(h).dateDisplay=
new z(a);(function(b){if(b){var c=b.dropdown;c&&(c.config({key:"str_select",value:a.strings.select_date_34088}),a.buybox?c.config({key:"str_disable",value:a.strings.sd_select_postal_code}):c.config({key:"str_disable",value:a.strings.sd_select_option}));if(c=b.popup)c.config({key:"sd_today",value:a.strings.sd_today}),c.config({key:"not_available_key",value:a.strings.sd_capacity_notavailable_52061}),c.config({key:"available_key",value:a.strings.sd_capacity_available_52060}),c.config({key:"promotion_available_key",
value:a.strings.sd_capacity_promotion_available}),c.config({key:"selected_key",value:a.strings.sd_selected}),c.config({key:"no_slots_for_week",value:a.strings.sd_no_slots_for_week}),f?(c.config({key:"popup_time_title",value:a.strings.sd_select_install_time}),c.config({key:"popup_date_title",value:a.strings.sd_select_install_date})):(c.config({key:"popup_time_title",value:a.strings.sd_select_delivery_time}),c.config({key:"popup_date_title",value:a.strings.sd_select_delivery_date})),c.config({key:"strings",
value:a.strings}),c.config({key:"surcharge_message",value:a.sdUseCase==="MFN2013"&&a.strings.sd_surcharge_notice_mfn||a.strings.sd_surcharge_notice_afn||a.strings.sd_surcharge_notice});a.buybox?b.config({key:"pickDateText",value:a.strings.sd_select_postal_code}):b.config({key:"pickDateText",value:a.strings.sd_select_option});b.config({key:"showDropdown"})===0&&b.config({key:"sd_item_delivery_message",value:a.strings.sd_item_delivery_message});b.config({key:"learnMoreText",value:a.strings.sd_learn_more});
b.config({key:"reloadText",value:a.strings.sd_reload});f?(b.config({key:"noSlotsAddress",value:a.strings.sd_no_installation_times}),b.config({key:"retrieveError",value:a.strings.sd_install_retrieve_error}),a.merchantType.indexOf("Local")===-1?b.config({key:"noSlotsAddressBB",value:a.strings.sd_install_no_scheduled_error}):b.config({key:"noSlotsAddressBB",value:a.strings.sd_installation_not_available_for_zipcode})):(b.config({key:"noSlotsAddress",value:a.strings.sd_no_delivery_times}),b.config({key:"retrieveError",
value:a.strings.sd_delivery_retrieve_error}),b.config({key:"noSlotsAddressBB",value:a.strings.sd_delivery_no_scheduled_error}));b.config({key:"inconsistentWithBuybox",value:a.strings.sd_previous_slot_not_available});b.config({key:"tryAgain",value:a.strings.sd_try_again});b.config({key:"sd_select_another_date_and_time",value:a.strings.sd_select_another_date_and_time})}})(g);if(i)g=i.config,f?g({data:{str_select_date:a.strings.sd_select_install_date}}):g({data:{str_select_date:a.strings.sd_select_delivery_date}}),
c(i.cutoff,a),d(i.regions,a),b(i.zipcode,a)}}function F(a,c,d,b,f,g){c=c?c:{};this.UISettings=b=b?b:{};this.domSettings=f;this.dataField=g;this.UISettings.showDropdown=this.UISettings.showDropdown!==l&&this.UISettings.showDropdown===0?0:1;this.UISettings.orderDayAsFirstDay=this.UISettings.orderDayAsFirstDay!==l&&this.UISettings.orderDayAsFirstDay===1?1:0;this.UISettings.daySlotAsDefaultSlot=this.UISettings.daySlotAsDefaultSlot!==l&&this.UISettings.daySlotAsDefaultSlot===1?1:0;this.calendarRef=Y();
this.widgetIndex=a;this.calendarRef.orderDayAsFirstDay=this.UISettings.orderDayAsFirstDay;this.calendarRef.daySlotAsDefaultSlot=this.UISettings.daySlotAsDefaultSlot;this.calendarRef.showDropdown=this.UISettings.showDropdown;F.prototype.isTimeslot=function(a){if(!a||!a.hasOwnProperty("ids"))return!1;if(b.sdUseCase==="MFN2013")return!0;var c=0,d;for(d in a.ids)if(a.ids.hasOwnProperty(d)&&a.ids[d]){var e=a.ids[d];if(e.hasOwnProperty("e")&&e.hasOwnProperty("s")&&(e.e-e.s)/3600<23){c=1;break}}return c||
a.timeslots};this.calendarRef.config({key:"dateDisplay",value:this.dateDisplay});this.calendarRef.config({data:{id_merchant:"A1",id_marketplace:"M1",timeslotDeterminationFn:this.isTimeslot}});this.UISettings.showDropdown===1?this.calendarRef.dropdown.config({key:"element",value:"sduiDropdown"+a}):this.calendarRef.dropdown=null;this.calendarRef.popup.config({data:{element:"sdcal-popup"+a,current_month_id:"sdcal-curr-month",next_month_id:"sdcal-next-month",notaday:"sdcal-notaday",day:"sdcal-day",notavailable:"sdcal-noavail",
available:"sdcal-avail",promotionavailable:"sdcal-promavail",selected:"sdcal-select",today:"sdcal-today",prefix:"sdcal",closeText:"close",slotButton:"sd-timeslot-slot",daySpan:"1",dayLength:7,linkId:f?f.widgetRoot+" ."+f.calendarTrigger:"calendarLink"+a,rootWidgetId:f?f.widgetRoot:"sd_widgets_"+a,widgetIndex:a,leftNavEnabledClass:"sd-timeslot-scroll-title-left-enabled",leftNavEnabledInner:"&#8249;&#8249;",leftNavDisabledClass:"sd-timeslot-scroll-title-left-disabled",leftNavDisabledInner:"&#8249;&#8249;",
rightNavEnabledClass:"sd-timeslot-scroll-title-right-enabled",rightNavEnabledInner:"&#8250;&#8250;",rightNavDisabledClass:"sd-timeslot-scroll-title-right-disabled",rightNavDisabledInner:"&#8250;&#8250;"}},1);this.calendarRef.config({key:"selectedSlot",value:c.reservationId});this.calendarRef.config({key:"selectedStart",value:c.ultStart});this.calendarRef.config({key:"selectedEnd",value:c.ultEnd});this.calendarRef.config({key:"showDropdown",value:this.UISettings.showDropdown})}function Z(a,c,d,b){function f(a){function b(a){var c=
["custom-value"],a=SDFramework.jq("input[value='"+a+"']");a.length>0?(a=a.attr("name").match(/\.\d+\.\d+/),c.push(a[0])):c=[];return c.join("")}a&&a.setMappings({reservationId:[b("SD-ResID")||"custom-value.1.1"],mltStart:[b("SD-StartTime")||"custom-value.1.2"],mltEnd:[b("SD-EndTime")||"custom-value.1.3"],mltCutoff:[b("SD-CutoffTime")||"custom-value.1.5"],timeZone:[b("SD-WindowTZ")||"custom-value.1.4",b("SD-CutoffTZ")||"custom-value.1.6"],minShip:[b("SD-MinShipDtUTC")||"custom-value.1.11"],maxShip:[b("SD-MaxShipDtUTC")||
"custom-value.1.10"],shipOffer:[b("SD-ShipOfferID")||"custom-value.1.9"],fss:[b("SD-PromiseLFSS")||"custom-value.1.12"],data:[b("SD-Data")||"custom-value.1.13"],reservationType:[b("SD-ResType")],start:[b("SD-SlotStartLTZ")],end:[b("SD-SlotEndLTZ")],tz:[b("SD-SlotLongTZ")]})}function g(a,b,c){return a&&b&&c?(a.config({key:b,value:c}),!0):!1}function h(a){a.calendarRef.config({key:"clientCallbacks",value:{calendarDisabled:function(){if(a.bbSDUI)a.bbSDUI.onCalendarUnselected()}}})}function i(a){if(this.bbSDUI=
Q(a.dom)){if(a.zipcode){var b=a.dom,c=this.bbSDUI,d=a.zipcode;if(c)c.zipcode=P({data:{dom_zipInput:typeof b==="undefined"?"sd_zipcode":b.widgetRoot+" ."+b.postalInput,dom_zipGo:"sd_zipcode_go",dom_zipEntError:typeof b==="undefined"?"sd_zipcode_enter_err":b.widgetRoot+" ."+b.ineligiblePostal,dom_zipValError:typeof b==="undefined"?"sd_zipcode_valid_err":b.widgetRoot+" ."+b.invalidPostal,dom_zipDefaultClass:typeof b==="undefined"?"":b.postalDefault,dom_zipOverdisplay:typeof b==="undefined"?"":b.widgetRoot+
" ."+b.postalOverdisplay,dom_zipLabel:typeof b==="undefined"?"":b.widgetRoot+" ."+b.postalLabel,dom_zipValue:typeof b==="undefined"?"":b.widgetRoot+" ."+b.postalValue,dom_zipEmpty:typeof b==="undefined"?"":b.widgetRoot+" ."+b.postalEmpty,dom_zipPrefix:typeof b==="undefined"?"":b.widgetRoot+" ."+b.postalPrefix}},d,1)}else if(b=this.bbSDUI)b.regions=O({data:{dom_regionList:"sd_region",dom_regionLoading:"sd_region_loading"}});this.itemCache=new SDUtils.Cache(j);if((b=this.bbSDUI)&&a)b.config({data:{dom_mainElement:a.dom?
a.dom.widgetRoot+" ."+a.dom.content:"sd_divUI",dom_notSureError:a.dom?a.dom.widgetRoot+" ."+a.dom.notSureError:"",dom_unknownError:a.dom?a.dom.widgetRoot+" ."+a.dom.unknownError:"",dom_zipInput:a.dom?a.dom.widgetRoot+" ."+a.dom.postalInput:null,dom_loading:"sd_region_loading"}}),g(b.checkbox,"dom_sdCheckbox",a.dom?a.dom.widgetRoot+" ."+a.dom.enabled:"sd_intent"),a.isAFN&&(g(b,"isAFN",a.isAFN),a.addressId&&a.addressId.length>0&&g(b,"id_address",a.addressId)),g(b,"id_merchant",a.merchantID),g(b,"id_marketplace",
a.marketplaceID),g(b,"id_asin",a.asinID),g(b,"id_sku",a.msku),g(b,"id_fmid",a.fmID),g(b,"id_quantity",a.quantity),g(b,"id_offerlist_id",a.offerListingID),a.shipoption&&g(b,"shipoption",a.shipoption);f(this.bbSDUI.inputs);b=this.bbSDUI.shoppingCart;g(b,"disabledHTML",a.cartDisabledHTML);g(b,"element","#addToCartSpan, #twisterAddToCartOrig");g(b,"cursorDisabled","not-allowed");g(this.bbSDUI.oneClick,"element","#oneClickSingleClick, .oneClickDiv b, #oneClickDivId");(b=this.bbSDUI.cutoff)&&b.config({data:{element:"sd_cutoff_div",
fail:"sd_cutoff_missed_div",dom_replace:"sd_cutoff"}});a=a.dom;if(!this.calendarRef.config({key:"showDropdown"})){b=this.bbSDUI;b.initMessage();var c="sd_widgets_BB .sdMessage_buybox p",d="sd_widgets_BB .sdMessage_buybox",e="sd_widgets_BB .sdMessage_service_buybox p";a&&(c=a.widgetRoot+" ."+a.slotDisplay,d=a.widgetRoot+" ."+a.slotDisplayContainer,e=a.widgetRoot+" ."+a.serviceDisplay);b.message&&b.message.config({data:{element:c,element_container:d,element_service:e,timeslotDeterminationFn:this.isTimeslot}})}h(this)}else r.warn("SD CFG BB noUI")}
var j=["asin","merchantID","sku","fmid"],e=["asin","merchantID","heavyBulky","sku","fmid"],d=1;b&&b.sdShowDropdown!==l&&(d=b.sdShowDropdown?1:0);i.prototype=new F("BB",null,c,{showDropdown:d},a.dom);i.prototype.injectDom=function(a,b,c,d,e){this.currentSD=a;c=this.calendarRef.config({key:"pickDateText"});this.calendarRef.config({key:"learnMoreText"});var f=this.calendarRef.config({key:"noSlotsAddressBB"}),g=this.calendarRef.config({key:"retrieveError"});this.calendarRef.config({key:"tryAgain"});var h=
this.calendarRef.config({key:"showDropdown"}),i=SDFramework.jq("#sd_widgets_"+a),j=[];j.push('<span class="sd_Loading" style="display: none;">');j.push("<p>");j.push(b);j.push("</p>");j.push("</span>");h===1?(j.push('<div class="sdMessage_buybox" style="display: none;"></div>'),j.push('<div class="sdMessage_buybox" style="display: none;"><span class="swSprite s_notifySm"></span><p></p></div>')):(j.push('<div class="sdMessage_buybox" style="display: none;"><p></p></div>'),j.push('<div class="sdMessage_service_buybox" style="display: none;"><p></p></div>'));
j.push('<span class="sd_widget" style="display: none">');h===1?(j.push('<span class="sd_Active">'),j.push('<select id="sduiDropdown',a,'" class="sdbuybox" name="sduiDate" disabled >'),j.push('<option value="" selected>',c,"</option>"),j.push("</select>"),j.push("</span>"),j.push('<span class="sd_calicon sd_calicon_disabled">'),j.push(d),j.push("</span>"),j.push('<a href="#" id="calendarLink',a,'" onclick="return false;">'),j.push('<span class="sd_calicon sd_calicon_enabled" style="display: none;">'),
j.push(e)):(j.push('<span class="sd_calicon sd_calicon_disabled">'),j.push(d),j.push("</span>"),j.push('<a href="#" id="calendarLink',a,'" onclick="return false;">'),j.push('<span class="sd_calicon sd_calicon_enabled" style="display: none;">'),j.push(e),j.push(this.calendarRef.config({key:"sd_select_another_date_and_time"})));j.push("</span>");j.push("</a>");j.push("</span>");j.push('<div class="sd_err_noslots" style="display: none;">');j.push('<span id="sd_bb_no_slots_message" style="color: #ff0000; font-weight: bold;">',
f,"</span>");j.push("</div>");j.push('<div class="sd_err_connect" style="display: none;">');j.push('<span id="sd_bb_retrieve_error" style="color: #ff0000; font-weight: bold;">',g,"</span>");j.push("</div>");j.push('<div id="sdcal-popup',a,'" class="sdCalendarPopover" style="display: none"></div>');i.prepend(j.join(""))};i.prototype.establishDomHooks=function(b){var c=this.currentSD;g(this.bbSDUI,"sd_calendar",this.calendarRef);(function(d){d.icon({key:"dom_disabled",value:".sd_calicon_disabled"});
d.icon({key:"dom_enabled",value:".sd_calicon_enabled"});g(d,"dom_bar","sd_widgets_"+c+" .sd_calendar");g(d,"dom_failbar","sd_widgets_"+c+" .sd_err_connect");g(d,"dom_noslots","sd_widgets_"+c+" .sd_err_noslots");g(d,"dom_loadbar","sd_widgets_"+c+" .sd_Loading");typeof b!=="undefined"&&(g(d,"dom_bar",b.widgetRoot+" ."+b.content),g(d,"dom_noslots",b.widgetRoot+" ."+b.notSureError),g(d,"dom_loadbar",b.widgetRoot+" ."+b.loading),g(d,"hideWidgetOnError",1),g(d,"dom_slotsContent",b.widgetRoot+" ."+b.content),
g(d,"dom_noslotsNotSure",b.widgetRoot+" ."+b.notSureError),g(d,"dom_noslotsUnknown",b.widgetRoot+" ."+b.unknownError),g(d,"dom_zipEntError",b.widgetRoot+" ."+b.ineligiblePostal),g(d,"dom_slotDisplay",b.widgetRoot+" ."+b.slotDisplayContainer),g(d,"dom_retry",b.widgetRoot+" ."+b.retry),g(d,"dom_slotTrigger",b.widgetRoot+" ."+b.calendarTrigger));g(d,"load_url",a.load_url);g(d.dropdown,"element","")})(this.calendarRef)};i.prototype.initializeSpecificDom=function(){this.bbSDUI.initializeDOM()};var o=[];
i.prototype.getRequestItemIDForKey=function(a){var b=this.itemCache.operate(a,{},SDUtils.Cache.IF_EXISTS.PRESERVE,SDUtils.Cache.IF_NEW.ADD),c=b.requestItemID;if(c===l)c=o.length,b.requestItemID=c,o[c]=a;return c};i.prototype.getKeyForRequestItemID=function(a){return o[a]};i.prototype.getIsSDAvailableParams=function(a,b){for(var c={marketplaceID:a},d=0,f=0;f<b.length;f++){var g=b[f];if(g.isSDAvailable===l){c["requestItemID"+d]=this.getRequestItemIDForKey(g);for(var h=0;h<e.length;h++){var i=e[h],j=
g[i];j!==null&&j!==l&&(c[i+d]=j)}d++}}return c};i.prototype.getKeyFromConfig=function(){return{asin:this.bbSDUI.config({key:"id_asin"}),merchantID:this.bbSDUI.config({key:"id_merchant"}),sku:this.bbSDUI.config({key:"id_sku"}),fmid:this.bbSDUI.config({key:"id_fmid"})}};i.prototype.setIsSDAvailable=function(a,b){this.itemCache.update(a,{isSDAvailable:b});this.itemCache.keysAreEqual(a,this.getKeyFromConfig())&&(this.bbSDUI.config({key:"isSDAvailable",value:b}),this.refreshAppearance())};i.prototype.onTwisterChildrenIsSDAvailableResponse=
function(a){r.isDebugEnabled()&&r.debug("isSDAvailable:",a);for(var b in a)a.hasOwnProperty(b)&&this.setIsSDAvailable(this.getKeyForRequestItemID(b),a[b])};i.prototype.onTwisterChildrenIsSDAvailableError=function(a,b,c){r.isWarnEnabled()&&(r.warn("SD isSDAvailable AJAX error: "+b),c&&r.warn("(HTTP error: "+c+")"))};i.prototype.cacheChildData=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.itemCache.update(c,c)}};i.prototype.batchIsSDAvailable=function(a){var a=this.getIsSDAvailableParams(this.bbSDUI.config({key:"id_marketplace"}),
a),b=this;SDFramework.jq.ajax({url:"/gp/product/features/scheduled-delivery/is-sd-available-json.html?powerbar=0",type:"POST",dataType:"json",data:a,success:function(a){b.onTwisterChildrenIsSDAvailableResponse(a)},error:function(a,c,d){b.onTwisterChildrenIsSDAvailableError(a,c,d)},timeout:2E4})};i.prototype.fetchTwisterData=function(a){this.cacheChildData(a);this.batchIsSDAvailable(a)};return new i(a)}n.ScheduledDelivery={};n.SDUtils={};var r=function(){function a(){}function c(){return!1}for(var d=
["log","info","debug","warn","error"],b={suppressDefaultConsole:a},f=0;f<d.length;f++){var g=d[f],h="is"+g.charAt(0).toUpperCase()+g.substr(1)+"Enabled";b[h]=c;b[g]=a}return b}();ScheduledDelivery.Debug={requiredArg:function(a){return a}};n.SDFramework={jq:t};(function(){SDFramework.Class=function(){function a(a){SDFramework.jq.extend(this.rep,a)}function c(a,b){return function(){return b.apply(a,arguments)}}function d(a){var b=this.rep,d;for(d in a)a.hasOwnProperty(d)&&(this.interfaceInstance[d]=
c(b,a[d]))}function b(a){SDFramework.jq.extend(this.interfaceInstance,a)}return function(c){function g(){}this.interfaceInstance=g.prototype=c;this.rep=new g;this.declarePrivate=a;this.declarePublic=d;this.declarePublicFinal=b}}();SDFramework.defineStruct=function(){var a=arguments;return function(){for(var c=0;c<a.length;c++)this[a[c]]=arguments[c]}};SDFramework.defineClass=function(a){var c=function(){var c=a.initBase?a.initBase.apply(null,arguments):this,b=new SDFramework.Class(c);a.privateFunctions&&
b.declarePrivate(a.privateFunctions);a.publicFunctions&&b.declarePublic(a.publicFunctions);a.publicFinal&&b.declarePublicFinal(a.publicFinal);if(a.events)for(var f=c,g=a.events,h=0;h<g.length;h++)f[g[h]]=new SDFramework.Event;a.init&&a.init.apply(b.rep,arguments);a.publicInit&&a.publicInit.apply(c,arguments);return c};a.publicStatic&&SDFramework.jq.extend(c,a.publicStatic);return c}})();(function(){SDUtils.isEmptyObject=function(a){for(var d in a)if(a.hasOwnProperty(d))return!1;return!0};var a=SDFramework.defineClass({init:function(a){this.i=
0;this.arr=a},publicFunctions:{hasNext:function(){return this.i<this.arr.length},next:function(){var a=this.arr[this.i];this.i++;return a}}});SDUtils.ArraySet=SDFramework.defineClass({init:function(){this.arr=[]},publicFunctions:{add:function(a){if(this.contains(a))return!1;this.arr.push(a);return!0},remove:function(a){a=SDFramework.jq.inArray(a,this.arr);if(a==-1)return!1;this.arr[a]=this.arr[this.arr.length-1];this.arr.pop();return!0},contains:function(a){return SDFramework.jq.inArray(a,this.arr)!=
-1},getCount:function(){return this.arr.length},isEmpty:function(){return this.getCount()===0},iterator:function(){return new a(this.arr)},getAny:function(){return this.arr[0]},removeAny:function(){return this.arr.pop()}}});SDFramework.Event=function(){this.handlers=new SDUtils.ArraySet;this.dispatch=function(){for(var a=this.handlers.iterator();a.hasNext();)a.next().apply(null,arguments)}};SDUtils.Cache=function(){function a(b,c){return function(a,d){return this.operate(a,d,b,c)}}function d(a,b,
c){for(var d in b)if(b.hasOwnProperty(d)&&(c||!a.hasOwnProperty(d)))a[d]=b[d]}var b={PRESERVE:l,REPLACE:1,MERGE_OVERWRITE:2,MERGE_NO_OVERWRITE:3},f={DO_NOT_ADD:l,ADD:!0};return SDFramework.defineClass({publicStatic:{IF_EXISTS:b,IF_NEW:f},init:function(a){a.length||r.error("Invalid keyspec:",a);this.spec=a;this.buckets={}},privateFunctions:{primaryKey:function(a){return a[this.spec[0]]},supplementaryKeysAreEqual:function(a,b){for(var c=this.spec,d=1;d<c.length;d++)if(a[c[d]]!==b[c[d]])return!1;return!0},
operateOnBucket:function(a,b,c,f,e){for(var o=0;o<a.length;o++){var m=a[o];if(this.supplementaryKeysAreEqual(m.key,b)){switch(f){case SDUtils.Cache.IF_EXISTS.REPLACE:m.value=c;break;case SDUtils.Cache.IF_EXISTS.MERGE_OVERWRITE:d(m.value,c,!0);break;case SDUtils.Cache.IF_EXISTS.MERGE_NO_OVERWRITE:d(m.value,c,!1)}return m.value}}e===SDUtils.Cache.IF_NEW.ADD&&a.push({key:b,value:c});return c}},publicFunctions:{keysAreEqual:function(a,b){return this.primaryKey(a)==this.primaryKey(b)&&this.supplementaryKeysAreEqual(a,
b)},operate:function(a,b,c,d){var e=this.primaryKey(a),o=this.buckets[e];return o===l?(d==f.ADD&&(this.buckets[e]=[{key:a,value:b}]),b):this.operateOnBucket(o,a,b,c,d)},set:a(b.REPLACE,f.ADD),update:a(b.MERGE_OVERWRITE,f.ADD),get:a(b.PRESERVE,f.DO_NOT_ADD),clear:function(){this.buckets={}},forEachSubkey:function(a){for(var b=0;b<this.spec.length;b++)a(this.spec[b])}}})}()})();ScheduledDelivery.Fsm=SDFramework.defineClass({init:function(a){this.initMatrix(a.graph);this.triggers=a.triggers?a.triggers:
{};this.slaves=a.slaves?a.slaves:[];if(a.options)this.state=a.options.initialState,this.defaultSearch=a.options.defaultSearch,this.context=a.options.context;if(this.state===l)this.state="init";if(this.defaultSearch===l)this.defaultSearch=!1},privateFunctions:{initMatrix:function(a){this.matrix={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];this.matrix[c]={};for(var b in d)d.hasOwnProperty(b)&&(this.matrix[c][b]={fn:d[b],enabled:!0})}},incrementSearch:function(a,c,d){var b=this.matrix[a.state];
if(b)for(var f in b)if(b.hasOwnProperty(f)&&!d[f]&&b[f].enabled){var g={state:f,source:a};d[f]=!0;c.push(g)}return c.shift()},path:function(a){var c=[],d={state:this.state,source:null},b={};for(b[this.state]=!0;d.state!==a;)if(d=this.incrementSearch(d,c,b),d===l)return;for(a=[];d.source!==null;)a.unshift(d.state),d=d.source;return a},getTransitionMetadata:function(a,c){var d=this.matrix[a];return!d?void 0:d[c]},driveSlaves:function(){for(var a=0;a<this.slaves.length;a++){var c=this.slaves[a],d=c.bindings[this.state];
d!==l&&c.fsm.trySetState(d)}},doSingleStepTransition:function(a,c){var d=this.getTransitionMetadata(this.state,a);if(d&&d.enabled)return d.fn.apply(this.context,c)!==!1?(this.state=a,this.driveSlaves(),!0):!1},doMultiStepTransition:function(a,c){var d=this.path(a);if(d===l)return l;else{for(var b=0;b<d.length;b++)if(!this.doSingleStepTransition(d[b],c))return!1;return!0}},logTransitionFailed:function(a,c){r.error('State transition from "'+a+'" to "'+c+'" failed.')},logTransitionNotDefined:function(a,
c){r.error('State transition from "'+a+'" to "'+c+'" does not exist.')}},publicFunctions:{getState:function(){return this.state},setState:function(a,c){var d=this.state,b=this.trySetState(a,c);b||(b===!1?this.logTransitionFailed(d,a):this.logTransitionNotDefined(d,a))},trySetState:function(a,c){var d=this.defaultSearch,b=[];if(c){if(c.search!==l)d=c.search;if(c.args!==l)b=c.args}var f=this.doSingleStepTransition(a,b);if(f!==l)return f;else if(this.state===a)return!0;else if(d)return this.doMultiStepTransition(a,
b)},setTransitionEnabled:function(a,c,d){var b=this.getTransitionMetadata(a,c);b?b.enabled=d:this.logTransitionNotDefined(a,c)},enableTransition:function(a,c){this.setTransitionEnabled(a,c,!0)},disableTransition:function(a,c){this.setTransitionEnabled(a,c,!1)},setTrigger:function(a,c,d){var b=this.triggers[a];b||(b={},this.triggers[a]=b);b[c]=d},clearTrigger:function(a,c){var d=this.triggers[a];d&&delete d[c]},trigger:function(a){var c=this.triggers[a];c?(c=c[this.state])?this.setState(c):r.error('State "'+
this.state+'" cannot consume trigger "'+a+'".'):r.error('Trigger "'+a+'" is not defined.')},tryTrigger:function(a){if(a=this.triggers[a])return a=a[this.state],!a?void 0:this.trySetState(a)}}});ScheduledDelivery.Data={};ScheduledDelivery.Data.ReservationIdParser=function(){return SDFramework.defineClass({init:function(a){this.parts=a?a.split(";"):[]},publicFunctions:{getSlotId:function(){return this.parts[0]},getEncodedCarriers:function(){return this.parts[1]},getEncodedCharges:function(){return this.parts[2]},
getEncodedServices:function(){return this.parts[3]},getCharges:function(){if(this.charges===l){var a=this.getEncodedCharges(),a=a?a.split("^"):[];this.charges={perItem:parseFloat(a[0]),perShipment:parseFloat(a[1]),currencyCode:a[2]}}return this.charges},getCarriers:function(){if(this.carriers===l){var a=this.getEncodedCarriers();this.carriers=a?a.split(","):[]}return this.carriers}}})}();ScheduledDelivery.Data.FulfillmentServiceSubclass=function(){function a(a){for(var b=0;b<c.length;b++)if(c[b]==
a)return b;return l}var c=["FAST_TRACK_SAME_DAY","FAST_TRACK_FUTURE_DAY","NOT_FAST_TRACK",l];return{score:a,pickTightestSla:function(c){for(var b=c,f=1;f<arguments.length;f++){var g=arguments[f],h=a(g),i=a(b);if(i===l||h!==l&&h<i)b=g}return b}}}();ScheduledDelivery.Data.Json=function(){function a(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=h[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(b,d){var h,m,l,p,n=f,
s,q=d[b];q&&typeof q==="object"&&typeof q.toJSON==="function"&&(q=q.toJSON(b));typeof i==="function"&&(q=i.call(d,b,q));switch(typeof q){case "string":return a(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);case "object":if(!q)return"null";f+=g;s=[];if(Object.prototype.toString.apply(q)==="[object Array]"){p=q.length;for(h=0;h<p;h+=1)s[h]=c(h,q)||"null";l=s.length===0?"[]":f?"[\n"+f+s.join(",\n"+f)+"\n"+n+"]":"["+s.join(",")+"]";f=n;return l}if(i&&
typeof i==="object"){p=i.length;for(h=0;h<p;h+=1)typeof i[h]==="string"&&(m=i[h],(l=c(m,q))&&s.push(a(m)+(f?": ":":")+l))}else for(m in q)Object.prototype.hasOwnProperty.call(q,m)&&(l=c(m,q))&&s.push(a(m)+(f?": ":":")+l);l=s.length===0?"{}":f?"{\n"+f+s.join(",\n"+f)+"\n"+n+"}":"{"+s.join(",")+"}";f=n;return l}}var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f,g,h={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;return{serialize:typeof JSON==="object"&&typeof JSON.stringify==="function"?function(a,b,c){return JSON.stringify(a,b,c)}:function(a,b,d){var h;g=f="";if(typeof d==="number")for(h=0;h<d;h+=1)g+=" ";else typeof d==="string"&&(g=d);if((i=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",{"":a})},deserialize:typeof JSON==="object"&&typeof JSON.parse===
"function"?function(a,b){return JSON.parse(a,b)}:function(a,b){function c(a,d){var f,g,h=a[d];if(h&&typeof h==="object")for(f in h)Object.prototype.hasOwnProperty.call(h,f)&&(g=c(h,f),g!==l?h[f]=g:delete h[f]);return b.call(a,d,h)}var f,a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),typeof b==="function"?c({"":f},""):f;throw new SyntaxError("JSON.parse");}}}();(function(){function a(a){try{return encodeURIComponent(ScheduledDelivery.Data.Json.serialize(a)).replace(/[\\~]/g,function(a){return"%"+a.charCodeAt(0).toString(16)})}catch(b){return r.error("Could not serialize SD data to JSON.",b,a),l}}function c(a,b){if(a){if(b===l||b===null)b="";a.jquery?a.attr("value",b):d.each(a,function(a,c){d("input[name='"+c+"']").attr("value",
b)})}}var d=SDFramework.jq,b={SPECIAL:-2,DATA_MEMBER:-1,SLOT:"slot"},f={data:b.SPECIAL,refdataVersion:b.DATA_MEMBER};ScheduledDelivery.Data.FormPersistence=SDFramework.defineClass({init:function(){this.data={}},privateFunctions:{updateFields:function(a,b){d.each(this.fields[a],function(a,d){c(d,b&&b[a])});this.data[a]=b},updateData:function(){var d=this.fields[b.SPECIAL].data;d&&c(d,a(this.data))}},publicFunctions:{setMappings:function(a){var c={};d.each(b,function(a,b){c[b]={}});d.each(a,function(a,
d){c[f[a]||b.SLOT][a]=d});this.fields=c},clearSlotFields:function(){this.updateSlotFields()},updateSlotFields:function(a){this.updateFields(b.SLOT,a);this.updateData()},updateDataMembers:function(a){var f=this.fields[b.DATA_MEMBER],i=this;d.each(a,function(a,b){i.data[a]=b;c(f[a],b)});this.updateData()}}})})();ScheduledDelivery.BuyBox={};I=void 0;J=void 0;ScheduledDelivery.BuyBox.HoverPopover=function(){return SDFramework.defineClass({init:function(a){this.container=SDFramework.jq(ScheduledDelivery.Debug.requiredArg(a.containerHtml));
a.contentHtml&&this.setContent(a.contentHtml)},publicFunctions:{setContentHtml:function(a){this.container.html(a)},bind:function(a){this.parent&&this.unbind();this.parent=a;a.amazonPopoverTrigger({location:["left","auto"],locationAlign:"middle",locationMargin:-10,width:null,skin:null,hoverHideDelay:0,hoverShowDelay:0,showOnHover:!0,showCloseButton:!1,literalContent:this.container})},unbind:function(){if(this.parent)this.parent.removeAmazonPopoverTrigger(),this.parent=null}}})}();ScheduledDelivery.BuyBox.UIOverride=
function(){function a(a){b.wrap(a)}function c(a){b.unwrap(a)}var d=SDFramework.defineClass({init:function(a){this.cssClass=a;this.html='<span class="'+a+'" />';var b="span."+a;this.wrapperSelector=b;var c=function(){return SDFramework.jq(this).parent(b).length};this.contentFilter=c;this.nonContentFilter=function(){return!c.call(this)}},publicFunctions:{filterWrappedElements:function(a){return a.filter(this.contentFilter)},filterUnwrappedElements:function(a){return a.filter(this.nonContentFilter)},
selectWrappers:function(a){return a.parent(this.wrapperSelector)},wrap:function(a){this.filterUnwrappedElements(a).wrap(this.html)},unwrap:function(a){a=this.filterWrappedElements(a);a.unwrap?a.unwrap():a.each(function(){SDFramework.jq(this).parent().replaceWith(this)})}}}),b=new d("sdXuiVisibilityWrapper");return{WrapperTemplate:d,hide:a,show:c,setVisible:function(b,d){d?c(b):a(b)}}}();ScheduledDelivery.BuyBox.SDIntentCheckbox=SDFramework.defineClass({events:["onCheck","onClear"],privateFunctions:{dom:D("dom_sdCheckbox",
"check"),dispatchClick:function(){this.isChecked()?this.onCheck.dispatch():this.onClear.dispatch()}},publicFunctions:{config:u("checkbox"),bindDOM:function(){var a=this;this.dom().click(function(){a.dispatchClick()})},isChecked:function(){var a=this.dom();return a.prop?a.prop("checked"):a.is(":checked")},exists:function(){return this.dom().size()>0},setChecked:function(a){if(this.isChecked()!==a){var c=this.dom();c.prop?this.dom().prop("checked",a):a?c.attr("checked","checked"):c.removeAttr("checked");
this.dispatchClick()}},setVisible:function(a){a?this.dom().show():this.dom().hide()}}});ScheduledDelivery.BuyBox.SlotStorage=SDFramework.defineClass({privateFunctions:{INPUT_VALUE_PREFIX:"custom-value",validSlotExists:function(a){var a=this.slots[a],c=!1,d;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];d.indexOf(this.INPUT_VALUE_PREFIX)===0&&b&&(c=!0)}return c}},init:function(a,c){this.slotInputClass=a;this.rootElement=c;this.slots={}},publicFunctions:{config:u("slotstorage"),storeSlotInput:function(a){if(a){this.slots[a]=
{};var c=this;SDFramework.jq("#"+this.rootElement+" ."+this.slotInputClass).each(function(){var d=SDFramework.jq(this),b=d.attr("name"),d=d.attr("value");c.slots[a][b]=d})}},repopulateSlotInput:function(a){if(a){var c=this.slots[a],d;for(d in c)if(c.hasOwnProperty(d)){var b=c[d],f=null,f=SDFramework.jq("#"+this.rootElement+" input[name='"+d+"']."+this.slotInputClass);f.size()>0&&(f=SDFramework.jq(f[0]),f.attr("name",d),f.attr("value",b))}return this.validSlotExists(a)}},clearSlotInput:function(a){if(a){var c=
this;SDFramework.jq("#"+this.rootElement+" ."+this.slotInputClass).each(function(){var a=SDFramework.jq(this);a.attr("name").indexOf(c.INPUT_VALUE_PREFIX)===0&&a.attr("value","")})}}}});SDUtils.isBeacon=function(a){return a.parents(".a-container").length>0};SDUtils.protectAgainstDoubleAction=function(){var a={};return function(c,d){if(!c)return n.console&&n.console.error&&console.error("Function is not used properly, use a unique owner to identify the caller."),!1;if(a.hasOwnProperty(c))return!0;
a[c]=1;setTimeout(function(){delete a[c]},d||100);return!1}}();I=function(){return SDFramework.defineClass({init:function(){this.warningPopover=new ScheduledDelivery.BuyBox.HoverPopover({containerHtml:'<div class="sd_bb_warn_pop" />'});this.disabledDomFsm=new ScheduledDelivery.Fsm({graph:{hiddenNotLoaded:{shown:function(){this.disabledDOM=this.loadDisabledJQ()}},shown:{hidden:function(){this.disabledDOM.hide()}},hidden:{shown:function(){this.disabledDOM.show()}}},options:{context:this,initialState:"hiddenNotLoaded"}});
this.enabledDomFsm=new ScheduledDelivery.Fsm({graph:{shown:{hidden:function(){this.overriddenUI=this.getAddToCartSelector();this.overriddenUI.hide()}},hidden:{shown:function(){this.overriddenUI.show()}}},options:{context:this,initialState:"shown"}})},privateFunctions:{getAddToCartSelector:function(){var a=this.config({key:"element"});a=="undefined"&&(r.warn("shopping-cart: no element"),a=[]);return SDFramework.jq(a)},loadDisabledJQ:function(){var a=this.config({key:"disabledHTML"});if(a!="undefined"){var c=
this.getAddToCartSelector(),a=SDFramework.jq(a);c.after(a);c=a.is("img")?a:a.find("img");c.length===0?r.warn("Add to cart disabled image not found"):(this.warningPopover.bind(c),c.css("cursor",this.config({key:"cursorDisabled"})))}else r.warn("no disabledHTML"),a=SDFramework.jq(document.createElement("span"));return a}},publicFunctions:{config:u("shoppingCart"),enable:function(a){a?this.enableAddToCart():this.disableAddToCart()},enableAddToCart:function(){this.disabledDomFsm.trySetState("hidden");
this.enabledDomFsm.setState("shown")},disableAddToCart:function(){this.enabledDomFsm.setState("hidden");this.disabledDomFsm.setState("shown")},setWarningMessage:function(a){this.warningPopover.setContentHtml(a)}}})}();J=function(){return SDFramework.defineClass({publicFunctions:{config:u("oneClick"),enable:function(a){var c=this.config({key:"element"});c?ScheduledDelivery.BuyBox.UIOverride.setVisible(SDFramework.jq(c),a):r.warn("one-click: no element")}}})}();ScheduledDelivery.BuyBox.DomStringUpdater=
function(){var a=ScheduledDelivery.Debug;return SDFramework.defineClass({init:function(c){this.merchantStringMappings=a.requiredArg(c.domMerchantStringMappings);this.afnLearnMoreNode=a.requiredArg(c.afnLearnMoreNode)},privateFunctions:{resolveMerchantString:function(a,d){return this.merchantStringMappings[a][d]},updateMerchantTextElements:function(a,d){for(var b in a)a.hasOwnProperty(b)&&SDFramework.jq(b).text(this.resolveMerchantString(a[b],d))},resolveLearnMoreNode:function(a,d){return a?this.afnLearnMoreNode:
this.resolveMerchantString("sd_mfn_learn_more_node",d)}},publicFunctions:{updateStrings:function(a,d){this.updateMerchantTextElements({"#sd_bb_intent_text":"schedule_delivery_34179","#sd_bb_select_delivery_date_text":"sd-select-delivery-date-buybox","#sd_bb_notify1":"notify1","#sd_bb_notify2":"notify2"},d);var b=a?this.afnLearnMoreNode:this.resolveMerchantString("sd_mfn_learn_more_node",d),f=!a&&(d=="Installation"||d=="LocalInstallation")?"/gp/feature.html?docId=":"/gp/help/customer/display.html?nodeId=";
SDFramework.jq("#sd_bb_learn_more").attr("href",f+b)}}})}();ScheduledDelivery.BuyBox.Widget=SDFramework.defineClass({initBase:function(a,c,d,b){return Z(a,c,d,b)},init:function(a,c,d,b){this.weblabs=b;this.domStringUpdater=a.domStringUpdater;this.jsMerchantStringMappings=a.jsMerchantStringMappings;this.marketplaceID=a.marketplaceID;this.strings=a.strings;this.initUI();c=function(){};this.visFsm=new ScheduledDelivery.Fsm({graph:{hidden:{hidden:c,visible:this.container.show},visible:{hidden:this.container.hide,
visible:c}},options:{context:this.container,initialState:"hidden"}});this.calCacheFsm=new ScheduledDelivery.Fsm({graph:{init:{needNew:this.invalidateCalendars},needNew:{needNew:this.invalidateCalendars}},options:{context:this}});this.fsm=new ScheduledDelivery.Fsm({graph:{notLoaded:{enabled:c,disabled:c,requiredEnabled:this.xToRequiredNt,requiredDisabled:c},enabled:{enabled:c,disabled:this.xToDisabledNt,requiredEnabled:this.xToRequiredNt,requiredDisabled:this.xToDisabledNt},disabled:{enabled:c,disabled:c,
requiredEnabled:this.xToRequiredNt,requiredDisabled:c},requiredEnabled:{enabled:this.xFromRequiredNt,disabled:function(){this.xFromRequiredNt();this.toDisabledNt()},requiredEnabled:c,requiredDisabled:function(){this.xFromRequiredNt();this.toDisabledNt()}},requiredDisabled:{enabled:c,disabled:c,requiredEnabled:this.xToRequiredNt,requiredDisabled:c}},slaves:[{fsm:this.visFsm,bindings:{enabled:"visible",disabled:"hidden",requiredEnabled:"visible",requiredDisabled:"hidden"}},{fsm:this.calCacheFsm,bindings:{enabled:"needNew",
requiredEnabled:"needNew"}}],triggers:{require:{enabled:"requiredEnabled",disabled:"requiredDisabled"},unrequire:{requiredEnabled:"enabled",requiredDisabled:"disabled"},enable:{enabled:"enabled",disabled:"enabled",requiredEnabled:"requiredEnabled",requiredDisabled:"requiredEnabled"},disable:{enabled:"disabled",requiredEnabled:"requiredDisabled"}},options:{context:this,initialState:"notLoaded"}});this.setEnabledTrigger(d);this.setMerchantType(a.merchantType)},publicInit:function(){},privateFunctions:{initUI:function(){this.container=
SDFramework.jq("#sd_div");this.chkSdIntent=this.bbSDUI.checkbox},setRequiredTrigger:function(a){this.required=a;this.fsm.tryTrigger(a?"require":"unrequire")},setEnabledTrigger:function(a){this.enabled=a;this.fsm.tryTrigger(a?"enable":"disable")},xToDisabledNt:function(){this.chkSdIntent.setChecked(!1)},xToRequiredNt:function(){this.bbSDUI.shoppingCart.setWarningMessage(this.strings.sd_required_buybox_disabled);this.chkSdIntent.setChecked(!0);this.chkSdIntent.setVisible(!1)},xFromRequiredNt:function(){this.chkSdIntent.setVisible(!0);
this.bbSDUI.shoppingCart.setWarningMessage(this.nonRequiredShoppingCartWarning)},setMerchantType:function(a){this.merchantType=a;M({calendar:this.calendarRef,buybox:this.bbSDUI,merchantType:a,marketplaceID:this.marketplaceID,strings:this.strings});SDFramework.jq("#sd_bb_no_slots_message").text(this.calendarRef.config({key:"noSlotsAddressBB"}));SDFramework.jq("#sd_bb_retrieve_error").text(this.calendarRef.config({key:"retrieveError"}));this.nonRequiredShoppingCartWarning=this.jsMerchantStringMappings?
this.jsMerchantStringMappings.sd_buybox_disabled[a]:this.strings.sd_buybox_disabled;this.required||this.bbSDUI.shoppingCart.setWarningMessage(this.nonRequiredShoppingCartWarning)},invalidateCalendars:function(){this.bbSDUI.unselectCalendar();this.chkSdIntent.isChecked()&&this.bbSDUI.selectCalendar()},isCallbackWeblabConsistent:function(a){if(a){if(this.weblabs.sdTwisterOnChildSelect&&a.sdInfo===l)return r.warn("Twister Ajax executed with inconsistent weblab state (non-T1)."),!1}else if(!this.weblabs.sdTwisterOnChildSelect)return r.warn("Twister Ajax executed with inconsistent weblab state (T1)."),
!1;return!0}},publicFunctions:{declareContainerReady:function(){this.fsm.setState(this.enabled?this.required?"requiredEnabled":"enabled":this.required?"requiredDisabled":"disabled")},updateBuyBoxObject:function(a){try{if(r.debug("Updating SD widget",a),this.isCallbackWeblabConsistent(a))if(this.weblabs.sdTwisterAjax){r.debug("SDTwister: T3");this.bbSDUI.config({key:"id_offerlist_id",value:a.offerListingID});this.bbSDUI.config({key:"id_quantity",value:a.quantity});var c={asin:a.asin,merchantID:a.merchantID,
sku:a.mSku,fmid:a.fmID,offerListingID:a.offerListingID,quantity:a.quantity},d=this.itemCache.update(c,c);d.isSDAvailable===l&&r.isWarnEnabled()&&r.warn("Cache miss on SD Availability for item:",a,"Cache state:",this.itemCache);this.bbSDUI.config({key:"id_merchant",value:d.merchantID});this.bbSDUI.config({key:"id_asin",value:d.asin});this.bbSDUI.config({key:"id_sku",value:d.sku});this.bbSDUI.config({key:"id_fmid",value:d.fmid});this.bbSDUI.config({key:"shipoption",value:d.shipOption});this.bbSDUI.config({key:"isSDAvailable",
value:d.isSDAvailable?!0:!1});this.domStringUpdater.updateStrings(d.isFBA,d.merchantType);this.setMerchantType(d.merchantType);this.setEnabledTrigger(this.bbSDUI.config({key:"isSDAvailable"}))}else this.weblabs.sdTwisterOnChildSelect?(r.debug("SDTwister: T1"),a?(this.bbSDUI.config({key:"id_merchant",value:a.merchantID}),this.bbSDUI.config({key:"id_asin",value:a.asin}),this.bbSDUI.config({key:"id_sku",value:a.mSku}),this.bbSDUI.config({key:"id_fmid",value:a.fmID}),this.bbSDUI.config({key:"id_offerlist_id",
value:a.offerListingID}),this.bbSDUI.config({key:"id_quantity",value:a.quantity}),this.bbSDUI.config({key:"shipoption",value:a.shipOption}),this.domStringUpdater.updateStrings(a.sdInfo.isFBA,a.sdInfo.merchantType),this.setMerchantType(a.sdInfo.merchantType),this.setEnabledTrigger(!0)):this.setEnabledTrigger(!1)):(r.debug("SDTwister: C"),SDFramework.jq("#sd_intent").removeAttr("disabled"),this.bbSDUI.config({key:"id_merchant",value:a.merchantID}),this.bbSDUI.config({key:"id_asin",value:a.asin}),this.bbSDUI.config({key:"id_sku",
value:a.mSku}),this.bbSDUI.config({key:"id_fmid",value:a.fmID}),this.bbSDUI.config({key:"id_offerlist_id",value:a.offerListingID}),this.bbSDUI.config({key:"id_quantity",value:a.quantity}),this.calendarRef.calData.clearCals(),SDFramework.jq("#sd_intent:checked").length>0&&SDFramework.jq("#sd_zipcode_go").click());else this.fsm.trigger("disable")}catch(b){r.error("Unable to update Scheduled Delivery widget.",b.message,b.stack)}}}});F.prototype.initializeDom=function(){var a=this.domSettings?this.domSettings.widgetRoot:
"sd_widgets_"+this.widgetIndex;SDFramework.jq("#"+a+" .sd_Loading").hide();SDFramework.jq("#"+a+" .sd_err_nojs").hide();SDFramework.jq("#"+a+" .sd_err_connect").hide()};F.prototype.establishDomHooks=function(){var a=this.domSettings?this.domSettings.widgetRoot:"sd_widgets_"+this.widgetIndex;this.calendarRef.icon({key:"dom_disabled",value:"#"+a+" .sd_calicon_disabled"});this.calendarRef.icon({key:"dom_enabled",value:"#"+a+" .sd_calicon_enabled"});this.calendarRef.config({data:{dom_bar:a+" .sd_widget",
dom_failbar:a+" .sd_err_connect",dom_noslots:a+" .sd_err_from_result",dom_inconsistent:a+" .sd_err_inconsistent",dom_reload:a+" .sd_reload",dom_loadbar:a+" .sd_Loading"}});this.UISettings.showDropdown===1&&this.calendarRef.dropdown.config({key:"element",value:"sduiDropdown"+this.widgetIndex})};F.prototype.injectDom=function(a,c,d,b,f,g,h){function i(a,b,c){k.push('<img class="sd_calicon ',a,'" src="',c,'" width="25" alt="Calendar" height="17" border="0"');b||k.push(' style="display: none;"');k.push("/>")}
function j(){i("sd_calicon_disabled",!0,f)}function e(a,b,c,d){var e;if(SDUtils.isBeacon(w)){k.push('<div class="',a," a-box ",c?"a-alert ":"","a-alert-",b,'" style="display: none;">');k.push('<div class="a-box-inner">');c&&k.push('<i class="a-icon a-icon-alert"></i>');for(e=3;e<arguments.length;e++)k.push(arguments[e]);k.push("</div>")}else{k.push('<div class="',a,' sdWarn" style="display: none;">');for(e=3;e<arguments.length;e++)k.push(arguments[e])}k.push("</div>")}var o=this.calendarRef.config({key:"pickDateText"}),
m=this.calendarRef.config({key:"learnMoreText"}),l=this.calendarRef.config({key:"reloadText"}),p=this.calendarRef.config({key:"noSlotsAddress"}),n=this.calendarRef.config({key:"inconsistentWithBuybox"}),s=this.calendarRef.config({key:"retrieveError"}),q=this.calendarRef.config({key:"tryAgain"}),r=this.calendarRef.config({key:"showDropdown"}),w=SDFramework.jq("#"+(this.domSettings?this.domSettings.widgetRoot:"sd_widgets_"+this.widgetIndex)),k=[];k.push('<input type="hidden" name="SD-SlotID-',a,'" key="ScheduledDeliveryEntity.SlotId"                   value=""/>');
k.push('<input type="hidden" name="SD-ResID-',a,'" key="ScheduledDeliveryEntity.ReservationId"            value=""/>');k.push('<input type="hidden" name="SD-ResType-',a,'" key="ScheduledDeliveryEntity.reservationType"          value=""/>');k.push('<input type="hidden" name="SD-StartTime-',a,'" key="ScheduledDeliveryEntity.startDeliveryDate"        value=""/>');k.push('<input type="hidden" name="SD-EndTime-',a,'" key="ScheduledDeliveryEntity.endDeliveryDate"          value=""/>');k.push('<input type="hidden" name="SD-WindowTZ-',
a,'" key="ScheduledDeliveryEntity.deliveryTimeZone"         value=""/>');k.push('<input type="hidden" name="SD-CutoffTime-',a,'" key="ScheduledDeliveryEntity.cutoffTime"               value=""/>');k.push('<input type="hidden" name="SD-CutoffTZ-',a,'" key="ScheduledDeliveryEntity.deliveryTimeZone"         value=""/>');k.push('<input type="hidden" name="SD-SlotStartLTZ-',a,'" key="ScheduledDeliveryEntity.deliveryRange.startDate"  value=""/>');k.push('<input type="hidden" name="SD-SlotEndLTZ-',a,'" key="ScheduledDeliveryEntity.deliveryRange.endDate"    value=""/>');
k.push('<input type="hidden" name="SD-SlotLongTZ-',a,'" key="ScheduledDeliveryEntity.deliveryRange.timezone"   value=""/>');k.push('<input type="hidden" name="SD-Date-',a,'" value=""/>');k.push('<input type="hidden" name="SD-Cutoff-',a,'" value=""/>');c&&k.push('<input type="hidden" name="SD-OrderID-',a,'" value="',c,'"/>');d&&k.push('<input type="hidden" name="SD-ItemList-',a,'" value="',d,'"/>');k.push('<input type="hidden" name="D_MinShipDtUTC-',a,'" key="ScheduledDeliveryEntity.promiseMinShipmentDate" value=""/>');
k.push('<input type="hidden" name="D_MaxShipDtUTC-',a,'" key="ScheduledDeliveryEntity.promiseMaxShipmentDate" value=""/>');k.push('<input type="hidden" name="SD-PromiseLFSS-',a,'" key="ScheduledDeliveryEntity.promiseFulfillmentServiceSubclass" value=""/>');if((c=this.dataField)&&(c.id||c.name))k.push('<input type="hidden"'),c.id&&k.push(' id="',c.id,'"'),c.name&&k.push(' name="',c.name,'"'),k.push("/>");k.push('<span class="sd_Loading" style="display: none;">');k.push('<img src="',b,'" width="114" height="9" alt="Loading" border="0" />');
k.push("</span>");r===1?(k.push('<div class="sdMessage" style="display: none;">'),k.push('<div class="sdMessage" style="display: none;"><span class="swSprite s_notifySm"></span><p></p></div>'),k.push("</div>")):(k.push('<div class="sdMessage" style="display: none;"><p></p></div>'),k.push('<div class="sdMessage_service" style="display: none;"><p></p></div>'));k.push('<span class="sd_controls v1">');k.push('<span class="sd_widget" style="display: none">');r===1?(k.push('<span class="sd_Active">'),k.push('<select id="sduiDropdown',
a,'" name="sduiDate" disabled >'),k.push('<option value="" selected>',o,"</option>"),k.push("</select>"),k.push("</span>"),j(),k.push('<a href="#" class="sd_calendar_link" id="calendarLink',a,'" onclick="return false;">')):(k.push('<a href="#" class="sd_calendar_link" id="calendarLink',a,'" onclick="return false;">'),k.push('<span class="sd_Active"> <u>'),k.push(this.calendarRef.config({key:"sd_select_another_date_and_time"})),k.push("</u></span>"),j());i("sd_calicon_enabled",!1,g);k.push("</a>");
k.push("</span>");k.push('<a class="learnmore" href="',h,'" target="_blank">',m,"</a>");k.push('<span class="sd_reload" id="sd_reload_',a,'" style="display: none;">');k.push(l);k.push("</span>");k.push("</span>");e("sd_err_noslots","info",!1,"<p>",p,"</p>");e("sd_err_inconsistent","info",!1,"<p>",n,"</p>");e("sd_err_connect","info",!1,"<p>",s,' <a class="sdReloadLink" href="#">',q,"</a></p>");e("sd_err_from_result","info",!1,'<div class="sd_err_from_result_content"/>');k.push('<div id="sdcal-popup',
a,'" class="sdCalendarPopover" style="display: none"></div>');w.prepend(k.join(""));w.find(".sdReloadLink").click(function(){w.find(".sd_reload").click()})};sd_init_checkout_configure=function(a,c,d,b,f,g,h){function i(a,b,c,d,f){if(this.chkSDUI=S("sd_loaded_"+a.currentSD)){this.chkSDUI.config({key:"sd_calendar",value:this.calendarRef});this.calendarRef.config({key:"load_url",value:c.load_url});this.calendarRef.config({key:"message_hook",value:a.messageHook});this.calendarRef.config({key:"dom_widget_root",
value:"sd_widgets_"+a.currentSD});this.calendarRef.config({key:"dom_no_widget_root",value:"sd_no_widgets_"+a.currentSD});this.calendarRef.config({key:"dom_popup_trigger",value:"calendarLink"+a.currentSD});this.calendarRef.config({key:"id_enable_fn",value:a.onEnableFn});this.calendarRef.config({key:"id_select_fn",value:a.onSelectFn});this.calendarRef.config({key:"id_is_selected",value:a.isSelected&&a.isSelected!=="false"&&a.isSelected!=="0"});this.calendarRef.config({key:"weblabs",value:h});if(this.chkSDUI.inputs){var g=
a.currentSD,i=j.id?SDFramework.jq("#"+j.id):[j.name];this.chkSDUI.inputs.setMappings({slotId:["SD-SlotID-"+g],reservationId:["SD-ResID-"+g],reservationType:["SD-ResType-"+g],ultStart:["SD-StartTime-"+g],ultEnd:["SD-EndTime-"+g],ultCutoff:["SD-CutoffTime-"+g],timeZone:["SD-CutoffTZ-"+g,"SD-WindowTZ-"+g],minShip:["D_MinShipDtUTC-"+g],maxShip:["D_MaxShipDtUTC-"+g],fss:["SD-PromiseLFSS-"+g],start:["SD-SlotStartLTZ-"+g],end:["SD-SlotEndLTZ-"+g],tz:["SD-SlotLongTZ-"+g],data:i});this.chkSDUI.inputs.updateDataMembers({refdataVersion:f.sdUseCase})}if(this.chkSDUI.message)this.chkSDUI.message.config({data:{element:"sd_widgets_"+
a.currentSD+" .sdMessage p",element_service:"sd_widgets_"+a.currentSD+" .sdMessage_service p",timeslotDeterminationFn:this.isTimeslot}}),this.chkSDUI.message.showDropdown=f.showDropdown!==l&&f.showDropdown===0?0:1}this.chkSDUI.config({data:{dom_message_hook:a.messageHook,dom_sdso:"sd-shipop",id_address:c.addressId,id_merchant:b.merchant,id_marketplace:c.marketplaceId,id_request:c.requestId,id_asin:b.asin,id_sku:b.msku,id_fmid:b.fmid,id_quantity:b.quantity,id_offerlist_id:b.olid,id_itemList_id:b.itemListId,
id_shipoption:a.speedKey,id_enable_fn:a.onEnableFn,id_select_fn:a.onSelectFn,id_is_selected:a.isSelected,id_template_slot:d&&d.reservationId?d.reservationId:null}})}var g=g===null?{}:g,j=a.dataField;if(!j||!j.id&&!j.name)j={name:"SD-Data-"+a.currentSD};i.prototype=new F(a.currentSD,b,f,g,null,j);i.prototype.initializeSpecificDom=function(){this.initializeDom()};a=new i(a,c,d,b,g);M({calendar:a.calendarRef,checkout:a.chkSDUI,merchantType:d.merchantType,marketplaceID:d.marketplaceID,strings:d.strings,
sdUseCase:g.sdUseCase});return a};C.declare("scheduledDeliveryWidget")})})})(function(){var C=window.AmazonUIPageJS||window.P,n=C._namespace||C.attributeErrors;return n?n("SDCXDetailPageAssets"):C}(),window);
/* ******** */
(function(g,l,j){g.execute(function(){g.when("A","a-button","a-modal","ready").register("success-modal-add-to-br-declarative-actions",function(c,e,d){var b=c.$,a=c.state("jumpstart-success-modal-state");if(typeof a!=="undefined"&&a!==null&&a.showDPHeadJavaScript&&a.showBabyRegSuccessModal&&a.hasBabyReg){b(document).delegate("#add-to-registry-baby-button-submit","click",function(f){f.preventDefault();f=b("#is-fully-selected-baby-reg").val()==="true";if(typeof f!=="undefined"&&f!==null&&f){f=b("#ASIN").val();
b("#rsid").val();var f={name:"baby-registry-add-success-modal",header:a.addSuccessModalHeader,url:"/baby-reg/addsuccessmodal?asin="+f+"&ref_=br_js_asm"},c=b("#add-to-registry-baby-button-submit");d.create(c,f);d.get(b("#add-to-registry-baby-button-submit")).show()}});var i=function(a,i,d){i=b.extend({},{forceAjax:1},i);c.post(a,{params:i,success:function(b){d(b)},failure:function(){d({ok:0})}})};c.on("a:popover:beforeHide:baby-registry-add-success-modal",function(){var b=l.ue;typeof b!=="undefined"&&
b.count("brSuccessModalDismissed",(b.count("brSuccessModalDismissed")||0)+1)});c.on("a:popover:ajaxContentLoaded:baby-registry-add-success-modal",function(){var a=b("#success-modal-recommendatons").val();if(typeof a!=="undefined"&&a!==null&&a.length>0)for(a=a.substring(1,a.length-1).split(", ");a.length>0;){var c={isRAW:1,update:"getPaAttributes",recommendations:a.splice(0,10).toString(),sid:b("#rsid").val()};i("/baby-reg/successmodal/getattributes",c,function(a){try{a&&a.ok&&a.ok==="1"?b.each(a.itemMap,
function(a,c){var f="#rec-item-title-"+a;b(f).attr("title",c.title);b(f).html(c.title);f="#rec-item-price-"+a;f="#rec-item-price-"+a;c.priceMin!==c.priceMax?b(f).html(c.currency+c.priceMin+" - "+c.currency+c.priceMax):b(f).html(c.currency+c.priceMin);b("#rec-item-image-"+a).attr("src",c.imageUrl);var f="#rec-item-review-"+a+" > .a-icon",i="#rec-item-review-"+a+" .a-icon-alt",d=c.numFullStars,h=b(f).attr("class"),h=h.substring(0,h.length-1)+c.numFullStars;c.hasHalfStar&&(h+="-5",d+=0.5);b(f).attr("class",
h);b(i).html(d+"/5");b("#rec-item-spinner-"+a).addClass("js-hidden");b("#rec-item-attributes-wrapper-"+a).removeClass("js-hidden");c.isVariationalParent===!0&&(e("#success-modal-add-to-br-submit-button-"+a).hide(),b("#success-modal-see-buying-options-button-"+a).removeClass("js-hidden"))}):b("#add-success-recs-carousel-container").addClass("js-hidden")}catch(c){b("#add-success-recs-carousel-container").addClass("js-hidden")}})}});c.declarative("success-modal-add-to-br","click",function(a){var c=a.data,
d=e("#success-modal-add-to-br-submit-button-"+c.recItemAsin);d.isEnabled()&&(d.disable(),a={isRAW:1,update:"addtoBabyRegistry",asin:c!==j?c.recItemAsin:null,sid:b("#rsid").val(),ref_:"baby_reg_asm_addtoBabyRegistry"},b("#add-to-br-success-message").hasClass("js-hidden")||b("#add-to-br-success-message").addClass("js-hidden"),i("/baby-reg/successmodal/addtobabyregistry",a,function(a){try{a&&a.ok&&a.ok==="1"?a.isDupItem?b("#rec-item-already-added-message-"+c.recItemAsin).removeClass("js-hidden"):b("#rec-item-added-message-"+
c.recItemAsin).removeClass("js-hidden"):b("#rec-item-fail-added-message-"+c.recItemAsin).removeClass("js-hidden")}catch(f){b("#rec-item-fail-added-message-"+c.recItemAsin).removeClass("js-hidden")}d.hide()}))})}});g.when("A","a-dropdown","ready").register("success-modal-item-adjust",function(c,e){var d=c.$;c.on("a:dropdown:selected:item-quantity-dropdown",function(b){var a=e.getSelect("item-quantity-dropdown"),i=d("#changeQuantitySuccess"),f=d("#changeQuantityFailure"),h=d("#itemAsin").val(),m=Number(d("#itemQuantity").val()),
b=Number(b.value);i.hasClass("a-hidden")||i.addClass("a-hidden");f.hasClass("a-hidden")||f.addClass("a-hidden");a.update({status:"disabled"});c.post("/baby-reg/successmodal/itemadjust",{params:{forceAjax:1,ref_:"br_success_modal_item_adjust",quantity:m+b,asin:h},success:function(b){b.result&&b.result===!0?(a.update({status:"normal"}),i.hasClass("a-hidden")&&i.removeClass("a-hidden")):(a.update({status:"normal"}),f.hasClass("a-hidden")&&f.removeClass("a-hidden"))},failure:function(){a.update({status:"normal"});
f.hasClass("a-hidden")&&f.removeClass("a-hidden")}})})});g.when("A","jumpstart-popover-simulate-utils","jumpstart-carousel","ready").register("jumpstart-category-actions",function(c,e,d){var b=c.$;return{showSubCat:function(a){b(".js-widget-subcat-row").hide();b("#js-subcat-row-"+a).show();b(".jumpstart-category-item").removeClass("category-selected");b("#jumpstart-category-"+a).addClass("category-selected")},showFirstAvailableSubCat:function(a){b(a).show()},simulatePopoverArrow:function(a){var b=
e.getCategoryRowWidth(".js-widget-main-row"),a=e.getPopoverLeftPosition(b,a);e.setPostion(a)},toggleJumpstartWidget:function(a,d){var f=this,h=b("#jumpstart-regular-expand"),e=b("#jumpstart-regular-collapse");c.slideToggle(b(".js-subCat-section"),100,"ease",function(){d===0?(f.initializeRegularJumpstartWidget(a.firstAvailableCategoryName,a.firstAvailableCategoryNumber,a.dismissStatus),h.hide(),e.removeClass("a-hidden"),e.show()):(e.hide(),h.removeClass("a-hidden"),h.show())})},dismissJumpstart:function(a,
d,f){var e=this;a.update("updateJumpstartDismissStatus",d,function(a){a.ok!==0&&a.hasUpdated===1&&(a=parseInt(a.newDismissStatus,10),c.state("jumpstart-init-state",{dismissedStatus:a}),e.dismissedStateDisplay(a),f==="regular"?e.toggleJumpstartWidget(d,a):f==="popover"&&(b("#js-widget-popover-box").hide(),b(".jumpstart-divider-class").hide()))})},initCarouselAfterAction:function(a){d.initializeCarousel();d.updatePaginationForCarousel("jumpstart-"+(a-1))},dismissedStateDisplay:function(a){a===0?(b(".jumpstart-category-item").css("margin-bottom",
"0px"),b(".jumpstart-category-item").css("padding-bottom","0px")):a===1&&(b(".jumpstart-category-item").removeClass("category-selected"),b(".jumpstart-category-item").css("margin-bottom","-14px"),b(".jumpstart-category-item").css("padding-bottom","14px"))},initializeRegularJumpstartWidget:function(a,b,c){this.showSubCat(a);this.simulatePopoverArrow(b);this.dismissedStateDisplay(c);this.initCarouselAfterAction(b)}}});g.when("A","jumpstart-category-actions","jumpstart-carousel","baby-reg-js-update",
"ready").register("jumpstart-declarative-actions",function(c,e,d,b){c.declarative("show-subcat-action","click",function(a){var a=a.data,d=c.state("jumpstart-init-state");d!==j&&d.dismissedStatus===1&&e.dismissJumpstart(b,{registryId:d.registryId,sid:d.sid,firstAvailableCategoryName:a.subcat_name,firstAvailableCategoryNumber:a.category_number,dismissStatus:0,isSable:1},"regular");e.showSubCat(a.subcat_name);e.simulatePopoverArrow(a.category_number);e.initCarouselAfterAction(a.category_number)})});
g.when("A","baby-reg-js-update","jumpstart-category-actions","ready").register("jumpstart-dismissed-actions",function(c,e,d){var b=c.$;c.on("pageStateReady",function(a){var i=b("#jumpstart-regular-expand"),f=b("#jumpstart-regular-collapse"),h="regular",g={isSable:1,dismissStatus:null,registryId:null,sid:null,firstAvailableCategoryName:null,firstAvailableCategoryNumber:null};if(a!==j)h=a.widgetType,a.dismissedStatus===0?(b(".js-subCat-section").css("display","block"),f.removeClass("a-hidden"),f.show(),
i.hide()):(b(".js-subCat-section").css("display","none"),i.show(),f.hide());c.declarative("dismiss-jumpstart","click",function(){var a=c.state("jumpstart-init-state");g.registryId=a!==j?a.registryId:null;g.sid=a!==j?a.sid:null;g.firstAvailableCategoryName=a!==j?a.firstAvailableCategoryName:null;g.firstAvailableCategoryNumber=a!==j?a.firstAvailableCategoryNumber:null;if(a!==j)g.dismissStatus=a.dismissedStatus===0?1:0;d.dismissJumpstart(e,g,h)})})});g.when("A","ready").register("jumpstart-popover-simulate-utils",
function(c){var e=c.$;return{getCategoryRowWidth:function(c){return e(c).width()},getPopoverLeftPosition:function(c,b){var a=c*2/100,e=(c-10*a)/12;return Math.ceil(e*2+b*e+a*b-e/2)},setPostion:function(c){e("#js-popover-arrow").css({position:"absolute",top:"-7px",left:c})}}});g.when("A","baby-reg-js-update","jumpstart-carousel","jumpstart-widget-retrieval","ready").register("jumpstart-widget-init",function(c,e,d,b){var a=c.$,e=c.state("jumpstart-init-state");if((e!==j?e.widgetType:null)==="regular"){var e=
c.state("baby-reg-util"),i={sid:e!==j?e.sid:null,isJumpstart:1,widgetType:"regular",isSync:"true"};b.getJumpstart(i);c.declarative("retrieve-jumpstart-action","click",function(){a("#jumpstart-error").addClass("js-hidden");a("#jumpstart-spinner").show();b.getJumpstart(i)})}});g.when("A","baby-reg-js-update","jumpstart-category-actions","ready").register("jumpstart-widget-retrieval",function(c,e,d){var b=c.$;return{getJumpstart:function(a){e.update("syncAndGetJumpstartContent",a,function(a){a.ok!==
0&&a.isSync===1?(b("#jumpstart-widget-container").html(a.jumpstartNewContent),a={dismissedStatus:Number(b("#dismissedStatus").val()),completionStatus:Number(b("#completionStatus").val()),categorySize:Number(b("#categorySize").val()),registryId:b("#registryId").val(),firstAvailableCategoryNumber:Number(b("#firstAvailableCategoryNumber").val()),widgetType:b("#widgetType").val(),sid:b("#sid").val(),percent:Number(b("#percent").val()),firstAvailableCategoryName:b("#firstAvailableCategoryName").val()},
c.state("jumpstart-init-state",a),c.trigger("pageStateReady",a),d.initializeRegularJumpstartWidget(a.firstAvailableCategoryName,a.firstAvailableCategoryNumber,a.dismissedStatus)):(b("#jumpstart-spinner").hide(),b("#jumpstart-error").removeClass("js-hidden"))})}}});g.when("A","a-carousel-framework","ready").register("jumpstart-carousel",function(c,e){for(var d=c.$,b=0;b<10;b++)e.onInit("jumpstart-"+b,function(a){a.getAttr("totalPages")===1?d(".jumpstart-carousel-pagination-buttons").css("visibility",
"hidden"):d(".jumpstart-carousel-pagination-buttons").css("visibility","visible")});return{updatePaginationForCarousel:function(a){e.getCarouselByName(a).getAttr("totalPages")===1?d(".jumpstart-carousel-pagination-buttons").css("visibility","hidden"):d(".jumpstart-carousel-pagination-buttons").css("visibility","visible")},initializeCarousel:function(){e.createAll();e.initializeAll()}}});g.when("A","ready").register("get-started-meter-animation",function(c){c.on("pageStateReady",function(e){c.$(".animationMeterBar > .a-meter-bar").delay(400).animate({width:e.percent+
"%"},600)})});g.when("A","baby-reg-js-update","ready").register("get-started-declarative-actions",function(c,e){c.declarative("start-jumpstart-action","click",function(d){var b=c.$,d=d.data,a=c.state("baby-reg-util"),d={isSable:1,completionStatus:1,update:"updateJumpstartCompletionStatus",registryId:d!==j?d.registryId:null,sid:a!==j?a.sid:null};b("#getStartedError").hasClass("js-hidden")||b("#getStartedError").addClass("js-hidden");e.update("updateJumpstartCompletionStatus",d,function(a){a&&a.hasUpdated===
1?(b("#js-widget-box").removeClass("js-hidden"),b("#getStartedBox").addClass("js-hidden")):b("#getStartedError").removeClass("js-hidden")})})});g.when("A").register("baby-reg-js-update",function(c){var e=c.$;return{update:function(d,b,a){d=e.extend({},{ref:"baby_reg_js_update_"+d,update:d,forceAjax:1},b);c.post("/gp/baby/api/update.html/ref="+d.ref,{params:d,success:function(b){a(b)},failure:function(){a({ok:0})}})}}});g.when("A","a-popover","baby-reg-js-update","jumpstart-carousel","ready").register("jumpstart-mark-complete-actions",
function(c,e,d,b){var a=c.$,g=!0,f=0,h=[],m=!1,n={},o=function(b,c){var f=a("#mark_complete_modal_item_"+b),d=a("#checkmarkBox_"+b),e=a("#checkmark-gray_"+b),h=a("#checkmark-orange_"+b);f.removeClass("item-mark-modal-gray");f.addClass("item-mark-modal-orange");d.removeClass("js-hidden");e.removeClass("js-hidden");h.addClass("js-hidden");c!==1&&(d.removeClass("checkmark-box-gray"),d.addClass("checkmark-box-orange"),e.addClass("js-hidden"),h.removeClass("js-hidden"))},k=function(b,c){var f=a("#mark_complete_modal_item_"+
b),d=a("#checkmarkBox_"+b),e=a("#checkmark-gray_"+b),h=a("#checkmark-orange_"+b);e.removeClass("js-hidden");h.addClass("js-hidden");d.removeClass("checkmark-box-orange");c===1&&(f.addClass("item-mark-modal-gray"),f.removeClass("item-mark-modal-orange"),e.addClass("js-hidden"),h.addClass("js-hidden"),d.addClass("js-hidden"));d.addClass("checkmark-box-gray")},p=function(b){if(m===!1){var c=b.$currentTarget.closest(".a-popover"),b=c.find(a("input[name=markedItemNumber]")).val(),c=c.find(a("input[name=markedItems]")).val();
f=b?b:0;b=c.substring(1,c.length-1);b.length>0&&(h=b.split(", "));m=!0}},l=function(b,c){var d=c.find(a("input[name=categoryName]")).val(),d=a("#mark-complete-modal-submit-button-"+d);h.indexOf(b)===-1&&(a("#mark_complete_modal_item_"+b),f++,h[h.length]=b,f>0&&d.hasClass("a-button-disabled")&&d.removeClass("a-button-disabled"),o(b,0))},r=function(b,c){var d=c.find(a("input[name=categoryName]")).val(),d=c.find(a("#mark-complete-modal-submit-button-"+d)),e=h.indexOf(b);e!==-1&&(a("#mark_complete_modal_item_"+
b),f--,h.splice(e,1),f>=0&&d.hasClass("a-button-disabled")&&d.removeClass("a-button-disabled"),k(b,1))},q=function(b){var c=b.$currentTarget.closest(".a-popover"),b=c.find(".selected-count"),c=c.find(a("input[name=selectQty]")).val();b.html(c.replace("{num}",f))},s=function(){f=0;h=[];m=!1};c.declarative("br-mark-action",["mouseenter","mouseleave"],function(b){b.$event.preventDefault();if(b&&b.data){var c=b.data;p(b);b=b.$event.type;a("#mark_complete_modal_item_"+c).data("savedFromMarkModal")===1&&
(g=!0,n[c]=0,a("#mark_complete_modal_item_"+c).data("savedFromMarkModal",0));if(g&&n[c]!==1){var f=h.indexOf(c);a("#mark_complete_modal_item_"+c);b==="mouseenter"?f!==-1?k(c,0):o(c,1):b==="mouseleave"&&(f===-1?k(c,1):o(c,0))}}});c.declarative("br-mark-action",["click"],function(b){b.$event.preventDefault();var a=b.data,c=b.$currentTarget.closest(".a-popover");h.indexOf(a)!==-1?r(a,c):l(a,c);q(b)});c.declarative("br-mark-select-all",["click"],function(b){p(b);b.$event.preventDefault();for(var a=b.data,
a=a.substring(1,a.length-1).split(","),c=b.$currentTarget.closest(".a-popover"),f=0;f<a.length;f++)l(a[f].trim(),c);q(b)});c.declarative("br-mark-select-none",["click"],function(b){p(b);b.$event.preventDefault();for(var a=b.$currentTarget.closest(".a-popover"),c=h.length-1;c>=0;c--)r(h[c],a);q(b)});c.declarative("mark-complete-save",["click"],function(e){e.$event.preventDefault();var g=e.data,i=c.state("jumpstart-init-state"),k=e.$currentTarget.closest(".a-popover"),o=k.find(a("input[name=categoryName]")).val();
if(!k.find(a("#mark-complete-modal-submit-button-"+o)).hasClass("a-button-disabled")){var n=i!==j?i.completionStatus:null,g={isRAW:1,customerId:g!==j?g.customerId:null,registryId:g!==j?g.registryId:null,categoryName:g!==j?g.category:null,sid:i!==j?i.sid:null,type:"baby",items:h.length>0?h:"",numItems:f},k=e.$currentTarget.closest(".a-popover");k.find("#mark-complete-modal-loading").removeClass("js-hidden");k.find("#mark-complete-modal-content").addClass("js-hidden");d.update("markJumpstartItems",
g,function(e){e.ok!==0?(f=0,h=[],m=!1,e={sid:null,isJumpstart:1,widgetType:null,isSync:"false"},e.sid=i!==j?i.sid:null,e.widgetType=i!==j?i.widgetType:null,d.update("syncAndGetJumpstartContent",e,function(f){f.ok!==0&&f.isSync===1?(a("#jumpstart-widget-container").html(f.jumpstartNewContent),k.find("#mark-complete-modal-content").html(""),i={dismissedStatus:Number(a("#dismissedStatus").val()),completionStatus:Number(a("#completionStatus").val()),categorySize:Number(a("#categorySize").val()),registryId:a("#registryId").val(),
firstAvailableCategoryNumber:Number(a("#firstAvailableCategoryNumber").val()),widgetType:a("#widgetType").val(),sid:a("#sid").val(),percent:Number(a("#percent").val()),firstAvailableCategoryName:a("#firstAvailableCategoryName").val()},c.state("jumpstart-init-state",i),(n!==3&&i.completionStatus===3||n===3&&i.completionStatus!==3)&&c.trigger("jumpstartComplete"),a("#jumpstart-category-"+i.firstAvailableCategoryName).click(),a("#jumpstart-regular-expand").hide(),a("#js-widget-popover-box").removeClass("a-hidden"),
b.initializeCarousel(),k.find(".a-button-close").click()):(k.find("#mark-complete-modal-loading").addClass("js-hidden"),k.find("#mark-complete-modal-error").removeClass("js-hidden"))})):(k.find("#mark-complete-modal-loading").addClass("js-hidden"),k.find("#mark-complete-modal-error").removeClass("js-hidden"))})}});c.on("pageStateReady",function(){var b=a("#jumpstart-category-strings").val();if(b!==j&&b.length>2){var f=[],b=b.substring(1,b.length-1);b.length>0&&(f=b.split(", "));if(f.length>0)for(b=
0;b<f.length;b++)c.on("a:popover:beforeHide:mark-as-complete-"+f[b],s),c.on("a:popover:beforeUpdatePosition:mark-as-complete-"+f[b],s)}})});g.when("A","a-popover","jumpstart-declarative-actions","ready").register("jumpstart-popover-actions",function(c){var e=c.state("jumpstart-init-state"),d=c.$;if((e!==j?e.widgetType:null)==="popover")c.trigger("pageStateReady",e),d("#js-widget-popover-box").removeClass("a-hidden")})})})(function(){var g=window.AmazonUIPageJS||window.P,l=g._namespace||g.attributeErrors;
return l?l("BabyRegistryDPAssets"):g}(),window);
/* ******** */
(function(b,d,g){b.execute(function(){b.when("A","a-popover","tellMeMoreLinkData","ready").execute(function(b,d){function e(a){if(a!==g){var b=a.title,e=a.destination,a=a.trigger,a="#"+a,h=f(a),i={url:e,header:b,width:450,activate:"onclick",position:"triggerLeft",closeButton:"true",popoverLabel:b,closeButtonLabel:"Dismiss"};b!==null&&e!==null&&a!==null&&(c!==null&&d.remove(c),c=d.create(h,i).lock())}}var f=b.$,c=null;e(b.state("lowerPricePopoverData"));b.state.bind("lowerPricePopoverData",function(a){e(a)});
f(document).delegate("button#pfw_close_close-announce","click",function(a){a.preventDefault();c.unlock().hide();c.lock()});f(document).delegate("button#pfw_cancel_close-announce","click",function(a){a.preventDefault();c.unlock().hide();c.lock()})})})})(function(){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors;return d?d("RetailPricingFeedbackAsset"):b}(),window);
/* ******** */
(function(b){b.execute(function(){b.when("A","jQuery").execute(function(c,b){function d(a){c.ajax("/cart/ajax/additem",{method:"GET",params:[{name:"quantity",value:a.inputs.quantity},{name:"itemAsin",value:a.inputs.asin},{name:"offerId",value:a.inputs.offerListingID}],timeout:1E3,success:function(a){a&&a.ok&&(b("#primenow-atc-changeover").stop(!0,!0).fadeIn(200).delay(1500).fadeOut(200),c.trigger("navCartTotalQuantityEvent",a.cartSummary.totalQuantity))},failure:function(){}})}c.declarative("primenow-atc",
["click"],function(a){d(a.data)})})})})(function(){var b=window.AmazonUIPageJS||P,c=b.attributeErrors;return c?c("DetailPagePrimeNowDesktopOffersAssets"):b}());
/* ******** */
(function(f,e){f.execute(function(){f.when("A","ready").register("vpcCommonFunctions",function(a){return{clipAjax:function(b,e,d,c){a.$.ajax({type:"GET",url:"/gp/promotions/vpc?ie=UTF8&promoId="+b+"&source=dp_"+e,success:d,error:c})},publishImpression:function(b,j,d,c,g){var i=(location.protocol==="https:"?"https://":"http://")+e.ue_furl+"/1/action-impressions/1/OP/vpc/promotion/",c=c||a.$("#couponFeature").attr("data-vpcpromoid"),g=g||a.$("#couponFeature").attr("data-vpcasin"),d="vpc_i_"+c+"_"+g+
"_dp_"+d+"_";d+=j?b?"r":"nr":"nc";b=i+(d+":"+c)+"?marketplaceId="+e.ue_mid+"&requestId="+e.ue.rid+"&session="+e.ue_sid;(new Image).src=b},changeClipButtonDisplay:function(b){b.displayUnclipped&&(a.$("#unclippedCoupon").css("display",b.displayUnclipped),a.$("#oneTimeBuyVpcButton").css("display",b.displayUnclipped));b.displayClipped&&(a.$("#clippedCoupon").css("display",b.displayClipped),a.$("#clippedCouponOneTimeBuy").css("display",b.displayClipped));b.displayUnclippedSns&&(a.$("#unclippedCouponSns").css("display",
b.displayUnclippedSns),a.$("#snsVpcButton").css("display",b.displayUnclippedSns));b.displayClippedSns&&(a.$("#clippedCouponSns").css("display",b.displayClippedSns),a.$("#clippedCouponSns").css("display",b.displayClippedSns))}}});f.when("A","vpc-ccx","vpcCommonFunctions").execute(function(a,b,j){var d=function(){return a.$("#couponFeature").hasClass("vpc_clipped")},c=function(){return a.$("#couponFeature").hasClass("vpc_signedIn")},g=function(){a.$("#couponFeature").addClass("vpc_clip_error");a.$("#couponFeature").removeClass("vpc_clipped");
a.$("#couponFeature").removeClass("vpc_unclipped")},i=function(b){d()||(b.indexOf("SUCCESS")>-1||b.indexOf("REDEEMED")>-1?(a.$("#couponFeature").removeClass("vpc_unclipped"),a.$("#couponFeature").addClass("vpc_clipped")):g(),typeof e.displaySpecialOffersClipCouponResult==="function"&&e.displaySpecialOffersClipCouponResult(b))};if(a.$("#couponFeature").length)e.displayClipCouponResult=i;var f=function(){g()},h=function(d){c()?j.clipAjax(a.$("#couponFeature").attr("data-vpcpromoid"),a.$("#couponFeature").attr("data-vpcasin"),
i,f):e.location=b.signinUrl?b.signinUrl:"/gp/sign-in.html/ref=sr_1_1?ie=UTF8&email=&redirectASIN="+a.$("#couponFeature").attr("data-vpcasin")+"&disableCorpSignUp=&path=%2Fgp%2Fcoupon%2Fc%2F"+a.$("#couponFeature").attr("data-vpcpromoid")+"&redirectProtocol=&mode=&useRedirectOnSuccess=1";d.preventDefault()};a.$("#couponFeature").length&&j.publishImpression(d(),c(),"db");a.$(".ccx_dpv2 #vpcButton").find(".a-button").click(h);a.$(".ccx_dpv2 #vpcButtonSns").find(".a-button").click(h)});f.when("A","vpc-price-block",
"vpcCommonFunctions").execute(function(a,b,j){var d=b.isBuyBoxSns,c=b.clickedClipCoupon,g=b.loggedIn,i=!1,f=function(b){c||(b.indexOf("SUCCESS")>-1||b.indexOf("REDEEMED")>-1?d?(a.$("#clippedCouponSns").show(),a.$("#unclippedCouponSns, #unclippedCoupon, #errorInClipping").hide()):(a.$("#clippedCoupon").show(),a.$("#unclippedCoupon, #unclippedCouponSns, #errorInClipping").hide()):(a.$("#errorInClipping").show(),a.$("#unclippedCoupon, #clippedCoupon, #unclippedCouponSns, #clippedCouponSns").hide(),i=
!0),c=!0,typeof e.displaySpecialOffersClipCouponResult==="function"&&e.displaySpecialOffersClipCouponResult(b))},h=function(){i||(c?(a.$("#clippedCoupon").show(),a.$("#clippedCouponSns").hide()):(a.$("#unclippedCoupon").show(),a.$("#unclippedCouponSns").hide()));d=!1},l=function(){i||(c?(a.$("#clippedCouponSns").show(),a.$("#clippedCoupon").hide()):(a.$("#unclippedCouponSns").show(),a.$("#unclippedCoupon").hide()));d=!0},k=function(a){if(g)j.clipAjax(b.vpc.id,b.vpc.asin,f),a.preventDefault();else return e.location=
b.signinUrl?b.signinUrl:"/gp/sign-in.html/ref=sr_1_1?ie=UTF8&email=&redirectASIN=${vendorPoweredCoupon.asin}&disableCorpSignUp=&path=%2Fgp%2Fcoupon%2Fc%2F${vendorPoweredCoupon.id}&redirectProtocol=&mode=&useRedirectOnSuccess=1",a.preventDefault(),!0};j.publishImpression(c,g,"db");a.$("#vpcButton").find(".a-button").click(k);a.$("#vpcButtonSns").find(".a-button").click(k);a.on("a:accordion:buybox-accordion:onetime-accordion:select",function(){typeof h==="function"&&h()});a.on("a:accordion:buybox-accordion:sns-accordion:select",
function(){typeof l==="function"&&l()});a.on("a:accordion:buybox-accordion:gb_ld_buybox:select",function(){typeof h==="function"&&h()});a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#snsBuyBox"))?typeof l==="function"&&l():a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#oneTimeBuyBox"))?typeof h==="function"&&h():a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#LDBuybox"))&&typeof h==="function"&&h();j.changeClipButtonDisplay(b)});f.when("A","vpc-mobile-ccx",
"vpcCommonFunctions").execute(function(a,b,f){var d=function(){return a.$("#couponFeature").hasClass("vpc_signedIn")},c=function(){return a.$("#couponFeature").hasClass("vpc_clipped")},g=function(){a.$("#couponFeature").addClass("vpc_clip_error");a.$("#couponFeature").removeClass("vpc_clipped");a.$("#couponFeature").removeClass("vpc_unclipped")},i=function(b){c()||(b.indexOf("SUCCESS")>-1||b.indexOf("REDEEMED")>-1?(a.$("#couponFeature").removeClass("vpc_unclipped"),a.$("#couponFeature").addClass("vpc_clipped")):
g(),typeof e.displaySpecialOffersClipCouponResult==="function"&&e.displaySpecialOffersClipCouponResult(b))};if(a.$("#couponFeature").length)e.displayClipCouponResult=i;var k=function(){g()},h=function(c){d()?a.$.ajax({type:"GET",url:"/gp/promotions/vpc?ie=UTF8&promoId="+a.$("#couponFeature").attr("data-vpcpromoid")+"&source=dp_${deviceRef}_"+a.$("#couponFeature").attr("data-vpcasin"),success:i,error:k}):e.location=b.signinUrl?b.signinUrl:b.deviceRef==="ma"?"/gp/aw/coupon/c/"+b.vpc.id+"?ie=UTF8&vs=1&email=&redirectASIN="+
b.vpc.asin+"&redirect=1&source=dp_"+b.deviceRef+"_"+b.vpc.asin:"/gp/sign-in.html/ref=sr_1_1?ie=UTF8&email=&redirectASIN="+a.$("#couponFeature").attr("data-vpcasin")+"&disableCorpSignUp=&path=%2Fgp%2Fcoupon%2Fc%2F"+a.$("#couponFeature").attr("data-vpcpromoid")+"&redirectProtocol=&mode=&useRedirectOnSuccess=1";c.preventDefault()};a.$("#couponFeature").length&&f.publishImpression(c(),d(),b.deviceRef);a.$(".ccx_dpv2 #vpcButton").find(".a-button").click(h);a.$(".ccx_dpv2 #vpcButtonSns").find(".a-button").click(h)});
var k=!1;f.when("A","vpc-mobile","vpcCommonFunctions").execute(function(a,b,f){function d(){k||(g?(a.$("#clippedCouponOneTimeBuy").show(),a.$("#clippedCouponSns").hide()):(a.$("#oneTimeBuyVpcButton").show(),a.$("#snsVpcButton").hide()));i=!1}function c(){k||(g?(a.$("#clippedCouponOneTimeBuy").hide(),a.$("#clippedCouponSns").show()):(a.$("#oneTimeBuyVpcButton").hide(),a.$("#snsVpcButton").show()));i=!0}var g=b.clickedClipCoupon,i=b.isBuyBoxSns,m=function(a){g||(a.indexOf("SUCCESS")>-1||a.indexOf("REDEEMED")>
-1?(i?($("#clippedCouponSns").show(),$("#clippedCouponOneTimeBuy").hide()):($("#clippedCouponOneTimeBuy").show(),$("#clippedCouponSns").hide()),$("#oneTimeBuyVpcButton, #snsVpcButton, #errorInClipping").hide()):($("#errorInClipping").show(),$("#oneTimeBuyVpcButton, #snsVpcButton, #clippedCouponSns, #clippedCouponOneTimeBuy").hide(),k=!0),g=!0)},h=function(a){if(b.loggedIn)$.ajax({type:"GET",url:"/gp/promotions/vpc?ie=UTF8&promoId="+b.vpc.id+"&source=dp_"+b.deviceRef+"_"+b.vpc.asin,success:m}),a.preventDefault();
else return e.location=b.clipAction,a.preventDefault(),!0};f.publishImpression(g,b.loggedIn,b.deviceRef,b.vpc.id,b.vpc.asin);a.$("#oneTimeBuyVpcButton").find(".a-button").click(h);a.$("#snsVpcButton").find(".a-button").click(h);a.on("a:accordion:buybox-accordion:onetime-accordion:select",function(){d()});a.on("a:accordion:buybox-accordion:sns-accordion:select",function(){c()});a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#snsBuyBox"))?c():a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#oneTimeBuyBox"))?
d():a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#LDBuybox"))&&d();f.changeClipButtonDisplay(b)})})})(function(){var f=window.AmazonUIPageJS||window.P,e=f._namespace||f.attributeErrors;return e?e("DetailPageCouponsAssets"):f}(),window);
/* ******** */
