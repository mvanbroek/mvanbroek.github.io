(function(w){w.execute(function(){w.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(q,h,a,b){function d(a,g,c,d,i,k){this.scope=a;this.uniqueId=g;this.url=c;this.options=d;this.context=i;this.status=p;this.selected=!1;this.error=this.successData=this.xhr=this._status=void 0;this.chunks=[];this.doNotAbort=k||!1;this.prefetchMetrics=b.getInstance(this.scope)}var p=0,o=new a("dpAjaxPrefetch");d.prototype._callback=function(a,b,c,d,i){typeof a==="function"&&
a.call(self,b,c,d,i)};d.prototype._canAbort=function(){return!this.doNotAbort&&this.status===1};d.prototype._isAborted=function(){return this.status===3};d.prototype._getUniqueId=function(){return this.uniqueId};d.prototype._abort=function(){if(this.status===1)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){o.logFatal(a,{message:" Could not abort ajax request."})}};d.prototype._flushChunkData=function(){var a=this;a.chunks.length&&h.map(a.chunks,function(b){a._callback(a.options.chunk,
b,a.context)})};d.prototype._request=function(){var a=this;a.ajaxRequestRefence=q.get(a.url,{params:a.options.params,success:function(b,c,d){a.status=4;a.successData=b;a._status=c;a.xhr=d;a.selected&&a._callback(a.options.success,b,c,d,a.context)},error:function(b,c,d){a.status=2;a.xhr=b;a._status=c;a.error=d;a.selected&&a._callback(a.options.error,b,c,d,a.context)},abort:function(b){a.status=3;a.xhr=b;a.selected&&a._callback(a.options.abort,b,a.context)},chunk:function(b){b&&(a.chunks.push(b),a.selected&&
a._callback(a.options.chunk,b,a.context))},timeout:a.options.timeout||4E4})};d.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);if(this.status===p)this.status=1,this._request()};d.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);d._abortPrefetchesExcept(this);this.selected=!0;this.status===p?(this.status=1,this._request()):this.status===1?this._flushChunkData():this.status===4&&(this._flushChunkData(),this._callback(this.options.success,
this.successData,this._status,this.xhr,this.context),q.trigger("a:pageUpdate"))};d._objects={};d._abortPrefetchesExcept=function(a){h.each(d._objects[a.scope],function(b,c){c._canAbort()&&b!==a._getUniqueId()&&c._abort()})};d.getInstance=function(a,b,c,m,i,k){if(!a||!b||!c||typeof m!=="object")throw"Incorrect parameter passed.";d._objects[a]=d._objects[a]||{};var l=d._objects[a][b];l&&l._isAborted()&&(delete d._objects[a][b],l=void 0);l||(d._objects[a][b]=new d(a,b,c,m,i,k,this));return d._objects[a][b]};
return d});w.register("dp-js-logger",function(){return function(q){function h(a,d,p){d=d||{};typeof a==="string"&&(d.message+=a,a=void 0);d.logLevel=p;window.ueLogError&&window.ueLogError(a,d)}var a=this;a.attribution=q||"Twister";a.logFatal=function(a,d){h(a,d,"FATAL")};a.logError=function(a,d){h(a,d,"ERROR")};a.logCounter=function(b,d){window.ue&&window.ue.count&&ue.count(a.attribution+b,d)};a.consoleLog=function(a){window.console&&typeof Twister!=="undefined"&&Twister.printConsoleLogs&&console.log(a)}}});
w.when("A","jQuery","dp-ajax-prefetch","twister-utils","dp-js-logger").register("dimensional-summary-module",function(q,h,a,b,d){var p=new d("dpDimensionalSummary");return function(a){function d(a){if(i.initData.fnToDetermineSelectedVariations){if(typeof i.initData.fnToDetermineSelectedVariations==="function")i.currentDimCombOnGlance=i.initData.fnToDetermineSelectedVariations.call(i)}else i.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,i.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;
return a?i.currentDimCombOnGlance.split("_"):i.currentDimCombOnGlance}function g(a,c){for(var g="",f,d,e=0,m=a.length;e<m;e++)g=g+(e>0?",":"")+a[e];e=q.state("twisterjsDpxData");m=null;typeof e!=="undefined"?m=e:(m=k.extend(m,b.getQueryParams({psc:1})),m=k.extend(m,{parentAsin:DetailPage.StateController.getState().parent_asin}));i.initData.globalAjaxParameters&&(m=k.extend(m,i.initData.globalAjaxParameters));m&&(d=k.param(m));g&&(f=Twister.multiDimensionWeblabEnabled&&(c.dimType.toLowerCase()==="dropdown"||
c.dimType.toLowerCase()==="swatch")?"Dropdown":c.dimType,f="/gp/twister/dimension?asinList="+g+"&isDimensionSlotsAjax=1&dimSubType="+c.dimSubType+"&dimType="+f+(d?"&"+d:""));return f}function c(a){for(var b,c=0,f=a.length;c<f;c++)b=b+(c>0?",":"")+a[c];return b}function m(a,j,k){c(a);var a=g(a,k),f={};if(k.params)f.params=k.params;f.chunk=function(a,f){var b;(b=(b=(b=(b=a&&a.Type=="JSON")&&typeof(a.Value!=="undefined"))&&typeof(a.Value.content!=="undefined"))&&typeof(a.Value.content.twisterSlotDiv!==
"undefined"))?(k.executeChunk===void 0?k.chunk(a,f):k.executeChunk()&&k.chunk(a,f),i.asinDimSumCache[a.ASIN]=a):p.logFatal("The received data does not contain required properties.",{message:"[Twister]Invalid data received."})};f.success=function(a,f,c,g){k.success&&b.typeChecker.isFunction(k.success)&&k.success(a,f,c,g)};f.error=function(a,f,c){k.error&&b.typeChecker.isFunction(k.error)&&k.error(a,f,c)};f.abort=function(a){k.abort&&b.typeChecker.isFunction(k.abort)&&k.abort(a)};f.timeout=6E4;q.get(a,
{success:function(a,e,b){f.success(a,e,b,j)},chunk:function(a){f.chunk(a,j)},error:function(a,e,b){f.error(a,e,b)},abort:function(a){f.abort(a)}})}var i=this,k=q.$;i.initData=a;i.scopePrefix="dpDimSum";i.symbolForTriggeringDim="*";i.uniqueID="";i.urlPrefix="";i.asinDataCache={};i.glanceViewSelectedDims="";i.currentDimCombOnGlance="";i.mapOfDimToAsinMaps={};i.mapOfAsinToDimMaps={};i.asinDimSumCache={};i.scope=i.scopePrefix+"_"+i.initData.scopeSuffix;i.dimensionsList=i.initData.dimensionsList;i.dimensionValuesList=
i.initData.dimensionValuesList;i.dimensionCombinationToASINMap=i.initData.dimensionCombinationToASINMap;d();i.fetchDimSumData=function(a){if(a.dimTriggeringDimSum&&b.typeChecker.isString(a.dimTriggeringDimSum))var c=a.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+i.scope;var g=i.dimensionsList.indexOf(c);if(a){if(!a.asinList||!b.typeChecker.isArray(a.asinList))throw"Wrong parameter passed to DimSumModule "+i.scope;if(!a.chunk||!b.typeChecker.isFunction(a.chunk))throw"Wrong parameter passed to DimSumModule "+
i.scope;}else throw error("No options for dimSum");c={dimIndexTriggeringDimSum:g};c.dimCombOnPage=d();var f=d(!0).slice(0);f[g]=i.symbolForTriggeringDim;g=f.join("_");c.hashKey=g;for(var k=a.asinList,g=[],f=[],e=0,u=k.length;e<u;e++){var o=k[e];o&&(!i.asinDimSumCache||!i.asinDimSumCache[o]?g.push(o):f.push(o))}k=[];k.asinListForServer=g;k.asinListForCache=f;k.asinListForServer.length>0&&m(k.asinListForServer,c,a);if(k.asinListForCache.length>0){g=k.asinListForCache;k=0;for(e=g.length;k<e;k++)f=g[k],
a.chunk(i.asinDimSumCache[f],c);g.length===a.asinList.length&&a.success(void 0,void 0,void 0,c)}}}});w.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state={};this.getState=function(){return this.state};this.setState=function(q,h){q&&h&&(this.state[q]=h)}}});w.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(q,h,a){q!="after_redraw"&&q!="asin_select"||h!="sims-widget"&&h!="session-similarities"&&
h!="purchase-similarities"&&h!="buyxgety"||(this.callbacks[h+"_feature_div"]=a)},registerFeature:function(){},registerFeatureConfig:function(){}}});w.when("A","twister-string-constants").register("twister-modal-resize-helper",function(q){return function(){function h(b,o){b.each(function(b,g){var c=d(g);if(g.className.indexOf(o)==-1){if(c.outerWidth()>a.width)a.width=c.outerWidth();if(c.outerHeight()>a.height)a.height=c.outerHeight()}});return a}var a={width:0,height:0},b=this,d=q.$;b.getGlanceSwatchesInRow=
function(a,b){b&&b.fixModalSwatchesForThinWidths();var r=d("#twister_feature_div "+a),g=0,c=0;if(r.length>0)c=r.get(0).getBoundingClientRect().top,g++;for(var m=1,i=r.length;m<i;m++){var k=r.get(m).getBoundingClientRect();if(Math.abs(c-k.top)>5)break;else g++}b&&b.resizeSwatchesForThinWidths();return g};b.fixSize=function(a,o,r,g,c){a.removeClass("twisterSwatchWrapper");var m=h(a,g),i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(c!=void 0){var k=c.twisterModalDiv.outerWidth(),
l=b.getGlanceSwatchesInRow(o,c),j=a.first().width(),j=l*(m.width-j);j>0&&l>0&&(newModalWidth=k+j,c.setModalWidth(newModalWidth))}a.addClass("twisterSwatchWrapper");Twister.isIE8()?(a.each(function(a,f){d(f).css({"min-height":m.height+"px","min-width":m.width+"px"})}),1100<i&&d("."+g).css({height:m.height+"px"})):d("#"+r).html(o+" { min-height:"+m.height+"px; min-width:"+m.width+"px; } ."+g+" { height: "+m.height+"px;}");b.resetBestSize()};b.resetBestSize=function(){a={width:0,height:0}}}});w.when("A",
"jQuery","twisterModule","dp-js-logger","page-refresh:controller","twister-controller","twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(q,h,a,b,d,p,o,r){var g=window.twisterController.twisterModel.twisterState,c=new b("dpPageRegreshHandler"),m={},i=function(a){var b=this;b.clientId=a;b.doPageRefresh=function(j){if(!Array.isArray(j))throw"Incorrect parameters passed to doPageRefresh for clientId "+b.clientId;j=g.getRequestContextForExternalTwisterUpdates(j);
try{d.updatePage(j,r.EVENT_TYPE_CLICK)}catch(i){c.logFatal(i,{message:" Error doing page-refresh for clientId "+a})}};b.getURLParamObject=function(a,c,f){if(!a||f==null)throw"Incorrect parameters passed to getURLParams for clientId "+b.clientId;return{key:encodeURIComponent(a),value:encodeURIComponent(c),isPersistent:f}}};return{getHandlerInstance:function(a){if(a==null||a=="")throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";m[a]||(m[a]=new i(a));return m[a]}}});w.when("A",
"jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",function(q,h,a){window.handleClickForMyButton=function(){for(var b=[],d="",h="",o=0,r=arguments.length;o<r;o++)h=arguments[o],o==0?d=a.getHandlerInstance(h):(h=d.getURLParamObject(h[0],h[1],h[2]),b.push(h));d.doPageRefresh(b)}});w.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",
function(q,h,a,b,d,p,o,r){var g=4E4,c=1,m="dpTwister",i=1,k={intermediateEOS:1,EOS:1},l=1500,j=new d("dpTwister");return new function(){function d(a,f){if(!(f.recordImpressionPending>c)){var e=f.impressionCallbackData&&f.impressionCallbackData.relatedRequestID,b="/gp/twister/impression.html/?relatedRequestID="+e;e?q.delay(function(){q.get(b,{success:function(){j.logCounter("dpTwisterImpression",1)},timeout:g,error:function(){j.logCounter("dpTwisterImpressionFailed",1)}})},l):j.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");
f.recordImpressionPending++;o.set(a,f)}}function f(a,f,e){if(typeof f.forceFullPrefetch==="undefined")f.forceFullPrefetch=e||p.NO,o.set(a,f);return f.forceFullPrefetch===p.NO&&A.metadata[a.mType]&&!A.metadata[a.mType].fullyPrefetchable}function t(a,f){e(a,function(a){r.executeClientFeatures(a,f)})}function e(a,f){var e=[a];a.relatedContext&&e.push(a.relatedContext);h.each(e,function(a,e){f.apply(A,[e])})}function u(b,c){e(b,function(e){r.fadeInFeatures(e);var b=e.uniqueID,g=e.url;md=o.get(e);if(A.newPrefetchWeblab&&
md.prefetchSent&&f(e,md))b=b+"_prefetch_"+i,g=g+"&prefetchParam="+i,md.hotFeaturesPending=!0;md.requestSent=!0;o.set(e,md);var k=A.newPrefetchWeblab&&c===p.EVENT_TYPE_CLICK;a.getInstance(m,b,g,z,e,e.doNotAbort).getContent(k)})}var A=this;A.metadata={};A.newPrefetchWeblab=!1;A.page=r;A.twisterPSCParam="psc";var z={chunk:function(a,f){var e=a.ASIN,b=a.Value,c=a.FeatureName;if(!k[c]){var g=o.get(f);c==="twister-request-metadata"?(g.impressionCallbackData=q.parseJSON(b.content[c]),o.set(f,g)):r.refreshFeature(e,
c,b)}},success:function(f,e,b,c){f=o.get(c);if(f.hotFeaturesPending)f.hotFeaturesPending=!1,o.set(c,f),a.getInstance(m,c.uniqueID+"_prefetch_2",c.url+"&prefetchParam=2",z,c,c.doNotAbort).getContent();f.recordImpressionPending&&d(c,f)},error:function(a,f,e){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());j.logFatal(f+" "+e)},abort:function(a){j.logFatal(" Ajax aborted: "+a)},timeout:g};A.prefetchPage=function(b,c){e(b,
function(e){var b=e.uniqueID,g=e.url,k=o.get(e);if(!k.requestSent)f(e,k,c)&&(b=b+"_prefetch_"+i,g=g+"&prefetchParam="+i),k.prefetchSent=!0,k.recordImpressionPending=k.recordImpressionPending||1,k.requestSent=!0,o.set(e,k),a.getInstance(m,b,g,z,e,e.doNotAbort).prefetchContent()})};A.updatePage=function(a,f){if(f===p.EVENT_TYPE_CLICK||f===p.EVENT_TYPE_DROPDOWN_CHANGE){if(!a.partialState){if(b.callbacks["sims-widget_feature_div"])b.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());
r.startMeasurement(a)}u(a,f)}t(a,f)};A.reloadPage=function(a){var f;if(window.location.search){f=window.location.search;var e={};f=f.substring(f.indexOf("?")+1).split("&");for(var b=0;b<f.length;b++){var c=f[b].split("=");c[0]&&c[0].length>=0&&(e[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))}f=e}var g,e="/dp/"+a.childAsin;a.partialState?f[A.twisterPSCParam]&&delete f[A.twisterPSCParam]:f[A.twisterPSCParam]=1;(a="?"+h.param(f))&&e&&(g=e+a);window.location.href=g};A.init=function(a){A.newPrefetchWeblab=
a.newPrefetchWeblab;h.each(a.contextMetaData,function(a,f){if(f.elementList){for(var e=f.elementList.length,b=!0,c=0;c<e;c++)if(!f.elementList[c].isPrefetchable){b=!1;break}A.metadata[a]||(A.metadata[a]={});A.metadata[a].fullyPrefetchable=b}});r.init(a)}}});w.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(q,h,a,b,d){var p=new d("dpTwister");return new function(){var d=this;d.measurement=void 0;d.config={partial:{},full:{},
parent:{},master:{}};d.initializeMeasurement=function(b){var g=b.measurement;d.measurement=new a(h,g.atf.marker,g.cf.marker);d.measurement.init(b.storeID,b.productGroupID)};d.init=function(a){d.initializeMeasurement(a);h.each(a.contextMetaData,function(a,c){var m=[],i={},k=c.elementList||[],l=k.length;i[b.EVENT_TYPE_MOUSEOVER]={};i[b.EVENT_TYPE_CLICK]={};for(var j=0;j<l;j++){var r=h("#"+k[j].divToUpdate);m.push("#"+k[j].divToUpdate);r.length&&k[j].customClientFunction&&(k[j].updateOnHover&&(i[b.EVENT_TYPE_MOUSEOVER][k[j].divToUpdate]=
r.attr("customfunctionname")),i[b.EVENT_TYPE_CLICK][k[j].divToUpdate]=r.attr("customfunctionname"))}d.config[a].affectedFeatures=m.join(",");d.config[a].clientFeatures=i})};d.startMeasurement=function(a){this.measurement.start(a.newAsin)};d.fadeInFeatures=function(a){h(this.config[a.mType].affectedFeatures).css({opacity:0.5})};d.executeClientFeatures=function(a,g){h.each(d.config[a.mType].clientFeatures[g===b.EVENT_TYPE_CLICK||g===b.EVENT_TYPE_DROPDOWN_CHANGE?b.EVENT_TYPE_CLICK:b.EVENT_TYPE_MOUSEOVER],
function(b,g){try{eval("var twisterCustomFunction = "+g+";"),twisterCustomFunction(a.reactID,DetailPage.StateController,function(){d.measurement.stampImageLoad(a.newAsin)})}catch(i){p.logFatal(i)}})};d.refreshFeature=function(a,b,c){var d,i;try{b&&c&&c.content&&(i=c.content[b],typeof i!=="undefined"&&(d=h("#"+b),d.html(i),d.css({opacity:""})))}catch(k){b=b||"NoFeatureName",p.logFatal(k,{message:" Error in feature "+b})}this.measurement.stampFeature(b,a)}}});w.when("twister-string-constants").register("page-refresh:meta-cache",
function(q){return{data:{},set:function(h,a){var b=this.getKey(h);return b?this.data[b]=a:void 0},get:function(h){return this.data[this.getKey(h)]||{}},getKey:function(h){var a;h&&h.newAsin&&(a=h.mType===q.MTYPE_PARENT?h.mType+h.newAsin:h.mType===q.MTYPE_MASTER?h.mType+h.id:h.mType+h.newAsin+h.reactID);if(!a)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return a}}});w.when("A","jQuery").register("page-refresh-ajax-scope",function(){return function(q,h,a){this.scopeName=h;
this.url=a;ues("t0",h,window.newTwisterInteractionStartTime);ues("ctb",h,"1");this.signalMarker=function(a){this.markers[a]&&!(this.markers[a].conditions<=0)&&--this.markers[a].conditions===0&&typeof this.markers[a].handler=="function"&&this.markers[a].handler()};this.addlongPoleTag=function(a,b){a=a.toLowerCase();this.markers[a]&&this.markers[a].conditions==0&&this.markers[a].conditions==0&&window.ue&&typeof ue.tag==="function"&&ue.tag(b)};this.postData=function(){var a=this.scopeName;q.ajax({url:this.url,
dataType:"text",timeout:4E4,error:function(){},success:function(b){ues("id",a,b);uex("ld",a)}})};var b=this;this.markers={image:{conditions:1,handler:function(){uet("ne",h);b.signalMarker("af")}},af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",h);uet("cf",h);b.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",h);b.postData()}}}}});w.when("A","jQuery").register("page-refresh-cache",function(){return function(){this.data=
{};this.getValue=function(q,h){return this.data[q]==null?null:h?this.data[q][h]:this.data[q]};this.setValue=function(q,h,a){if(this.data[q]==null||this.data[q].pending)this.data[q]={};this.data[q][h]=a};this.clear=function(q){this.data[q]=null}}});w.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",function(q,h,a,b,d,p){return function(h,r,g,c,m){this.$=h;this.model={};this.refresh=new a(h,c,m);this.contextMetaData=
r;this.measurement=new b(h,g.atfMarker,g.cfMarker);this.init=function(a,b){for(var c in this.contextMetaData)this.model[c]=new d(h,this.contextMetaData[c].AJAXUrl,this.contextMetaData[c].elementList,c.toString());this.measurement.init(a,b)};this.getModelCacheSize=function(a){var b=0;this.model.hasOwnProperty(a)&&h.each(this.model[a].cache.data,function(a,c){c.hasOwnProperty("cacheStatus")&&(c.cacheStatus==="preFetched"||c.cacheStatus==="completeFetched")&&b++});return b};this.react=function(a,b){for(var c in this.model)b||
this.model[c].finishAjaxCall(this.model[c].currentRequestId,1);c=0;for(var g=a.length;c<g;c++){var d=a[c];b||this.model[d.type].finishAjaxCall(this.model[d.type].currentRequestId,2);this.refresh.startRefresh(this.model[d.type].getUpdateData(this,d));this.model[d.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,b,c,g){if(!g.noRefresh)for(var d in g.content)try{this.refresh.doRefresh(d,g.content[d]);if(c.isFinishRefreshReq)if(this.refresh.finishRefresh(d),d=="session-similarities_feature_div"||
d=="purchase-similarities_feature_div"||d=="buyxgety_feature_div"){if(p.callbacks[d])p.callbacks[d]()}else d==="zeroes-buy-box_feature_div"&&Twister.isIEBrowser(h)&&h("#"+d).css({opacity:"",zoom:1});this.measurement.stampFeature(b,a)}catch(f){}}}});w.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(q,h,a){return function(b,d,h){this.atfMarker=d;this.cfMarker=h;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(a,b){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+
a+"&pgid="+b+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=function(d){if(window.ue){this.scopeCount[d]||(this.scopeCount[d]=0);var r=d+(this.scopeCount[d]+1);this.scopeCount[d]++;this.ajaxScopes[d]=new a(b,r,this.url)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",Twister.cfImageLongPollTag))};this.stampFeature=
function(a,b){this.ajaxScopes[b]&&(a===this.atfMarker&&this.ajaxScopes[b].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[b].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[b].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,b){this.ajaxScopes[b]&&uet(a,this.ajaxScopes[b].scopeName)}}});w.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(q,h,a){return function(b,d,h,o){this.$=b;this.pendingCallBacks={};this.pendingCallBacksASIN=
"";this.cache=new a;this.AJAXUrl=d;this.AJAXRequests={};this.requestIdHash={};this.elementList=h;this.currentRequestId=null;this.pendingCallbacksList={};this.immediateCallbacksList=[];this.elementsToRefresh=[];this.modelType=o;this.getNewRequestId=function(){for(var a=0;a<100;a++){var b=a.toString();if(!this.requestIdHash.hasOwnProperty(b))return this.requestIdHash[b]=!0,b}};this.removeRequestId=function(a){typeof a!="string"&&(a=a.toString());this.requestIdHash.hasOwnProperty(a)&&delete this.requestIdHash[a]};
this.executeActionItems=function(a,b,c,d,i){for(var c=c.divToUpdate,k=0,l=a.length;k<l;k++){var j=a[k];if(j=="addToImmediate")j={},j.id=b,j.key=c,this.immediateCallbacksList.push(j);else if(j=="addToElementsRefresh"||j=="addToElementsRefreshWithLoading")i.push(c+(j=="addToElementsRefreshWithLoading"?",loadingBar":""));else if(j=="updateCache")j={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(b,c,j);else if(j=="customClientFunction"){var j={handler:this,callbackType:"customClientFunction"},
h={};h.refreshHandler=d;j.callbackParams=h;this.addToPendingCallbacksList(b,c,j)}else if(j=="doRefreshAndFinish"||j=="doRefresh")j={},j.handler=d,j.callbackType="doRefresh",h={isFinishRefreshReq:1},j.callbackParams=h,this.addToPendingCallbacksList(b,c,j)}};this.getAjaxCallContext=function(a,b,c,d,i,k){var b=[],l=i=0,j="notFetched";this.cache.getValue(a,"cacheStatus")&&(j=this.cache.getValue(a,"cacheStatus"));for(var h=0,f=this.elementList.length;h<f;h++){var p=this.elementList[h],e=p.divToUpdate,
u=[],o=1,z=0,B=0,D=0;p.isPrefetchable=="0"&&(o=0,l=1);p.customClientFunction=="1"&&(z=1,o=0);p.updateOnHover=="1"&&(B=1);p.loadingBar=="1"&&(D=1);if(!k||B){if(c)if(z||!o||this.cache.getValue(a,e))continue;else u.push("updateCache"),i||(i=1);else z?(u.push("customClientFunction"),u.push("addToImmediate")):this.cache.getValue(a,e)?(u.push("doRefresh"),u.push("addToImmediate")):(u.push("updateCache"),u.push("doRefreshAndFinish"),D?u.push("addToElementsRefreshWithLoading"):u.push("addToElementsRefresh"),
i||(i=1));if((c==1&&j=="preFetched"||c==0&&j=="completeFetched"||c==1&&j=="completeFetched")&&i==1)i=0;this.executeActionItems(u,a,p,d,b)}}if((c==1&&j=="preFetched"||c==0&&j=="completeFetched"||c==1&&j=="completeFetched")&&i==1)i=0;k&&i&&(i=0);i&&this.cache.setValue(a,"cacheStatus",c?l?"preFetching":"completeFetching":j=="preFetched"?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=i;a.elementsToRefresh=b;return a};this.getUpdateData=function(a,b){for(var c=b.idList,d=[],i=[],k=[],l=
[],j=0,h,f,p,e,u,o=1,z=0,B=c.length;z<B;z++){f=c[z].id;p=c[z].asin;e=c[z].isPrefetch;h=c[z].requiredDivs;h=this.getAjaxCallContext(f,p,e,a,h,c[z].isHover);u=h.elementsToRefresh;for(var D=0,n=u.length;D<n;D++)l.push(u[D]);if(h.isAjaxCallReq){j=1;e=e?1:this.cache.getValue(f,"cacheStatus")=="hotFeaturesFetching"?2:0;if(e==0||e==2)o=0;i.push(f);k.push(p);d.push(e)}}if(j){c={};c.asinList=k.join(",");c.id=i.join(",");c.prefetchParam=d.join(",");c.managerHandler=a;c.modelType=this.modelType;c.containsOnlyPrefetches=
o;try{this.doAjaxCall(c)}catch(x){}}this.elementsToRefresh=l.slice();return l};this.makeCallback=function(a,b,c,d){var i=c.handler,k=c.callbackType,c=c.callbackParams;d==null&&(d=this.cache.getValue(a,b));if(typeof i=="function")i(a,b,c,d);else if(k=="doRefresh")i.pageRefreshHandler(a,b,c,d);else if(k=="customClientFunction")try{i.callCustomClientFunction(a,b,c,d)}catch(l){}else k=="updateCache"&&i.updateCache(a,b,c,d)};this.makePendingCallBacks=function(a,b,c){var d;if(a){if(typeof this.pendingCallbacksList[a]===
"object")if(b){d=this.pendingCallbacksList[a][b];if(!d){d=[];var i={handler:this,callbackType:"updateCache"};d.push(i)}for(var k=0,l=d.length;k<l;k++){i=d[k];try{this.makeCallback(a,b,i,c)}catch(j){}}this.pendingCallbacksList[a][b]&&delete this.pendingCallbacksList[a][b]}else{for(i in this.pendingCallbacksList[a]){d=this.pendingCallbacksList[a][i];k=0;for(l=d.length;k<l;k++)this.makeCallback(a,b,callbackargs,c)}delete this.pendingCallbacksList[a]}}else{a=0;for(l=this.immediateCallbacksList.length;a<
l;a++)b=this.immediateCallbacksList[a],this.makePendingCallBacks(b.id,b.key,null);this.immediateCallbacksList=[]}};this.addToPendingCallbacksList=function(a,b,c){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]={});this.pendingCallbacksList[a].hasOwnProperty(b)||(this.pendingCallbacksList[a][b]=[]);this.pendingCallbacksList[a][b].push(c)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&Twister.remainingAjaxCalls===0&&Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=
1;var b=this.getNewRequestId();this.currentRequestId=b;var c=a.managerHandler,d=this.AJAXUrl+a.asinList+"&isFlushing=2&id="+a.id+"&prefetchParam="+a.prefetchParam+"&mType="+a.modelType;Twister.isInstaTwisterEnabled&&(d+="&dpEnvironment="+Twister.dpEnvironment);var i={};if(Twister.useAuiAjax){var k=this,d=Twister.A.ajax(d,{method:"get",chunk:function(a){k.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},success:function(){k.AJAXHandler(null,null,AJAXFlushUtils.ajaxReadyState.DONE);Twister.remainingAjaxCalls-=
1;Twister.remainingAjaxCalls===0&&Twister.$("#variations-overlay").hide()},error:function(){Twister.$("#variations-overlay").hide();Twister.remainingAjaxCalls-=1;Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&console.logs("ajax call failed")},timeout:4E4});i.streamingXhrRef=d}i.ajaxParams=a;i.managerHandler=c;this.AJAXRequests[b]=i};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,
!0)};this.finishAjaxCall=function(a,b){if(a){var c=this.AJAXRequests[a],d=c.streamingXhrRef,i=c.ajaxParams,c=i.id.split(","),i=i.containsOnlyPrefetches;if(!(b==1&&i)){this.pendingCallbacksList={};this.immediateCallbacksList=[];if(b){d&&typeof d.abort==="function"&&d.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT);d=0;for(i=c.length;d<i;d++)if(this.cache.getValue(c[d])){var k=this.cache.getValue(c[d],"cacheStatus");k=="preFetching"||k=="completeFetching"?b?this.cache.clear(c[d]):this.cache.setValue(c[d],
"cacheStatus",k=="preFetching"?"preFetched":"completeFetched"):k=="hotFeaturesFetching"&&this.cache.setValue(c[d],"cacheStatus",b?"preFetched":"completeFetched")}}this.elementsToRefresh=[];this.removeRequestId(a);delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,b,c,d){b=="intermediateEOS"||b=="EOS"?(b=this.cache.getValue(a,"cacheStatus"),b=="preFetching"?this.cache.setValue(a,"cacheStatus","preFetched"):(b=="completeFetching"||b=="hotFeaturesFetching")&&this.cache.setValue(a,
"cacheStatus","completeFetched")):this.cache.setValue(a,b,d)};this.callCustomClientFunction=function(a,d,c){var h=b("#"+d).attr("customFunctionName");if(h){var i=c.refreshHandler,k=DetailPage.StateController.getState().current_asin,l=function(){i.measurement.stampImageLoad(k)},c=Twister.useAui?l:null;if(h=Twister.useAui?eval("var customFunction = "+h+"; customFunction")(a,DetailPage.StateController,c):eval(h)(a,DetailPage.StateController,c)){c={isFinishRefreshReq:0};if(!Twister.useAui){var j;if(d==
"twister-main-image"&&k){j=document.getElementById("main-image");if(!j){var p=document.getElementById("main_image_0");p&&(j=(j=p.getElementsByTagName("img"))?j[0]:null)}if(j)j.onload=l}}i.pageRefreshHandler(a,d,c,h);Twister.useAui||navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&j&&j.complete&&l()}}};this.AJAXHandler=function(a,b,c){if(c==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;a<1;a++){var d=b,c=d.ASIN,
b=d.Value,d=d.FeatureName;d=="intermediateEOS"||d=="EOS"?this.updateCache(c,d,null,b):this.makePendingCallBacks(c,d,b)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,b,c){(a=a.xhrStatus)||(a=c);return a}}});w.when("A","jQuery").register("page-refresh-refresh",function(){return function(q,h,a){this.$=q;this.loadingBarHtml=h;this.loadingBarHtml2=a;this.doRefresh=function(a,d){q("#"+a).html(d)};this.startRefresh=function(a){if(a)for(var d=0,h=a.length;d<h;d++){var o=a[d].split(","),
r=o[0],g=!0,c=!1;if(r=="buy-box_feature_div"||r=="more-buying-choices_feature_div"||r=="session-similarities_feature_div"&&q.browser.msie)g=!1;o.length>1&&o[1]=="loadingBar"&&(c=!0);g&&!Twister.useVariationsOverlay&&q("#"+r).css("opacity","0.5");c&&this.appendLoadingBar(r)}};this.appendLoadingBar=function(a){var d=q("#"+a);a!="moreBuyingChoices_feature_div"&&!d.attr("loadingBarSet")&&(d.attr("loadingBarSet","1"),a=="more-buying-choices_feature_div"?(d=q("#more-buying-choice-content-div"),d.html(this.loadingBarHtml2)):
(a=d.find("h2, h1, b"),a.length>0&&(a=q(a[0]),a.css({display:"inline",padding:"0px"}),a.after(q(this.loadingBarHtml)))))};this.finishRefresh=function(a){var d=!0,h=!0;a=="buy-box_feature_div"&&(h=d=!1);if(a=="session-similarities_feature_div"&&q.browser.msie||a=="more-buying-choices_feature_div")d=!1;var o="0";a=="more-buying-choices_feature_div"&&(o="1");d&&q("#"+a).css({opacity:"",zoom:o});h&&q("#"+a).removeAttr("loadingBarSet")}}});w.when("A").register("evdd-utils",function(){return function(){this.PopulateEVDD=
function(q,h,a,b){var d={},p,o;for(p in q)o=a[p],typeof o!="undefined"&&(masterDimValIndex=o[0],slaveDimValIndex=o[1],b==masterDimValIndex&&(d[slaveDimValIndex]=q[p]));typeof h.dimensionViewHandlersMap[1].updateViewWithPriceInfo==="function"&&h.dimensionViewHandlersMap[1].updateViewWithPriceInfo(d)}}});w.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",function(q,h,a){function b(a){this.scope="dpPre"+a;this.data={}}new a("PrefetchMetrics");b.prototype._count=function(a,b){var h=
this.scope+a,r;window.ue&&window.ue.count&&(r=typeof b!=="undefined"?(r=ue.count(h,b))||b:(r=ue.count(h))||0);return r};b.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||0)+1)};b.prototype._record=function(a,b,h){this.data[b]=this.data[b]||{};if(!this.data[b][a])this.data[b][a]=h||(new Date).getTime(),a=="predicted"?this._incrementCounter("Predicted"):a=="selected"&&this.data[b].predicted?(a=this.data[b].selected-this.data[b].predicted,this.data[b].lookahead=a,this._incrementCounter("PredictedSelect"),
this._count("LookAhead"+this._count("PredictedSelect"),a),this._count("LookAhead",a)):a=="selected"&&!this.data[b].predicted&&this._incrementCounter("UnpredictedSelect")};b.prototype.setCounter=function(a,b){this._count(a,b)};b.prototype.predicted=function(a,b){this._record("predicted",a,b)};b.prototype.selected=function(a,b){this._record("selected",a,b)};b._allInstances={};b.getInstance=function(a){if(!a)throw"Undefind scope. scope is a required parameter";b._allInstances[a]||(b._allInstances[a]=
new b(a));return b._allInstances[a]};return b});w.when("A").register("scroll-event-handler",function(q){return function(h,a,b){if(a){var d=q.$,p,o=(new Date).getTime();d(a).bind("scroll",function(a){var d=Date.now();p&&d-o<h&&clearTimeout(p);o=d;p=setTimeout(function(){b(a)},h)})}}});w.when("A","twister-utils","twister-string-constants","legacy-popover").register("twister-beaconized-evdd",function(q,h,a){return function(b,d){function p(){var a=8+i(k).height(),a={localContent:l,location:"bottom",showOnHover:!1,
showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-a],closeEventInclude:"CLICK_OUTSIDE",forceAlignment:!0,group:"DonsBoxDropDowns",width:null};t=i(k).amazonPopoverTrigger(a);i(document).bind("touchend click",function(){t.amznPopoverHide()})}function o(a){a=a.currentTarget.id.split("_");twisterController.handleClick({dimIndex:m.dimOrder,dimValueIndex:a[a.length-1]});return!1}function r(a){i(a.currentTarget).addClass(s)}function g(a){i(a.currentTarget).removeClass(s);return!1}
function c(a){i(a.currentTarget).removeClass(s);o(a);return!1}var m=this,i=q.$,k,l,j,s="evdd-row-hovered",f,t,e={};m.dimType="evdd";m.isMasterDim=!1;m.updateView=function(a){var b=h.getDimStyleData(a.dimCombID,m.dimValuesDisplayData.length,m.dimOrder,m.twisterControllerHandle.twisterAvailabilityCache,m.displayConfigStylesData),c,d,g,n=-1,a=0,n="";t.amznPopoverHide();for(var l=0,o=b.length;l<o;l++)c=b[l],d=e[c.style],g="#"+m.dimName+"_"+l,d==="evdd-row-selected"&&(n=l,n=m.dimValuesDisplayData[n]),
(c.style==="available"||c.style==="selected")&&a++,$rowElement=i(g),$rowElement.removeClass(f).addClass(d),$rowElement.find(".evdd-row-snake-wrapper").show(),$rowElement.find(".evdd-row-price-info-wrapper").html(""),$rowElement.find(".evdd-row-prime-badge-wrapper").html("");b=!1;!m.isMasterDim&&a===1&&(b=!0);a=b;i(k).find("button").text(n);i(j).text(n);a?(i(k).addClass("evdd-hidden"),i(j).removeClass("evdd-hidden")):(i(j).addClass("evdd-hidden"),i(k).removeClass("evdd-hidden"))};m.updateViewWithPriceInfo=
function(a){var b,f,e;for(b in a)f=a[b],e="#"+m.dimName+"_"+b,e=i(e),e.find(".evdd-row-snake-wrapper").hide(),e.find(".evdd-row-price-info-wrapper").html(f[2]),e.find(".evdd-row-prime-badge-wrapper").html(f[3])};(function(){var b;m.dimOrder=d[a.STRING_DIM_ORDER];m.dimName=d[a.STRING_DIM_NAME];m.dimensionsMap=d[a.STRING_DIMENSIONS_MAP];m.dimNameDisplayString=d[a.STRING_DIMENSION_DISPLAY_STRING];m.dimValuesDisplayData=d[a.STRING_DIMENSION_VALUES_DATA];m.displayConfigStylesData=d[a.STRING_DISPLAY_CONFIG_STYLES_DATA];
m.twisterControllerHandle=d[a.STRING_TWISTER_CONTROLLER_HANDLE];m.initialTwisterState=d[a.STRING_TWISTER_INITIAL_STATE_KEY];b=m.initialTwisterState.getCurrentDimCombID();m.dimData=h.getDimStyleData(b,m.dimValuesDisplayData.length,m.dimOrder,m.twisterControllerHandle.twisterAvailabilityCache,m.displayConfigStylesData);m.isMasterDim=!1;if(m.dimOrder==="0")m.isMasterDim=!0;m.dimNameDisplayString=d[a.STRING_DIMENSION_DISPLAY_STRING];k="#evdd-button-"+m.dimName;l="#evdd-table-wrapper-"+m.dimName;j="#evdd-singleton-"+
m.dimName;e.invalid=m.isMasterDim?"evdd-row-default":"evdd-row-hidden";e.available="evdd-row-default";e.selected="evdd-row-selected";f=["evdd-hidden",s,"evdd-row-hidden evdd-row-default evdd-row-selected"].join(" ");p();for(var t=0,z=m.dimData.length;t<z;t++)b="#"+m.dimName+"_"+t,i(b).bind("click",o).bind("touchend",c).bind("touchstart",r).bind("mouseenter",r).bind("mouseleave",g)})()}});w.when("A","twister-variations-data","twister-view","twister-model","twister-model-new","twister-state","twister-availabilty-cache",
"twister-utils","evdd-utils","twister-logger").register("twister-controller",function(q,h,a,b,d,p,o,r,g,c){return function(m,i){var k=this,l=q.$;k.logger=new c(l,this);k.logger.init();k.twisterJSInitData=i;k.pageRefreshRefactor=i.pageRefreshRefactor;k.twisterVariationsData=new h(i);k.twisterAvailabilityCache=new o(k.twisterVariationsData);k.initTwisterState=new p(i,k.twisterVariationsData,k.twisterAvailabilityCache);k.twisterView=new a(k,k.initTwisterState,i,k.twisterVariationsData,k.twisterAvailabilityCache);
k.twisterModel=k.pageRefreshRefactor?new d(k,i,k.twisterVariationsData):new b(k,m,i,k.twisterVariationsData,k.twisterAvailabilityCache);(function(){l(".variations .swatchOuter a").each(function(){var a=jQuery(k).contents();l(k).replaceWith(a)});if(typeof TwisterNonJs!=="undefined")for(var a=TwisterNonJs.handleDropDown.length,b=0;b<a;b++)TwisterNonJs.handleDropDown[b]=function(){};l("#twister .swatches a").remove();l("#twisterNonJsData").html("");k.jsInteractionEnabledTime=Date.now()})();k.onInitializeTwister=
function(){typeof k.twisterView.dimensionViewHandlersMap!=="undefined"&&k.twisterView.dimensionViewHandlersMap&&l.each(k.twisterView.dimensionViewHandlersMap,function(a,b){if(typeof b.onInitializeTwister==="function")b.onInitializeTwister()})};k.populateEVDD=function(a){var b=this.twisterView,f=this.twisterVariationsData.asinToDimIndexMapData,c=this.twisterModel.twisterState.getMaster();a&&(new g).PopulateEVDD(a,b,f,c)};k.handleClick=function(a){this.divMetaData=a;var b=k.initTwisterState.getCurrentDimCombID(),
b=r.reconstructCombinationWithDimValue(b,a.dimIndex,a.dimValueIndex);window.newTwisterInteractionStartTime=new Date;window.ue&&ue.tag&&ue.tag("twisterSwatchClick");if(this.twisterVariationsData.useMS||!r.isSwatchSelected(a,k.twisterVariationsData))this.enableMouseOut=0,this.twisterModel.handleClick(a),k.twisterAvailabilityCache.isDimCombinationAvailable(b)||k.logger.logImpression(k.logger.eventTypes.CLICK_NA,null)};k.handleClickPrediction=function(a,b){this.twisterModel.prefetch(a,b)};k.handleMouseOver=
function(a){if(typeof touchDeviceDetected!="undefined"&&touchDeviceDetected)return this.handleClick(a),!0;this.enableMouseOut=1;this.twisterModel.handleMouseOver(a);return!0};k.handleMouseOut=function(a,b,f){this.enableMouseOut===1&&this.twisterModel.handleMouseOut(a,b,f)};k.handleDropdownOnChange=function(a,b){b.dimValueIndex=parseInt(a.value.split(",")[0]);window.newTwisterInteractionStartTime=new Date;window.ue&&ue.tag&&ue.tag("twisterDDClick");this.twisterModel.twisterState.setPreHoverData(b);
this.twisterModel.handleDropdownChange(b)}}});w.when("A","twister-shelf","twister-counter","twister-vodd","twister-beaconized-evdd","twister-native-evdd","twister-dimension-views-swatch","twister-dimension-views-dropdown","twister-IMDD","twister-dimension-views-singleton","twister-string-constants").register("twister-dimension-view-factory",function(q,h,a,b,d,p,o,r,g,c,m){var i=q.$;return{getDimensionSubViewObject:function(k,l,j,s,f){var t,e=k.dimensionsDisplayType[j],u=k.dimensionsDisplaySubType[j],
q=k.dimensions[j],z=k.dimensions,B=k.dimensionsDisplay[j],D=i.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[j]:!1;dimensionValuesData=l.dimensionValuesData[j];displayConfigStylesData=l.displayConfigStylesData[e];maxSwatchesForImmersiveView=k.maxSwatchesForImmersiveView[j];e===m.TWISTER_DIMENSION_VIEW_SWATCH?t=o:e===m.TWISTER_DIMENSION_VIEW_DROPDOWN?t=D?g:r:e===m.TWISTER_DIMENSION_VIEW_SINGLETON?t=c:e===m.TWISTER_DIMENSION_VIEW_EVDD?t=i("html").hasClass("a-lt-ie8")?p:d:e===
m.TWISTER_DIMENSION_VIEW_VODD?t=b:e===m.TWISTER_DIMENSION_VIEW_COUNTER?t=a:e===m.TWISTER_DIMENSION_VIEW_SHELF&&(t=h);l=maxSwatchesForImmersiveView;e={};e[m.STRING_DIM_ORDER]=j;e[m.STRING_DIM_NAME]=q;e[m.STRING_DIMENSIONS_MAP]=z;e[m.STRING_DIMENSION_DISPLAY_STRING]=B;e[m.STRING_DIMENSION_VALUES_DATA]=dimensionValuesData;e[m.STRING_DISPLAY_CONFIG_STYLES_DATA]=displayConfigStylesData;e[m.STRING_TWISTER_CONTROLLER_HANDLE]=s;e.isImmersiveViewEnabled=i.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[j]:
Twister.isImmersiveViewEnabled;e.isSlotsEnabled=i.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[j]:Twister.isImmersiveViewEnabled;e[m.STRING_TWISTER_INITIAL_STATE_KEY]=f;e[m.STRING_MAX_SWATCHES_IMMERSIVE_VIEW]=l;e.dimensionDisplaySubType=u;return new t(k,e)}}});w.when("twisterModule").execute(function(){typeof setCSMReq==="function"&&setCSMReq("x2");typeof uex==="function"&&typeof uet==="function"&&(uet("be","TwisterAUIWait",{wb:1}),uex("ld","TwisterAUIWait",{wb:1}))});w.when("A","twister-js-init-mason-data",
"twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module").execute(function(q,h,a,b,d,p){function o(){typeof amznJQ!="undefined"?amznJQ.declareAvailable("newTwister"):w.register("newTwister",function(){return window.newTwister});w.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});typeof amznJQ!="undefined"?(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf")):(w.register("pageRefreshJS",
function(){return window.pageRefreshJS}),w.register("dpf",function(){return window.pageRefreshJS}))}function r(a){var b={};a.extend(b,{ajaxReadyState:{NONE:-1,UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,OK:200,TIMEOUT:408},shouldReload:function(){return!1}});window.AJAXFlushUtils=b}window.Twister={};var g=window.Twister;g.$=q.$;
g.DimensionViews={};q.on.ready(function(){g.A=q;if(!q.$.isEmptyObject(a)){var c=a.updateDivLists;g.dpEnvironment=a.dpEnvironment;g.isInstaTwisterEnabled=!0;g.productTypeName=h.productTypeName;g.isImmersiveViewEnabled=a.isImmersiveViewEnabledOnDim?a.isImmersiveViewEnabledOnDim:a.isImmersiveViewEnabled;g.isSlotsEnabled=a.isSlotsEnabled;g.isImmersiveViewEnabledOnPage=a.isImmersiveViewEnabled;g.isImmersiveExperience=a.isImmersiveExperience?a.isImmersiveExperience:a.isImmersiveViewEnabled;g.multiDimensionWeblabEnabled=
a.multiDimensionWeblabEnabled?a.multiDimensionWeblabEnabled:!1;g.immersivePartialStateMessage=a.immersivePartialStateMessage?a.immersivePartialStateMessage:"";g.immersiveFullySelectedStateMessage=a.immersiveFullySelectedStateMessage?a.immersiveFullySelectedStateMessage:"";g.immersiveBannersPresent=a.immersiveBannersPresent?a.immersiveBannersPresent:!1;g.globalAjaxParameters={};var m=h.contextMetaData,i=m.full,k=m.master,l=m.parent,m=m.partial;h.dimensionSelectionData=a.dimensionSelectionData;h.dimensionsDisplayType=
a.dimensionsDisplayType;h.dimensionsDisplaySubType=a.dimensionsDisplaySubType?a.dimensionsDisplaySubType:[];h.ajaxUrlParams=a.ajaxUrlParams;h.displayTypeProperties=a.displayTypeProperties?a.displayTypeProperties:[];h.maxSwatchesForImmersiveView=a.maxSwatchesForImmersiveView?a.maxSwatchesForImmersiveView:[];h.expandedViewEnabled=a.expandedViewEnabled?a.expandedViewEnabled:[];h.minAsinForExpandedView=a.minAsinForExpandedView?a.minAsinForExpandedView:[];h.minAsinForExpandedScroll=a.minAsinForExpandedScroll?
a.minAsinForExpandedScroll:[];if(typeof a.twisterUpdateURLAppend!=="undefined"){var j=h.twisterUpdateURLInfo,s=j.immutableURLPrefix,f=j.immutableParams,t=a.twisterUpdateURLAppend.immutableParams,e;for(e in t)if(typeof t.hasOwnProperty!=="function"||t.hasOwnProperty(e))s+=(s.indexOf("?")==-1?"?":"&")+e+"="+t[e],f[e]=t[e];j.immutableURLPrefix=s;g.globalAjaxParameters=t}if(a.shouldUseDPXTwisterData&&(h.dimToAsinMapData=a.dimensionToAsinMap,h.asinToDimIndexMapData=a.asinToDimensionIndexMap,h.dimensionValuesData=
a.dimensionValuesData,h.variation_values=a.variationValues,h.asin_variation_values=a.asinVariationValues,h.reactId=a.reactId,h.currentDimCombID=a.currentDimensionCombinationId,h.selected_variation_values=a.selectedVariationValues,h["use-early-twister-init"]))h.current_asin=a.currentAsin,h.parent_asin=a.parentAsin,h.deletedLandingAsinInfo=a.deletedLandingAsinInfo,h.num_total_variations=a.num_total_variations,h.dimensions=a.dimensions,h.unselectedDimCount=a.unselectedDimCount,h.selected_variations=
a.selected_variations,h.dimensionValuesDisplayData=a.dimensionValuesDisplayData,h.prirotizeReqPrefetch=a.prioritizeReqPrefetch,h.num_variation_dimensions=a.num_variation_dimensions,h.num_total_variations=a.num_total_variations,h.dimensionsDisplay=a.dimensionsDisplay,h.variationDisplayLabels=a.variationDisplayLabels;c.full!=null&&(i.elementList=i.elementList!=null?c.full.concat(i.elementList):c.full);c.master!=null&&(k.elementList=k.elementList!=null?c.master.concat(k.elementList):c.master);c.parent!=
null&&(l.elementList=l.elementList!=null?c.parent.concat(l.elementList):c.parent);c.partial!=null&&(m.elementList=m.elementList!=null?c.partial.concat(m.elementList):c.partial)}c=h.isTablet;window.twisterInitPrefetchMode=h.twisterInitPrefetchMode;window.jqupgrade=h.jqupgrade;g.useDropdownThumbnail=c;g.useVariationsOverlay=c;g.showErrorMessageOnFailure=c;g.remainingAjaxCalls=0;g.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";g.isLoggingEnabled=h.isLoggingEnabled;
g.printConsoleLogs=h.printConsoleLogs;g.deviceType=h.deviceType;g.useAui=1;g.useAuiAjax=1;c=h.measurement.atf.marker;g.atfMarkerCount=h.measurement.atf.count;i=h.measurement.cf.marker;g.cfMarkerCount=h.measurement.cf.count;g.disableJsInteractions=h.disableJsInteractions?h.disableJsInteractions:!1;g.cfImageLongPollTag=h.measurement.cf.longPollImageTag;g.cfHtmlLongPollTag=h.measurement.cf.longPollHtmlTag;c=new d(q.$,h.contextMetaData,{atfMarker:c,cfMarker:i,logChannel:"twister"},h.loadingBarHtml,h.loadingBarHtml2);
window.twisterController=new b(c,h);c={};c.dimensionsList=h.dimensions;c.dimensionValuesList=h.dimensionValuesData;c.dimensionCombinationToASINMap=h.dimToAsinMapData;c.scopeSuffix="twister";c.globalAjaxParameters=g.globalAjaxParameters;g.dimensionalSummaryModule=new p(c);r(q.$);o();if(typeof window.twisterController.onInitializeTwister==="function")window.twisterController.onInitializeTwister()});g.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};g.isIE8=function(){var a=
g.A.$;return a("html").hasClass("a-lt-ie9")};return g});w.when("A","twister-state","twister-utils","detail-page-framework","twister-string-constants").register("twister-model",function(q,h,a,b){return function(d,h,o,r,g){function c(a){var b,f,c,e,d,k=l.twisterState.parentASIN,g;a?(b=l.twisterState.reactId,f=l.twisterState.hoveredReactId,c=l.twisterState.unselectedDimCount,e=l.twisterState.hoveredDimCombID.search(/X/)>=0?1:0,d=l.twisterState.hoveredAsin):(b=l.twisterState.previousReactId,f=l.twisterState.reactId,
c=l.twisterState.previousPartialState,e=l.twisterState.partialState,d=l.twisterState.getCurrentASIN());g=l.twisterVariationsData.asinToDimIndexMapData[d];l.twisterVariationsData.useMS&&g&&d&&m(l.fetchMasterIDList,"m"+g[0],d,0,a);e===0?(m(l.fetchFullIDList,d,d,0,a),l.prioritizeReqPrefetch=0):c===0?(m(l.fetchPartialIDList,f,d,0,a),m(l.fetchParentIDList,k,k,0,a),l.prioritizeReqPrefetch=1):b!==f&&m(l.fetchPartialIDList,f,d,0,a)}function m(a,b,f,c,e){e||(e=0);if(l.idsList[b]!=1&&b&&f&&(!l.prefetchFixWeblab||
!(f===l.twisterState.parentASIN&&a.type==="full"))&&a)l.idsList[b]=1,a.data.push({id:b,asin:f,isPrefetch:c,isHover:e})}function i(a){a||(a=0);var b=[];l.fetchParentIDList.data.length>0&&b.push({type:"parent",idList:l.fetchParentIDList.data});l.fetchPartialIDList.data.length>0&&b.push({type:"partial",idList:l.fetchPartialIDList.data});l.fetchFullIDList.data.length>0&&b.push({type:"full",idList:l.fetchFullIDList.data});l.fetchMasterIDList.data.length>0&&b.push({type:"master",idList:l.fetchMasterIDList.data});
b.length>0&&(a||l.pageRefresh.measurement.stampCustomMetrics("ns",l.twisterState.currentASIN),l.pageRefresh.react(b,a));l.fetchParentIDList.data=[];l.fetchPartialIDList.data=[];l.fetchFullIDList.data=[];l.fetchMasterIDList.data=[];l.idsList={};l.prefetchCount=0}function k(b,c){for(var f={},d="",e=0;e<c.length;e++)d=null,l.twisterState.isDimSelected(e)&&(d=c[e],d==="(Please Select)"&&(d=null)),d!==null&&(d=a.htmlUnescape(d)),f[l.viewHandle.dimensionsMap[e]]=d;DetailPage.StateController.setState(b+
"_variations",f)}var l=this;l.twisterControllerHandle=d;l.pageRefresh=h;l.twisterJSInitData=o;l.twisterVariationsData=r;l.twisterAvailabilityCache=g;l.prefetchCount=0;l.preHoverClass="";l.fetchParentIDList={type:"parent",data:[]};l.fetchPartialIDList={type:"partial",data:[]};l.fetchFullIDList={type:"full",data:[]};l.fetchMasterIDList={type:"master",data:[]};l.idsList={};l.prefetchFixWeblab=0;l.prioritizeReqPrefetch=0;l.handleMouseOver=function(b){var d;if(b!==null&&(l.twisterState.updateStateOnMouseOver(b),
!a.isSwatchSelected(b,l.twisterVariationsData)||l.twisterVariationsData.useMS))d=l.twisterVariationsData.getDimensionValuesDisplayData(l.twisterState.hoveredAsin),l.twisterVariationsData.useMS||k("hovered",d),this.viewHandle.updateView(b,l.twisterState,"mouseOver"),c(1),i(1)};l.handleDropdownChange=function(a){l.handleClick(a)};l.handleClick=function(d,g,f){var h=f?"mouseOut":"click",e=0,m=g,o=l.twisterState.getCurrentASIN();l.twisterVariationsData.useMS&&d&&a.isSwatchSelected(d,l.twisterVariationsData)&&
(e=1);f||(f=0);if(!(m===null&&d===null)&&l.twisterState.updateStateOnClick(d,g,h)){m=l.twisterState.getCurrentASIN();if(!f&&o!==m&&!l.twisterState.partialState&&b.callbacks["sims-widget_feature_div"])b.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());!l.twisterState.partialState&&!f&&l.pageRefresh.measurement.start(m);d=l.twisterVariationsData.getDimensionValuesDisplayData(m);k("selected",d);k("hovered",d);!l.twisterState.partialState&&!f&&l.pageRefresh.measurement.stampCustomMetrics("bb",
m);l.viewHandle.updateView({},l.twisterState,h);!l.twisterState.partialState&&!f&&l.pageRefresh.measurement.stampCustomMetrics("be",m);e!==1&&(c(f),i(f))}};l.handleMouseOut=function(b){var c=l.twisterState.getCurrentASIN();(l.twisterVariationsData.useMS||!a.isSwatchSelected(b,l.twisterVariationsData))&&l.handleClick(null,c,1)};(function(){var a;if(l.twisterJSInitData){l.twisterState=l.twisterControllerHandle.initTwisterState;l.MAX_PREFETCH_COUNT=l.twisterJSInitData.prefetchCount;l.prioritizeReqPrefetch=
l.twisterJSInitData.prioritizeReqPrefetch;l.prefetchFixWeblab=l.twisterJSInitData.prefetchFixWeblab;a=l.twisterState.getCurrentASIN();a=l.twisterVariationsData.getDimensionValuesDisplayData(a);if(!l.viewHandle)l.viewHandle=l.twisterControllerHandle.twisterView;k("selected",a);k("hovered",a)}l.pageRefresh.init(l.twisterJSInitData.storeID,l.twisterJSInitData.productGroupID)})()}});w.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller").register("twister-model-new",
function(q,h,a,b,d,p){return function(a,h,g){function c(a,c,g,h){if(c&&!i.twisterVariationsData.useMS&&b.isSwatchSelected(c,i.twisterVariationsData))return!1;if(i.twisterState.updateStateOnClick(c,g,h,a)){c=i.twisterVariationsData.getDimensionValuesDisplayData(g);if(!(h!=d.EVENT_TYPE_CLICK&&h!=d.EVENT_TYPE_DROPDOWN_CHANGE)){for(var g=i.twisterState.getCurrentDimCombID().split("_"),f={},o=0,e=i.twisterState.dimensionSelectionData.length;o<e;o++)f[i.twisterState.twisterJSInitData.dimensions[o]]=i.twisterState.dimensionSelectionData[o].isRequired==
"1"&&i.twisterState.dimensionSelectionData[o].isSelected=="0"&&g[o]==="X"?"-1":g[o];DetailPage.StateController.setState("selected_variation_values",f)}m("selected",c);m("hovered",c);i.viewHandle.updateView({},i.twisterState,h);Twister.disableJsInteractions?(h===d.EVENT_TYPE_CLICK||h===d.EVENT_TYPE_DROPDOWN_CHANGE)&&p.reloadPage(a):p.updatePage(a,h);return!0}}function m(a,b){for(var c={},d="",f=0;f<b.length;f++)d=null,i.twisterState.isDimSelected(f)&&(d=b[f],d==="(Please Select)"&&(d=null)),c[i.viewHandle.dimensionsMap[f]]=
d;DetailPage.StateController.setState(a+"_variations",c)}var i=this;i.twisterControllerHandle=a;i.twisterJSInitData=h;i.twisterVariationsData=g;i.pageRefresh=p.page;i.prefetch=function(a,b){var c=i.twisterState.getRequestContext(a,!0);p.prefetchPage(c,b)};i.handleMouseOver=function(a){if(!a||i.twisterVariationsData.useMS||!b.isSwatchSelected(a,i.twisterVariationsData)){var c=i.twisterState.getHoverContext(a);i.twisterState.updateStateOnMouseOver(a,c);var g=i.twisterVariationsData.getDimensionValuesDisplayData(c.newAsin);
(!i.twisterVariationsData.useMS||a&&a.dimDisplayType===d.TWISTER_DIMENSION_VIEW_VODD)&&m("hovered",g);this.viewHandle.updateView(a,i.twisterState,d.EVENT_TYPE_MOUSEOVER);Twister.disableJsInteractions||p.updatePage(c,d.EVENT_TYPE_MOUSEOVER)}};i.handleClick=function(a){var b=i.twisterState.getRequestContext(a);c(b,a,b.childAsin,d.EVENT_TYPE_CLICK)&&i.twisterVariationsData.dimensionsMap.length>1&&i.viewHandle.updateViewAfterTwisterUpdate(a,i.twisterState,d.EVENT_TYPE_CLICK)};i.handleMouseOut=function(a){a=
i.twisterState.getCurrentContext(a);c(a,null,a.currentAsin,d.EVENT_TYPE_MOUSEOUT)};i.handleDropdownChange=function(a){var b=i.twisterState.getRequestContext(a);c(b,a,b.childAsin,d.EVENT_TYPE_DROPDOWN_CHANGE);b&&i.twisterVariationsData.dimensionsMap.length>1&&i.viewHandle.updateViewAfterTwisterUpdate(b.childAsin,i.twisterState,void 0)};(function(){if(i.twisterJSInitData){if(!i.viewHandle)i.viewHandle=i.twisterControllerHandle.twisterView;i.twisterState=i.twisterControllerHandle.initTwisterState;var a=
i.twisterState.getCurrentASIN(),a=i.twisterVariationsData.getDimensionValuesDisplayData(a);m("selected",a);m("hovered",a);p.init(h);q.on("dp:twister:prefetch",function(a,b){i.prefetch(a,b)})}})()}});w.when("A","twister-utils","twister-string-constants").register("twister-native-evdd",function(q,h,a){return function(b,d){var p=this,o=q.$,r;p.dimType="evdd";p.isMasterDim=!1;p.updateView=function(a){var a=h.getDimStyleData(a.dimCombID,p.dimValuesDisplayData.length,p.dimOrder,p.twisterControllerHandle.twisterAvailabilityCache,
p.displayConfigStylesData),b,d="";o(r).empty();for(var i=0,k=a.length;i<k;i++)if(rowData=a[i],b=rowData.style,b!=="invalid"||p.isMasterDim)b=b==="selected"?"selected":"",rowId="#native-"+p.dimName+"_"+i,b='<option id="'+rowId+'" value="'+i+'," '+b+">"+p.dimValuesDisplayData[i]+"</option>",d+=b;o(r).html(d)};p.dimOrder=d[a.STRING_DIM_ORDER];p.dimName=d[a.STRING_DIM_NAME];p.dimValuesDisplayData=d[a.STRING_DIMENSION_VALUES_DATA];p.isMasterDim=!1;if(p.dimOrder==="0")p.isMasterDim=!0;p.dimNameDisplayString=
d[a.STRING_DIMENSION_DISPLAY_STRING];p.displayConfigStylesData=d[a.STRING_DISPLAY_CONFIG_STYLES_DATA];p.twisterControllerHandle=d[a.STRING_TWISTER_CONTROLLER_HANDLE];r="#evdd-select-"+p.dimName;o(r).change(function(){var a=o(r).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:p.dimOrder,dimValueIndex:a})})}});w.when("A","twister-utils","detail-page-state-controller","twister-string-constants").register("twister-state",function(q,h,a,b){return function(d,p,o){function r(a){if(a.mType===
b.MTYPE_PARENT&&a.relatedContext)a=a.relatedContext;return a}function g(a,d,e){var k=s.extend(!0,{},a);k.mType=b.MTYPE_MASTER;k.id="m"+e[0];k.relatedContext=a;k.doNotAbort=!0;k.url=c(k,d,[]);k.uniqueID=m(k,[]);return k}function c(a,b,e){var c=j.twisterJSInitData.twisterUpdateURLInfo,d=c.immutableURLPrefix,k=c.immutableParams,c=c.mutableParams,g=j.twisterJSInitData.contextMetaData[a.mType].mTypeSpecificURLParams,i={};keyItr=0;i=s.extend(!0,{},c,g);if(e!=null)for(var g=0,h=e.length;g<h;g++){var l=e[g];
if(!k.hasOwnProperty(l.key)){var m=l.key,o=l.value;i[m]=o;l.isPersistent&&(c[m]=o)}}for(var p in i)i[p]!=null&&(d+="&"+p+"="+i[p]);d+="&asinList="+a.newAsin+"&isFlushing=2&dpEnvironment="+Twister.dpEnvironment+"&id="+a.id+"&mType="+a.mType;b&&(d+="&prefetchRequest=1");return d}function m(a,b){var e="",c=a.mType,d=[],k=s.extend(!0,{},j.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(b!=null)for(var g=0,i=b.length;g<i;g++){var h=b[g];k[h.key]=h.value}for(var l in k)k.hasOwnProperty(l)&&d.push(l);
d.sort();g=0;for(i=d.length;g<i;g++)h=d[g],h!=null&&k!=null&&(e+=h+"="+k[h]+"&");e+="mType="+c+"&id="+a.id;return e}function i(a){var c=a[b.STRING_DIM_INDEX],e=a[b.STRING_DIM_VALUE_INDEX],a=j.getCurrentDimCombID().split("_");a[c]=e===-1?"X":e;a=a.join("_");return j.twisterAvailabilityCache.gAsinToRender(a,c)}function k(a,c){var e=j.getCurrentDimCombID().split("_"),d=e.length,k=j.twisterVariationsData.asinToDimIndexMapData[a],g=-1,i;if(k)k=k.slice(0);else{k=[];for(i=0;i<d;i++)k[i]="X"}c!==null&&c!==
void 0&&(g=c[b.STRING_DIM_INDEX]);for(var h=0;h<d;h++){if((i=j.dimensionSelectionData[h][b.STRING_IS_REQUIRED])&&h!==parseInt(g)&&k[h]!=e[h])k[h]="X",j.sizeSwatch&&j.partialState!=0&&(j.dimensionSelectionData[h][b.STRING_IS_SELECTED]=0);parseInt(g)!==-1&&parseInt(c[b.STRING_DIM_VALUE_INDEX])===-1&&(k[g]="X")}return k.join("_")}function l(a,c){for(var e=a.split("_"),d=0;d<j.dimensionSelectionData.length;d++)j.dimensionSelectionData[d][b.STRING_IS_REQUIRED]===1&&c!==0&&(e[d]="X");return e.join("_")}
var j=this,s=q.$;j.twisterJSInitData=d;j.twisterVariationsData=p;j.twisterAvailabilityCache=o;j.parentASIN="";j.currentASIN="";j.dimensionSelectionData={};j.unselectedDimCount=-1;j.master="";j.currentDimCombID="";j.preHoverClass="";j.hoveredReactId="";j.hoveredAsin="";j.hoveredDimCombID="";j.partialState="";j.previousPartialState="";j.previousReactId="";j.previousAsin="";j.sizeSwatch=!1;j.setMaster=function(a){j.master=a};j.getMaster=function(){return j.master};j.getCurrentASIN=function(){return j.currentASIN};
j.setCurrentASIN=function(a){if(a)j.currentASIN=a};j.getCurrentDimCombID=function(){return j.currentDimCombID};j.setCurrentDimCombID=function(a){if(a)j.currentDimCombID=a};j.isDimSelected=function(a){return j.dimensionSelectionData[a][b.STRING_IS_SELECTED]===1};j.setPreHoverData=function(a){if(!j.useMS)j.preHoverClass=h.getAttachedClass(a,j.twisterVariationsData.dimensionsMap[a[b.STRING_DIM_INDEX]])};j.updateStateOnMouseOver=function(a,c){var e,d;a&&a[b.STRING_DIM_INDEX]==="0"&&j.setMaster(a[b.STRING_DIM_VALUE_INDEX]);
e=c&&c.childAsin||i(a);d=j.unselectedDimCount;if(e===""){if(d<=0)return;e=j.getCurrentASIN()}j.hoveredAsin=e;e=c&&c.newDimCombID||k(j.hoveredAsin,a);j.hoveredDimCombID=e;d=e.search(/X/)>=0?1:0;e=c&&c.reactID||l(e,d);j.hoveredReactId=e;j.setPreHoverData(a)};j.updateStateOnClick=function(a,c,e,d){var g=-1,h=-1;j.previousAsin=j.getCurrentASIN();c=c||d&&d.childAsin||i(a);a&&a[b.STRING_DIM_INDEX]&&a[b.STRING_DIM_INDEX]==="0"&&j.setMaster(a[b.STRING_DIM_VALUE_INDEX]);g=j.unselectedDimCount;j.previousPartialState=
g;if(c===""){if(g<=0)return!1;c=j.getCurrentASIN()}g=d&&d.newDimCombID||k(c,a);if(b.EVENT_TYPE_CLICK===e||b.EVENT_TYPE_DROPDOWN_CHANGE===e){var m=a[b.STRING_DIM_INDEX],e=typeof j.preHoverClass!=="undefined"&&(j.preHoverClass.indexOf(b.CLASS_FOR_SWATCH_UNAVAILABLE)!==-1||j.preHoverClass.indexOf(b.CLASS_FOR_DROPDOWN_UNAVAILABLE)!==-1),o=g.split("_"),h=j.currentDimCombID.split("_");o[m]="*";h[m]="*";m=o.join("_");h=h.join("_");m!=h&&(e=!0);if(e||a[b.STRING_DIM_VALUE_INDEX]===-1)for(var h=g.split("_"),
o=0,n=j.dimensionSelectionData.length;o<n;o++)m=j.dimensionSelectionData[o],h[o]==="X"&&m[b.STRING_IS_SELECTED]===1&&(m[b.STRING_IS_SELECTED]=0,j.unselectedDimCount++);DetailPage.StateController.setState("isUnavailableInOldDimCombId",e?"true":"false");e=a[b.STRING_DIM_INDEX];if(a!==null&&a!==void 0&&(e=j.dimensionSelectionData[e],e[b.STRING_IS_SELECTED]===0&&parseInt(a[b.STRING_DIM_VALUE_INDEX])!==-1&&(e[b.STRING_IS_SELECTED]=1,j.unselectedDimCount--,j.unselectedDimCount<0)))j.unselectedDimCount=
0;h=j.unselectedDimCount;j.previousReactId=j.reactId}else h=g.search(/X/)>=0?1:0,j.previousReactId=j.hoveredReactId;a=d&&d.reactID||l(g,h);j.partialState=h;j.setCurrentASIN(c);j.setCurrentDimCombID(g);j.reactId=a;DetailPage.StateController.setState("current_asin",j.getCurrentASIN());DetailPage.StateController.setState("currentDimCombID",j.getCurrentDimCombID());DetailPage.StateController.setState("reactId",j.reactId);DetailPage.StateController.setState("dimensionSelectionData",j.dimensionSelectionData);
return!0};j.getCurrentContext=function(){var a=j.getRequestContext();return r(a)};j.getHoverContext=function(a){a=j.getRequestContext(a);return r(a)};j.getRequestContext=function(a,d){var e=j.getCurrentASIN(),h=j.parentASIN,o;o=a&&i(a)||e;var p=j.getCurrentDimCombID(),r=k(o,a),q=p.search(/X/)>=0?1:0,n=r.search(/X/)>=0?b.MTYPE_PARTIAL:b.MTYPE_FULL;if(!q&&n===b.MTYPE_PARTIAL)n=b.MTYPE_PARENT;var q=n!==b.MTYPE_FULL?1:0,x=l(r,q),e={divMetaData:a,currentAsin:e,newAsin:o,childAsin:o,currentDimCombID:p,
newDimCombID:r,reactID:x,partialState:q,mType:n,id:x.search(/X/)>=0?x:o};if(j.useMS&&o){if(h=j.twisterVariationsData.asinToDimIndexMapData[o])e.relatedContext=g(e,d,h),e.doNotAbort=!0}else if(n===b.MTYPE_PARENT)o=s.extend(!0,{},e),o.mType=b.MTYPE_PARTIAL,o.relatedContext=e,o.url=c(o,d,[]),o.doNotAbort=!0,o.uniqueID=m(o,[]),e.relatedContext=o,e.id=h,e.newAsin=h,e.doNotAbort=!0;e.url=c(e,d,[]);e.uniqueID=m(e,[]);return e};j.getRequestContextForExternalTwisterUpdates=function(a){var d=j.getCurrentASIN(),
e=j.getCurrentDimCombID();e.search(/X/);var k=e.search(/X/)>=0?b.MTYPE_PARTIAL:b.MTYPE_FULL,i=k!==b.MTYPE_FULL?1:0,h=l(e,i),e={divMetaData:{},currentAsin:d,newAsin:d,childAsin:d,currentDimCombID:e,newDimCombID:e,reactID:h,partialState:i,mType:k,id:h.search(/X/)>=0?h:d};if(j.useMS&&d&&(d=j.twisterVariationsData.asinToDimIndexMapData[d]))e.relatedContext=g(e,0,d),e.doNotAbort=!0;e.url=c(e,0,a);e.uniqueID=m(e,a);return e};(function(){var c=j.twisterJSInitData,d=c.keysToPopulateDetailPageStateController,
e;if(c){DetailPage.StateController=new a;for(var k=0,g=d.length;k<g;k++)e=d[k],DetailPage.StateController.setState(e,c[e]);DetailPage.StateController.setState("variation_display_labels",c[b.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",c[b.INIT_DATA_DIMENSIONS_MAP]);j.currentASIN=c.current_asin;j.parentASIN=c.parent_asin;j.dimensionSelectionData=c.dimensionSelectionData;j.unselectedDimCount=c.unselectedDimCount;j.currentDimCombID=c.currentDimCombID;
j.reactId=c.reactId;j.storeID=c.storeId;j.productGroupID=c.productGroupId;j.useMS=c[b.STRING_USE_MS];j.useMS&&j.currentASIN&&j.twisterVariationsData.asinToDimIndexMapData[j.currentASIN]&&j.setMaster(j.twisterVariationsData.asinToDimIndexMapData[j.currentASIN][0]);if(s("#sizeSwatch").length)j.sizeSwatch=!0}})()}});w.when("A","twister-string-constants").register("twister-variations-data",function(q,h){return function(a){var b=this;b.twisterJSInitData=a;b.dimensionValuesDisplay={};b.getDimensionValuesDisplayData=
function(a){var h=b.dimensionValuesDisplay[a];!h&&a==b.deletedLandingAsinInfo.asin&&(h=b.deletedLandingAsinInfo.dimValues);return h};(function(){var a=b.twisterJSInitData;b.dimensionsMap=a[h.INIT_DATA_DIMENSIONS_MAP];b.dimensionValuesDisplay=a[h.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];b.deletedLandingAsinInfo=a[h.INIT_DATA_DELETED_LANDING_ASIN_INFO];b.dimToAsinMapData=a[h.INIT_DATA_DIM_TO_ASIN_MAP];b.asinToDimIndexMapData=a[h.INIT_DATA_ASIN_TO_DIM_INDEX_MAP];b.dimensionsDisplayType=a[h.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];
b.dimensionValuesData=a[h.STRING_DIMENSION_VALUES_DATA];b.displayConfigStylesData=a[h.STRING_DISPLAY_CONFIG_STYLES_DATA];b.useMS=a[h.STRING_USE_MS];b.hoverMS=a[h.STRING_HOVER_MS]})()}});w.when("A","twister-dimension-view-factory","twister-string-constants").register("twister-view",function(q,h,a){return function(b,d,p,o,r){function g(b,c,d,g,h){var f={},m={};f[a.STRING_EVENT_TYPE]=b;f[a.STRING_DIM_COMB_ID]=c;m[a.STRING_EVENT_DIV_METADATA]=d;m[a.STRING_EVENT_DIM_INFO]=g;m[a.STRING_DIMENSION_SELECTION_DATA]=
h;f[a.STRING_EVENT_DATA]=m;return f}var c=this,m=q.$;c.twisterControllerHandle=b;c.twisterJSInitData=p;c.twisterVariationsData=o;c.twisterAvailabilityCache=r;c.dimensionsMap={};c.dimensionDisplayMap={};c.dimensionDisplayTypeMap={};c.dimensionViewHandlersMap={};c.updateView=function(b,d,h){var j={},m,f=d.dimensionSelectionData;h===a.EVENT_TYPE_MOUSEOVER?(m=d.hoveredAsin,d=d.hoveredDimCombID):(m=d.getCurrentASIN(),d=d.getCurrentDimCombID());j[a.STRING_DIMENSION_VALUES_DATA]=c.twisterVariationsData.getDimensionValuesDisplayData(m);
j[a.STRING_DIMENSION_DISPLAY_MAP]=c.dimensionDisplayMap;j[a.STRING_DIMENSIONS_MAP]=c.dimensionsMap;b=g(h,d,b,j,f);h=0;for(j=c.dimensionsMap.length;h<j;h++)c.dimensionViewHandlersMap[h].updateView(b)};c.updateViewAfterTwisterUpdate=function(b,d,h){var j={},m=d.dimensionSelectionData;d.getCurrentASIN();d=d.getCurrentDimCombID();j[a.STRING_DIMENSION_DISPLAY_MAP]=c.dimensionDisplayMap;j[a.STRING_DIMENSIONS_MAP]=c.dimensionsMap;b=g(h,d,b,j,m);if(h===a.EVENT_TYPE_DROPDOWN_CHANGE||h===a.EVENT_TYPE_CLICK){h=
0;for(j=c.dimensionsMap.length;h<j;h++)c.dimensionViewHandlersMap[h].updateViewAfterTwisterUpdate&&c.dimensionViewHandlersMap[h].updateViewAfterTwisterUpdate(b)}};(function(b){var d=c.twisterJSInitData;c.dimensionsMap=d[a.INIT_DATA_DIMENSIONS_MAP];c.dimensionDisplayMap=d[a.INIT_DATA_DIMENSIONS_DISPLAY];c.dimensionDisplayTypeMap=d[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];for(var g=0,j=c.dimensionsMap.length;g<j;g++)d=h.getDimensionSubViewObject(c.twisterJSInitData,c.twisterVariationsData,g.toString(10),
c.twisterControllerHandle,b),c.dimensionViewHandlersMap[g]=d;m(a.CLASS_FOR_NON_JS_EVDD).hide();m(a.CLASS_FOR_NEW_TWISTER_EVDD).show();c.updateView({},c.twisterControllerHandle.initTwisterState,a.EVENT_TYPE_CLICK)})(d)}});w.when("A","a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants").register("twister-dimension-views-dropdown",function(q,h,a,b,d){return function(p,o){function r(){var a=d.DROPDOWN_DIV_NAME+g.dimName,b={},c;b[d.STRING_DIM_INDEX]=g.dimOrder;c=function(a){g.twisterControllerHandle&&
g.twisterControllerHandle.handleDropdownOnChange(a,b)};w.when("A").execute(function(b){b.on(d.AUI_DROPDOWN_EVENT_PREFIX+a,c)})}var g=this,c=q.$;g.dimType="dropdown";g.AuiDropdownHandle=h;g.thumbnailHandle=a;g.updateView=function(a){switch(a[d.STRING_EVENT_TYPE]){case d.EVENT_TYPE_MOUSEOUT:case d.EVENT_TYPE_DROPDOWN_CHANGE:case d.EVENT_TYPE_CLICK:var h,k,o,j;k=d.ID_SELECTOR+g.dimName+d.CHAR_UNDERSCORE+d.INDEX_FOR_SELECT_OPTION;var p=d.NATIVE_DROPDOWN_DIV_PREFIX+d.DROPDOWN_DIV_NAME+g.dimName,f=c(p).val().split(",")[0],
r=a[d.STRING_EVENT_TYPE],e=a[d.STRING_EVENT_DATA][d.STRING_DIMENSION_SELECTION_DATA],a=b.getDimStyleData(a.dimCombID,g.dimValuesDisplayData.length,g.dimOrder,g.twisterControllerHandle.twisterAvailabilityCache,g.displayConfigStylesData);e[g.dimOrder][d.STRING_IS_SELECTED]===0&&f!==d.INDEX_FOR_SELECT_OPTION&&typeof g.AuiDropdownHandle!=="undefined"&&g.AuiDropdownHandle.getSelect(p).val("-1");(r===d.EVENT_TYPE_CLICK||r===d.EVENT_TYPE_DROPDOWN_CHANGE)&&e[g.dimOrder][d.STRING_IS_REQUIRED]===0&&e[g.dimOrder][d.STRING_IS_SELECTED]===
1&&c(k).remove();f=0;for(e=a.length;f<e;f++)if(h=a[f],k=d.NATIVE_DROPDOWN_DIV_PREFIX+g.dimName+d.CHAR_UNDERSCORE+f,h=h[d.STRING_STYLE],o=c(k).get(0).className,h===d.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&(j=c(k).attr("value"),c(p).val()!==j&&g.AuiDropdownHandle.getSelect(p).val(j)),o!==h)try{o={},o[d.STRING_CSS_CLASS]=h,o[d.STRING_NATIVE_CSS_CLASS]=h,g.AuiDropdownHandle.updateOption(k,o)}catch(u){}g.isTablet&&(r===d.EVENT_TYPE_CLICK||r===d.EVENT_TYPE_DROPDOWN_CHANGE)&&g.thumbnailHandle&&g.thumbnailHandle.update(g.dimName)}};
(function(){var a;g.dimOrder=o[d.STRING_DIM_ORDER];g.dimName=o[d.STRING_DIM_NAME];g.dimensionsMap=o[d.STRING_DIMENSIONS_MAP];g.dimNameDisplayString=o[d.STRING_DIMENSION_DISPLAY_STRING];g.dimValuesDisplayData=o[d.STRING_DIMENSION_VALUES_DATA];g.twisterControllerHandle=o[d.STRING_TWISTER_CONTROLLER_HANDLE];g.displayConfigStylesData=o[d.STRING_DISPLAY_CONFIG_STYLES_DATA];g.initialTwisterState=o[d.STRING_TWISTER_INITIAL_STATE_KEY];g.isTablet=p.isTablet;a=g.initialTwisterState.getCurrentDimCombID();g.dimStyleData=
b.getDimStyleData(a,g.dimValuesDisplayData.length,g.dimOrder,g.twisterControllerHandle.twisterAvailabilityCache,g.displayConfigStylesData);r();if(g.isTablet)for(var c=0,h=g.dimensionsMap.length;c<h;c++)a=g.dimensionsMap[c],g.thumbnailHandle.attach(a),g.thumbnailHandle.preloadAllThumbnails(a)})()}});w.when("A").register("twister-dimension-views-singleton",function(){return function(){this.updateView=function(){}}});w.when("A","twister-dimension-views-unavailablePopover","twister-utils","twister-string-constants",
"aui-style-override","twister-dimension-views-ingress","twister-logger","twister-modal-resize-helper").register("twister-dimension-views-swatch",function(q,h,a,b,d,p,o,r){return function(g,c){function m(a,c){var d=DetailPage.StateController.getState().selected_variations,f=DetailPage.StateController.getState()[b.STRING_DIMENSION_SELECTION_DATA],g;if(e.twisterIngressHandle)g=e.twisterIngressHandle.modalHandle.twisterModalDiv;if(c)u("#variation_"+e.dimName+" .selection").html(a).addClass("hover"),g&&
g.length>0&&u("#"+b.TWISTER_MODAL_ID_PREFIX+e.dimName+" .selection").html(a).addClass("hover");else{var h=u("#variation_"+e.dimName+" .selection"),j=u("#"+b.TWISTER_MODAL_ID_PREFIX+e.dimName+" .selection");if(e.sizeSwatch){var o="";k(f,e.dimOrder)&&a===""||(d[e.dimName]==null?i(f,e.dimOrder)&&(o=a):o=d[e.dimName]);h.html(o).removeClass("hover");g&&g.length>0&&j.html(d[e.dimName]).removeClass("hover")}else u("#variation_"+e.dimName+" .selection").html(a).removeClass("hover"),g&&g.length>0&&u("#"+b.TWISTER_MODAL_ID_PREFIX+
e.dimName+" .selection").html(a).removeClass("hover")}}function i(a,c){var e=!1;1==a[c][b.STRING_IS_SELECTED]&&(e=!0);return e}function k(a,c){var e=!1;1==a[c][b.STRING_IS_REQUIRED]&&(e=!0);return e}function l(a,c){if(e.twisterIngressHandle){e.twisterIngressHandle.modalHandle.isModalOpen&&e.logger.logImpression(e.logger.eventTypes.IMMERSIVE_SWATCH_CLICK,null);var d=e.twisterIngressHandle.modalHandle.twisterModalDiv,f=c===void 0?u(a.$target).parents().closest("li"):c,g=f.attr("id"),h=u("#"+g);d.has(f)&&
g.indexOf(b.MODAL_SWATCH_PREFIX)===0&&(d=e.finalLimitForSwatches-1-1,f=u("#variation_"+e.dimName+" > ul > li"),h.index()>d&&(u(f.get(e.finalLimitForSwatches-1)).remove(),g=g.replace(b.MODAL_SWATCH_PREFIX,""),u(h.clone().attr("id",g)).insertAfter(f.get(d))),e.twisterIngressHandle&&e.twisterIngressHandle.modalHandle.isModalOpen&&e.twisterIngressHandle.modalHandle.closeTwisterModal());e.$swatches=u(e.swatchWrapper);e.twisterIngressHandle.modalHandle.$swatches=u(e.twisterIngressHandle.modalHandle.swatchWrapper)}}
function j(a){var c=Twister.isImmersiveExperience?u("."+b.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+b.CHAR_UNDERSCORE+a):u(b.ID_SELECTOR+e.dimName+b.CHAR_UNDERSCORE+a),a=[],d;if(c.length>0)for(var a=c.get(0).className.split(" "),c=0,f=a.length;c<f;c++){var g=a[c];if(g.indexOf("swatch")===0){d=g;break}}return d}function s(a,c,f){a=Twister.isImmersiveExperience?u("."+b.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+b.CHAR_UNDERSCORE+a):u(b.ID_SELECTOR+e.dimName+b.CHAR_UNDERSCORE+a);c!==f&&u(a).removeClass(c).addClass(f);
d.doOverride(f,a)}function f(a,c){var d=Twister.isImmersiveExperience?u("."+b.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+b.CHAR_UNDERSCORE+a+" ."+b.PRICE_SLOT_CLASS_NAME):u(b.ID_SELECTOR+e.dimName+b.CHAR_UNDERSCORE+a+"_price"),f=b.CLASS_FOR_PRICE_SECONDARY;if(c===b.CLASS_FOR_SWATCH_SELECT||c===b.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||c===b.CLASS_FOR_SWATCH_HOVER)f=b.CLASS_FOR_PRICE_SELECTED;d.length&&d.removeClass(b.CLASS_FOR_PRICE_SECONDARY+" "+b.CLASS_FOR_PRICE_SELECTED).addClass(f)}function t(c){var d=
{};d.asinList=c;u("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",e.twisterDimmedOpacity);d.dimTriggeringDimSum=e.dimName;d.dimType=e.dimType;d.dimSubType=e.dimSubType;d.dimCombId=DetailPage.StateController.getState().currentDimCombID;d.executeChunk=function(){var b=DetailPage.StateController.getState().currentDimCombID,c=b.split("_"),f=d.dimCombId.split("_");if(d.dimCombId===b)return!0;else if(!a.isPartialState(e.dimensionsMap.length)){for(var b=e.dimensionsMap.length,g=!0,h=0;h<b;h++)if(h!==parseInt(e.dimOrder)&&
f[h]!==c[h]){g=!1;break}return g}return!1};d.chunk=function(a){for(var b=u(".twister_"+e.dimName+"_"+e.twisterJSInitData.asin_variation_values[a.ASIN][e.dimName]+" .twisterSlotDiv"),c="",d=0;a.Value.content.twisterSlotDiv[d];)e.dimSubType==="IMAGE"&&(c+="<div>"),c+=a.Value.content.twisterSlotDiv[d],e.dimSubType==="IMAGE"&&(c+="</div>"),d++;b.html(c)};d.success=function(){e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);u("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",
1)};d.error=function(){e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);u("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",1)};d.abort=function(){e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);u("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",1)};Twister.dimensionalSummaryModule.fetchDimSumData(d)}var e=this,u=q.$;e.dimType="swatch";e.dimSubType="";e.twisterJSInitData=g;e.newPrefetchWeblab=!1;if(Twister.multiDimensionWeblabEnabled)var A=
"ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(A="ImmersiveSwatchSingleDimensionView");e.logger=A!==void 0?new o(u,this,A):new o(u,this);e.logger.init();e.sizeSwatch=!1;e.updateView=function(c){if(c[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_MOUSEOVER){var d,g,n,o,l=c[b.STRING_EVENT_DATA],p=l[b.STRING_EVENT_DIM_INFO][b.STRING_DIMENSION_VALUES_DATA][e.dimOrder],l=l[b.STRING_EVENT_DIV_METADATA];if(e.dimOrder==l[b.STRING_DIM_INDEX]){var r=j(l[b.STRING_DIM_VALUE_INDEX]),q=a.getDimStyleData(c.dimCombID,
e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);d=e.twisterIngressHandle&&e.twisterIngressHandle.modalHandle.isModalOpen?b.MODAL_SWATCH_PREFIX+e.dimName+"_"+l.dimValueIndex:e.dimName+"_"+l.dimValueIndex;g=e.twisterJSInitData;n={};n.hidePopover=g.hidePopover;n.unavailablePopOverStringValue=g.unavailablePopOverStringValue;n.showDimSecondUnavailablePopover=g.showDimSecondUnavailablePopover;parseInt(l[b.STRING_DIM_INDEX])===parseInt(e.dimOrder)&&
r===b.CLASS_FOR_SWATCH_UNAVAILABLE&&!e.twisterJSInitData[b.STRING_HIDE_POPOVER]&&h.triggerPopover(c,n,d);u(b.ID_SELECTOR+b.TWISTER_POPOVER).css("z-index","2000");m(p,!0);c=0;for(p=q.length;c<p;c++)if(d=q[c],d=d[b.STRING_STYLE],g=j(c),n=g===b.CLASS_FOR_SWATCH_SELECT?!0:!1,o=parseInt(l[b.STRING_DIM_INDEX])===parseInt(e.dimOrder)&&parseInt(l[b.STRING_DIM_VALUE_INDEX])===parseInt(c)?!0:!1,!n&&(r!==b.CLASS_FOR_SWATCH_UNAVAILABLE||o))d===b.CLASS_FOR_SWATCH_SELECT&&(d=g===b.CLASS_FOR_SWATCH_UNAVAILABLE?
b.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:b.CLASS_FOR_SWATCH_HOVER,f(c,d)),s(c,g,d)}}else{eventData=c[b.STRING_EVENT_DATA];eventDimInfo=eventData[b.STRING_EVENT_DIM_INFO];dimensionValueDisplay=eventDimInfo[b.STRING_DIMENSION_VALUES_DATA][e.dimOrder];divMetaData=eventData[b.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[b.STRING_DIMENSION_SELECTION_DATA];dimCombID=c.dimCombID;dimDataForThisInteraction=a.getDimStyleData(dimCombID,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,
e.displayConfigStylesData);e.sizeSwatch?(r=dimCombID.split("_")[0],l=k(dimensionSelectionData,e.dimOrder),q=i(dimensionSelectionData,e.dimOrder),r=="X"&&l&&q||m(dimensionValueDisplay,!1)):m(dimensionValueDisplay,!1);p=0;for(d=dimDataForThisInteraction.length;p<d;p++){r=dimDataForThisInteraction[p];q=r[b.STRING_STYLE];if(dimensionSelectionData[e.dimOrder][b.STRING_IS_SELECTED]===0&&q===b.CLASS_FOR_SWATCH_SELECT)q=b.CLASS_FOR_SWATCH_AVAILABLE;c=j(p);e.sizeSwatch&&(l=k(dimensionSelectionData,e.dimOrder),
g=!i(dimensionSelectionData,e.dimOrder),c==b.CLASS_FOR_SWATCH_SELECT&&r[b.STRING_STYLE]==b.CLASS_FOR_SWATCH_SELECT&&l&&g&&(q=r[b.STRING_STYLE]));c&&(e.sizeSwatch&&(l=k(dimensionSelectionData,e.dimOrder),(c==b.CLASS_FOR_SWATCH_SELECT||c==b.CLASS_FOR_SWATCH_HOVER)&&l&&q==b.CLASS_FOR_SWATCH_UNAVAILABLE&&m("",!1)),c=j(p),s(p,c,q),f(p,q))}}};e.updateViewAfterTwisterUpdate=function(c){var d=c[b.STRING_EVENT_DATA][b.STRING_EVENT_DIV_METADATA],c=DetailPage.StateController.getState().currentDimCombID.split("_");
if(Twister.multiDimensionWeblabEnabled){var f=u(b.ID_SELECTOR+b.MODAL_SWATCH_PREFIX+e.dimName+"_"+c[e.dimOrder]);l(void 0,f);if(e.isSlotsEnabled)if(a.isPartialState(e.dimensionsMap.length)){c=u(" .twisterSwatchWrapper_"+e.dimOrder+" .twisterSlotDiv");if(c.css("display")!=="none")document.getElementById("twisterSwatchWrapperDynaStyle_"+e.dimOrder).innerHTML=".twisterSwatchWrapper_"+e.dimOrder+" {min-width:100%;min-height:100%;}",c.css("display","none"),e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,
e.swatchDynaWrapper,e.ingressWrapper);Twister.immersiveBannersPresent&&(c=a.getImmersivePartialStateBannerContent(g,parseInt(e.dimOrder)),d=u("#twisterImmersiveGlanceBanner"),d.html(c),d.removeClass("twisterImmersiveBannerHide"),u("#twisterImmersiveModalBanner").html(c))}else if(d[b.STRING_DIM_INDEX]!=e.dimOrder||DetailPage.StateController.getState().isUnavailableInOldDimCombId==="true"){for(var f=u(b.ID_SELECTOR+"variation_"+e.dimName+" > ul > li"),d=[],h=e.twisterJSInitData.dimensionValuesData[e.dimOrder].length,
k=e.isImmersiveViewEnabled?e.finalLimitForSwatches:h,i=0;i<h;i++)u("."+b.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+"_"+i+" ."+b.CLASSNAME_FOR_SWATCH+"_"+e.dimOrder).css("min-width","");u(b.ID_SELECTOR+b.TWISTER_INGRESS_ID_PREFIX+e.dimName+" ."+b.CLASSNAME_FOR_SWATCH+"_"+e.dimOrder).css("min-width","");u("."+b.CLASSNAME_FOR_INGRESS+"_"+e.dimOrder).css("min-width","");u(b.ID_SELECTOR+b.TWISTER_INGRESS_ID_PREFIX+e.dimName+" ."+b.CLASSNAME_FOR_SWATCH+"_"+e.dimOrder).css("min-height","");for(h=0;h<k;h++){var i=
u(f.get(h)).find(".a-declarative"),j=i.attr("data-action"),i=JSON.parse(i.attr("data-"+j)).dimValueIndex;c[e.dimOrder]=i;var o=c.join("_"),j=u("."+b.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+"_"+i+" .twisterSlotDiv");j.css("display","");(o=e.twisterJSInitData[b.INIT_DATA_DIM_TO_ASIN_MAP][o])?(d.push(o),j.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1'      style='width: 30px; margin : 5px 0px 0px 5px; height : 7px'></div>")):
u("."+b.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+"_"+i+" .twisterSlotDiv").html("<span class='a-color-tertiary'>- -</span>")}u(b.ID_SELECTOR+b.TWISTER_MODAL_ID_PREFIX+e.dimName+" .swatches li").invalidateAppearedAlreadyCache();h=e.twisterJSInitData.dimensionValuesData[e.dimOrder].length;for(i=0;i<h;i++)c=u(b.ID_SELECTOR+b.TWISTER_MODAL_ID_PREFIX+e.dimName+" ."+b.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+"_"+i+" .twisterSlotDiv"),c.css("display",""),c.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1' style='width: 30px;  margin : 5px 0px 0px 5px; height : 7px'></div>");
d.length>0?t(d):e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);Twister.immersiveBannersPresent&&(u("#twisterImmersiveGlanceBanner").addClass("twisterImmersiveBannerHide"),c=a.getImmersiveFullStateBannerContent(g,parseInt(e.dimOrder)),u("#twisterImmersiveModalBanner").html(c))}}};e.isImmersiveViewEnabled=c.isImmersiveViewEnabled;e.isSlotsEnabled=c.isSlotsEnabled;e.newPrefetchWeblab=e.twisterJSInitData.newPrefetchWeblab;e.dimOrder=c[b.STRING_DIM_ORDER];
e.dimName=c[b.STRING_DIM_NAME];e.dimensionsMap=c[b.STRING_DIMENSIONS_MAP];e.dimNameDisplayString=c[b.STRING_DIMENSION_DISPLAY_STRING];e.dimValuesDisplayData=c[b.STRING_DIMENSION_VALUES_DATA];e.displayConfigStylesData=c[b.STRING_DISPLAY_CONFIG_STYLES_DATA];e.twisterControllerHandle=c[b.STRING_TWISTER_CONTROLLER_HANDLE];e.initialTwisterState=c[b.STRING_TWISTER_INITIAL_STATE_KEY];currDimCombID=e.initialTwisterState.getCurrentDimCombID();e.dimData=a.getDimStyleData(currDimCombID,e.dimValuesDisplayData.length,
e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);e.maxSwatchLimitForImmersive=c[b.STRING_MAX_SWATCHES_IMMERSIVE_VIEW];e.dimSubType=c.dimensionDisplaySubType;e.finalLimitForSwatches=e.maxSwatchLimitForImmersive-1;(function(){q.declarative(Twister.isImmersiveExperience?b.AUI_EVENT_FOR_SWATCHTHUMB+"-"+e.dimOrder:b.AUI_EVENT_FOR_SWATCHTHUMB,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE,b.EVENT_TYPE_MOUSEDOWN,b.EVENT_TYPE_TOUCHSTART],function(a){if(a.type===
b.EVENT_TYPE_CLICK)e.twisterControllerHandle&&(e.twisterControllerHandle.handleClick(a.data),l(a));else if(a.type===b.EVENT_TYPE_MOUSEENTER)e.twisterControllerHandle&&e.twisterControllerHandle.handleMouseOver(a.data);else if(a.type===b.EVENT_TYPE_MOUSELEAVE)e.twisterControllerHandle&&e.twisterControllerHandle.handleMouseOut(a.data,a.data[b.STRING_DIM_INDEX],a.data[b.STRING_DIM_VALUE_INDEX]);else if(e.newPrefetchWeblab&&(a.type===b.EVENT_TYPE_MOUSEDOWN||a.type===b.EVENT_TYPE_TOUCHSTART))e.twisterControllerHandle&&
e.twisterControllerHandle.handleClickPrediction(a.data,e.newPrefetchWeblab==="T1"?b.YES:b.NO)})})();(function(){for(var a,c,d=0,g=e.dimData.length;d<g;d++)if(a=e.dimData[d],c=j(d))a=a[b.STRING_STYLE],s(d,c,a),f(d,a)})();(function(){if(u("#twister_ingress_"+e.dimName).length>0){var a={};a.dimName=e.dimName;a.dimOrder=e.dimOrder;a.dimData=e.dimData;a.dimensionsMap=e.dimensionsMap;a.dimNameDisplayString=e.dimNameDisplayString;a.dimValuesDisplayData=e.dimValuesDisplayData;a.maxSwatchLimitForImmersive=
e.maxSwatchLimitForImmersive;a.dimSubType=e.dimSubType;a.isSlotsEnabled=e.isSlotsEnabled;e.twisterIngressHandle=new p(a,e.twisterJSInitData)}})();e.resizeHelperHandle=new r;e.swatchWrapper=".twisterSwatchWrapper_"+e.dimOrder;e.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+e.dimOrder;e.$swatches=u(e.swatchWrapper);e.twisterDimmedOpacity=0.2;if(u("#sizeSwatch").length)e.sizeSwatch=!0;e.landingDimCombId=DetailPage.StateController.getState().currentDimCombID;w.when("twister-lazy-load-data").execute(function(c){if(c.context.dimKey===
e.dimName){var d=DetailPage.StateController.getState().currentDimCombID,f=e.landingDimCombId.split("_"),d=d.split("_");f[e.dimOrder]="*";d[e.dimOrder]="*";d=d.join("_");f=f.join("_");if(d==f){var g=c.context,c=c.responseData.split("&&&");u("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",0.2);u.each(c,function(b,c){var d;if(a.stringTrim(c)!=="")try{d=u.parseJSON(c)}catch(e){}else d=c;var f=u(document.querySelectorAll('[data-defaultAsin="'+d.ASIN+'"]'));divToBeReplaced=f.find(" .twisterSlotDiv");if(divToBeReplaced.length>
0){divToBeReplaced.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var h="",k=0;d.Value.content.twisterSlotDiv[k];)g.dimSubType==="IMAGE"&&(h+="<div>"),h+=d.Value.content.twisterSlotDiv[k],g.dimSubType==="IMAGE"&&(h+="</div>"),k++;divToBeReplaced.html(h)}else divToBeReplaced.html(d.Value.content.twisterSlotDiv);f.removeAttr("data-defaultAsin")}});e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);u("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",
1)}}})}});w.when("A","twister-utils","twister-string-constants","scroll-event-handler","twister-vodd-popover").register("twister-vodd",function(q,h,a,b,d){return function(p,o){function r(){var a=parseInt(v.dimensionOrder)*ua,b=a,c=function(a,b,c){a.addClass(aa);setTimeout(function(){a.animate({top:c||"0px"},{duration:va,complete:function(){y(this).removeClass(aa)}})},b)};J.length&&J.parent("td").is(":visible")&&(c(J.parent("td"),a,wa),b=a+xa);c(X.parent("td"),b,ya)}function g(){ba=a.ID_SELECTOR+za+
v.dimensionName;ca=a.ID_SELECTOR+Aa+v.dimensionName;da=a.ID_SELECTOR+Ba+v.dimensionName;ea=a.ID_SELECTOR+Ca+v.dimensionName;S=a.ID_SELECTOR+v.dimensionName+a.CHAR_UNDERSCORE;fa=Da+v.dimensionName;var b=parseInt(v.dimensionOrder),c=p[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES];c&&y.isArray(c)&&c.length>b&&(b=c[b],b[a.INIT_DATA_VISIBLE_ROW_COUNT]&&(L=b[a.INIT_DATA_VISIBLE_ROW_COUNT]),b[a.INIT_DATA_MAX_POPOVER_HEIGHT]&&(T=b[a.INIT_DATA_MAX_POPOVER_HEIGHT]),b[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]&&(ga=b[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]),
b[a.INIT_DATA_POPOVER_POSITION]&&(ha=b[a.INIT_DATA_POPOVER_POSITION]));ia=Ea+"?vs=1"+(v.twisterControllerHandle.twisterJSInitData.ajaxUrlParams?v.twisterControllerHandle.twisterJSInitData.ajaxUrlParams:"")+"&asinList="}function c(b){if(F){var c=F.length/v.dimValuesDisplayData.length*100,c={divMetaData:f(null),count:Math.ceil(v.dimValuesDisplayData.length/L),percentage:Math.floor(c),dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD};M.logImpression(b,c)}}function m(){var b={trigger:v.dimensionButton,name:fa,
eventListener:v,displayPosition:ha},c=H.find("tr");c.length&&c.length>L&&T&&typeof T!=="undefined"&&y.extend(b,{height:T});C=new d(b);v.dimensionButton.bind(h.isTouchDevice()?a.EVENT_TYPE_TOUCHEND:a.EVENT_TYPE_CLICK,function(){if(C&&C.getHandle()&&C.getHandle().isActive())return C.getHandle().hide(),!1;else M.logImpression(K.CLICK,{time:Date.now()}),h.isTouchDevice()&&v.dimensionButton.trigger("mouseenter")})}function i(a,b){var c=M.createFunctionTimer(K.DIM_SUM_LOAD);c.start();var d=function(){y.each(a,
function(a,b){N.splice(y.inArray(b,N),1)});c.stop()};if(U)Twister.dimensionalSummaryModule?Twister.dimensionalSummaryModule.fetchDimSumData({indices:b,asinList:a,dimTriggeringDimSum:v.dimensionName,dimSubType:v.dimSubType,dimType:v.dimType,chunk:function(a){if(a&&typeof a==="object"){var b=O[a.ASIN][parseInt(v.dimensionOrder)],b=H.find(S+b);a.Value&&a.Value.content&&a.Value.content.twisterSlotDiv&&(a=y.trim(a.Value.content.twisterSlotDiv),a.length>0&&(b.find("."+V).hide(),A(b),b.find(".dimension-details").append(a)))}},
success:function(){c.stop()},error:d,abort:d}):d();else{var e=ia+a.join(Fa);q.ajax(e,{chunk:function(a){a&&y.isArray(a)&&(y.each(a,function(a,b){v.initialTwisterState.asinDimensionValuesInfo[b.asin]=b}),l(a))},success:function(){c.stop()},error:d,abort:d,timeout:Ga})}}function k(a){if(U){var b=v.initialTwisterState.getCurrentDimCombID(),c=parseInt(v.dimensionOrder),d=[],e=[];F||(F=[]);for(var f=0;f<a.length;f++){d.length===ja&&(i(d,e),d=[],e=[]);var g=s(a[f].id);combination=h.reconstructCombinationWithDimValue(b,
c,g);asin=Y[combination];F.indexOf(g)<0&&F.push(g);asin&&(N.push(asin),e.push(g),d.push(asin))}d.length>0&&i(d,e)}else{b=v.initialTwisterState.getCurrentDimCombID();c=parseInt(v.dimensionOrder);d=[];e=[];F||(F=[]);for(f=0;f<a.length;f++)d.length===ja&&(i(d),d=[]),g=s(a[f].id),combination=h.reconstructCombinationWithDimValue(b,c,g),asin=Y[combination],F.indexOf(g)<0&&F.push(g),asin&&(y.inArray(asin,N)>-1||(d.push(asin),N.push(asin)),v.initialTwisterState.asinDimensionValuesInfo[asin]&&e.push(v.initialTwisterState.asinDimensionValuesInfo[asin]));
d.length>0&&i(d);e.length>0&&l(e)}}function l(a){a&&y.each(a,function(a,b){var c=O[b.asin][parseInt(v.dimensionOrder)],c=H.find(S+c);y(c).find("."+V).hide();b&&(b.isAvailable?(b.hasFreshBadge?y(c).find("i."+ka).removeClass(W):b.hasPrimeBadge&&y(c).find("i."+la).removeClass(W),b.isPriceHidden?y(c).find("."+ma).show():b.price&&y(c).find("."+na).html(b.price).show(),b.ppu&&y(c).find("."+oa).html(b.ppu).show(),b.isSnsEligible&&!b.hasFreshBadge&&y(c).find("."+pa).show()):b.availability?y(c).find("."+qa).html(b.availability).show():
y(c).find("."+ra).show(),y(c).find("."+sa).show())})}function j(a){a=h.getVisibleTableRows(a.currentTarget,H.find("tr"));k(a)}function s(b){if(!b)return-1;b=b.split(a.CHAR_UNDERSCORE);return b[b.length-1]}function f(b){return{dimIndex:v.dimensionOrder,dimValueIndex:b?s(b.id):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD}}function t(a){c(K.CLICK_VARIATION);R||c(K.SCROLL);R=!0;F=null;var b=f(a.currentTarget),d=v.initialTwisterState.getCurrentDimCombID(),d=h.reconstructCombinationWithDimValue(d,
b.dimIndex,b.dimValueIndex);v.twisterControllerHandle&&(n(),v.twisterControllerHandle.handleClick(b));d=v.twisterControllerHandle.twisterAvailabilityCache.isDimCombinationAvailable(d);b={dimensionOrder:v.dimensionOrder,dimensionValueIndex:b.dimValueIndex,isSelectedDimValueAvailable:d};y(a.currentTarget).trigger(Ha,b)}function e(a){y(a.currentTarget).addClass(Z);v.twisterControllerHandle&&(a=f(a.currentTarget),v.twisterControllerHandle.handleMouseOver(a))}function u(a){y(a.currentTarget).removeClass(Z);
if(v.twisterControllerHandle){var b=f(a.currentTarget),a=s(a.currentTarget.id);v.twisterControllerHandle.handleMouseOut(b,v.dimensionOrder,a)}}function A(a){a.find(".dimension-slots .availability-message").nextAll().remove()}function z(a,b){if(b)a.find("."+ta).hide(),a.find("."+V).show();else{a.find("."+ta).show();a.find("."+V).hide();a.find(".unavailableV1").removeClass("aok-hidden");a.find(".unavailableV2").removeClass("aok-hidden");var c;c=v.initialTwisterState.getCurrentDimCombID().split("_");
var d=[],e=parseInt(v.dimensionOrder),f=s(a[0].id);c[e]=f;for(var f=c.join("_"),f=v.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(f,e),f=O[f],g=0;g<c.length;g++)e!==g&&d.push(Q[g][f[g]]);c=d.join(", ");a.find("."+Ia).text(c);a:{c=0;d=parseInt(v.dimensionOrder);e=parseInt(s(a[0].id));for(asin in O)if(parseInt(O[asin][d])===e&&++c>1){c=!0;break a}c=!1}c||a.find("."+Ja).hide()}U?A(a):(a.find("."+qa).hide(),a.find("."+ra).hide(),a.find("."+pa).hide(),a.find("."+na).hide(),a.find("."+
ma).hide(),a.find("."+oa).hide(),a.find("."+sa).hide(),a.find("i."+la).addClass(W),a.find("i."+ka).addClass(W))}function B(b){I.sort(function(c,d){var e=s(c.id),f=s(d.id);if(b[e][a.STRING_STYLE]!==b[f][a.STRING_STYLE])if(b[e][a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE)return 1;else if(b[f][a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE)return-1;return e-f});I.detach().appendTo(H)}function D(a){var b=H.find("tr"),a=b.index(a),c=b.length-L;a>c?(a=c,a<0&&(a=0)):a=a==0?a:a-1;b=b.slice(a,a+L);k(b)}
function n(){I.unbind(a.EVENT_TYPE_CLICK,t);h.isTouchDevice()||I.unbind(a.EVENT_TYPE_MOUSEENTER,e).unbind(a.EVENT_TYPE_MOUSELEAVE,u)}function x(b,c){var d=h.getDimStyleData(b,v.dimValuesDisplayData.length,v.dimensionOrder,v.twisterControllerHandle.twisterAvailabilityCache,v.displayConfigStylesData);B(d);for(var e=null,f=0;f<d.length;f++){var g=d[f],k=H.find(S+f);if(g[a.STRING_STYLE]===a.CLASS_FOR_VODD_SELECT){if(e=k,k.addClass($),X.text(v.dimValuesDisplayData[f]),J.length){var i=k.find("."+Ka);i.length>
0?J.prop("src",i.prop("src")).show():J.hide()}}else k.removeClass($);k.removeClass(Z);v.dimensionsMap.length>1&&z(k,g[a.STRING_STYLE]!==a.CLASS_FOR_VODD_UNAVAILABLE)}c?q.on.load(function(){D(e)}):D(e)}var v=this,y=q.$,C,E,Q,G,I,H,J,X,ca,ea,ba,da,S,fa,W="hidden",$="vodd-row-selected",Z="vodd-row-hovered",Ka="vodd-dimension-img",za="vodd-button-",Ca="dimension-button-img-",Aa="vodd-button-label-",sa="lazy-loaded-data",V="vodd-loading-placeholder",Da="vodd-popover-",la="prime",ka="fresh",na="price",
oa="ppu",pa="sns",Ia="variation-combination-text",Ja="variation-more-text",ta="unavailable-text",ra="outofstock-text",qa="availability-message",ma="price-hidden",Ba="vodd-table-",Ga=2E4,Fa=",",Ea="/gp/twister/variationinfo",ia,L=0,ha="bottom",ga=!1,ja=7,T,va=300,ua=100,xa=50,wa="5px",ya="5px",aa="animation-start",R=!1,F,Y,O,N,M,K,U=!1,Ha="TwisterVODD.dimensionRowClick";v.onInitializeTwister=function(){x(v.initialTwisterState.getCurrentDimCombID(),!0);m()};v.handlePopoverEvent=function(d,f){if(d===
a.EVENT_TYPE_SHOWPOPOVER){n();I.bind(a.EVENT_TYPE_CLICK,t);h.isTouchDevice()||I.bind(a.EVENT_TYPE_MOUSEENTER,e).bind(a.EVENT_TYPE_MOUSELEAVE,u);R=!1;var g=f.popover.$trigger,k={popover:f};g.addClass("highlighted");g.trigger("TwisterVODD.showPopup",k);E||(G=H.closest(".a-popover-inner"),E=new b(200,G,j));g=H.find("tr."+$);G&&G.length&&g.length&&G.scrollTop(g.get(0).offsetTop-33)}else d===a.EVENT_TYPE_HIDEPOPOVER?(g=f.popover.$trigger,k={popover:f},R||(c(K.SCROLL),F=null),R=!0,y(g).removeClass("highlighted"),
g.trigger("TwisterVODD.hidePopup",k)):d===a.EVENT_TYPE_UPDATEPOPOVERPOSITION&&f.popover.$trigger.trigger("TwisterVODD.updatePopupPosition",{popover:f})};v.updateView=function(b){b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&(C&&C.getHandle()&&C.getHandle().hide(),x(b[a.STRING_DIM_COMB_ID]))};v.showVariationSelection=function(){h.isTouchDevice()||v.dimensionButton.trigger("click")};(function(){v.dimType=a.TWISTER_DIMENSION_VIEW_VODD;v.dimensionName=o[a.STRING_DIM_NAME];v.dimensionOrder=o[a.STRING_DIM_ORDER];
v.twisterControllerHandle=o[a.STRING_TWISTER_CONTROLLER_HANDLE];v.dimValuesDisplayData=o[a.STRING_DIMENSION_VALUES_DATA];v.displayConfigStylesData=o[a.STRING_DISPLAY_CONFIG_STYLES_DATA];v.initialTwisterState=o[a.STRING_TWISTER_INITIAL_STATE_KEY];v.dimensionsMap=o[a.STRING_DIMENSIONS_MAP];v.dimSubType=o[a.DIMENSION_SUB_TYPE];M=v.twisterControllerHandle.logger;K=M.eventTypes;Q=v.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;Y=v.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;
O=v.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;var b=q.state("twister-vodd-html-data");typeof b!=="undefined"&&b&&(U=b.useDimensionSlots);if(!v.initialTwisterState.asinDimensionValuesInfo)v.initialTwisterState.asinDimensionValuesInfo={};N=[];g();v.dimensionButton=y(ba);H=y(da);I=H.find("tr");J=y(ea);X=y(ca);b=Math.ceil(v.dimValuesDisplayData.length/L);M.logImpression(K.DIM_INIT,{count:b,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD});ga&&w.when("A","ready").execute(function(){window.setTimeout(function(){r()},
1E3)})})()}});w.when("A","twister-string-constants").register("twister-dimension-views-unavailablePopover",function(q,h){function a(a,b,o,r,g){for(var c="",m=0;m<b.length;m++)m!==a&&b[m][h.STRING_IS_SELECTED]===1&&(c=c?c+", "+o[m]:o[m]);c="<strong>"+c+"</strong>";return g?r+"&nbsp;"+c:c+"&nbsp;"+r}var b=q.$;return{triggerPopover:function(d,p,o){var d=d[h.STRING_EVENT_DATA],r;if(!(typeof touchDeviceDetected!=="undefined"&&touchDeviceDetected)){p=a(d[h.STRING_EVENT_DIV_METADATA][h.STRING_DIM_INDEX],
d[h.STRING_DIMENSION_SELECTION_DATA],d[h.STRING_EVENT_DIM_INFO][h.STRING_DIMENSION_DISPLAY_MAP],p[h.STRING_UNAVAILABLE_POPOVER_STRING_VALUE],p[h.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER]);d="ap_body";if(b.browser.msie||navigator.userAgent.match(/Trident/))d+=" styleIE";r=b("#"+o);b.AmazonPopover.displayPopover({modal:!1,showOnHover:!0,draggable:!1,showCloseButton:!1,hoverShowDelay:50,hoverHideDelay:0,width:null,closeEventInclude:"CLICK_TRIGGER",literalContent:p,skin:"<div id='twisterPopover' class='ap_popover twisterPopoverSkin a-text-color-white'><div class='ap_header'></div><div class='"+
d+"'><div class='ap_content'></div></div><div class='ap_footer'><div class='ap_middle'></div></div></div>",location:"top",locationElement:Twister.$("#"+o),align:"center",attached:!1,group:"TwisterPopover",locationOffset:[2,22],paddingLeft:5,paddingRight:5,paddingBottom:5,onShow:function(){var a=b("#twisterPopover").width();b.browser.msie?b("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({top:"16px",width:a-68+"px"}):b("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({width:a-
68+"px"})}},r);b("#"+o).trigger("mouseover.amzPopover")}}}});w.when("A","twister-utils","twister-string-constants","scroll-event-handler","dimensional-summary-module","a-popover","twister-logger").register("twister-IMDD",function(q,h,a,b,d,p,o){return function(b,d){function c(){q.declarative("twister-idd-button-click-"+n.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){if(b.type===a.EVENT_TYPE_CLICK){n.modalAttachedToButton?
(b="imdd-appear-"+d[a.STRING_DIM_NAME],x("#"+n.immersiveDropdownDivId+" .twister-idd-row").forceAppear({force_process:!0,$window:n.immersiveDropdownDiv,$scrollHandlerDiv:n.immersiveDropdownContentDiv,eventToBeTriggered:b})):(k(),x("#"+n.dropdownDivPlaceHolderId).after(n.immersiveDropdownDiv),m());n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_OPENED,null);n.immersiveDropdownDiv.css("display","block");if(!n.modalAttachedToButton)m(),n.modalAttachedToButton=1;b=x("#twisterDropdownWidthHelper_"+
n.dimOrder);if(b.length>0){var c=b.html(),b=x("#"+n.immersiveDropdownDivId+" #"+G).html();x("#"+n.immersiveDropdownDivId+" #"+G).html(c);n.dropdownHeaderDiv.css("height","");n.maxHeaderHeight=n.dropdownHeaderDiv.outerHeight();c=n.immersiveDropdownDiv.height()-n.maxHeaderHeight;n.immersiveDropdownContentDiv.css({height:c});n.dropdownHeaderDiv.css({height:n.dropdownHeaderDiv.outerHeight()});x("#"+n.immersiveDropdownDivId+" #"+G).html(b)}var c=n.immersiveDropdownDiv.outerHeight(),e=n.$dropdownButtonDiv.outerHeight(),
b=n.$dropdownButtonDiv.offset(),f=x(window).height()+x(window).scrollTop()-b.top,f=f>C?C:f,f=f>c?c:f,i=n.$subNav.offset().top+n.$subNav.outerHeight(),e=b.top+e,i=e-i,i=i>C?C:i,c=i>c?c:i;f>=c?(n.immersiveDropdownDiv.css("height",f+"px"),b=b.top):(n.immersiveDropdownDiv.css("height",c-10+"px"),b=e-n.immersiveDropdownDiv.outerHeight()+10);n.immersiveDropdownDiv.offset({top:b});b=n.immersiveDropdownDiv.height()-n.maxHeaderHeight;n.immersiveDropdownContentDiv.css({height:b});n.immersiveDropdownContentDiv.get(0).scrollHeight>
n.immersiveDropdownContentDiv.get(0).clientHeight?x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none");n.immersiveDropdownDiv.css("display","none");n.immersiveDropdownDiv.css("display","block");h.disableTwisterDiv();n.modalAttachedToButton=1;n.isDropdownOpen=1}});q.declarative("twister-idd-row-click-"+n.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,
a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){b.type===a.EVENT_TYPE_CLICK?n.twisterControllerHandle&&(n.twisterControllerHandle.handleClick(b.data),i(),n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_ROW_CLICK,null)):b.type===a.EVENT_TYPE_MOUSEENTER?n.twisterControllerHandle&&n.twisterControllerHandle.handleMouseOver(b.data):b.type===a.EVENT_TYPE_MOUSELEAVE&&n.twisterControllerHandle&&n.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],
b.data[a.STRING_DIM_VALUE_INDEX])});q.declarative("twister-idd-close-button-"+n.dimOrder,[a.EVENT_TYPE_CLICK],function(b){b.type===a.EVENT_TYPE_CLICK&&(i(),n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_CLOSED,null))});x(document).ready(function(){x(document).click(function(a){a.target.id!=n.immersiveDropdownDivId&&!n.immersiveDropdownDiv.has(a.target).length&&a.target.id!=n.dropdownButtonId&&!n.$dropdownButtonDiv.has(a.target).length&&n.isDropdownOpen&&i()})});x(document).keyup(function(a){a.keyCode==
27&&i()});n.immersiveDropdownContentDiv.bind("scroll",function(){x(this).scrollTop()+x(this).innerHeight()>=this.scrollHeight?(n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_FULL_SCROLL,null),x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(x(this).scrollTop()==0?x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","none"):x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display",
"block"),x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});n.immersiveDropdownContentDiv.live("DOMMouseScroll mousewheel  wheel",function(b){var c=x(this),d=this.scrollTop,e=this.scrollHeight,f=c.height(),g=b.originalEvent.wheelDelta;typeof g=="undefined"&&(g=-b.originalEvent.deltaY);var h=g>0,k=function(){b.stopPropagation();b.preventDefault();return b.returnValue=!1};if(!h&&-g>e-f-d)return c.scrollTop(e),x(a.ID_SELECTOR+n.immersiveDropdownDivId+
" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),k();else if(h&&g>d)return x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","none"),c.scrollTop(0),k();else c.scrollTop()+c.innerHeight()>e&&(x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","block"))})}function m(){var b=navigator.platform.indexOf("Win")>-1,c=n.immersiveDropdownContentDiv.scrollTop()+
n.immersiveDropdownContentDiv.get(0).scrollHeight>n.immersiveDropdownContentDiv.outerHeight()+15;if(c){var d=parseInt(n.immersiveDropdownDiv.width())+25+"px";n.immersiveDropdownDiv.css("width",d);b&&(b=parseInt(x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).width())-21+"px",x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("width",b),x(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("width",b))}c&&n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR,
null)}function i(){h.enableTwisterDiv();n.immersiveDropdownDiv.css("display","none");n.isDropdownOpen=0}function k(){var b="imdd-appear-"+d[a.STRING_DIM_NAME];x("#"+n.immersiveDropdownDivId+" .twister-idd-row").appearedInTwisterImmersiveView({force_process:!0,$window:n.immersiveDropdownDiv,$scrollHandlerDiv:n.immersiveDropdownContentDiv,eventToBeTriggered:b});q.on(b,function(a){for(a=a[0].slice(0);a.length;)n.requestStack.push(a.splice(0,n.maxBatchLimitForIMDD));l()})}function l(){if(!(n.requestStack.length<=
0)&&n.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){n.noOfOngoingConnections++;for(var a=n.requestStack.shift(),b=[],c=0,d=a.length;c<d;c++){var e=x(a[c]),e=n.immersiveDropdownDiv.find("#"+e.attr("id")).closest(".a-declarative"),f=e.attr("data-action"),e=JSON.parse(e.attr("data-"+f)).dimValueIndex;b.push(e)}t(b);l()}}function j(a){if(n.initData.fnToDetermineSelectedVariations){if(typeof n.initData.fnToDetermineSelectedVariations==="function")n.currentDimCombOnGlance=n.initData.fnToDetermineSelectedVariations.call(n)}else n.glanceViewSelectedDims=
DetailPage.StateController.getState().selected_variations,n.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;return a?n.currentDimCombOnGlance.split("_"):n.currentDimCombOnGlance}function p(a){var b=j(!0);b[a]=n.symbolForTriggeringDim;var b=b.join("_"),c={},d={},a=v[a];if(!n.mapOfDimToAsinMaps[b]){for(var e=0,f=a.length;e<f;e++){var g=b.replace(n.symbolForTriggeringDim,e);(g=y[g])?(c[a[e]]=g,d[g]=a[e]):c[a[e]]=""}c&&(n.mapOfDimToAsinMaps[b]=c);d&&(n.mapOfAsinToDimMaps[b]=
d)}}function f(a,b){var c=[],d;d=j(!0).slice(0);d[b]=n.symbolForTriggeringDim;d=d.join("_");d=n.mapOfDimToAsinMaps[d];for(var e=B(),f=v[b],g=0,h=a.length;g<=h;g++){var k=a[g],i=f[k];i&&((i=d[i])?c.push(i):(k=x("#"+ROW_ID_PREFIX+n.dimensionName+"_"+k+" .idd_loading_slot_0"),e||k.html("<span class='a-color-tertiary'>- -</span>")))}return c}function t(b){var c={};c.indices=b;c.dimTriggeringDimSum=d[a.STRING_DIM_NAME];c.dimType=n.dimType;var e=dimensionsList.indexOf(c.dimTriggeringDimSum);p(e);c.asinList=
f(b,e,c);c.asinList.length==0?(n.noOfOngoingConnections--,l()):(c.dimCombId=j(!1),c.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,b=a.split("_"),d=c.dimCombId.split("_");if(c.dimCombId===a)return!0;else if(!h.isPartialState(n.dimensionsMap.length)){for(var a=n.dimensionsMap.length,e=!0,f=0;f<a;f++)if(f!==parseInt(n.dimOrder)&&d[f]!==b[f]){e=!1;break}return e}return!1},c.chunk=function(a,b){a.dimensionValue=dimensionsList[b.dimIndexTriggeringDimSum]+"_"+v[b.dimIndexTriggeringDimSum].indexOf(n.mapOfAsinToDimMaps[b.hashKey][a.ASIN]);
var c=x("#"+ROW_ID_PREFIX+a.dimensionValue+" .idd_loading_slot_0");c.html(a.Value.content.twisterSlotDiv["0"]);c=x("#"+ROW_ID_PREFIX+a.dimensionValue+" .idd_loading_slot_1");c.html(a.Value.content.twisterSlotDiv["1"])},c.success=function(){n.noOfOngoingConnections--;l()},c.error=function(){n.noOfOngoingConnections--;l()},c.abort=function(){n.noOfOngoingConnections--;l()},Twister.dimensionalSummaryModule.fetchDimSumData(c))}function e(b){var c=x("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+
b),b=[],d;if(c.length>0)for(var b=c.get(0).className.split(" "),c=0,e=b.length;c<e;c++){var f=b[c];if(f.indexOf("twister-idd-row-")===0){d=f;break}}return d}function u(b,c,d){b=x("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+b);c!==d&&(c==void 0?x(b).addClass(d):x(b).removeClass(c).addClass(d))}function A(b,c){var d=x("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+b+" .idd_loading_slot_0 ."+a.PRICE_SLOT_CLASS_NAME),e=a.CLASS_FOR_PRICE_SECONDARY;if(c===E||c===a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||
c===Q)e=a.CLASS_FOR_PRICE_SELECTED;d.length&&d.removeClass(a.CLASS_FOR_PRICE_SECONDARY+" "+a.CLASS_FOR_PRICE_SELECTED+" a-color-tertiary").addClass(e)}function z(a,b){DetailPage.StateController.getState();b?x("#"+n.immersiveDropdownDivId+" #"+G).html(a).addClass("hover"):(x("#"+n.dropdownButtonId+" #"+I).html(a).removeClass("hover"),x("#"+n.immersiveDropdownDivId+" #"+G).html(a).removeClass("hover"))}function B(){for(var a=n.dimensionsMap.length,b=DetailPage.StateController.getState().currentDimCombID.split("_"),
c=!1,d=0;d<a;d++)if(d!==parseInt(n.dimOrder)&&b[d]==="X"){c=!0;break}return c}function w(a){a=a?h.getImmersivePartialStateBannerContent(b,parseInt(n.dimOrder)):h.getImmersiveFullStateBannerContent(b,parseInt(n.dimOrder));x("#twisterImmersiveDropdownBanner_"+n.dimOrder).html(a)}var n=this,x=q.$,v,y,C=350,E="twister-idd-row-selected",Q="twister-idd-row-hover",G="twister-idd-modal-selection",I="twister-idd-button-selection";ROW_ID_PREFIX="twister_idd_";DEFAULT_DISPLAY_VALUE="Select";n.symbolForTriggeringDim=
"*";n.currentDimCombOnGlance="";n.twisterFeatureDiv=x("#twister_feature_div");n.mapOfDimToAsinMaps={};n.mapOfAsinToDimMaps={};n.$subNav=x(a.ID_SELECTOR+"nav-subnav");n.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_MOUSEOVER){var c,d;c=b[a.STRING_EVENT_DATA];var f=c[a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][n.dimOrder];c=c[a.STRING_EVENT_DIV_METADATA];if(n.dimOrder==c[a.STRING_DIM_INDEX])e(c[a.STRING_DIM_VALUE_INDEX]),b=h.getDimStyleData(b.dimCombID,n.dimValuesDisplayData.length,
n.dimOrder,n.twisterControllerHandle.twisterAvailabilityCache,n.displayConfigStylesData),c.dimValueIndex===-1?z(DEFAULT_DISPLAY_VALUE,!0):z(f,!0),f=c.dimValueIndex,f>-1&&(b=b[f],b=b[a.STRING_STYLE],c=e(f),d=c===E?!0:!1,d||(b===E&&(b=c==="twister-idd-row-unavailable"?"twister-idd-row-unavailable-hover":Q,A(f,b)),u(f,c,b)))}else{eventData=b[a.STRING_EVENT_DATA];eventDimInfo=eventData[a.STRING_EVENT_DIM_INFO];dimensionValueDisplay=eventDimInfo[a.STRING_DIMENSION_VALUES_DATA][n.dimOrder];divMetaData=
eventData[a.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[a.STRING_DIMENSION_SELECTION_DATA];dimCombID=b.dimCombID;dimDataForThisInteraction=h.getDimStyleData(dimCombID,n.dimValuesDisplayData.length,n.dimOrder,n.twisterControllerHandle.twisterAvailabilityCache,n.displayConfigStylesData);if(dimensionSelectionData[n.dimOrder][a.STRING_IS_SELECTED]===0){if(b.eventType==="click"&&(d=e("-1")))d=e("-1"),u("-1",d,E);z(DEFAULT_DISPLAY_VALUE,!1)}else{if(b.eventType==="click"&&(d=e("-1")))d=e("-1"),
u("-1",d,"twister-idd-row-available");z(dimensionValueDisplay,!1)}f=0;for(b=dimDataForThisInteraction.length;f<b;f++){c=dimDataForThisInteraction[f];c=c[a.STRING_STYLE];if(dimensionSelectionData[n.dimOrder][a.STRING_IS_SELECTED]===0&&c===a.CLASS_FOR_SWATCH_SELECT)c=a.CLASS_FOR_SWATCH_AVAILABLE;if(d=e(f))d=e(f),u(f,d,c),A(f,c)}}};n.updateViewAfterTwisterUpdate=function(b){var c=b[a.STRING_EVENT_DATA][a.STRING_DIMENSION_SELECTION_DATA][n.dimOrder][a.STRING_IS_SELECTED],b=B();if(h.isPartialState(n.dimensionsMap.length)&&
(c||z(DEFAULT_DISPLAY_VALUE,!1),b)){for(var c=v[n.dimOrder].length,d=0;d<c;d++)x("#"+ROW_ID_PREFIX+n.dimensionName+"_"+d+" .idd_loading_slot_1").css("display","none"),x("#"+ROW_ID_PREFIX+n.dimensionName+"_"+d+" .idd_loading_slot_0").css("display","none");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&w(!0)}if(!b){b=v[n.dimOrder].length;for(c=0;c<b;c++)d=x("#"+ROW_ID_PREFIX+n.dimensionName+"_"+c+" .idd_loading_slot_1"),d.html(""),d.css("display",""),d=x("#"+ROW_ID_PREFIX+n.dimensionName+
"_"+c+" .idd_loading_slot_0"),d.html("Loading details..."),d.css("display","");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&w(!1)}x("#"+n.immersiveDropdownDivId+" .twister-idd-row").invalidateAppearedAlreadyCache()};(function(){n.dimensionName=d[a.STRING_DIM_NAME];n.dimOrder=d[a.STRING_DIM_ORDER];n.twisterControllerHandle=d[a.STRING_TWISTER_CONTROLLER_HANDLE];n.dimValuesDisplayData=d[a.STRING_DIMENSION_VALUES_DATA];n.displayConfigStylesData=d[a.STRING_DISPLAY_CONFIG_STYLES_DATA];
n.initialTwisterState=d[a.STRING_TWISTER_INITIAL_STATE_KEY];n.dimensionsMap=d[a.STRING_DIMENSIONS_MAP];n.dropdownButtonId="twister-idd-button-"+n.dimensionName;n.$dropdownButtonDiv=x("#"+n.dropdownButtonId);n.immersiveDropdownDivId="twister-idd-modal-"+n.dimensionName;n.immersiveDropdownDiv=x("#"+n.immersiveDropdownDivId);n.immersiveDropdownContentDiv=x("#twister-idd-table_"+n.dimensionName);n.immersiveDropdownButtonId="twister-idd-table_"+n.dimensionName;n.dropdownDivPlaceHolderId=n.dimensionName+
a.SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER;n.dropdownHeaderDiv=x("#twister-idd-modal-header_"+n.dimensionName);n.requestStack=[];n.maxBatchLimitForIMDD=8;n.MAX_AJAX_CONNECTIONS_ALLOWED=2;n.noOfOngoingConnections=0;n.dimType="Dropdown";n.modalAttachedToButton=0;v=n.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;y=n.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;dimensionsList=n.twisterControllerHandle.twisterJSInitData.dimensions;n.initData={};n.initData.scopeSuffix=
"twister";n.symbolForTriggeringDim="*";n.displayConfigStylesData.available="twister-idd-row-available";n.displayConfigStylesData.invalid="twister-idd-row-unavailable";n.displayConfigStylesData.selected=E;n.displayConfigStylesData.hidden="twister-idd-row-hidden";n.logger=new o(x,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":"ImmersiveDropdownSingleDimensionView");n.logger.init();n.isDropdownOpen=0;c()})()}});w.when("A","dp-js-logger").register("twister-logger-service",function(q,
h){return function(a,b,d){var p=new h,o=d||"";this.logCounters=function(b){a.each(b,function(a,b){var d=o+":"+b.name;Twister.printConsoleLogs&&console.log("Logging metric: "+d+" -> "+b.value);p.logCounter(d,b.value)})};this.init=function(){var d=this;a(window).bind("beforeunload",function(){var a=b.getDataToUploadOnUnload();d.logCounters(a);return null})}}});w.when("A","twister-logger-service","twister-string-constants").register("twister-logger",function(q,h,a){return function(b,d,p){function o(b){if(!b)return null;
var c=d.jsInteractionEnabledTime||Date.now();return(b[a.TWISTER_EVENT_DATA_TIME]||Date.now())-c}function r(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();var b=a.stringVal,a=a.hasOwnProperty("getUploadValue")?a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:b}}var g=this,c;this.createFunctionTimer=function(a){return{eventType:a,start:function(){this.startTime=Date.now()},stop:function(){g.logImpression(this.eventType,
{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT","M_FIRST_CLICK"]},IMMERSIVE_DROPDOWN_OPENED:{metricList:["IMMERSIVE_DROPDOWN_OPEN_COUNT"]},IMMERSIVE_DROPDOWN_CLOSED:{metricList:["IMMERSIVE_DROPDOWN_CLOSE_COUNT"]},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR:{metricList:["IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT"]},IMMERSIVE_DROPDOWN_FULL_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT"]},IMMERSIVE_DROPDOWN_ROW_CLICK:{metricList:["IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT"]},
IMMERSIVE_DROPDOWN_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_SCROLL_COUNT"]},IMMERSIVE_OPTION_CLICK:{metricList:["M_IMMERSIVE_CLICK_COUNT"]},IMMERSIVE_SWATCH_CLICK:{metricList:["M_IMMERSIVE_SWATCH_CLICK_COUNT"]},IMMERSIVE_MODAL_CLOSE_CLICK:{metricList:["M_IMMERSIVE_CLOSE_CLICK_COUNT"]},IMMODAL_VISIBLE_SCROLLBAR:{metricList:["M_IMMERSIVE_VISIBLE_SCROLL_COUNT"]},IMMODAL_FULL_SCROLL:{metricList:["M_IMMERSIVE_FULL_SCROLL_COUNT"]},HOVER:{metricList:["M_HOVER_COUNT","M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT",
"M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS","M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO","M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT","M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]},EXPAND_BUTTON_CLICK:{metricList:["EXPAND_BUTTON_CLICK_COUNT"]},
COLLAPSE_BUTTON_CLICK:{metricList:["COLLAPSE_BUTTON_CLICK_COUNT"]},EXPANDER:{metricList:["EXPANDER_COUNT"]}};var m=function(c,d){this.stringVal=d;this.initValue=NaN;this.deferLogging=!0;this.pagenationCountName=c;this.updateFunction=function(b){var c=Math.ceil(b[a.TWISTER_EVENT_DATA_PERCENTAGE]/25)*25,d=b[a.TWISTER_EVENT_DATA_DIV_METADATA][a.STRING_DIM_INDEX];if(!this.metrics)this.metrics={};this.metrics[d]||(this.metrics[d]={});if((this.metrics[d].percentage||0)<c)this.metrics[d].percentage=c;this.metrics[d].pageCount=
b[a.TWISTER_EVENT_DATA_COUNT];this.metrics[d].dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log(this.stringVal+": index - "+d+" page - "+this.metrics[d].pageCount+" percentage - "+this.metrics[d].percentage)};this.getMetricData=function(){if(this.metrics){var a=[],c=this;b.each(this.metrics,function(b,d){var e=c.pagenationCountName+d.pageCount;d.dimDisplayType&&(e=d.dimDisplayType+":"+e);a.push({name:e+"_"+(c.stringVal+d.percentage),value:1})});return a}}},
i={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue=this.currentValue>0?this.currentValue+1:1;Twister.printConsoleLogs&&console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue=this.currentValue>0?this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",initValue:NaN,deferLogging:!0,updateFunction:function(){var a=
g.getMetricCurrentValue("M_CACHE_HIT"),b=g.getMetricCurrentValue("M_CACHE_MISS");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,deferLogging:!0,updateFunction:function(a){if(!this.currentValue)this.currentValue=this.initValue,this.usedIdCache={};a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,deferLogging:!0,updateFunction:function(){var a=d.twisterModel.pageRefresh.getModelCacheSize("full")-
g.getMetricCurrentValue("M_CACHE_USED");this.currentValue=a<0?0:a}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",initValue:NaN,deferLogging:!0,updateFunction:function(){var a=g.getMetricCurrentValue("M_CACHE_USED"),b=g.getMetricCurrentValue("M_CACHE_UNUSED");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){if(!this.firstClickLogged)this.currentValue=o(a),Twister.printConsoleLogs&&console.log("first click = "+
this.currentValue),this.firstClickLogged=!0}},M_CLICK_COUNT:{stringVal:"ClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue=1;Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,updateFunction:function(a){a=a.divMetaData;if(!this.lastHoveredDivMetaData||!a||!(this.lastHoveredDivMetaData.dimIndex===a.dimIndex&&this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex))this.lastHoveredDivMetaData=
a,this.currentValue=this.currentValue>0?this.currentValue+1:1,Twister.printConsoleLogs&&console.log("incrementing hover count to "+this.currentValue)}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){if(!this.firstHoverLogged)this.currentValue=o(a),Twister.printConsoleLogs&&console.log("first hover = "+this.currentValue),this.firstHoverLogged=!0}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){var b=
a.newReqDimValueIndex,a=a.oldReqDimValueIndex;if(b==="X"){if(!this.currentValue)this.lastReqDimValueIndex=a,this.currentValue=0}else if(this.lastReqDimValueIndex!==b)this.lastReqDimValueIndex=b,!this.currentValue&&this.currentValue!==0?a==="X"?this.currentValue=0:this.currentValue=1:this.currentValue++,Twister.printConsoleLogs&&console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue)}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?
(this.currentValue++,Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",initValue:NaN,deferLogging:!1,updateFunction:function(b){this.currentValue=b[a.TWISTER_EVENT_DATA_DURATION];Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,deferLogging:!0,updateFunction:function(){this.currentValue=(this.currentValue||
0)+1;Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",initValue:1,deferLogging:!1,updateFunction:function(b){this.pageCount=b[a.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,
value:1}}},M_VIEWED_DIM_COUNT:new m("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new m("DimPageCount","ViewedVariationCountBeforeClick"),IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT:{stringVal:"ImmersiveDropdownRowClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Row Click Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_OPEN_COUNT:{stringVal:"ImmersiveDropdownOpenedCount",
initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Opened Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_CLOSE_COUNT:{stringVal:"ImmersiveDropdownClosedCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Closed Count incremented to : "+this.currentValue)):
this.currentValue=1}},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT:{stringVal:"ImmersiveDropdownScrollBarCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Visible Scroll Bar Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT:{stringVal:"ImmersiveDropdownFullScrollCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?
(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Full Scroll Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_SCROLL_COUNT:{stringVal:"ImmersiveDropdownScrollCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Scroll Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLICK_COUNT:{stringVal:"ImmersiveClickCount",
initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_SWATCH_CLICK_COUNT:{stringVal:"ImmersiveSwatchClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive swatch click Count incremented to : "+this.currentValue)):this.currentValue=
1}},M_IMMERSIVE_CLOSE_CLICK_COUNT:{stringVal:"ImmersiveCloseClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal close click count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_VISIBLE_SCROLL_COUNT:{stringVal:"ImmersiveScrollBarCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal scrollBar count : "+
this.currentValue)):this.currentValue=1}},M_IMMERSIVE_FULL_SCROLL_COUNT:{stringVal:"ImmersiveFullScrollCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal full scroll down count : "+this.currentValue)):this.currentValue=1}},EXPAND_BUTTON_CLICK_COUNT:{stringVal:"ExpandButtonClickCount",initValue:0,deferLogging:!0,updateFunction:function(b){this.dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];
this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Expand Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},COLLAPSE_BUTTON_CLICK_COUNT:{stringVal:"CollapseButtonClickCount",initValue:0,deferLogging:!0,updateFunction:function(b){this.dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,
Twister.printConsoleLogs&&console.log("Collapse Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},EXPANDER_COUNT:{stringVal:"ExpanderCount",initValue:0,deferLogging:!0,updateFunction:function(b){this.dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Expander Count incremented to : "+
this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}}};this.init=function(){c=p!==void 0?new h(b,this,p):new h(b,this);c.init()};this.logImpression=function(a,d){try{b.each(a.metricList,function(a,b){try{var g=i[b];g.updateFunction(d);i[b].deferLogging||c.logCounters(Array(r(g)))}catch(e){Twister.printConsoleLogs&&console.log("metricUpdate failing for metric = "+b)}})}catch(g){Twister.printConsoleLogs&&
console.log("logImpression failed")}};this.getDataToUploadOnUnload=function(){this.logImpression(this.eventTypes.PAGE_UNLOAD);var a=[];b.each(i,function(c,d){try{if(d.deferLogging){var g=r(d);g&&(b.isArray(g)?a=b.merge(g,a):a.push(g))}}catch(f){}});return a};this.getMetricCurrentValue=function(a){try{return i[a].hasOwnProperty("currentValue")?i[a].currentValue:i[a].initValue}catch(b){return i[a].initValue}}}});w.when("A").register("twister-availabilty-cache",function(){return function(q){function h(a,
p){var o=a+":"+p,r=a.split("_"),g=r.length,c=-1,m,i;if(b.asinToRenderCache[o]!==null&&b.asinToRenderCache[o]!==void 0)return b.asinToRenderCache[o];b.intermediateAsinToRenderCache[o]=!0;for(o=0;o<g;o++)if(r[o]==="X"){c=o;break}if(c===-1)return m=null,b.twisterVariationsData.dimToAsinMapData[a]!=null&&(m=b.twisterVariationsData.dimToAsinMapData[a]),m;for(var g=b.twisterVariationsData.dimensionValuesData[c].length,k=0;k<g;k++)if(r[c]=k,o=r.join("_"),i=o+":"+p,!b.intermediateAsinToRenderCache.hasOwnProperty(i)&&
(m=h(o,p),m!==null&&m!==void 0))break;return m}function a(a){for(var h in b.intermediateAsinToRenderCache)b.asinToRenderCache[h]=a,delete b.intermediateAsinToRenderCache[h];b.intermediateAsinToRenderCache={}}var b=this;b.twisterVariationsData=q;b.dimAvailabilityCache={};b.asinToRenderCache={};b.intermediateAsinToRenderCache={};b.isUpdateCacheReq=!1;b.isDimCombinationAvailable=function(a){var h=a.split("_"),o,r=-1,g,c;o=h.length;if(b.dimAvailabilityCache[a]!==null&&b.dimAvailabilityCache[a]!==void 0)return b.dimAvailabilityCache[a];
for(c=0;c<o;c++)if(h[c]==="X"){r=c;break}if(r===-1)return g=!1,b.twisterVariationsData.dimToAsinMapData[a]!==null&&b.twisterVariationsData.dimToAsinMapData[a]!==void 0&&(g=!0),b.dimAvailabilityCache[a]=g;o=b.twisterVariationsData.dimensionValuesData[r].length;for(var m=0;m<o;m++)if(h[r]=m,c=h.join("_"),b.dimAvailabilityCache[c]!==null&&b.dimAvailabilityCache[c]!==void 0?g=b.dimAvailabilityCache[c]:(g=b.isDimCombinationAvailable(c),b.dimAvailabilityCache[c]=g),g)break;return b.dimAvailabilityCache[a]=
g};b.gAsinToRender=function(d,p){var o=null,r,g,c=d.split("_"),m=c.length,i=d+":"+p;if(b.asinToRenderCache[i]!==null&&b.asinToRenderCache[i]!==void 0){if(b.isUpdateCacheReq)a(b.asinToRenderCache[i]),b.isUpdateCacheReq=!1;return b.asinToRenderCache[i]}if(!b.isUpdateCacheReq)b.isUpdateCacheReq=!0;b.intermediateAsinToRenderCache.hasOwnProperty(i)||(o=h(d,p));if(o!==null&&o!==void 0){if(b.isUpdateCacheReq)c[p]==="X"?(b.asinToRenderCache[i]=o,b.intermediateAsinToRenderCache={}):a(o),b.isUpdateCacheReq=
!1;return o}for(i=0;i<m;i++)if(!(i==p||c[i]=="X"))if(o=c[i],c[i]="X",r=c.join("_"),g=r+":"+p,c[i]=o,!b.intermediateAsinToRenderCache.hasOwnProperty(g)&&(o=h(r,p),o!==null&&o!==void 0)){if(b.isUpdateCacheReq)a(o),b.isUpdateCacheReq=!1;return o}o=-1;for(i=0;i<m;i++)if(c[i]!=="X"&&i!==p){o=i;break}if(o===-1)return"";c[o]="X";r=c.join("_");return b.gAsinToRender(r,p)}}});w.when("A","twister-modal","twister-string-constants","twister-logger","aui-style-override").register("twister-dimension-views-ingress",
function(q,h,a,b,d){return function(p,o){function r(){q.declarative(a.AUI_EVENT_FOR_INGRESS_PREFIX+p.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_TOUCHSTART],function(b){b.type===a.EVENT_TYPE_CLICK&&(g.logger.logImpression(g.logger.eventTypes.IMMERSIVE_OPTION_CLICK,null),g.modalHandle.openTwisterModal())});c(document).ready(function(){c(document).click(function(b){var d=g.modalHandle.twisterModalDiv;c("#"+a.TWISTER_FEATURE_DIV_ID);b.target.id!=d.attr("id")&&!d.has(b.target).length&&b.target.id!=c(g.ingressDiv).attr("id")&&
!c(g.ingressDiv).has(b.target).length&&g.modalHandle.closeTwisterModal()})})}var g=this,c=q.$;g.dimensionData=p;if(Twister.multiDimensionWeblabEnabled)var m="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(m="ImmersiveSwatchSingleDimensionView");g.logger=m!==void 0?new b(c,this,m):new b(c,this);g.logger.init();g.twisterJSInitData=o;(function(){g.modalHandle=new h(p,g.twisterJSInitData);g.ingressDiv="#"+a.TWISTER_INGRESS_ID_PREFIX+p.dimName;r();var b=g.modalHandle.closeTwisterModal;
g.modalHandle.closeTwisterModal=function(a){d.ingressOverride(c(g.ingressDiv));b.apply(g.modalHandle,a)}})()}});w.when("A","twister-utils","scroll-event-handler","twister-modal-resize-helper","twister-string-constants","twister-logger").register("twister-modal",function(q,h,a,b,d,p){window.MAX_AJAX_CONNECTIONS_ALLOWED=2;return function(a,r){function g(){q.declarative(d.AUI_EVENT_CLOSE_MODAL_PREFIX+a.dimName,[d.EVENT_TYPE_CLICK,d.EVENT_TYPE_TOUCHSTART],function(a){a.type===d.EVENT_TYPE_CLICK&&(f.logger.logImpression(f.logger.eventTypes.IMMERSIVE_MODAL_CLOSE_CLICK,
null),f.closeTwisterModal())});t(document).keyup(function(a){a.keyCode==27&&f.closeTwisterModal()});f.twisterModalContentDiv.bind("scroll",function(){t(this).scrollTop()+t(this).innerHeight()>=this.scrollHeight?(f.logger.logImpression(f.logger.eventTypes.IMMODAL_FULL_SCROLL,null),t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(t(this).scrollTop()==0?t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","none"):t(d.ID_SELECTOR+
f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","block"),t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});f.twisterModalContentDiv.live("DOMMouseScroll mousewheel  wheel",function(a){var b=t(this),c=this.scrollTop,g=this.scrollHeight,h=b.height(),i=a.originalEvent.wheelDelta;typeof i=="undefined"&&(i=-a.originalEvent.deltaY);var k=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!(i>0)&&-i>g-h-c)return b.scrollTop(g),
t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),k();else if(i>=0&&i>=c)return t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","none"),b.scrollTop(0),k();else t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","block")})}function c(){return h.isPartialState(f.dimensions.length)}function m(){var a=
d.AUI_EVENT_VISIBILITY_PREFIX+f.dimName;t(d.ID_SELECTOR+f.twisterModalDivId+" .swatches li").appearedInTwisterImmersiveView({force_process:!0,$window:f.twisterModalDiv,$scrollHandlerDiv:f.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:c});q.on(a,function(a){for(a=a[0].slice(0);a.length;)f.requestStack.push(a.splice(0,f.maxSwatchLimitForImmersive));i()})}function i(){if(!(f.requestStack.length<=0)&&f.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){f.noOfOngoingConnections++;for(var a=
f.requestStack.shift(),b=[],c=0,d=a.length;c<d;c++){var g=t(a[c]).find(".a-declarative"),h=g.attr("data-action"),g=JSON.parse(g.attr("data-"+h)).dimValueIndex;b.push(g)}s(b);i()}}function k(a){if(f.initData.fnToDetermineSelectedVariations){if(typeof f.initData.fnToDetermineSelectedVariations==="function")f.currentDimCombOnGlance=f.initData.fnToDetermineSelectedVariations.call(f)}else f.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,f.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;
return a?f.currentDimCombOnGlance.split("_"):f.currentDimCombOnGlance}function l(a){var b=k(!0);b[a]=f.symbolForTriggeringDim;var b=b.join("_"),c={},d={},a=dimensionValuesList[a];if(!f.mapOfDimToAsinMaps[b]){for(var g=0,h=a.length;g<h;g++){var i=b.replace(f.symbolForTriggeringDim,g);(i=dimensionToAsinMap[i])?(c[a[g]]=i,d[i]=a[g]):c[a[g]]=""}c&&(f.mapOfDimToAsinMaps[b]=c);d&&(f.mapOfAsinToDimMaps[b]=d)}}function j(a,b){var c=[],d;d=k(!0).slice(0);d[b]=f.symbolForTriggeringDim;d=d.join("_");d=f.mapOfDimToAsinMaps[d];
for(var g=dimensionValuesList[b],h=0,i=a.length;h<=i;h++){var j=a[h],o=g[j];o&&((o=d[o])?c.push(o):(j=t(".twister_"+f.dimName+"_"+j+" .twisterSlotDiv"),j.html("<span class='a-color-tertiary'>- -</span>"),j.css("display","")))}return c}function s(a){var b={};b.indices=a;b.dimTriggeringDimSum=f.dimensionData.dimName;b.dimSubType=f.dimSubType;var c=dimensionsList.indexOf(b.dimTriggeringDimSum);b.dimType=dimensionsDisplayTypesArray[c];l(c);b.asinList=j(a,c,b);b.asinList.length==0?(f.noOfOngoingConnections--,
i()):(b.dimCombId=k(!1),b.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,c=a.split("_"),d=b.dimCombId.split("_");if(b.dimCombId===a)return!0;else if(!h.isPartialState(f.dimensions.length)){for(var a=f.dimensions.length,e=!0,g=0;g<a;g++)if(g!==parseInt(f.dimOrder)&&d[g]!==c[g]){e=!1;break}return e}return!1},b.chunk=function(a,b){a.dimensionValue=dimensionsList[b.dimIndexTriggeringDimSum]+"_"+dimensionValuesList[b.dimIndexTriggeringDimSum].indexOf(f.mapOfAsinToDimMaps[b.hashKey][a.ASIN]);
var c=t(".twister_"+a.dimensionValue+" .twisterSlotDiv");c.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var d="",e=0;a.Value.content.twisterSlotDiv[e];)f.dimSubType==="IMAGE"&&(d+="<div>"),d+=a.Value.content.twisterSlotDiv[e],f.dimSubType==="IMAGE"&&(d+="</div>"),e++;c.html(d)}else c.html(a.Value.content.twisterSlotDiv)},b.success=function(){var a=f.getWindowWidth();a&&a<f.slotsEligibleWidth?f.resizeHelperHandle.fixSize(f.$twisterModalSwatches,f.swatchWrapper,f.swatchDynaWrapper,
f.ingressWrapper,f):f.resizeHelperHandle.fixSize(f.$swatches,f.swatchWrapper,f.swatchDynaWrapper,f.ingressWrapper,f);f.noOfOngoingConnections--;i()},b.error=function(){f.noOfOngoingConnections--;i()},b.abort=function(){f.noOfOngoingConnections--;i()},Twister.dimensionalSummaryModule.fetchDimSumData(b))}var f=this,t=q.$;f.dimensionData=a;f.dimOrder=f.dimensionData.dimOrder;f.centerColDivId=d.ID_SELECTOR+d.CENTER_COL_DIV_ID;f.centerColDiv=t(f.centerColDivId);f.twisterModalDivId=d.TWISTER_MODAL_ID_PREFIX+
f.dimensionData.dimName;f.twisterModalDiv=t(d.ID_SELECTOR+f.twisterModalDivId);f.variationsPrefix="variation_";f.swatchWrapperClassForAnimation="twisterSwatchWrapper";f.swatchWrapper=".twisterSwatchWrapper_"+f.dimOrder;f.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+f.dimOrder;f.ingressWrapper="twisterIngressWrapper_"+f.dimOrder;f.glanceSwatchContainer=d.ID_SELECTOR+f.variationsPrefix+f.dimensionData.dimName;f.twisterModalContentDiv=t(d.ID_SELECTOR+d.MODAL_CONTENTDIV_PREFIX+f.dimensionData.dimName);
f.twisterModalHeaderDiv=t(d.ID_SELECTOR+d.MODAL_HEADER_PREFIX+f.dimensionData.dimName);f.twisterFeatureDiv=t(d.ID_SELECTOR+d.TWISTER_FEATURE_DIV_ID);f.$swatches=t(f.swatchWrapper);f.$twisterModalSwatches=t(".twisterModal "+f.swatchWrapper);f.$subNav=t(d.ID_SELECTOR+"nav-subnav");f.requestStack=[];f.noOfOngoingConnections=0;f.isModalOpen=0;f.isSlotRowPopulated=!1;f.showModalFadeDuration=500;f.isIE8=t("html").hasClass("a-lt-ie9");f.slotsEligibleWidth=1100;f.windowWidth=window.innerWidth||document.documentElement.clientWidth||
document.body.clientWidth;f.executeResizeSwatchesForThin=0;f.logger=new p(t,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":"ImmersiveSwatchSingleDimensionView");f.logger.init();f.twisterJSInitData=r;f.symbolForTriggeringDim="*";f.currentDimCombOnGlance="";f.mapOfDimToAsinMaps={};f.mapOfAsinToDimMaps={};f.dimName=f.dimensionData.dimName;f.dimValuesDisplayData=f.dimensionData.dimValuesDisplayData;f.noOfDimValues=f.dimValuesDisplayData.length;f.maxSwatchLimitForImmersive=f.dimensionData.maxSwatchLimitForImmersive;
f.dimSubType=f.dimensionData.dimSubType;f.dimensions=f.twisterJSInitData.dimensions;dimensionValuesList=f.twisterJSInitData.dimensionValuesData;dimensionDisplayLabels=f.twisterJSInitData.dimensionsDisplay;dimensionToAsinMap=f.twisterJSInitData.dimToAsinMapData;asinToDimIndexMapData=f.twisterJSInitData.asinToDimIndexMapData;dimensionsList=f.twisterJSInitData.dimensions;dimensionsDisplayTypesArray=r.dimensionsDisplayType;f.initData={};f.initData.scopeSuffix="twister";f.symbolForTriggeringDim="*";f.resizeHelperHandle=
new b;f.closeTwisterModal=function(){if(f.isModalOpen)h.enableTwisterDiv(),f.isIE8?f.twisterModalDiv.css("display","none"):f.twisterModalDiv.fadeOut(f.showModalFadeDuration),f.isModalOpen=0};f.resizeSwatchesForThinWidths=function(){var a=document.getElementById("twister").querySelectorAll(f.swatchWrapper),b=a.length;f.getWindowWidth();if(f.executeResizeSwatchesForThin)for(var c=f.executeResizeSwatchesForThin=0;c<b;c++)t(a[c]).addClass(d.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE)};f.openTwisterModal=function(){if(f.twisterModalDiv.parent().attr("id")!==
"centerCol")t(f.centerColDivId+" > hr").first().after(f.twisterModalDiv),g(),a.isSlotsEnabled&&m();else{var b=d.AUI_EVENT_VISIBILITY_PREFIX+f.dimName;t(d.ID_SELECTOR+f.twisterModalDivId+" .swatches li").forceAppear({force_process:!0,$window:f.twisterModalDiv,$scrollHandlerDiv:f.twisterModalContentDiv,eventToBeTriggered:b,blockIsAppear:c})}f.fixModalSwatchesForThinWidths();f.twisterModalDiv.css("display","block");b=f.twisterModalDiv.css("transition-duration");f.$twisterModalSwatches.removeClass(f.swatchWrapperClassForAnimation);
b!=void 0&&f.twisterModalDiv.css("transition-duration","0s");f.resizeHelperHandle.fixSize(f.$swatches,f.swatchWrapper,f.swatchDynaWrapper,f.ingressWrapper);f.twisterModalDiv.css({"z-index":"290"});var i,k=t(f.glanceSwatchContainer+" li"),j;j=k.first()[0].getBoundingClientRect();i=j.left;for(var l=j.top,p=0,n=1,k=k.length;n<k;n++){var r;r=t(f.glanceSwatchContainer+" li:eq("+n+")")[0].getBoundingClientRect();if(Math.abs(l-r.top)>5)break;else p=r.right}i=p>0?p-i+55:j.right-i+55;f.setModalWidth(i);f.twisterModalContentDiv.css({"max-height":"420px"});
j=t(".twisterModal_innerDiv ul").outerHeight()>t(".twisterModal_innerDiv").outerHeight()+15;navigator.platform.indexOf("Win")>-1&&j&&(i=parseInt(i)+25+"px",f.twisterModalDiv.css("width",i));j&&f.logger.logImpression(f.logger.eventTypes.IMMODAL_VISIBLE_SCROLLBAR,null);f.resizeSwatchesForThinWidths();f.twisterModalDiv.offset();f.twisterModalDiv.outerHeight();if(t(window).height()>500)f.isIE8?(l=f.twisterModalDiv.offset().top+document.documentElement.scrollTop+f.twisterModalDiv.outerHeight(),i=f.twisterModalDiv.offset().top+
document.documentElement.scrollTop,j=f.$subNav.offset().top+document.documentElement.scrollTop+f.$subNav.outerHeight()):(l=f.twisterModalDiv.offset().top+f.twisterModalDiv.outerHeight(),i=f.twisterModalDiv.offset().top,j=f.$subNav.offset().top+f.$subNav.outerHeight()),l>t(window).height()&&(l-=t(window).height(),i=i-l-30,l>0&&(i>j?f.twisterModalDiv.offset({top:i}):f.twisterModalDiv.offset({top:j+20})));l=f.glanceSwatchContainer+" ."+f.ingressWrapper+":first";j="#"+f.twisterModalDivId+":first";f.isIE8?
(offSetTopIngress=t(l).offset().top+document.documentElement.scrollTop,offSetTopModal=t(j).offset().top+document.documentElement.scrollTop):(offSetTopIngress=t(l).offset().top,offSetTopModal=t(j).offset().top);i=t(j).outerHeight();l=t(l).outerHeight();i=offSetTopIngress+l-(offSetTopModal+i);i>0&&(i+=offSetTopModal,t(j).offset({top:i}));h.disableTwisterDiv();f.twisterModalContentDiv.get(0).scrollHeight>f.twisterModalContentDiv.get(0).clientHeight?t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display",
"block"):t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","none");f.twisterModalDiv.css("display","none");b!=void 0&&(f.$twisterModalSwatches.addClass(f.swatchWrapperClassForAnimation),f.twisterModalDiv.css("transition-duration",b));f.twisterModalDiv.fadeIn(f.showModalFadeDuration);f.isModalOpen=1};f.fixModalSwatchesForThinWidths=function(){var a=document.getElementById("twister").querySelectorAll(f.swatchWrapper),b=a.length,c=f.getWindowWidth();if(c&&c<f.slotsEligibleWidth){f.executeResizeSwatchesForThin=
1;for(c=0;c<b;c++)t(a[c]).removeClass(d.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE)}};f.getWindowWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};f.setModalWidth=function(a){var b=f.twisterFeatureDiv.css("width"),a=parseInt(a);f.twisterModalDiv.css({width:a?a+"px":b});b=a?a:b;b-=30;t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("width",b+"px");t(d.ID_SELECTOR+f.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("width",
b+"px")}}});w.when("A","twister-string-constants").register("twister-utils",function(q,h){var a=q.$,b=this,d={};b.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;b.immersiveTwisterOverlay=a("#"+h.TWISTER_FEATURE_DIV_ID+" #"+h.IMMERSIVE_TWISTER_OVERLAY);b.twisterFeatureDiv=a("#"+h.TWISTER_FEATURE_DIV_ID);(function(){for(var a="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),b=0,h=a.length;b<h;b++)d["is"+a[b]]=function(a){return function(b){return Object.prototype.toString.call(b).slice(8,
-1)===a}}(a[b])})();return{enableTwisterDiv:function(){b.immersiveTwisterOverlay.css({opacity:"0",position:"absolute",width:"0px",height:"0px"})},disableTwisterDiv:function(){var a=b.twisterFeatureDiv.get(0).clientWidth,d=b.twisterFeatureDiv.get(0).clientHeight;b.immersiveTwisterOverlay.css({opacity:"0.8",position:"absolute",width:a,height:d,"background-color":"white","z-index":10})},isSwatchSelected:function(a,b){var d=Twister.isImmersiveExperience?"."+h.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[h.STRING_DIM_INDEX]]+
"_"+a[h.STRING_DIM_VALUE_INDEX]:"#"+b.dimensionsMap[a[h.STRING_DIM_INDEX]]+"_"+a[h.STRING_DIM_VALUE_INDEX],g=[],c;if(q.$(d).is("li")){g=q.$(d);Twister.isImmersiveExperience&&!(g.length>0)&&(g=q.$("."+h.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[h.STRING_DIM_INDEX]]+"_"+a[h.STRING_DIM_VALUE_INDEX]));for(var g=g.get(0).className.split(" "),d=0,m=g.length;d<m;d++){var i=g[d];if(i.indexOf("swatch")===0){c=i;break}}(c===h.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||c===h.CLASS_FOR_SWATCH_UNAVAILABLE)&&q.$("#twisterPopover.twisterPopoverSkin").hide();
return c===h.CLASS_FOR_SWATCH_SELECT}else return!1},isPartialState:function(a){for(var b=DetailPage.StateController.getState().currentDimCombID.split("_"),d=!1,g=0;g<a;g++)if(b[g]==="X"){d=!0;break}return d},getImmersivePartialStateBannerContent:function(a,b){for(var d="",g=Twister.immersivePartialStateMessage,c=a.dimensionSelectionData,m=a.dimensionsDisplay,i=0;i<c.length;i++)i!==b&&c[i][h.STRING_IS_SELECTED]===0&&(d=d?d+", "+m[i]:m[i]);return g.replace("dimName",d)},getImmersiveFullStateBannerContent:function(a,
b){for(var d="",g=Twister.immersiveFullySelectedStateMessage,c=a.dimensionSelectionData,m=a.dimensions,i=a.dimensionsDisplay,k=DetailPage.StateController.getState().selected_variations,l=0;l<c.length;l++)l!==b&&c[l][h.STRING_IS_SELECTED]===1&&(d=d?d+", "+i[l]+" "+k[m[l]]:i[l]+" "+k[m[l]]);return g.replace("dimName",d)},isSmallerWidthScreen:function(){return b.windowWidth<1100?1:0},getAttachedClass:function(b,d){var r=b[h.STRING_DIM_VALUE_INDEX],g="#"+d+"_"+r;if(q.$(g).is("li")){var c=[],m,c=q.$(g);
Twister.isImmersiveExperience&&!(c.length>0)&&(c=a("."+h.TWISTER_SWATCH_CLASS_PREFIX+d+"_"+r));c=c.get(0).className.split(" ");r=0;for(g=c.length;r<g;r++){var i=c[r];if(i.indexOf("swatch")===0){m=i;break}}return m}else return g=Twister.isImmersiveExperience?h.IMMERSIVE_DROPDOWN_ROW_PREFIX+d+"_"+r:h.NATIVE_DROPDOWN_DIV_PREFIX+d+"_"+r,q.$(g).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,
"&")},getDimStyleData:function(a,b,d,g,c){for(var a=a.split("_"),m=[],i=a.slice(0),k,l,j=0;j<b;j++)l={},a[d]===j.toString()?k=h.STYLE_CLASS_TYPE_FOR_SELECTED:(i[d]=j,k=i.join("_"),k=(k=g.isDimCombinationAvailable(k))?h.STYLE_CLASS_TYPE_FOR_AVAILABLE:h.STYLE_CLASS_TYPE_FOR_INAVLID),k=c[k],l.style=k,m[j]=l;return m},getVisibleTableRows:function(b,d){var h=[],g=b.getBoundingClientRect();d||(d=a(b).find("tr"));if(d.length)for(var c=0;c<d.length;c++){var m=d.get(c),i=m.getBoundingClientRect(),k=(i.bottom-
i.top)/2,l=g.bottom+k;g.top-k<i.top&&l>i.bottom&&h.push(m);if(g.bottom<i.top)break}return h},reconstructCombinationWithDimValue:function(a,b,d){if(!a)return a;var g=a.split(h.CHAR_UNDERSCORE);if(b>=g.length)return a;g[b]=d;return g.join(h.CHAR_UNDERSCORE)},isTouchDevice:function(){return q.capabilities.touch},typeChecker:d,getQueryParams:function(b){var b=b===void 0?{}:b,d={},h=decodeURIComponent(window.location.href).match(/^.*?\?(.*?)(#.*)?$/);if(h===null||h.length<2||h[1]===void 0)return{};h=h[1].split("&");
a.each(h,function(a,c){var h=c.split("=");h.length<2||b.hasOwnProperty(h[0])||(d[h[0]]=h[1])});return d},stringTrim:function(a){var b=/^\s+/,d=/\s+$/;return String.prototype.trim?String.prototype.trim.call(a):a.replace(b,"").replace(d,"")}}});w.when("A").register("twister-string-constants",function(){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",MTYPE_PARTIAL:"partial",MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",
CHAR_SEMICOLON:":",CHAR_UNDERSCORE:"_",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",AUI_CLASS_FOR_SWATCH_UNAVAILABLE:"a-button-unavailable",AUI_CLASS_FOR_SWATCH_SELECT:"a-button-selected",
CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_SHOWPOPOVER:"showPopover",EVENT_TYPE_HIDEPOPOVER:"hidePopover",EVENT_TYPE_UPDATEPOPOVERPOSITION:"updatePopoverPosition",EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",
EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",EVENT_TYPE_MOUSEOVER:"mouseOver",EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",EVENT_TYPE_TOUCHMOVE:"touchmove",EVENT_TYPE_KEYPRESS:"keypress",ID_SELECTOR:"#",TWISTER_POPOVER:"twisterPopover",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",
INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",INIT_DATA_DIMENSIONS_MAP:"dimensions",INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",INIT_DATA_MAX_POPOVER_HEIGHT:"maxPopoverHeight",INIT_DATA_VISIBLE_ROW_COUNT:"visibleRowCount",INIT_DATA_POPOVER_POSITION:"popoverPosition",INIT_DATA_ANIMATE_BUTTON_CONTENT:"animateButtonContent",INIT_DATA_DISPLAY_TYPE_PROPERTIES:"displayTypeProperties",NATIVE_DROPDOWN_DIV_PREFIX:"#native_",
STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",STRING_DIMENSIONS_MAP:"dimensionsMap",
STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_NATIVE_CSS_CLASS:"native_css_class",STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",
STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",STRING_ACCESSIBILITY_CURRENT_SELECTION:"twisterAccessibilityCurrentSelection",STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",
TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_DIMENSION_VIEW_COUNTER:"counter",TWISTER_DIMENSION_VIEW_SHELF:"shelf",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",TWISTER_EVENT_DATA_DURATION:"duration",TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",MODAL_SWATCH_PREFIX:"modal_",
STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",IMMERSIVE_TWISTER_OVERLAY:"immersiveTwisterOverlay",CENTER_COL_DIV_ID:"centerCol",
MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",IMMERSIVE_DROPDOWN_ROW_PREFIX:"twister_idd_",DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-",CLASSNAME_FOR_THIN_WIDTH_OVERRIDE:"thinWidthOverride",
DIMENSION_SUB_TYPE:"dimensionDisplaySubType",AUI_EVENT_FOR_COUNTER:"twister_counter-action",EXPANDED_VIEW_ENABLED:"expandedViewEnabled",MIN_ASINS_FOR_EXPANDED_VIEW:"minAsinForExpandedView",MIN_ASINS_FOR_EXPANDED_VIEW_TEXT:"minAsinForExpandedViewText",MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE:"minAsinForExpandedViewImage",MIN_ASINS_FOR_EXPANDED_SCROLL:"minAsinForExpandedScroll",MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT:"minAsinForExpandedScrollText",MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE:"minAsinForExpandedScrollImage",
SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER:"_placeHolderDivForDD"}});w.when("A").register("aui-style-override",function(){return{doOverride:function(){},ingressOverride:function(){}}});w.when("A").register("twister-thumbnailModule",function(q){var h=q.$;return{attach:function(a){var b=h("#dropdown_selected_thumbnail_"+a),a=h("#dropdown_selected_"+a+" .a-button-inner");b.length>0&&a.length>0&&(b.detach(),a.append(b),b.attr("src")!=="#"&&b.show())},update:function(a){var b=h("#native_dropdown_selected_"+
a).val().split(",")[0];typeof b!=="undefined"&&b!=="-1"&&(b=h("#native_"+a+"_"+b),b=b.length>0?b.attr("data-a-image-source"):"",a=h("#dropdown_selected_thumbnail_"+a),a.length>0&&b!==""?(a.attr("src",b),a.show()):a.hide())},preloadAllThumbnails:function(a){if(a){var b=h("#native_dropdown_selected_"+a+" option"),a=h("#dropdown_selected_"+a).attr("data-a-class");b&&a&&a.indexOf("twister-image-dropdown")!==-1&&h.each(b,function(a,b){var h=b.getAttribute("data-a-image-source");if(h)(new Image).src=h})}}}});
w.when("A","twister-string-constants","scroll-event-handler").execute(function(q,h,a){(function(b){function d(a){function d(g,h){var f=b(h).get(0).getBoundingClientRect(),i=a.$window.get(0).getBoundingClientRect(),e=i.right-i.left,k=i.bottom-i.top;return i.top<f.top&&f.top<i.top+k&&i.left<f.left&&f.left<i.left+e}r=!1;for(var g=0,h=a.selector.length;g<h;g++){var l=[];if(a.blockIsAppear===void 0||!a.blockIsAppear())l=b(a.selector[g]).filter(function(){return b(this).is(d)}).not(o);l.length>0&&(q.trigger(a.eventToBeTriggered,
[l.clone()]),o=o.add(l))}}var h=[],o=b(),r=!1,g={interval:250,force_process:!1};b.fn.extend({appearedInTwisterImmersiveView:function(c){var m=b.extend({},g,c||{}),i=this.selector||this;m.selector=[];m.selector[0]=i;var k=function(){r||(r=!0,setTimeout(function(){d(m)},m.interval))};new a(200,c.$scrollHandlerDiv,k);c.$window.resize(k);m.force_process&&setTimeout(function(){d(m)},m.interval);h.push(i);return b(i)},forceAppear:function(a){var h=b.extend({},g,a||{}),a=this.selector||this;h.selector=[];
h.selector[0]=a;setTimeout(function(){d(h)},h.interval)},invalidateAppearedAlreadyCache:function(){o=o.not(this.selector)}})})(q.$)});w.when("A","twister-utils","twister-string-constants","twister-expander").register("twister-counter",function(q,h,a,b){return function(d,p){function o(b){e=c(a.ID_SELECTOR+b.data.dimValueSelectedID);g.twisterControllerHandle&&g.twisterControllerHandle.handleClick(b.data)}function r(a,b){var d=c(j+b);a?d.addClass(k):d.removeClass(k)}var g=this,c=q.$,m=c(a.ID_SELECTOR+
"expanderButton"),i=c(a.ID_SELECTOR+"collapseButton"),k="hoverSwatch",l,j,s,f,t,e,u,w,z;g.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&g.currDimCombID!=b[a.STRING_DIM_COMB_ID]){var c=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][g.dimOrder];u.css("z-index",0);e.css("z-index",1);l.html(c);e.removeClass(k);e.addClass("selectedSwatch");u.removeClass("selectedSwatch");g.currDimCombID=b[a.STRING_DIM_COMB_ID];q.trigger("counter:select",g.currDimCombID);
w!=null&&(w.updateSelectedVariation(g.currDimCombID,e),w.isCollapsed&&t&&w.handleVariationSwap(t),w.isCollapsed||w.scrollVariationIntoView());u=e}};g.selectCounterVariationAtIndex=function(a){t=!0;c(j+a).children().click()};g.getCurrentSelectedIndex=function(){return parseInt(g.currDimCombID,10)};g.dimOrder=p[a.STRING_DIM_ORDER];g.dimName=p[a.STRING_DIM_NAME];g.dimensionsMap=p[a.STRING_DIMENSIONS_MAP];g.dimNameDisplayString=p[a.STRING_DIMENSION_DISPLAY_STRING];g.dimValuesDisplayData=p[a.STRING_DIMENSION_VALUES_DATA];
g.twisterControllerHandle=p[a.STRING_TWISTER_CONTROLLER_HANDLE];g.initialTwisterState=p[a.STRING_TWISTER_INITIAL_STATE_KEY];g.expandedViewEnabled=d[a.EXPANDED_VIEW_ENABLED];g.minAsinsForExpandedView=d[a.MIN_ASINS_FOR_EXPANDED_VIEW];g.minAsinsForExpandedScroll=d[a.MIN_ASINS_FOR_EXPANDED_SCROLL];g.dimSubType=p.dimensionDisplaySubType;g.currDimCombID=g.initialTwisterState.getCurrentDimCombID();z=g.twisterControllerHandle.logger;l=c(a.ID_SELECTOR+"counter-label-"+g.dimName+" .selection");j=a.ID_SELECTOR+
g.dimName+a.CHAR_UNDERSCORE;s=c(a.ID_SELECTOR+"counterSwatchSection-"+g.dimName);f=g.dimValuesDisplayData.length;u=c(j+g.currDimCombID);e=c(j+g.currDimCombID);t=!1;(function(){var b=a.AUI_EVENT_FOR_COUNTER;if(h.isTouchDevice()){var d=!1,f="";q.declarative(b,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_TOUCHSTART,a.EVENT_TYPE_TOUCHEND,a.EVENT_TYPE_TOUCHMOVE],function(b){b.type===a.EVENT_TYPE_CLICK?o(b):b.type===a.EVENT_TYPE_TOUCHSTART?(f=b.data.dimValueSelectedID,d=!1):b.type===a.EVENT_TYPE_TOUCHMOVE?d=!0:b.type===
a.EVENT_TYPE_TOUCHEND&&!d&&f===b.data.dimValueSelectedID&&(f="",d=!1,o(b));t=!1})}else q.declarative(b,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE],function(b){b.type===a.EVENT_TYPE_CLICK?o(b):b.type===a.EVENT_TYPE_MOUSEENTER?(g.twisterControllerHandle&&g.twisterControllerHandle.handleMouseOver(b.data),b=b.data[a.STRING_DIM_VALUE_INDEX],c(j+b).css("cursor","pointer"),b!=g.currDimCombID&&(c(j+b).css("z-index",1),r(!0,b),l.html(g.dimValuesDisplayData[b]))):b.type===a.EVENT_TYPE_MOUSELEAVE&&
(g.twisterControllerHandle&&g.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]),b=b.data[a.STRING_DIM_VALUE_INDEX],b!=g.currDimCombID&&(c(j+b).css("z-index",0),r(!1,b),l.html(g.dimValuesDisplayData[g.currDimCombID])));t=!1})})();g.expandedViewEnabled&&f>=g.minAsinsForExpandedView&&(w=new b({minHeightForExpandedSection:55,maxHeightForExpandedSection:155,maxHeightForExpandedSectionInView:101,scrollAnimationDuration:500,expanderSection:s,useExpanderScrollView:f>=
g.minAsinsForExpandedScroll-1,minAsinsForExpandedView:g.minAsinsForExpandedView,expanderButtonReplacementIndex:g.minAsinsForExpandedView-2,dimValuePrefix:j,initSelectedID:g.currDimCombID,swatchImageSize:54,swatchImageMargin:10,expanderButton:m,collapseButton:i,dimDisplayType:"counter",logger:z}));window.CounterScenesController&&window.CounterScenesController.registerCounter(g)}});w.when("A","twister-utils","twister-string-constants","twister-expander").register("twister-shelf",function(q,h,a,b){return function(d,
p){function o(){E=new b({minHeightForExpandedSection:i,maxHeightForExpandedSection:k,maxHeightForExpandedSectionInView:s,scrollAnimationDuration:f,expanderSection:B,useExpanderScrollView:D>=c.minAsinsForExpandedScroll-1,minAsinsForExpandedView:c.minAsinsForExpandedView,expanderButtonReplacementIndex:c.minAsinsForExpandedView-1,dimValuePrefix:z,initSelectedID:c.currDimCombID,swatchImageSize:l,swatchImageMargin:j,expanderButton:e,collapseButton:u,dimDisplayType:"shelf",logger:v,synchronousExpanderCallback:function(){B.removeClass("twisterShelf_isCollapsed");
B.addClass("twisterShelf_isExpanded")},synchronousCollapseCallback:function(){B.removeClass("twisterShelf_isExpanded");B.addClass("twisterShelf_isCollapsed")}})}function r(b){var d=c.dimOrder,f;b?(f=b.id)?(f=f.split(a.CHAR_UNDERSCORE),f=f[f.length-1]):f=-1:f=null;return{dimIndex:d,dimValueIndex:f,dimDisplayType:a.TWISTER_DIMENSION_VIEW_SHELF,dimValueSelectedID:b.id}}function g(a){var b=v.createFunctionTimer(v.eventTypes.DIM_SUM_LOAD);b.start();var d=function(){b.stop()};dimAsinList=[];for(m.each(a,
function(a){dimAsinList.push(a)});dimAsinList.length>0;)dimAsinListSubset=[],dimAsinListSubset=dimAsinList.splice(0,t),Twister.dimensionalSummaryModule.fetchDimSumData({indices:void 0,asinList:dimAsinListSubset,dimTriggeringDimSum:c.dimName,dimSubType:c.dimSubType,dimType:c.dimType,chunk:function(a){if(a&&typeof a==="object"){var b=parseInt(x[a.ASIN]),b=m(z+b);a.Value&&a.Value.content&&a.Value.content.twisterSlotDiv&&(a=m.trim(a.Value.content.twisterSlotDiv),a.length>0&&b.find(".twisterShelf_infoSection").append(a))}},
success:function(){d()},error:d,abort:d})}var c=this,m=q.$,i=75,k=212,l=74,j=17,s=k-l,f=500,t=5,e,u,w,z,B,D,n,x,v,y,C,E;c.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&c.currDimCombID!=b[a.STRING_DIM_COMB_ID])w.html(b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][c.dimOrder]),y.removeClass("hoverSwatch"),C.removeClass("selectedSwatch"),y.addClass("selectedSwatch"),c.currDimCombID=b[a.STRING_DIM_COMB_ID],E!=null&&(E.updateSelectedVariation(c.currDimCombID,
y),E.isCollapsed||E.scrollVariationIntoView()),C=y};c.onInitializeTwister=function(){g(x)};c.dimOrder=p[a.STRING_DIM_ORDER];c.dimName=p[a.STRING_DIM_NAME];c.dimensionsMap=p[a.STRING_DIMENSIONS_MAP];c.dimNameDisplayString=p[a.STRING_DIMENSION_DISPLAY_STRING];c.dimValuesDisplayData=p[a.STRING_DIMENSION_VALUES_DATA];c.twisterControllerHandle=p[a.STRING_TWISTER_CONTROLLER_HANDLE];c.initialTwisterState=p[a.STRING_TWISTER_INITIAL_STATE_KEY];c.expandedViewEnabled=d[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][c.dimOrder][a.EXPANDED_VIEW_ENABLED];
q.state("mobile-shelf-data-is-image").isImageSubType?(c.minAsinsForExpandedView=d[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][c.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE],c.minAsinsForExpandedScroll=d[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][c.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE]):(c.minAsinsForExpandedView=d[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][c.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_TEXT],c.minAsinsForExpandedScroll=d[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][c.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT]);
c.dimType=a.TWISTER_DIMENSION_VIEW_SHELF;c.dimSubType=p[a.DIMENSION_SUB_TYPE];c.currDimCombID=c.initialTwisterState.getCurrentDimCombID();v=c.twisterControllerHandle.logger;x=c.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;n=m(a.ID_SELECTOR+"shelfSwatchSection-"+c.dimName+" .twisterShelf_swatch");w=m(a.ID_SELECTOR+"shelf-label-"+c.dimName+" .twisterShelf_label_dimension");z=a.ID_SELECTOR+c.dimName+a.CHAR_UNDERSCORE;B=m(a.ID_SELECTOR+"shelfSwatchSection-"+c.dimName);D=c.dimValuesDisplayData.length;
C=m(z+c.currDimCombID);y=m(z+c.currDimCombID);e=m(a.ID_SELECTOR+"shelfSwatchSection-"+c.dimName+" .expanderButton");u=m(a.ID_SELECTOR+"shelfSwatchSection-"+c.dimName+" .collapseButton");(function(){n.bind(a.EVENT_TYPE_CLICK,function(b){b=r(b.currentTarget);y=m(a.ID_SELECTOR+b.dimValueSelectedID);c.twisterControllerHandle&&c.twisterControllerHandle.handleClick(b)});h.isTouchDevice()||(n.bind(a.EVENT_TYPE_MOUSEENTER,function(b){b=r(b.currentTarget);c.twisterControllerHandle&&c.twisterControllerHandle.handleMouseOver(b);
var b=b[a.STRING_DIM_VALUE_INDEX],d=m(z+b);d.css("cursor","pointer");b!=c.currDimCombID&&(d.addClass("hoverSwatch"),w.html(c.dimValuesDisplayData[b]))}),n.bind(a.EVENT_TYPE_MOUSELEAVE,function(b){b=r(b.currentTarget);c.twisterControllerHandle&&c.twisterControllerHandle.handleMouseOut(b,b[a.STRING_DIM_INDEX],b[a.STRING_DIM_VALUE_INDEX]);var b=b[a.STRING_DIM_VALUE_INDEX],d=m(z+b);b!=c.currDimCombID&&(d.removeClass("hoverSwatch"),w.html(c.dimValuesDisplayData[c.currDimCombID]))}))})();c.expandedViewEnabled&&
D>=c.minAsinsForExpandedView&&o()}});w.when("A","a-popover","twister-string-constants","twister-utils").register("twister-vodd-popover",function(q,h,a,b){return function(d){function p(a,b){s.eventListener&&s.eventListener.handlePopoverEvent&&s.eventListener.handlePopoverEvent(a,b)}function o(b){p(a.EVENT_TYPE_SHOWPOPOVER,b);var d=s.displayPosition==="bottom"?m:i;b.popover.$container.hasClass(d)||b.popover.$container.addClass(d);c(b.popover.$container)}function r(b){p(a.EVENT_TYPE_HIDEPOPOVER,b);b.popover.$trigger.blur()}
function g(b){c(b.popover.$container);p(a.EVENT_TYPE_UPDATEPOPOVERPOSITION,b)}function c(a){var b=j.get(0).getBoundingClientRect(),c,d;window.pageYOffset?(c=window.pageYOffset,d=window.pageXOffset):(document.compatMode||"")==="CSS1Compat"?(c=document.documentElement.scrollTop,d=document.documentElement.scrollLeft):(c=document.body.scrollTop,d=document.body.scrollLeft);c=s.displayPosition==="bottom"?b.bottom+c:b.top+c-a.height();var g=b.right-b.left,b=b.left+d;a&&a.css({top:c+"px",left:b+"px",width:g+
"px"})}var m="vodd-modified-popover",i="vodd-modified-top-popover",k,l=q.$,j,s={name:null,trigger:null,eventListener:null,displayPosition:"bottom",positionOnTwisterContainer:!0};this.getHandle=function(){return k};d&&l.extend(s,d);if(!s.name)throw"Popover name should not be null";if(!s.trigger)throw"Popover trigger should not be null";(function(){var a="triggerBottom";s.displayPosition==="top"&&(a="triggerTop");a={closeButton:!1,closeButtonLabel:"close",position:a,name:s.name,popoverLabel:s.name,
activate:b.isTouchDevice()?"onmouseover":"onclick"};s.height&&l.extend(a,{height:s.height});k=h.create(s.trigger,a)})();(function(){q.on("a:popover:afterShow:"+s.name,o);q.on("a:popover:afterHide:"+s.name,r);q.on("a:popover:afterUpdatePosition:"+s.name,g);var a=function(){k&&k.isActive()&&c(k.$container)};q.on("a:pageUpdate",a);l(window).resize(a)})();j=s.positionOnTwisterContainer?l("#twister"):popover.trigger}});w.when("A").register("accessibility-helper",function(){return{announceText:function(){}}});
w.when("A").register("twister-expander",function(q){return function(h){function a(){s.logger.logImpression(s.logger.eventTypes.COLLAPSE_BUTTON_CLICK,j);s.expanderSection.height();s.expanderSection.animate({height:s.minHeightForExpandedSection},{duration:s.scrollAnimationDuration,queue:!1,complete:function(){s.expanderSection.css("overflow-y","hidden");s.expanderSection.css("overflow","hidden")}});s.expanderSection.animate({scrollTop:0},{duration:s.scrollAnimationDuration,queue:!1});o.isCollapsed=
!0;d();o.handleVariationSwap();s.synchronousCollapseCallback!=null&&s.synchronousCollapseCallback()}function b(){l.hasClass(r)&&(l.removeClass(r),s.expanderButton.prev().insertAfter(m))}function d(){o.isCollapsed?(s.collapseButton.addClass(r),k.addClass(r),s.expanderButton.removeClass(r)):(s.expanderButton.addClass(r),k.removeClass(r),s.collapseButton.removeClass(r))}var p=q.$,o=this,r="aok-hidden",g,c,m,i,k,l,j,s={minHeightForExpandedSection:50,maxHeightForExpandedSection:100,maxHeightForExpandedSectionInView:null,
scrollAnimationDuration:500,expanderSection:null,useExpanderScrollView:!0,minAsinsForExpandedView:null,expanderButtonReplacementIndex:null,dimValuePrefix:null,initSelectedID:null,swatchImageSize:null,swatchImageMargin:null,expanderButton:null,collapseButton:null,synchronousExpanderCallback:null,synchronousCollapseCallback:null,dimDisplayType:null,logger:null};o.handleExpand=function(){s.logger.logImpression(s.logger.eventTypes.EXPAND_BUTTON_CLICK,j);var a=s.expanderSection.height();o.isCollapsed=
!1;o.handleVariationSwap();d();if(s.useExpanderScrollView)s.expanderSection.height(a).animate({height:s.maxHeightForExpandedSection},{duration:s.scrollAnimationDuration,queue:!1,complete:function(){s.expanderSection.css("overflow-y","auto");o.scrollVariationIntoView()}});else{var b=s.expanderSection.css("height","auto").height();s.expanderSection.height(a).animate({height:b},{duration:s.scrollAnimationDuration})}s.synchronousExpanderCallback!=null&&s.synchronousExpanderCallback()};o.handleVariationSwap=
function(a){o.isCollapsed&&g>=i?(a&&b(),g==i?(k.removeClass(r),m=l):m=g==i+1?s.expanderButton:p(s.dimValuePrefix+(g-1)),c.insertBefore(s.expanderButton),l.addClass(r)):o.isCollapsed||b()};o.scrollVariationIntoView=function(){var a=c.offset().top,b=s.expanderSection.offset().top,d=s.expanderSection.scrollTop();a-=b;d+=a;a<0?s.expanderSection.animate({scrollTop:d},{duration:s.scrollAnimationDuration,queue:!1}):a>s.maxHeightForExpandedSectionInView&&(d-=s.swatchImageSize+s.swatchImageMargin,s.expanderSection.animate({scrollTop:d},
{duration:s.scrollAnimationDuration,queue:!1}))};o.updateSelectedVariation=function(a,b){b!=null&&(c=b);a!=null&&(g=a)};(function(){h&&p.extend(s,h);if(!s.collapseButton)throw"Expander collapseButton should not be null";if(!s.expanderButton)throw"Expander expanderButton should not be null";if(!s.expanderSection)throw"Expander expanderSection should not be null";if(!s.initSelectedID)throw"Expander initSelectedID should not be null";if(!s.minAsinsForExpandedView)throw"Expander minAsinsForExpandedView should not be null";
if(!s.dimValuePrefix)throw"Expander dimValuePrefix should not be null";if(!s.swatchImageSize)throw"Expander swatchImageSize should not be null";if(!s.swatchImageMargin)throw"Expander swatchImageMargin should not be null";if(!s.expanderButtonReplacementIndex)throw"Expander expanderButtonReplacementIndex should not be null";if(!s.dimDisplayType)throw"Expander dimDisplayType should not be null";if(!s.logger)throw"Expander Logger should not be null";j={dimDisplayType:s.dimDisplayType};s.logger.logImpression(s.logger.eventTypes.EXPANDER,
j);i=s.expanderButtonReplacementIndex;k=p(s.dimValuePrefix+i);l=p(s.dimValuePrefix+(i-1));g=s.initSelectedID;c=p(s.dimValuePrefix+s.initSelectedID);o.isCollapsed=!0;s.expanderButton.click(function(){o.handleExpand()});s.collapseButton.click(function(){a()});o.handleVariationSwap()})()}})})})(function(){var w=window.AmazonUIPageJS||P,q=w.attributeErrors;return q?q("DetailPageTwisterAssets"):w}());